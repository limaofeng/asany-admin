(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[4498],{54498:function(R,k,l){"use strict";l.r(k);var c=l(39428),f=l(3182),s=l(2824),t=l(67294),u=l(82949),p=l.n(u),O=l(51615),B=l(54782),M=l(32669),U=l(18071),_=l(38671),w=l(25496),a=l(85893),x=_.mQ.TabPane,r=t.memo(function(){return(0,a.jsx)(_.Zb,{className:"email-compose-tools",children:(0,a.jsxs)(_.mQ,{className:"nav-line-tabs-2x mb-5 fs-6",children:[(0,a.jsx)(x,{tab:"\u901A\u8BAF\u5F55",children:"11111"},"contacts"),(0,a.jsx)(x,{tab:"\u7F51\u76D8",children:"222222"},"storage"),(0,a.jsx)(x,{tab:"\u4FE1\u7EB8",children:"222222"},"stationery")]})})});function n(e){var o,h=e.match.params.id,E=e.location,g=(0,O.k6)(),y=(0,M.Pg)({fetchPolicy:"cache-and-network"}),P=(0,s.Z)(y,2),N=P[0],L=P[1],v=L.data,I=L.loading,K=(0,M.k0)({refetchQueries:[M.Nd]}),Z=(0,s.Z)(K,1),T=Z[0],b=(0,t.useRef)({isChanged:!1,state:"default",message:(o=E.state)===null||o===void 0?void 0:o.message}),z=(0,t.useReducer)(function(d){return d+1},0),$=(0,s.Z)(z,2),F=$[1],H=(0,t.useCallback)(function(){var d=(0,f.Z)((0,c.Z)().mark(function C(A){return(0,c.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return b.current.isChanged=!1,F(),j.next=4,(0,w._v)(120);case 4:g.push("/mail/sent/".concat(A.id));case 5:case"end":return j.stop()}},C)}));return function(C){return d.apply(this,arguments)}}(),[g]),Q=(0,t.useCallback)(function(d){b.current.message=d,b.current.isChanged||(b.current.isChanged=!0,F())},[]),G=(0,t.useCallback)(function(d){return(0,f.Z)((0,c.Z)().mark(function C(){return(0,c.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,T({variables:{id:b.current.message.id}});case 2:d();case 3:case"end":return m.stop()}},C)}))},[T]);(0,t.useEffect)(function(){!h||N({variables:{id:h}})},[N,h]),(0,t.useMemo)(function(){!(v!=null&&v.message)||(b.current.message=v.message)},[v==null?void 0:v.message]);var S=b.current,D=S.message,W=S.isChanged;return(0,a.jsxs)(U.vs,{className:"apps-email-compose",header:!1,footer:!1,children:[(0,a.jsx)(p(),{disableNative:!0,when:!!(D!=null&&D.id)&&W,children:function(C){var A=C.onConfirm,m=C.onCancel;return(0,a.jsxs)(_.u_,{centered:!0,visible:!0,footer:!1,onCancel:m,dialogClassName:"mw-550px",bodyClassName:"mx-5 pt-0 pb-15",header:(0,a.jsx)(_.u_.Header,{className:"ms-5 border-0",children:(0,a.jsx)("h1",{className:"modal-title pt-6 pb-4",children:"\u5C06\u6B64\u90AE\u4EF6\u5B58\u50A8\u4E3A\u8349\u7A3F\u5417\uFF1F"})}),children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("div",{className:"mh-375px scroll-y me-n7 pe-7 fs-6 text-muted",children:(0,a.jsx)("p",{children:" \u6B64\u90AE\u4EF6\u5C1A\u672A\u53D1\u9001\uFF0C\u4E14\u542B\u6709\u672A\u5B58\u50A8\u7684\u66F4\u6539\u5185\u5BB9\u3002\u60A8\u53EF\u4EE5\u5148\u5C06\u5176\u5B58\u50A8\u4E3A\u8349\u7A3F\uFF0C\u7A0D\u540E\u518D\u5904\u7406\u3002"})})}),(0,a.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,a.jsx)("div",{className:"fw-bold",children:(0,a.jsx)(_.zx,{variant:"light-danger",onClick:G(A),children:"\u4E0D\u5B58\u50A8"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(_.zx,{variant:"light",className:"me-3",onClick:m,children:"\u53D6\u6D88"}),(0,a.jsx)(_.zx,{onClick:A,children:"\u5B58\u50A8"})]})]})]})}}),(0,a.jsx)(_.yC,{spinning:I&&!W,children:(0,a.jsx)(B.Z,{message:D,onAutoSave:Q,onSend:H})}),(0,a.jsx)(r,{})]})}var i=t.memo(n);k.default=i},82949:function(R,k,l){R.exports=function(c){var f={};function s(t){if(f[t])return f[t].exports;var u=f[t]={i:t,l:!1,exports:{}};return c[t].call(u.exports,u,u.exports,s),u.l=!0,u.exports}return s.m=c,s.c=f,s.d=function(t,u,p){s.o(t,u)||Object.defineProperty(t,u,{configurable:!1,enumerable:!0,get:p})},s.n=function(t){var u=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(u,"a",u),u},s.o=function(t,u){return Object.prototype.hasOwnProperty.call(t,u)},s.p="",s(s.s=0)}([function(c,f,s){"use strict";Object.defineProperty(f,"__esModule",{value:!0});var t=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(r[e]=i[e])}return r},u=function(){function r(n,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(n,i,e){return i&&r(n.prototype,i),e&&r(n,e),n}}(),p=s(1),O=M(p),B=s(2);function M(r){return r&&r.__esModule?r:{default:r}}function U(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function _(r,n){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:r}function w(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}var a={action:null,isActive:!1,nextLocation:null},x=function(r){w(n,r);function n(i){U(this,n);var e=_(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i));return e._prevUserAction="",e._isMounted=!0,e.block=e.block.bind(e),e.onBeforeUnload=e.onBeforeUnload.bind(e),e.onCancel=e.onCancel.bind(e),e.onConfirm=e.onConfirm.bind(e),e.when=e.when.bind(e),e.state=t({},a,{unblock:function(){}}),e}return u(n,[{key:"componentDidMount",value:function(){this.props.disableNative||window.addEventListener("beforeunload",this.onBeforeUnload),this.setState({unblock:this.props.history.block(this.block)})}},{key:"componentDidUpdate",value:function(e,o){this._prevUserAction==="CANCEL"&&typeof this.props.afterCancel=="function"?this.props.afterCancel():this._prevUserAction==="CONFIRM"&&typeof this.props.afterConfirm=="function"&&this.props.afterConfirm(),this._prevUserAction=""}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this._prevUserAction==="CONFIRM"&&typeof this.props.afterConfirm=="function"&&(this._prevUserAction="",this.props.afterConfirm()),this.state.unblock(),this.props.disableNative||window.removeEventListener("beforeunload",this.onBeforeUnload)}},{key:"block",value:function(e,o){var h=this.when(e,o);return h&&this.setState({action:o,nextLocation:e,isActive:!0}),!h}},{key:"navigateToNextLocation",value:function(e){var o=this,h=this.state,E=h.action,g=h.nextLocation;E={POP:this.props.allowGoBack?"goBack":"push",PUSH:"push",REPLACE:"replace"}[E||"PUSH"],g||(g={pathname:"/"});var y=this.props.history;if(this.state.unblock(),this._prevUserAction="CONFIRM",E==="goBack"){var P=y.listen(function(){P(),o._isMounted&&o.setState(t({},a,{unblock:y.block(o.block)}))});y.goBack()}else y[E](g),this._isMounted&&this.setState(t({},a,{unblock:this.props.history.block(this.block)}))}},{key:"onCancel",value:function(){var e=this;(this.props.beforeCancel||function(o){o()})(function(){e._prevUserAction="CANCEL",e.setState(t({},a))})}},{key:"onConfirm",value:function(){var e=this;(this.props.beforeConfirm||function(o){o()})(function(){e.navigateToNextLocation(e.props.afterConfirm)})}},{key:"onBeforeUnload",value:function(e){if(!!this.when()){var o=`Do you want to leave this site?

Changes you made may not be saved.`;return e.returnValue=o,o}}},{key:"when",value:function(e,o){return typeof this.props.when=="function"?this.props.when(this.props.location,e,o):this.props.when}},{key:"render",value:function(){return!this.state.isActive&&!this.props.renderIfNotActive?null:O.default.createElement("div",null,this.props.children({isActive:this.state.isActive,onConfirm:this.onConfirm,onCancel:this.onCancel}))}}]),n}(O.default.Component);f.default=(0,B.withRouter)(x)},function(c,f){c.exports=l(67294)},function(c,f){c.exports=l(73727)}])}}]);

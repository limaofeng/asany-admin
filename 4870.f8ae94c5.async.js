"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4870],{79514:function(T,C,r){r.d(C,{AQ:function(){return a.AQ},Af:function(){return a.Af},G$:function(){return a.G$},I1:function(){return a.I1},KX:function(){return a.KX},Nq:function(){return a.Nq},P6:function(){return a.P6},Pw:function(){return a.Pw},WF:function(){return a.WF},Yw:function(){return a.Yw},ZO:function(){return a.ZO},_c:function(){return a._c},aA:function(){return a.aA},au:function(){return a.au},c9:function(){return a.c9},jS:function(){return a.jS},ko:function(){return a.ko},oM:function(){return a.oM},ot:function(){return a.ot},w4:function(){return a.w4},wp:function(){return a.wp}});var a=r(70694)},96160:function(T,C,r){r.r(C),r.d(C,{default:function(){return U}});var a=r(15009),B=r.n(a),I=r(99289),M=r.n(I),L=r(5574),j=r.n(L),$=r(97857),S=r.n($),s=r(67294),q=r(59197),F=r(35090),_=r(93967),o=r(89717),O=r(79514),G=r(66252),K=r(75063);function W(u,c){var m=(0,G.x)(),h=(0,s.useState)({loading:!1,error:null}),x=j()(h,2),g=x[0],v=x[1],t=(0,s.useMemo)(function(){return u!=null&&u.endpoints?u.endpoints.find(function(i){return i.type==="CONNECTION"}):null},[u==null?void 0:u.endpoints]);return(0,s.useEffect)(function(){if(!(!c.length||!t)){v(function(l){return S()(S()({},l),{},{loading:!0})});var i=t.arguments.find(function(l){return l.name==="where"}).type,d=t.arguments.find(function(l){return l.name==="orderBy"}).type,E=`query search(
      $where: `.concat(i,`
      $page: Int
      $pageSize: Int
      $orderBy: `).concat(d,`
    ) {
      pagination: `).concat(t.code,`(
        where: $where
        page: $page
        pageSize: $pageSize
        orderBy: $orderBy
      ) {
        totalPage
        currentPage
        pageSize
        totalCount
        edges {
          cursor
          node {
            `).concat(c.map(function(l,p){return p>0?"            "+l.code:l.code}).join(`\r
`),`
          }
        }
      }
    }
    `),y=new AbortController;return m.query({query:(0,K.ZP)(E),fetchPolicy:"network-only",context:{fetchOptions:{signal:y.signal}}}).then(function(l){var p=l.data,k=l.loading,N=l.error;y.signal.aborted||(v(function(b){return S()(S()({},b),{},{data:p,loading:k,error:N})}),console.log("search data: ",p))}),function(){y.abort()}}},[c,t,m]),["",g]}var z=W,V=r(10185),n=r(85893),w=null;function ee(u){var c=u.columns,m=u.onChange,h=useRef({columns:c});h.current.columns=c;var x=useRef(null),g=useCallback(function(t){m(t.map(function(i){return h.current.columns.find(function(d){return d.key===i.id})}))},[m]),v=useCallback(function(t,i){m(h.current.columns.map(function(d){return d.key===t?_objectSpread(_objectSpread({},d),{},{checked:i}):d}))},[m]);return _jsx("div",{ref:x,children:_jsx(Sortable,{onChange:g,tag:"ul",className:"configure-columns",accept:["default"],items:c.map(function(t){return{source:t,type:"default",name:t.title,id:t.key}}),itemRender:React.createElement(w,{onCheck:v}),preview:{render:dragPreview(React.createElement(w)),axisLocked:!0,offset:[-4,0],container:document.body}})})}function Z(){var u=(0,F.rL)({key:"list",icon:"",title:"\u5217\u8868",props:{model:"",title:"Sales This Months",fields:[]},customizer:{fields:[{name:"model",type:"String"},{name:"fields",type:"JSON",label:"\u663E\u793A\u5B57\u6BB5",multiple:!0},{name:"subtitle",type:"String",label:"\u526F\u6807\u9898"},{name:"statistics",type:"String",label:"\u7EDF\u8BA1"}]}}),c=u.props,m=u.Provider,h=u.update,x=(0,O.jS)({fetchPolicy:"cache-and-network"}),g=j()(x,2),v=g[0],t=g[1].data;(0,s.useEffect)(function(){c.model&&v({variables:{id:c.model}})},[c.model,v]);var i=(0,s.useMemo)(function(){return t!=null&&t.model?t.model.fields.map(function(e){var f=c.fields.findIndex(function(P){return P.key===e.id});return{key:e.id,title:e.name,dataIndex:e.code,source:e,index:f!==-1?f:e.index,checked:f!==-1?c.fields[f].checked:!1}}).sort(function(e,f){return e.index-f.index}):[]},[c.fields,t==null?void 0:t.model]),d=(0,s.useMemo)(function(){return i.length?i.filter(function(e){return e.checked}).map(function(e){return e.source}):[]},[i]),E=z(t==null?void 0:t.model,d),y=j()(E,2),l=y[1],p=l.data,k=l.loading,N=l.error;console.log("loading",k,N);var b=(0,s.useMemo)(function(){return d.length?d.map(function(e){return{key:e.code,title:e.name}}):[]},[d]),A=(0,s.useCallback)(function(e){return M()(B()().mark(function f(){return B()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:console.log("selectedRowKeys",e);case 1:case"end":return R.stop()}},f)}))},[]),J=(0,s.useMemo)(function(){return function(e){return(0,n.jsx)("div",{children:(0,n.jsx)(o.Button,{color:"success",onClick:A(e),variant:!1,children:"\u6279\u91CF\u5220\u9664"})})}},[A]),ne=(0,s.useCallback)(function(e){console.log("columns","change",e),h("fields",e)},[h]),Q=(0,s.useState)("table"),D=j()(Q,2),te=D[0],X=D[1],re=(0,s.useCallback)(function(e){X(e)},[]),ae=t==null?void 0:t.model;console.log("columns",i,b,p);var Y="",H=(0,s.useCallback)(function(e){console.log("search",e)},[]);return(0,n.jsx)(m,{children:(0,n.jsxs)(o.Card,{className:"mb-5 mb-xl-10",children:[(0,n.jsxs)(o.Card.Header,{className:"pt-8",children:[(0,n.jsxs)(o.Card.Title,{className:"flex-row",children:[(0,n.jsx)(o.Input.Search,{solid:!0,defaultValue:Y,className:"w-250px",placeholder:"\u5173\u952E\u8BCD\u641C\u7D22",onSearch:H}),(0,n.jsx)(V.ZJ,{values:{},onSearch:function(f){},children:(0,n.jsx)(o.Row,{gutter:8,className:"mb-8",children:(0,n.jsxs)(o.Col,{xxl:7,children:[(0,n.jsx)("label",{className:"fs-6 form-label fw-bold text-dark",children:"\u95E8\u5E97"}),(0,n.jsx)(o.Form.Item,{noStyle:!0,name:"status",initialValue:"ALL",children:(0,n.jsxs)(o.Radio.Group,{children:[(0,n.jsx)(o.Radio.Button,{value:"ALL",children:"\u5168\u90E8"}),(0,n.jsx)(o.Radio.Button,{value:"NEW",children:"\u65B0\u5EFA"}),(0,n.jsx)(o.Radio.Button,{value:"IN_PROGRESS",children:"\u5904\u7406\u4E2D"}),(0,n.jsx)(o.Radio.Button,{value:"SUSPENDED",children:"\u6682\u505C"}),(0,n.jsx)(o.Radio.Button,{value:"RESOLVED",children:"\u5DF2\u89E3\u51B3"})]})})]})})})]}),(0,n.jsx)(o.Card.Toolbar,{children:(0,n.jsx)("div",{children:(0,n.jsx)(o.Button,{className:"me-4 my-1",variant:"light",children:"\u5BFC\u51FA Excel"})})})]}),(0,n.jsx)(o.Card.Body,{children:(0,n.jsx)(o.BlockUI,{overlayClassName:"bg-white bg-opacity-25",loading:k,children:(0,n.jsx)(o.Table,{columns:b,rowKey:"id",rowSelection:{type:"checkbox",renderTitle:function(f){return(0,n.jsxs)(n.Fragment,{children:["\u5DF2\u9009\u4E2D",(0,n.jsx)("span",{className:"mx-2",children:f}),"\u4E2A\u6D3B\u52A8"]})},toolbar:J},dataSource:[],noRowsRenderer:function(){return(0,n.jsx)("div",{children:"\u6CA1\u6709\u6570\u636E"})}})})})]})})}var U=Z}}]);

"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5105],{85105:function($,u,s){s.r(u),s.d(u,{default:function(){return ce}});var A=s(97857),D=s.n(A),V=s(13769),N=s.n(V),i=s(15009),l=s.n(i),h=s(99289),S=s.n(h),z=s(5574),B=s.n(z),y=s(62435),W=s(96974),o=s(39711),w=s(46027),te=s(93967),ne=s.n(te),ie=s(19755),k=s.n(ie),ae=s(30381),se=s.n(ae),e=s(38018),t=s(73588),r=s(10811),a=s(14336),c=s(70005),f=s(42755),n=s(86074),U=["q"],T={DRAFT:{title:"\u8349\u7A3F",lightStyle:"danger"},PUBLISHED:{title:"\u5DF2\u53D1\u5E03"},SCHEDULED:{title:"\u8BA1\u5212",lightStyle:"primary"}};window._MoreshowOrhide=function(C){return k()(C).parent().siblings().show(),k()(C).parent().remove(),!1};function M(C){var m=C.selectedRows,p=C.refetch,G=(0,f.nT)(),x=B()(G,1),E=x[0],K=(0,a.Z)({title:(0,n.jsxs)(n.Fragment,{children:["\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9",m.length>1&&(0,n.jsxs)(n.Fragment,{children:["\u201C",(0,n.jsx)("strong",{children:m.length}),"\u201C`"]}),"\u7BC7\u6587\u7AE0\u5417\uFF1F"]}),content:m.length>1?'\u60A8\u5373\u5C06\u5220\u9664\u4EE5\u4E0B\u6587\u7AE0:<ul className="py-2">'.concat(m.map(function(P,L){return"<li ".concat(L>=4?'style="display: none !important;"':"",' className="d-flex align-items-center text-gray-800 mb-1 fs-6"><span className="bullet bullet-dot me-2"></span><strong>').concat(P.title,"</strong></li>")}).join(""),`
              <li `).concat(m.length<=4?'style="display: none !important;"':"",' className="d-flex align-items-center text-gray-800 fs-6"><a href="javascript:void(0)" onClick="_MoreshowOrhide(this)">\u66F4\u591A</a></li></ul> '):(0,n.jsxs)(n.Fragment,{children:["\u60A8\u5373\u5C06\u5220\u9664\u201C",(0,n.jsx)("strong",{children:m[0].title}),"\u201D\u3002",(0,n.jsx)("br",{}),"\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F"]})},S()(l()().mark(function P(){return l()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,E({variables:{ids:m.map(function(H){return H.id})}});case 2:case"end":return F.stop()}},P)}))),O=B()(K,1),b=O[0],_=(0,y.useCallback)(S()(l()().mark(function P(){return l()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,b();case 2:return F.next=4,p();case 4:case"end":return F.stop()}},P)})),[b,p]);return(0,n.jsx)(r.Button,{color:"danger",onClick:_,variant:!1,size:"sm",className:"px-4 py-2",children:"\u6279\u91CF\u5220\u9664"})}function j(C){var m=C.data,p=C.refetch,G=C.baseUrl,x=(0,y.useState)(!1),E=B()(x,2),K=E[0],O=E[1],b=(0,W.s0)(),_=(0,f.eU)(),P=B()(_,1),L=P[0],F=(0,a.Z)({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u7BC7\u6587\u7AE0\u5417\uFF1F",content:(0,n.jsxs)(n.Fragment,{children:["\u60A8\u5373\u5C06\u5220\u9664\u201C",(0,n.jsx)("strong",{children:m.title}),"\u201D\u3002\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F"]})},S()(l()().mark(function Z(){return l()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,L({variables:{id:m.id}});case 2:case"end":return I.stop()}},Z)}))),H=B()(F,1),X=H[0],ee=(0,y.useCallback)(S()(l()().mark(function Z(){return l()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,X();case 2:return I.next=4,p();case 4:case"end":return I.stop()}},Z)})),[X,p]),Q=(0,y.useCallback)(function(Z){var Y=Z.key;Y==="edit"?b("".concat(G,"/articles/").concat(m.id)):Y==="delete"&&(O(!1),ee())},[]);return(0,n.jsx)(r.Dropdown,{overlay:(0,n.jsxs)(r.Menu,{onClick:Q,className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold w-125px py-4",children:[(0,n.jsx)(r.Menu.Item,{className:"px-3",children:"\u7F16\u8F91"},"edit"),(0,n.jsx)(r.Menu.Item,{className:"px-3",children:"\u53D1\u5E03"},"publish"),(0,n.jsx)(r.Menu.Item,{className:"px-3 actions-delete",children:"\u5220\u9664"},"delete")]}),placement:"bottomRight",onVisibleChange:O,visible:K,children:(0,n.jsxs)(r.Button,{variant:"light",activeColor:"light-primary",children:["\u64CD \u4F5C",(0,n.jsx)(w.ZP,{className:"ms-2 svg-icon-5 m-0",name:"Duotune/arr072"})]})})}function q(C){var m,p,G=(0,W.UO)(),x=G.cid,E=(0,W.bx)(),K=E.rootCategoryId,O=E.categories,b=E.baseUrl,_=(0,W.TH)(),P=(0,W.s0)(),L=(0,y.useMemo)(function(){var g=e.parse(_.search),v=g.q,d=N()(g,U);return d.where?d.where=D()(D()({},d.where),C.where):d.where=D()({},C.where),v&&(d.where.keyword=v),d.where.category={id:x,subColumns:!0},d},[location.search,x]),F=(0,f.gk)({variables:L,fetchPolicy:"cache-and-network"}),H=F.data,X=F.refetch,ee=F.loading,Q=F.previousData,Z=(0,y.useMemo)(function(){return ee?(Q==null?void 0:Q.articles)||{edges:[],total:0,current:1}:(H==null?void 0:H.articles)||{edges:[],total:0,current:1}},[H==null?void 0:H.articles,ee,Q==null?void 0:Q.articles]),Y=(0,y.useMemo)(function(){return Z.edges.map(function(g){return g.node})},[Z.edges]),I=(0,y.useCallback)(function(g){var v=e.parse(location.search);v.q=g,P(location.pathname+"?"+e.stringify(v),{replace:!0})},[]),oe=(0,y.useCallback)(function(g,v,d){var J,R={};if((J=L.where)!==null&&J!==void 0&&J.keyword){var re;R.q=(re=L.where)===null||re===void 0?void 0:re.keyword}d&&(R.orderBy=d.field+"_"+(d.order==="ascend"?"asc":"desc")),R.page=g.current,P(location.pathname+"?"+e.stringify(R),{replace:!0})},[(m=L.where)===null||m===void 0?void 0:m.keyword]),de=(0,y.useState)([]),ue=B()(de,2),fe=ue[0],le=ue[1],me=(0,y.useCallback)(function(g,v){le(v)},[le]),he=(0,y.useMemo)(function(){return function(g,v){return(0,n.jsx)(M,{selectedRows:v,refetch:X})}},[X]);return(0,n.jsx)(t.vs,{loading:ee,header:{title:(p=O.find(function(g){return g.id===x}))===null||p===void 0?void 0:p.name},breadcrumb:(0,n.jsx)(c.Z,{categoryId:x}),children:(0,n.jsx)("div",{className:"tab-content",children:(0,n.jsxs)(r.Card,{flush:!0,headerClassName:"mt-5",children:[(0,n.jsxs)(r.Card.Header,{className:"pt-8",children:[(0,n.jsx)(r.Card.Title,{className:"flex-column",children:(0,n.jsx)(r.Input.Search,{solid:!0,className:"w-250px",placeholder:"\u641C\u7D22\u6587\u7AE0",onSearch:I})}),(0,n.jsx)(r.Card.Toolbar,{children:(0,n.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,n.jsx)(r.Dropdown,{overlay:(0,n.jsxs)(r.Menu,{className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold w-125px py-4",children:[(0,n.jsx)(r.Menu.Item,{className:"px-3",children:"\u6700\u65B0"},"edit"),(0,n.jsx)(r.Menu.Item,{className:"px-3",children:"\u6700\u665A"},"publish"),(0,n.jsx)(r.Menu.Item,{className:"px-3 actions-delete",children:"\u6700\u8FD1\u66F4\u65B0\u7684"},"delete"),(0,n.jsx)(r.Menu.Item,{className:"px-3 actions-delete",children:"\u70B9\u51FB\u91CF"},"delete")]}),placement:"bottomLeft",children:(0,n.jsx)(r.Button,{variant:"white",className:"me-3",icon:(0,n.jsx)(w.ZP,{className:"svg-icon-2",name:"Duotune/gen031"}),children:"\u6392\u5E8F: \u6700\u65B0"})}),(0,n.jsx)(r.Button,{as:o.rU,variant:"primary",className:"me-3",icon:(0,n.jsx)(w.ZP,{className:"svg-icon-2",name:"Duotune/arr075"}),to:"".concat(b,"/categories/").concat(x,"/articles/new"),children:"\u65B0\u5EFA\u6587\u7AE0"})]})})]}),(0,n.jsx)(r.Card.Body,{className:"pt-0",children:Z.total?(0,n.jsx)(r.Table,{rowKey:"id",rowSelection:{type:"checkbox",onChange:me,selectedRowKeys:(fe||[]).map(function(g){return g.id}),renderTitle:function(v){return(0,n.jsxs)(n.Fragment,{children:["\u5DF2\u9009\u4E2D",(0,n.jsx)("span",{className:"mx-2",children:v}),"\u7BC7\u6587\u7AE0"]})},toolbar:he},pagination:Z,dataSource:Y,onChange:oe,rowHeight:136,columns:[{title:"\u6807\u9898",dataIndex:"title",key:"title",render:function(v,d){var J;return(0,n.jsxs)("div",{className:"d-flex flex-row tw-truncate overflow-hidden",children:[(0,n.jsxs)("div",{className:"d-flex flex-column align-items-start tw-truncate overflow-hidden",children:[(0,n.jsxs)("div",{className:"meta-container no-selecto-drag",children:[(0,n.jsx)(o.rU,{to:"/xx/12",className:"user-message",children:"\u6797\u66AE\u6625"}),(0,n.jsx)("span",{className:"created-at",children:se()(d.createdAt).fromNow()}),(0,n.jsx)("div",{className:"category_list",children:d.categories.filter(function(R){return R.id!==K}).map(function(R){return(0,n.jsx)(o.rU,{to:"".concat(b,"/categories/").concat(R.id,"/articles"),className:"tag",children:R.name},R.id)})})]}),(0,n.jsx)(o.rU,{onClick:function(re){return re.stopPropagation()},to:"".concat(b,"/categories/").concat(x,"/articles/").concat(d.id),className:"mt-2 mb-2 text-gray-800 no-selecto-drag fs-4 text-hover-primary mb-1",children:v}),(0,n.jsx)("div",{className:ne()("summary mb-2 w-100 tw-text-ellipsis tw-truncate w-100",{"pe-8":!d.image}),children:(0,n.jsx)("span",{className:"text-muted fs-base no-selecto-drag",children:d.summary||"\u6CA1\u6709\u4EFB\u4F55\u5185\u5BB9..."})}),(0,n.jsxs)("div",{className:"fs-base",children:[(0,n.jsxs)(o.rU,{className:"text-muted no-selecto-drag text-hover-primary me-8",to:"".concat(b,"/categories/").concat(x,"/articles/").concat(d.id),children:[(0,n.jsx)(w.ZP,{className:"svg-icon-4 me-2",name:"Bootstrap/eye"}),"41W"]}),(0,n.jsxs)(o.rU,{className:"text-muted no-selecto-drag text-hover-primary me-8",to:"".concat(b,"/categories/").concat(x,"/articles/").concat(d.id,"#comments"),children:[(0,n.jsx)(w.ZP,{className:"svg-icon-6 me-2",name:"Bootstrap/chat"}),"41W"]})]})]}),d.image&&(0,n.jsx)("div",{className:"px-8 d-flex align-items-end",children:(0,n.jsx)(r.Symbol,{className:"article-image",src:"https://api.asany.cn"+"/preview/".concat((J=d.image)===null||J===void 0?void 0:J.id)})})]})}},{title:"\u72B6\u6001",dataIndex:"status",width:120,render:function(v){return(0,n.jsx)(r.Badge,{lightStyle:T[v].lightStyle,children:T[v].title})}},{title:"\u64CD\u4F5C",key:"action",width:140,render:function(v,d){return(0,n.jsx)(j,{baseUrl:"".concat(b,"/categories/").concat(x),data:d,refetch:X})}}]}):(0,n.jsxs)(r.Empty,{title:"\u65B0\u589E\u6587\u7AE0",description:"\u8BE5\u680F\u76EE\u8FD8\u662F\u7A7A\u7684\uFF0C\u6CA1\u6709\u4EFB\u4F55\u6587\u7AE0",image:"/assets/media/illustrations/sigma-1/4.png",children:[(0,n.jsx)(r.Button,{as:o.rU,className:"me-2",variant:"light",to:"".concat(b,"/settings"),children:"\u67E5\u770B\u680F\u76EE\u4FE1\u606F"}),(0,n.jsx)(r.Button,{as:o.rU,variant:"primary",to:"".concat(b,"/categories/").concat(x,"/articles/new"),children:"\u65B0\u5EFA\u6587\u7AE0"})]})})]})})})}var ce=q},38018:function($,u,s){var A=s(5574).default,D=s(64599).default,V=s(52677).default,N=s(19632).default,i=s(62072),l=s(44020),h=s(13615),S=s(92806),z=function(t){return t==null};function B(e){switch(e.arrayFormat){case"index":return function(t){return function(r,a){var c=r.length;return a===void 0||e.skipNull&&a===null||e.skipEmptyString&&a===""?r:a===null?[].concat(N(r),[[o(t,e),"[",c,"]"].join("")]):[].concat(N(r),[[o(t,e),"[",o(c,e),"]=",o(a,e)].join("")])}};case"bracket":return function(t){return function(r,a){return a===void 0||e.skipNull&&a===null||e.skipEmptyString&&a===""?r:a===null?[].concat(N(r),[[o(t,e),"[]"].join("")]):[].concat(N(r),[[o(t,e),"[]=",o(a,e)].join("")])}};case"comma":case"separator":return function(t){return function(r,a){return a==null||a.length===0?r:r.length===0?[[o(t,e),"=",o(a,e)].join("")]:[[r,o(a,e)].join(e.arrayFormatSeparator)]}};default:return function(t){return function(r,a){return a===void 0||e.skipNull&&a===null||e.skipEmptyString&&a===""?r:a===null?[].concat(N(r),[o(t,e)]):[].concat(N(r),[[o(t,e),"=",o(a,e)].join("")])}}}}function y(e){var t;switch(e.arrayFormat){case"index":return function(r,a,c){if(t=/\[(\d*)\]$/.exec(r),r=r.replace(/\[\d*\]$/,""),!t){c[r]=a;return}c[r]===void 0&&(c[r]={}),c[r][t[1]]=a};case"bracket":return function(r,a,c){if(t=/(\[\])$/.exec(r),r=r.replace(/\[\]$/,""),!t){c[r]=a;return}if(c[r]===void 0){c[r]=[a];return}c[r]=[].concat(c[r],a)};case"comma":case"separator":return function(r,a,c){var f=typeof a=="string"&&a.includes(e.arrayFormatSeparator),n=typeof a=="string"&&!f&&w(a,e).includes(e.arrayFormatSeparator);a=n?w(a,e):a;var U=f||n?a.split(e.arrayFormatSeparator).map(function(T){return w(T,e)}):a===null?a:w(a,e);c[r]=U};default:return function(r,a,c){if(c[r]===void 0){c[r]=a;return}c[r]=[].concat(c[r],a)}}}function W(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function o(e,t){return t.encode?t.strict?i(e):encodeURIComponent(e):e}function w(e,t){return t.decode?l(e):e}function te(e){return Array.isArray(e)?e.sort():V(e)==="object"?te(Object.keys(e)).sort(function(t,r){return Number(t)-Number(r)}).map(function(t){return e[t]}):e}function ne(e){var t=e.indexOf("#");return t!==-1&&(e=e.slice(0,t)),e}function ie(e){var t="",r=e.indexOf("#");return r!==-1&&(t=e.slice(r)),t}function k(e){e=ne(e);var t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function ae(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):t.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function se(e,t){t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t),W(t.arrayFormatSeparator);var r=y(t),a=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return a;var c=D(e.split("&")),f;try{for(c.s();!(f=c.n()).done;){var n=f.value;if(n!==""){var U=h(t.decode?n.replace(/\+/g," "):n,"="),T=A(U,2),M=T[0],j=T[1];j=j===void 0?null:["comma","separator"].includes(t.arrayFormat)?j:w(j,t),r(w(M,t),j,a)}}}catch(E){c.e(E)}finally{c.f()}for(var q=0,ce=Object.keys(a);q<ce.length;q++){var C=ce[q],m=a[C];if(V(m)==="object"&&m!==null)for(var p=0,G=Object.keys(m);p<G.length;p++){var x=G[p];m[x]=ae(m[x],t)}else a[C]=ae(m,t)}return t.sort===!1?a:(t.sort===!0?Object.keys(a).sort():Object.keys(a).sort(t.sort)).reduce(function(E,K){var O=a[K];return O&&V(O)==="object"&&!Array.isArray(O)?E[K]=te(O):E[K]=O,E},Object.create(null))}u.extract=k,u.parse=se,u.stringify=function(e,t){if(!e)return"";t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t),W(t.arrayFormatSeparator);for(var r=function(j){return t.skipNull&&z(e[j])||t.skipEmptyString&&e[j]===""},a=B(t),c={},f=0,n=Object.keys(e);f<n.length;f++){var U=n[f];r(U)||(c[U]=e[U])}var T=Object.keys(c);return t.sort!==!1&&T.sort(t.sort),T.map(function(M){var j=e[M];return j===void 0?"":j===null?o(M,t):Array.isArray(j)?j.reduce(a(M),[]).join("&"):o(M,t)+"="+o(j,t)}).filter(function(M){return M.length>0}).join("&")},u.parseUrl=function(e,t){t=Object.assign({decode:!0},t);var r=h(e,"#"),a=A(r,2),c=a[0],f=a[1];return Object.assign({url:c.split("?")[0]||"",query:se(k(e),t)},t&&t.parseFragmentIdentifier&&f?{fragmentIdentifier:w(f,t)}:{})},u.stringifyUrl=function(e,t){t=Object.assign({encode:!0,strict:!0},t);var r=ne(e.url).split("?")[0]||"",a=u.extract(e.url),c=u.parse(a,{sort:!1}),f=Object.assign(c,e.query),n=u.stringify(f,t);n&&(n="?".concat(n));var U=ie(e.url);return e.fragmentIdentifier&&(U="#".concat(o(e.fragmentIdentifier,t))),"".concat(r).concat(n).concat(U)},u.pick=function(e,t,r){r=Object.assign({parseFragmentIdentifier:!0},r);var a=u.parseUrl(e,r),c=a.url,f=a.query,n=a.fragmentIdentifier;return u.stringifyUrl({url:c,query:S(f,t),fragmentIdentifier:n},r)},u.exclude=function(e,t,r){var a=Array.isArray(t)?function(c){return!t.includes(c)}:function(c,f){return!t(c,f)};return u.pick(e,a,r)}},13615:function($){$.exports=function(u,s){if(!(typeof u=="string"&&typeof s=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(s==="")return[u];var A=u.indexOf(s);return A===-1?[u]:[u.slice(0,A),u.slice(A+s.length)]}},62072:function($){$.exports=function(u){return encodeURIComponent(u).replace(/[!'()*]/g,function(s){return"%".concat(s.charCodeAt(0).toString(16).toUpperCase())})}},44020:function($){var u="%[a-f0-9]{2}",s=new RegExp("("+u+")|([^%]+?)","gi"),A=new RegExp("("+u+")+","gi");function D(i,l){try{return[decodeURIComponent(i.join(""))]}catch(z){}if(i.length===1)return i;l=l||1;var h=i.slice(0,l),S=i.slice(l);return Array.prototype.concat.call([],D(h),D(S))}function V(i){try{return decodeURIComponent(i)}catch(S){for(var l=i.match(s)||[],h=1;h<l.length;h++)i=D(l,h).join(""),l=i.match(s)||[];return i}}function N(i){for(var l={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},h=A.exec(i);h;){try{l[h[0]]=decodeURIComponent(h[0])}catch(W){var S=V(h[0]);S!==h[0]&&(l[h[0]]=S)}h=A.exec(i)}l["%C2"]="\uFFFD";for(var z=Object.keys(l),B=0;B<z.length;B++){var y=z[B];i=i.replace(new RegExp(y,"g"),l[y])}return i}$.exports=function(i){if(typeof i!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof i+"`");try{return i=i.replace(/\+/g," "),decodeURIComponent(i)}catch(l){return N(i)}}},92806:function($){$.exports=function(u,s){for(var A={},D=Object.keys(u),V=Array.isArray(s),N=0;N<D.length;N++){var i=D[N],l=u[i];(V?s.indexOf(i)!==-1:s(i,l,u))&&(A[i]=l)}return A}}}]);

"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7897],{25136:function(V,T,u){var g=u(15009),a=u.n(g),e=u(99289),p=u.n(e),x=u(5574),i=u.n(x),v=u(62435),P=u(96974),U=u(46027),L=u(69366),R=u(93967),j=u.n(R),K=u(30381),C=u.n(K),t=u(13757),W=u(40158),w=u(42755),k=u(81620),l=u(86074);function d(r){return r==="PUBLISHED"?"\u5DF2\u53D1\u5E03":r==="SCHEDULED"?"\u8BA1\u5212\u4E2D":"\u5DF2\u5931\u6548"}function n(r){var s=r.article,m=r.categoryTreeData,f=r.onChangeCategory,F=r.baseUrl,N=(0,v.useState)(),c=i()(N,2),_=c[0],A=c[1],B=(0,P.s0)(),S=(0,v.useCallback)(function(b){A(b)},[]),E=(0,v.useCallback)(function(b){return b.isAfter(C()())},[]),y=(0,v.useCallback)(function(b){return{disabledHours:function(){if(!(_||b).isSame(C()(),"days"))return[];for(var o=[],O=C()().hours()+1;O<24;O++)o.push(O);return o},disabledMinutes:function(o){if(!(_||b).isSame(C()(),"days"))return[];if(!b.set("hours",o).isSame(C()(),"hours"))return[];for(var O=[],G=C()().minutes()+1;G<60;G++)O.push(G);return O}}},[_]),h=(0,w.eU)(),I=i()(h,1),M=I[0],D=(0,k.Z)({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u7BC7\u6587\u7AE0\u5417\uFF1F",content:(0,l.jsxs)(l.Fragment,{children:["\u60A8\u5373\u5C06\u5220\u9664\u201C",(0,l.jsx)("strong",{children:s==null?void 0:s.title}),"\u201D\u3002\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F"]})},p()(a()().mark(function b(){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,M({variables:{id:s.id}});case 2:case"end":return o.stop()}},b)}))),H=i()(D,1),Q=H[0],J=(0,v.useCallback)(p()(a()().mark(function b(){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Q();case 2:if(!o.sent){o.next=4;break}B("".concat(F,"/cms/categories/").concat(s.category.id,"/articles"),{replace:!0});case 4:case"end":return o.stop()}},b)})),[Q,F,s]);return(0,l.jsxs)("div",{className:"d-flex flex-column gap-7 gap-lg-10 w-100 w-lg-300px mb-7",children:[(0,l.jsxs)(t.Card,{flush:!0,children:[(0,l.jsxs)(t.Card.Header,{className:"ribbon ribbon-top ribbon-vertical",children:[!!(s!=null&&s.status)&&(s==null?void 0:s.status)!=="DRAFT"&&(0,l.jsx)("div",{className:j()("ribbon-label",{"bg-primary":(s==null?void 0:s.status)==="PUBLISHED","bg-success":(s==null?void 0:s.status)==="SCHEDULED","bg-danger":(s==null?void 0:s.status)==="INACTIVE"}),children:d(s.status)}),(0,l.jsx)(t.Card.Title,{children:"\u6587\u7AE0\u8BBE\u7F6E"})]}),(0,l.jsxs)(t.Card.Body,{className:" pt-0",children:[(0,l.jsx)(t.Form.Item,{name:"image",className:"text-center",children:(0,l.jsx)(t.Upload.Image,{width:240,height:150,className:"mb-3",space:"Ohc2OaZ4",accept:".png, .jpg, .jpeg",background:"/assets/media/svg/files/blank-image.svg"})}),(0,l.jsx)("div",{className:"text-muted fs-7 mb-6",children:"\u8BBE\u7F6E\u6587\u7AE0\u5C01\u9762\u56FE\u3002\u4EC5\u63A5\u53D7 *.png\u3001*.jpg \u548C *.jpeg \u683C\u5F0F\u7684\u56FE\u7247"}),(0,l.jsx)(t.Form.Item,{className:"mb-3",label:"\u6240\u5C5E\u680F\u76EE",name:["category","id"],rules:[{required:!0,message:"\u6240\u5C5E\u680F\u76EE\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,l.jsx)(L.Z,{onChange:f,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:m,placeholder:"\u9009\u62E9\u680F\u76EE",treeDefaultExpandAll:!0,transitionName:""})}),(0,l.jsx)("div",{className:"text-muted fs-7 mb-6",children:"\u60A8\u7684\u6587\u7AE0\u5FC5\u987B\u53D1\u5E03\u5728\u4E00\u4E2A\u680F\u76EE\u4E2D"}),(0,l.jsx)(t.Form.Item,{name:"publishedAt",label:"\u53D1\u5E03\u65F6\u95F4",className:"mb-6",children:(0,l.jsx)(W.Z,{onChange:S,disabled:(s==null?void 0:s.status)==="SCHEDULED",disabledDate:E,disabledTime:y})}),(0,l.jsx)(t.Form.Item,{name:"summary",label:"\u6458\u8981",className:"mb-6",children:(0,l.jsx)(t.Input.TextArea,{autoSize:{minRows:6}})}),(0,l.jsx)(t.Form.Item,{name:"authors",label:"\u4F5C\u8005",children:(0,l.jsx)(t.Input,{})})]})]}),s&&(0,l.jsx)(t.Card,{flush:!0,className:"py-4",children:(0,l.jsxs)(t.Card.Body,{children:[(0,l.jsx)(t.Button,{onClick:J,className:"mb-3",variant:"light-danger",icon:(0,l.jsx)(U.JO,{className:"svg-icon-2",name:"Bootstrap/trash"}),children:"\u5220\u9664"}),(0,l.jsx)("div",{className:"text-muted fs-7 mb-6",children:"\u6587\u7AE0\u5220\u9664\u540E\uFF0C\u4E0D\u53EF\u6062\u590D"})]})})]})}T.Z=n},40158:function(V,T,u){var g=u(22144),a=u(68351),e=u(86074);function p(x){var i=x.value,v=x.onChange,P=x.disabled,U=x.disabledDate,L=x.disabledTime;return(0,e.jsxs)("div",{children:[(0,e.jsx)(g.default,{getPopupContainer:function(j){return j.parentNode},transitionName:"",allowClear:!1,dropdownClassName:"article-publish-dropdown-published-at",placement:"topLeft",value:i,disabled:P,onChange:v,disabledDate:U,style:{width:136}}),(0,e.jsx)(a.Z,{className:"ms-3",style:{width:88},allowClear:!1,getPopupContainer:function(j){return j.parentNode},transitionName:"",placeholder:"",value:i,disabled:P,onChange:v,disabledTime:L,format:"HH:mm",placement:"topLeft"})]})}T.Z=p},58496:function(V,T,u){u.d(T,{aE:function(){return x},LQ:function(){return U},SF:function(){return R},H5:function(){return l}});var g=u(5618),a=u(13757),e=u(86074);function p(){return(0,e.jsxs)("div",{className:"d-flex flex-column gap-7 gap-lg-10",children:[(0,e.jsxs)(a.Card,{flush:!0,className:"py-4",children:[(0,e.jsx)(a.Form.Item,{name:"subtitle",className:"mb-8 mw-400px",label:"\u526F\u6807\u9898",children:(0,e.jsx)(a.Input,{})}),(0,e.jsx)(a.Form.Item,{className:"mb-3",label:"\u6807\u7B7E",name:"tags",children:(0,e.jsx)(g.ZP,{})}),(0,e.jsx)(a.Form.Item,{name:"source",className:"mb-8 mw-400px",label:"\u6765\u6E90",children:(0,e.jsx)(a.Input,{})})]}),(0,e.jsxs)(a.Card,{flush:!0,className:"py-4",title:"\u66F4\u591A\u529F\u80FD",bodyClassName:"pt-0",children:[(0,e.jsx)(a.Form.Item,{className:"mb-8",name:"xx",children:(0,e.jsx)(a.Checkbox,{value:"1",solid:!0,label:"\u542F\u7528\u8BC4\u8BBA"})}),(0,e.jsx)(a.Form.Item,{className:"mb-8",name:"x2",children:(0,e.jsx)(a.Checkbox,{value:"1",solid:!0,label:"\u5141\u8BB8\u6536\u85CF"})})]}),(0,e.jsx)(a.Card,{flush:!0,className:"py-4",title:"\u5143\u6570\u636E",bodyClassName:"pt-0",children:"123145"})]})}var x=p,i=u(62435),v=u(46027);function P(d){var n=d.queueUpload,r=(0,i.useCallback)(function(s){var m;(m=n.current)===null||m===void 0||m.browse(s)},[n]);return(0,e.jsxs)("div",{className:"d-flex flex-column gap-7 gap-lg-10",children:[(0,e.jsxs)(a.Card,{flush:!0,className:"py-4",children:[(0,e.jsx)(a.Form.Item,{className:"mb-8",name:"title",label:"\u6807\u9898",required:!0,help:"\u6807\u9898\u662F\u5FC5\u9700\u7684",rules:[{required:!0,message:"\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(a.Input,{placeholder:"\u6587\u7AE0\u6807\u9898",className:"mw-400px"})}),(0,e.jsx)(a.Form.Item,{name:["body","text"],label:"\u6B63\u6587",help:"\u60A8\u53EF\u4EE5\u9009\u62E9\u9002\u5408\u81EA\u5DF1\u7684\uFF0C\u7F16\u8F91\u65B9\u5F0F",children:(0,e.jsx)(a.QuillEditor,{className:"h-300px"})})]}),(0,e.jsxs)(a.Card,{flush:!0,className:"py-4",title:"\u9644\u4EF6",bodyClassName:"pt-0",children:[(0,e.jsx)(a.Form.Item,{name:"attachments",noStyle:!0,children:(0,e.jsx)(a.Upload.Queue,{ref:n,namespace:"email"})}),(0,e.jsx)(a.Button,{variant:"light-primary",className:"me-3 mt-4",onClick:r,icon:(0,e.jsx)(v.JO,{className:"svg-icon-2",name:"Duotune/com008"}),children:"\u6DFB\u52A0\u9644\u4EF6"})]})]})}var U=P;function L(){return(0,e.jsx)("div",{className:"d-flex flex-column gap-7 gap-lg-10",children:(0,e.jsxs)(a.Card,{flush:!0,className:"py-4",title:"SEO",bodyClassName:"pt-0",children:[(0,e.jsx)(a.Form.Item,{name:["meta","seo","title"],className:"mb-8",label:"\u6807\u9898",help:"\u8BBE\u7F6E\u5143\u6570\u636E\u6807\u9898, \u5EFA\u8BAE\u5173\u952E\u8BCD\u8981\u7B80\u5355, \u51C6\u786E",children:(0,e.jsx)(a.Input,{className:"mw-400px"})}),(0,e.jsx)(a.Form.Item,{name:["meta","seo","description"],className:"mb-8",label:"\u63CF\u8FF0",help:"\u8BBE\u7F6E\u5143\u6570\u636E\u63CF\u8FF0, \u4EE5\u63D0\u9AD8\u6392\u540D",children:(0,e.jsx)(a.QuillEditor,{className:"h-300px"})}),(0,e.jsx)(a.Form.Item,{name:["meta","seo","keywords"],label:"\u5173\u952E\u5B57",help:(0,e.jsxs)(e.Fragment,{children:["\u8BBE\u7F6E\u680F\u76EE\u76F8\u5173\u7684\u5173\u952E\u5B57\u5217\u8868\u3002\u901A\u8FC7\u5728\u6BCF\u4E2A\u5173\u952E\u5B57\u4E4B\u95F4\u6DFB\u52A0",(0,e.jsx)("code",{children:","}),"\u6765\u5206\u9694\u5173\u952E\u5B57"]}),children:(0,e.jsx)(g.ZP,{className:"form-control"})})]})})}var R=L,j=u(5574),K=u.n(j),C=u(30381),t=u.n(C),W=u(40158);function w(d){var n=d.status,r=d.submitting,s=d.onPublish,m=d.publishedAt,f=d.setPublishedAt,F=(0,i.useState)("publish"),N=K()(F,2),c=N[0],_=N[1],A=(0,i.useCallback)(function(h){_(function(I){return I===h.target.value?I:(["schedule","reschedule"].includes(h.target.value)&&m.isBefore(t()())&&f(t()()),h.target.value)})},[m,f]),B=(0,i.useCallback)(function(h){f(h)},[f]),S=(0,i.useCallback)(function(){s(c)},[s,c]);(0,i.useEffect)(function(){n==="DRAFT"?_("publish"):n==="PUBLISHED"?_("update"):n==="SCHEDULED"&&_("reschedule")},[n]);var E=(0,i.useCallback)(function(h){return h.isBefore(t()())&&!h.isSame(t()(),"days")},[]),y=(0,i.useCallback)(function(h){return{disabledHours:function(){if(!m.isSame(t()(),"days"))return[];for(var M=[],D=0;D<t()().hours();D++)M.push(D);return M},disabledMinutes:function(M){if(!m.isSame(t()(),"days"))return[];if(!h.set("hours",M).isSame(t()(),"hours"))return[];for(var D=[],H=0;H<t()().minutes();H++)D.push(H);return D}}},[m]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"publish-popover-content",children:(0,e.jsxs)(a.Radio.Group,{value:c,onChange:A,children:[n==="PUBLISHED"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(a.Radio,{className:"align-items-start",solid:!0,inputClassName:"me-3",value:"unpublish",children:[(0,e.jsx)("div",{className:"fw-bolder text-gray-800",children:"\u53D6\u6D88\u53D1\u5E03"}),(0,e.jsx)("div",{className:"form-item-help",children:"\u5C06\u6587\u7AE0\u8BBE\u7F6E\u4E3A\u8349\u7A3F\u72B6\u6001"})]}),(0,e.jsx)("div",{className:"my-4"}),(0,e.jsxs)(a.Radio,{className:"align-items-start",solid:!0,inputClassName:"me-3",value:"update",children:[(0,e.jsx)("div",{className:"fw-bolder text-gray-800",children:"\u5DF2\u53D1\u5E03"}),(0,e.jsx)("div",{className:"form-item-help",children:"\u516C\u5F00\u663E\u793A\u8FD9\u7BC7\u6587\u7AE0"})]})]}),n==="SCHEDULED"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(a.Radio,{className:"align-items-start",solid:!0,inputClassName:"me-3",value:"revert_to_draft",children:[(0,e.jsx)("div",{className:"fw-bolder text-gray-800",children:"\u6062\u590D\u4E3A\u8349\u7A3F"}),(0,e.jsx)("div",{className:"form-item-help",children:"\u4E0D\u518D\u53D1\u5E03"})]}),(0,e.jsx)("div",{className:"my-4"}),(0,e.jsxs)(a.Radio,{solid:!0,className:"align-items-start",inputClassName:"me-3",value:"reschedule",children:[(0,e.jsx)("div",{className:"fw-bolder text-gray-800",children:"\u5B9A\u65F6\u53D1\u5E03"}),(0,e.jsx)("div",{className:"my-2",children:(0,e.jsx)(W.Z,{disabledDate:E,disabledTime:y,value:m,onChange:B})}),(0,e.jsx)("div",{className:"form-item-help",children:"\u8BBE\u7F6E\u4E00\u4E2A\u65F6\u95F4, \u5C06\u5728\u672A\u6765\u81EA\u52A8\u53D1\u5E03\u3002"})]})]}),n==="DRAFT"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(a.Radio,{className:"align-items-start",solid:!0,inputClassName:"me-3",value:"publish",children:[(0,e.jsx)("div",{className:"fw-bolder text-gray-800",children:"\u7ACB\u5373\u53D1\u5E03"}),(0,e.jsx)("div",{className:"form-item-help",children:"\u7ACB\u5373\u53D1\u5E03\u6B64\u6587\u7AE0"})]}),(0,e.jsx)("div",{className:"my-4"}),(0,e.jsxs)(a.Radio,{solid:!0,className:"align-items-start",inputClassName:"me-3",value:"schedule",children:[(0,e.jsx)("div",{className:"fw-bolder text-gray-800",children:"\u5B9A\u65F6\u53D1\u5E03"}),(0,e.jsx)("div",{className:"my-2",children:(0,e.jsx)(W.Z,{disabledDate:E,disabledTime:y,value:m,onChange:B})}),(0,e.jsx)("div",{className:"form-item-help",children:"\u8BBE\u7F6E\u4E00\u4E2A\u65F6\u95F4, \u5C06\u5728\u672A\u6765\u81EA\u52A8\u53D1\u5E03\u3002"})]})]})]})}),(0,e.jsx)(a.Separator,{style:"solid"}),(0,e.jsxs)("div",{className:"publish-popover-footer d-flex justify-content-end",children:[(0,e.jsx)(a.Button,{onClick:d.onClose,disabled:r,className:"me-2",variant:"light",children:"\u53D6\u6D88"}),(0,e.jsxs)(a.Button,{loading:r,onClick:S,children:[c==="publish"&&(r?"\u53D1\u5E03\u4E2D...":"\u53D1\u5E03"),c==="schedule"&&(r?"\u5B9A\u65F6\u53D1\u5E03\u4E2D...":"\u5B9A\u65F6\u53D1\u5E03"),c==="update"&&(r?"\u66F4\u65B0\u4E2D...":"\u66F4\u65B0"),c==="unpublish"&&(r?"\u53D6\u6D88\u53D1\u5E03\u4E2D...":"\u53D6\u6D88\u53D1\u5E03"),c==="reschedule"&&(r?"\u66F4\u65B0\u4E2D...":"\u91CD\u8BBE\u53D1\u5E03\u65F6\u95F4"),c==="revert_to_draft"&&(r?"\u53D6\u6D88\u4E2D...":"\u53D6\u6D88\u81EA\u52A8\u53D1\u5E03")]})]})]})}function k(d){var n=d.article,r=d.submitting,s=d.onPublish,m=d.publishedAt,f=d.setPublishedAt,F=d.onCancel,N=(0,i.useState)(!1),c=K()(N,2),_=c[0],A=c[1],B=(0,i.useCallback)(function(){A(!1)},[A]),S=(0,i.useCallback)(function(h){r||A(h)},[r]),E=(n==null?void 0:n.status)||"DRAFT",y=(0,i.useMemo)(function(){return E==="DRAFT"?"\u53D1\u5E03\u8FD9\u7BC7\u6587\u7AE0\u5417\uFF1F":E==="PUBLISHED"?"\u66F4\u65B0\u6587\u7AE0\u72B6\u6001":E==="SCHEDULED"?"\u9884\u8BA1\u5C06\u5728"+t()(n==null?void 0:n.publishedAt).fromNow()+"\u53D1\u5E03":"\u91CD\u65B0\u53D1\u5E03"},[n==null?void 0:n.publishedAt,E]);return(0,i.useEffect)(function(){!_&&F()},[F,_]),(0,e.jsx)(a.Popover,{stopPropagation:!0,visible:_,overlayClassName:"overlay-no-arrow article-publish-dropdown-content",title:y,content:(0,e.jsx)(w,{status:E,submitting:r,onClose:B,onPublish:s,publishedAt:m,setPublishedAt:f}),placement:"top-end",onVisibleChange:S,children:(0,e.jsxs)(a.Button,{className:"pe-2",children:[E==="DRAFT"&&"\u53D1\u5E03",E==="PUBLISHED"&&"\u66F4\u65B0",E==="SCHEDULED"&&"\u66F4\u65B0",(0,e.jsx)(v.JO,{name:"Bootstrap/chevron-down",className:"ms-2 svg-icon-6"})]})})}var l=k},34545:function(){}}]);

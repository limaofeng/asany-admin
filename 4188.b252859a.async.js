(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[4188],{64188:function(ee,k,n){"use strict";n.r(k);var S=n(86582),K=n(93224),A=n(2824),B=n(3182),U=n(94043),h=n.n(U),t=n(67294),R=n(28865),Z=n(84059),$=n(80129),z=n.n($),T=n(73727),Q=n(81303),H=n(50480),J=n(75468),a=n(53704),e=n(85893);function G(u){var m=u.data,x=u.history,b=u.onDelete,C=u.onShowQRCode,f=(0,t.useCallback)(function(){var _=(0,B.Z)(h().mark(function E(j){var D,y;return h().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return D="\u786E\u5B9A\u5220\u9664\u6D3B\u52A8 \u201C".concat(j.name,"\u201D \u5417\uFF1F"),i.next=3,a.u_.confirm({title:"\u786E\u5B9A\u5220\u9664",content:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{className:"tip-confirm",children:D}),(0,e.jsx)("p",{children:"\u5220\u9664\u7684\u64CD\u4F5C\u4E0D\u53EF\u9006,\u8BF7\u8C28\u614E\u64CD\u4F5C"})]}),okClassName:"btn-danger",okText:"\u5220\u9664"});case 3:if(y=i.sent,y.isConfirmed){i.next=6;break}return i.abrupt("return");case 6:return i.next=8,b(j.id);case 8:a.FN.success("\u6D3B\u52A8 \u201C".concat(j.name,"\u201D \u5220\u9664\u6210\u529F"),2e3,{placement:"bottom-start",progressBar:!0});case 9:case"end":return i.stop()}},E)}));return function(E){return _.apply(this,arguments)}}(),[b]),p=(0,t.useCallback)(function(_){_.key=="view"?x.push("/website/landing/pages/".concat(m.id)):_.key=="delete"?f(m):_.key=="preview"&&C(location.protocol+"//47.103.119.188:8002/lps/"+m.id)},[m,f,x,C]);return(0,e.jsx)(a.Lt,{overlay:(0,e.jsxs)(a.v2,{onClick:p,className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold fs-8 w-125px py-4",children:[(0,e.jsx)(a.v2.Item,{className:"px-3",children:"\u7F16\u8F91"},"view"),(0,e.jsx)(a.v2.Separator,{}),(0,e.jsx)(a.v2.Item,{className:"px-3",children:"\u9884\u89C8"},"preview"),(0,e.jsx)(a.v2.Separator,{}),(0,e.jsx)(a.v2.Item,{className:"px-3 actions-delete",children:"\u5220\u9664"},"delete")]}),placement:"bottomRight",children:(0,e.jsxs)(a.zx,{className:"fs-8",variant:"light",activeColor:"light-primary",children:["\u64CD\u4F5C",(0,e.jsx)(R.JO,{className:"svg-icon-5 ms-2 me-n1",name:"Duotune/arr072"})]})})}function X(u){var m,x=u.history,b=u.location,C=(0,t.useState)(),f=(0,A.Z)(C,2),p=f[0],_=f[1],E=(0,t.useCallback)(function(s){_(s)},[]),j=(0,t.useCallback)(function(){_(void 0)},[]),D=(0,t.useState)("card"),y=(0,A.Z)(D,2),N=y[0],i=y[1],g=(0,t.useMemo)(function(){var s=u.location.query,r=s.q,l=(0,K.Z)(s,["q"]);return r&&(l.filter={name_contains:r}),l},[u.location]),I=(0,t.useMemo)(function(){if(!g.orderBy)return{order:"descend",field:"createdAt"};var s=g.orderBy.split("_"),r=(0,A.Z)(s,2),l=r[0],d=r[1];return{order:d=="desc"?"descend":"ascend",field:l}},[g.orderBy]),M=(0,Q.F6)({fetchPolicy:"cache-and-network",variables:g}),o=M.data,w=M.loading,v=M.previousData,Y=(0,t.useMemo)(function(){return w?(v==null?void 0:v.websites.length)||0:(o==null?void 0:o.websites.length)||0},[o==null?void 0:o.websites.length,w,v==null?void 0:v.websites.length]),L=(o==null?void 0:o.websites)||[],V=(0,t.useCallback)(function(s){x.replace(b.pathname+"?"+z().stringify({q:s}))},[x,b.pathname]),O=(0,t.useCallback)((0,B.Z)(h().mark(function s(){var r,l,d,P=arguments;return h().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:for(r=P.length,l=new Array(r),d=0;d<r;d++)l[d]=P[d];console.log(l);case 2:case"end":return F.stop()}},s)})),[]),W=(0,t.useCallback)(function(s){return(0,B.Z)(h().mark(function r(){var l,d;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l="\u786E\u5B9A\u5220\u9664\u9009\u4E2D\u7684, \u5171 ".concat(s.length," \u4E2A\u6D3B\u52A8\u5417\uFF1F"),c.next=3,a.u_.confirm({title:"\u786E\u5B9A\u5220\u9664",content:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{className:"tip-confirm",children:l}),(0,e.jsx)("p",{children:"\u5220\u9664\u7684\u64CD\u4F5C\u4E0D\u53EF\u9006,\u8BF7\u8C28\u614E\u64CD\u4F5C"})]}),okClassName:"btn-danger",okText:"\u5220\u9664"});case 3:if(d=c.sent,d.isConfirmed){c.next=6;break}return c.abrupt("return");case 6:return c.next=8,O.apply(void 0,(0,S.Z)(s));case 8:a.FN.success("\u6D3B\u52A8\u6279\u91CF\u5220\u9664\u6210\u529F",2e3,{placement:"bottom-start",progressBar:!0});case 9:case"end":return c.stop()}},r)}))},[O]),q=(0,t.useMemo)(function(){return function(s){return(0,e.jsx)("div",{children:(0,e.jsx)(a.zx,{color:"success",onClick:W(s),variant:!1,children:"\u6279\u91CF\u5220\u9664"})})}},[W]);return console.log("layout",N),(0,e.jsxs)(J.v,{header:{},loading:w,footer:!1,children:[(0,e.jsxs)("div",{className:"d-flex flex-wrap flex-stack pb-7",children:[(0,e.jsx)("div",{className:"d-flex flex-wrap align-items-center",children:(0,e.jsx)(a.II.Search,{onSearch:V,defaultValue:(m=g.filter)===null||m===void 0?void 0:m.name_contains,placeholder:"\u641C\u7D22",className:"border-body bg-body w-250px"})}),(0,e.jsx)(H.Z,{onLayout:i,layout:N,children:(0,e.jsx)("div",{className:"d-flex my-0"})})]}),!Y&&!w?(0,e.jsx)(a.Zb,{className:"mb-5 mb-xl-10",children:(0,e.jsx)(a.HY,{title:"\u8FD8\u6CA1\u6709\u6D3B\u52A8",description:"\u9A6C\u4E0A\u6DFB\u52A0\u4E00\u4E2A\u6D3B\u52A8\u8BD5\u8BD5",image:"/assets/media/illustrations/sigma-1/4.png",children:(0,e.jsx)(a.zx,{as:T.Link,variant:"primary",to:"/website/landing/pages/new",children:"\u65B0\u5EFA\u6D3B\u52A8"})})}):(0,e.jsxs)(e.Fragment,{children:[N=="card"?(0,e.jsx)(a.X2,{gutter:{default:6,xl:9},children:L.map(function(s){return(0,e.jsx)(a.JX,{md:6,xl:4,children:(0,e.jsxs)(a.Zb,{as:"a",to:"/websites/".concat(s.id),className:"border-hover-primary",children:[(0,e.jsxs)(a.Zb.Header,{border:!1,className:"pt-9",children:[(0,e.jsx)(a.Zb.Title,{className:"m-0",children:(0,e.jsx)(a.mN.Avatar,{size:50,labelClassName:"fs-2",className:"bg-light",src:"/assets/media/svg/brand-logos/plurk.svg",gap:3})}),(0,e.jsx)(a.Zb.Toolbar,{children:(0,e.jsx)(a.Ct,{lightStyle:"primary",className:"fw-bolder me-auto px-4 py-3",children:"In Progress"})})]}),(0,e.jsxs)(a.Zb.Body,{className:"p-9",children:[(0,e.jsx)("div",{className:"fs-3 fw-bolder text-dark",children:s.name}),(0,e.jsx)("p",{className:"text-gray-400 fw-bold fs-5 mt-1 mb-7",children:s.description}),(0,e.jsxs)("div",{className:"d-flex flex-wrap mb-5",children:[(0,e.jsxs)("div",{className:"border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 me-7 mb-3",children:[(0,e.jsx)("div",{className:"fs-6 text-gray-800 fw-bolder",children:"Sep 22, 2021"}),(0,e.jsx)("div",{className:"fw-bold text-gray-400",children:"Due Date"})]}),(0,e.jsxs)("div",{className:"border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 mb-3",children:[(0,e.jsx)("div",{className:"fs-6 text-gray-800 fw-bolder",children:"$284,900.00"}),(0,e.jsx)("div",{className:"fw-bold text-gray-400",children:"Budget"})]})]}),(0,e.jsx)(a.u,{title:"This project 50% completed",children:(0,e.jsx)("div",{className:"h-4px w-100 bg-light mb-5",children:(0,e.jsx)(a.Ex,{percent:50})})}),(0,e.jsxs)(a.mN.Group,{maxCount:5,children:[(0,e.jsx)(a.mN.Avatar,{labelClassName:"fs-2",size:35,shape:"circle",src:"/assets/media/avatars/150-1.jpg"}),(0,e.jsx)(a.mN.Avatar,{labelClassName:"fs-2",size:35,shape:"circle",src:"/assets/media/avatars/150-2.jpg"}),(0,e.jsx)(a.mN.Avatar,{labelClassName:"fs-2",size:35,shape:"circle",alt:"Susan Redwood"})]})]})]})},s.id)})}):(0,e.jsx)(a.Zb,{className:"mb-5 mb-xl-10",children:(0,e.jsx)(a.Zb.Body,{children:(0,e.jsx)(a.iA,{hover:!0,rowKey:"id",noRowsRenderer:function(){return(0,e.jsx)(a.HY,{description:"\u5217\u8868\u6570\u636E\u4E3A\u7A7A",image:"/assets/media/illustrations/sigma-1/5.png"})},rowSelection:{type:"checkbox",renderTitle:function(r){return(0,e.jsxs)(e.Fragment,{children:["\u5DF2\u9009\u4E2D",(0,e.jsx)("span",{className:"mx-2",children:r}),"\u4E2A\u6D3B\u52A8"]})},toolbar:q},columns:[{key:"name",title:"\u540D\u79F0",sorter:!0,sortOrder:I.field=="name"?I.order:void 0,render:function(r,l){return(0,e.jsx)("div",{className:"ps-2",children:(0,e.jsx)(T.Link,{className:"text-gray-700",to:"/website/landing/pages/".concat(l.id),children:r})})}},{key:"stores",title:"\u95E8\u5E97",render:function(r){return(0,e.jsxs)("div",{className:"d-flex tw-truncate overflow-hidden pe-2",children:[(0,e.jsx)("span",{className:"tw-text-ellipsis tw-truncate overflow-hidden",children:r.map(function(l){return l.name}).join(",")}),(0,e.jsxs)("span",{children:["\u5171 ",r.length," \u5BB6\u95E8\u5E97"]})]})}},{key:"poster",title:"\u6D77\u62A5",width:80,render:function(r){return r!=null&&r.background?(0,e.jsx)("div",{className:"d-flex w-30px justify-content-center",children:(0,e.jsx)("img",{src:"//47.103.119.188:8000"+"/preview/".concat(r.background.id),className:"h-30px w-20px"})}):(0,e.jsx)(R.JO,{className:"svg-icon-2qx text-muted",name:"Bootstrap/file-image"})}},{key:"actions",title:"\u64CD\u4F5C",width:100,render:function(r,l){return(0,e.jsx)(G,{onDelete:O,onShowQRCode:E,history:u.history,data:l})}}],dataSource:L})})}),(0,e.jsxs)(a.u_,{title:"\u9884\u89C8\u4E8C\u7EF4\u7801",dialogClassName:"w-250px",onCancel:j,visible:!!p,children:[(0,e.jsx)("div",{className:"d-inline-block",children:!!p&&(0,e.jsx)(Z.Qd,{size:200,value:p})}),(0,e.jsx)("span",{children:"\u4F7F\u7528\u624B\u673A\u626B\u7801\u4E8C\u7EF4\u7801\u9884\u89C8"})]})]})]})}k.default=X}}]);

var $=Object.prototype.hasOwnProperty;var R=Object.getOwnPropertySymbols,H=Object.prototype.propertyIsEnumerable;var D=Object.assign;var U=(l,d)=>{var t={};for(var i in l)$.call(l,i)&&d.indexOf(i)<0&&(t[i]=l[i]);if(l!=null&&R)for(var i of R(l))d.indexOf(i)<0&&H.call(l,i)&&(t[i]=l[i]);return t};(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[6891,3975],{33201:function(){},34106:function(l,d,t){"use strict";t.d(d,{GP:function(){return i.Z},Hk:function(){return C.ZP}});var i=t(48655),c=t(39981),C=t(21428),y=t(53851)},17731:function(l,d,t){"use strict";t.r(d),t.d(d,{default:function(){return T}});var i=t(2824),c=t(67294),C=t(11849),y=t(28865),B=t(51615),O=t(73727),r=t(51186),j=t(25496),e=t(85893);function A(a,s){return a.children&&a.children.length?(0,e.jsx)(r.v2.SubMenu,{url:"/websites/".concat(s,"/cms/categories/").concat(a.id,"/articles"),bullet:!0,icon:a.icon,title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{className:"flex-row-fluid",children:a.name}),(0,e.jsx)(r.u,{title:"\u680F\u76EE\u8BBE\u7F6E",children:(0,e.jsx)("div",{children:(0,e.jsx)(O.Link,{onClick:function(m){return m.stopPropagation()},className:"category-setting me-2 text-primary",to:"/websites/".concat(s,"/cms/categories/").concat(a.id),children:(0,e.jsx)(y.JO,{name:"Bootstrap/gear",className:"svg-icon-primary"})})})})]}),children:(a.children||[]).map(function(u){return A(u,s)})},"category_".concat(a.id)):(0,e.jsx)(r.v2.Item,{url:"/websites/".concat(s,"/cms/categories/").concat(a.id,"/articles"),bullet:!0,icon:a.icon,title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{className:"flex-row-fluid",children:a.name}),(0,e.jsx)(r.u,{title:"\u680F\u76EE\u8BBE\u7F6E",children:(0,e.jsx)(O.Link,{onClick:function(m){return m.stopPropagation()},className:"category-setting me-4 text-primary",to:"/websites/".concat(s,"/cms/categories/").concat(a.id),children:(0,e.jsx)(y.JO,{name:"Bootstrap/gear",className:"svg-icon-primary"})})})]})},"category_".concat(a.id))}function N(a){var s=a.id,u=a.location,m=a.loading,g=a.website,p=(0,B.k6)(),v=(0,c.useMemo)(function(){return(0,j.G_)(a.categories.map(function(n){return(0,C.Z)({},n)}),{idKey:"id",childrenKey:"children",pidKey:"parent.id",sort:function(Z,k){return Z.index-k.index}})},[a.categories]),E=(0,c.useMemo)(function(){var n=(0,B.LX)(u.pathname,{path:"/websites/:sid/cms/categories/:cid",exact:!1,strict:!0});return n?"category_".concat(n.params.cid):"my-drive"},[u.pathname]),b=(0,c.useState)(E),f=(0,i.Z)(b,2),h=f[0],P=f[1],S=(0,c.useState)(v.map(function(n){return n.id})),M=(0,i.Z)(S,2),I=M[0],o=M[1];(0,c.useEffect)(function(){!E||P(E)},[E]);var L=(0,c.useCallback)(function(n){console.log("selectedKey",n.key),P(n.key)},[]),w=(0,c.useCallback)(function(){var n;h.startsWith("category_")&&(n=h.split("_")[1]),p.push("/websites/".concat(s,"/cms/categories/new")+(n?"?parent_category_id=".concat(n):""))},[p,s,h]),F=(0,c.useCallback)(function(n){o(n)},[]);return(0,c.useEffect)(function(){o(v.map(function(n){return"category_".concat(n.id)}))},[v.map(function(n){return n.id}).join(",")]),(0,e.jsxs)(r.bH,{zIndex:10,className:"my-5 p-5",overlayClassName:"bg-white bg-opacity-25",loading:!1,children:[(0,e.jsx)("div",{children:(0,e.jsx)("h1",{className:"text-gray-800 fw-bold mx-5",children:(g==null?void 0:g.name)||" "})}),(0,e.jsxs)(r.v2,{fit:!0,accordion:!1,selectable:"AllMenu",className:"menu-title-gray-600 menu-icon-gray-400 menu-state-primary menu-state-icon-primary menu-state-bullet-primary menu-arrow-gray-500 fw-bold fs-6 px-6 my-5 my-lg-0",selectedKeys:h?[h]:[],onSelect:L,openKeys:I,onOpenChange:F,children:[(0,e.jsx)(r.v2.Section,{className:"pt-8 pb-2",title:"\u7F51\u7AD9\u7BA1\u7406"},"website-manage-section"),(0,e.jsx)(r.v2.Item,{bullet:!0,icon:"",title:"\u7F51\u7AD9\u5217\u8868",url:""},"websites"),(0,e.jsxs)(r.v2.Section,{className:"pt-8 pb-0 d-flex align-items-center",children:[(0,e.jsxs)("span",{className:"menu-section text-muted text-uppercase fs-8 ls-1 flex-row-fluid",children:["\u680F\u76EE ",m&&" - loading..."]}),(0,e.jsx)(r.zx,{icon:(0,e.jsx)(y.JO,{style:{marginRight:".2rem"},name:"Duotune/arr087",className:""}),size:"sm",variant:"white",className:"py-1 px-3 me-n4",onClick:w,children:"\u65B0\u589E"})]}),v.map(function(n){return A(n,s)}),(0,e.jsx)(r.v2.Section,{children:"\u8BBE\u7F6E"}),(0,e.jsx)(r.v2.Item,{bullet:!0,icon:"",title:"\u901A\u7528\u8BBE\u7F6E",url:"/websites/".concat(s,"/settings/general")},"settings_general"),(0,e.jsx)(r.v2.Item,{bullet:!0,icon:"",title:"\u5BFC\u822A\u83DC\u5355",url:"/websites/".concat(s,"/settings/navigation")},"settings_navigation")]})]})}var _=N,K=t(81303),W=t(34106);function x(a){var s=a.match,u=a.children,m=a.location,g=s.params.sid,p=(0,K._$)({fetchPolicy:"cache-and-network",variables:{id:g}}),v=p.data,E=p.loading,b=v==null?void 0:v.website,f=b==null?void 0:b.channel.id,h=(0,K.v7)({fetchPolicy:"cache-and-network"}),P=(0,i.Z)(h,2),S=P[0],M=P[1],I=M.data,o=I===void 0?{categories:[]}:I,L=M.loading,w=(0,c.useMemo)(function(){return!(o!=null&&o.categories)||!o.categories.length?[]:o.categories},[o==null?void 0:o.categories]);return(0,c.useEffect)(function(){!f||S({variables:{id:f}})},[S,f]),(0,e.jsxs)(W.Hk,{className:"micro-app-website",children:[(0,e.jsx)(W.Hk.Sidebar,{children:(0,e.jsx)(_,{website:b,categories:w,location:m,id:s.params.sid,loading:E||L})}),f&&!L&&c.Children.map(u,function(F){return F.props.location.state={rootCategoryId:f,categories:w,baseUrl:"/websites/"+g},F})]})}var T=x},77104:function(l,d,t){"use strict";var i=t(94184),c=t.n(i),C=t(67294),y=t(70861),B=t(76792),O=t(85893);const r={variant:"primary",active:!1,disabled:!1},j=C.forwardRef((a,T)=>{var{as:e,bsPrefix:A,variant:N,size:_,active:K,className:W}=a,x=U(a,["as","bsPrefix","variant","size","active","className"]);const s=(0,B.vE)(A,"btn"),[u,{tagName:m}]=(0,y.FT)(D({tagName:e},x)),g=m;return(0,O.jsx)(g,D(D(D({},u),x),{ref:T,className:c()(W,s,K&&"active",N&&`${s}-${N}`,_&&`${s}-${_}`,x.href&&x.disabled&&"disabled")}))});j.displayName="Button",j.defaultProps=r,d.Z=j}}]);

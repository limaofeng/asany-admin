(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[5190],{15190:function(ie,Q,u){"use strict";u.r(Q),u.d(Q,{default:function(){return oe}});var ce=u(3515),K=u(86288),z=u(39428),V=u(93224),X=u(3182),M=u(2824),E=u(11849),F=u(67294),U=u(94184),W=u.n(U),a=u(51186),e=u(85893);function H(p){var r,g,l,s,o,v,Z=(0,F.useCallback)(function(){var d,i,h;window.open("http://47.103.119.188:8001/designer?id="+((d=p.category)===null||d===void 0||(i=d.page)===null||i===void 0||(h=i.component)===null||h===void 0?void 0:h.id),"_blank")},[(r=p.category)===null||r===void 0||(g=r.page)===null||g===void 0||(l=g.component)===null||l===void 0?void 0:l.id]),T=(0,F.useCallback)(function(d){console.log(d.target.checked)},[]),k=(s=p.category)===null||s===void 0||(o=s.page)===null||o===void 0||(v=o.component)===null||v===void 0?void 0:v.template;return(0,e.jsxs)("div",{className:"d-flex flex-column gap-7 gap-lg-10",children:[(0,e.jsxs)(a.Zb,{flush:!0,className:"py-4",title:"\u66F4\u591A\u529F\u80FD",bodyClassName:"pt-0",children:[(0,e.jsx)(a.l0.Item,{valuePropName:"checked",className:"mb-8",name:"xx",children:(0,e.jsx)(a.XZ,{value:"1",solid:!0,label:"\u542F\u7528\u8BC4\u8BBA"})}),(0,e.jsx)(a.l0.Item,{valuePropName:"checked",className:"mb-8",name:"x2",children:(0,e.jsx)(a.XZ,{value:"1",solid:!0,label:"\u5141\u8BB8\u6536\u85CF"})}),(0,e.jsx)(a.l0.Item,{valuePropName:"checked",className:"mb-8",name:["page","enabled"],children:(0,e.jsx)(a.XZ,{onChange:T,value:"1",solid:!0,className:"align-items-start",inputClassName:"mt-1",children:(0,e.jsxs)("div",{className:"d-flex flex-column",children:[(0,e.jsx)("div",{children:"\u81EA\u5B9A\u4E49\u680F\u76EE\u9875"}),(0,e.jsx)("div",{className:"form-item-help",children:"\u914D\u7F6E\u5355\u72EC\u7684\u5C55\u793A\u9875\u9762"})]})})})]}),(0,e.jsx)(a.l0.Item,{dependencies:[["page","enabled"]],noStyle:!0,children:function(i){var h=i.getFieldValue(["page","enabled"]);return h?(0,e.jsxs)(a.Zb,{flush:!0,className:"py-4",title:"\u81EA\u5B9A\u4E49\u680F\u76EE\u9875",bodyClassName:"pt-0",children:[(0,e.jsx)(a.l0.Item,{className:"mb-6 mw-400px",name:["page","route","path"],label:"\u8BBF\u95EE\u5730\u5740",children:(0,e.jsx)(a.II,{})}),(0,e.jsx)(a.l0.Item,{className:"mb-6",name:["page","component","template"],label:"\u9875\u9762\u6A21\u7248",children:(0,e.jsx)(a.ub,{width:400,options:[{value:"cn.asany.ui.theme.canvas.Page",label:"\u666E\u901A\u680F\u76EE\u9875"},{value:"cn.asany.ui.theme.canvas.Page1",label:"\u5B9A\u5236\u6A21\u7248"}]})}),(0,e.jsx)(a.l0.Item,{dependencies:[["page","component","template"]],noStyle:!0,children:function(){var C=i.getFieldValue(["page","component","template"]),t=!C||k!=C;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(a.zx,{onClick:Z,disabled:t,children:"\u53BB\u914D\u7F6E\u9875\u9762"}),t&&(0,e.jsx)("div",{className:"form-item-help",children:"\u5207\u6362\u6A21\u7248\u540E\uFF0C\u9700\u8981\u5148\u4FDD\u5B58"})]})}})]}):(0,e.jsx)(e.Fragment,{})}})]})}var L=H;function J(){return(0,e.jsx)("div",{className:"d-flex flex-column gap-7 gap-lg-10",children:(0,e.jsxs)(a.Zb,{flush:!0,className:"py-4",title:"\u901A\u7528",bodyClassName:"pt-0",children:[(0,e.jsx)(a.l0.Item,{className:"mb-8",name:"name",label:"\u540D\u79F0",required:!0,help:"\u540D\u79F0\u662F\u5FC5\u9700\u7684\uFF0C\u5EFA\u8BAE\u662F\u552F\u4E00\u7684",rules:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(a.II,{placeholder:"\u680F\u76EE\u540D\u79F0",className:"mw-400px"})}),(0,e.jsx)(a.l0.Item,{name:"description",label:"\u63CF\u8FF0",help:"\u4E3A\u680F\u76EE\u8BBE\u7F6E\u63CF\u8FF0\u4EE5\u83B7\u5F97\u66F4\u597D\u7684\u53EF\u89C1\u6027\u3002",children:(0,e.jsx)(a.Bn,{className:"h-300px"})})]})})}var Y=J,q=u(5618);function _(){return(0,e.jsx)("div",{className:"d-flex flex-column gap-7 gap-lg-10",children:(0,e.jsxs)(a.Zb,{flush:!0,className:"py-4",title:"SEO",bodyClassName:"pt-0",children:[(0,e.jsx)(a.l0.Item,{name:["meta","seo","title"],className:"mb-8",label:"\u6807\u9898",help:"\u8BBE\u7F6E\u5143\u6570\u636E\u6807\u9898, \u5EFA\u8BAE\u5173\u952E\u8BCD\u8981\u7B80\u5355, \u51C6\u786E",children:(0,e.jsx)(a.II,{className:"mw-400px"})}),(0,e.jsx)(a.l0.Item,{name:["meta","seo","description"],className:"mb-8",label:"\u63CF\u8FF0",help:"\u8BBE\u7F6E\u5143\u6570\u636E\u63CF\u8FF0, \u4EE5\u63D0\u9AD8\u6392\u540D",children:(0,e.jsx)(a.Bn,{className:"h-300px"})}),(0,e.jsx)(a.l0.Item,{name:["meta","seo","keywords"],label:"\u5173\u952E\u5B57",help:(0,e.jsxs)(e.Fragment,{children:["\u8BBE\u7F6E\u680F\u76EE\u76F8\u5173\u7684\u5173\u952E\u5B57\u5217\u8868\u3002\u901A\u8FC7\u5728\u6BCF\u4E2A\u5173\u952E\u5B57\u4E4B\u95F4\u6DFB\u52A0",(0,e.jsx)("code",{children:","}),"\u6765\u5206\u9694\u5173\u952E\u5B57"]}),children:(0,e.jsx)(q.ZP,{className:"form-control"})})]})})}var ee=_,me=u(64219),ae=u(16477),I=u(8845);function ue(p){var r=p.categoryTreeData,g=(0,I.St)(),l=g.data,s=(l==null?void 0:l.articleStoreTemplates)||[];return(0,e.jsxs)("div",{className:"d-flex flex-column gap-7 gap-lg-10 w-100 w-lg-300px mb-7 me-lg-10",children:[(0,e.jsxs)(a.Zb,{flush:!0,className:"py-4",title:"\u7F29\u7565\u56FE",bodyClassName:"text-center pt-0",children:[(0,e.jsx)(a.l0.Item,{name:"image",children:(0,e.jsx)(a.gq.Image,{width:150,height:150,className:"mb-3",space:"orX8kLOV",accept:".png, .jpg, .jpeg",crop:{height:300,zoomable:!1,aspectRatio:1},backgroundImage:"/assets/media/svg/files/blank-image.svg"})}),(0,e.jsx)("div",{className:"text-muted fs-7",children:"\u8BBE\u7F6E\u680F\u76EE\u7F29\u7565\u56FE\u3002\u4EC5\u63A5\u53D7 *.png\u3001*.jpg \u548C *.jpeg \u683C\u5F0F\u7684\u56FE\u7247"})]}),(0,e.jsx)(a.Zb,{flush:!0,className:"py-4",title:"\u4E0A\u7EA7\u680F\u76EE",children:(0,e.jsxs)(a.Zb.Body,{className:"pt-0",children:[(0,e.jsx)(a.l0.Item,{className:"mb-3",name:"parent",children:(0,e.jsx)(ae.Z,{style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:r,placeholder:"\u9009\u62E9\u4E0A\u7EA7\u680F\u76EE, \u9ED8\u8BA4\u6839\u680F\u76EE",treeDefaultExpandAll:!0,allowClear:!0,transitionName:""})}),(0,e.jsx)("div",{className:"text-muted fs-7",children:"\u9009\u62E9\u4E0A\u7EA7\u680F\u76EE,\u672A\u9009\u62E9\u5C06\u6DFB\u52A0\u5230\u6839\u76EE\u5F55"})]})}),(0,e.jsxs)(a.Zb,{flush:!0,className:"py-4",title:"\u5B58\u50A8\u6A21\u677F",bodyClassName:"pt-0",children:[(0,e.jsx)(a.l0.Item,{className:"mb-3",name:"storeTemplate",label:"\u9009\u62E9\u5B58\u50A8\u6A21\u677F",children:(0,e.jsx)(a.ub,{options:s.map(function(o){return{value:o.id,label:o.name}})})}),(0,e.jsx)("div",{className:"text-muted fs-7",children:"\u4ECE\u60A8\u5F53\u524D\u7684\u4E3B\u9898\u4E2D\u5206\u914D\u4E00\u4E2A\u6A21\u677F\u6765\u5B9A\u4E49\u680F\u76EE\u6587\u7AE0\u7684\u663E\u793A\u65B9\u5F0F"})]})]})}var le=ue,te=u(18071),se=u(25496),ne=["meta","page"];function re(p){var r=p.match,g=p.location.state,l=g.rootCategoryId,s=g.categories;console.log("rootCategoryId",l);var o=(0,I.WP)({fetchPolicy:"cache-and-network",variables:{id:r.params.id}}),v=o.data,Z=o.loading,T=(0,F.useMemo)(function(){return!s||!s.length?[]:(0,se.G_)(s.map(function(n){return(0,E.Z)((0,E.Z)({},n),{},{value:n.id,title:n.name})}),{idKey:"id",childrenKey:"children",pidKey:"parent.id",sort:function(c,m){return c.index-m.index}})},[s]),k=(0,I.Qu)(),d=(0,M.Z)(k,2),i=d[0],h=d[1].loading,f=a.l0.useForm(),C=(0,F.useCallback)((0,X.Z)((0,z.Z)().mark(function n(){var c,m,x,A,N,j,P,G,S,B,w,b,D,O,$,R;return(0,z.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,f.validateFields();case 2:for(A=y.sent,N=A.meta,j=A.page,P=(0,V.Z)(A,ne),G={seo_title:"single_line_text_field",seo_description:"multi_line_text_field",seo_keywords:"list.single_line_text_field"},S=[],B=0,w=Object.keys(N);B<w.length;B++)for(b=w[B],D=0,O=Object.keys(N[b]);D<O.length;D++)$=O[D],S.push({namespace:b,key:$,value:N[b][$],type:G[b+"_"+$]});return R=(0,E.Z)((0,E.Z)({},P),{},{page:{enabled:j.enabled,path:(c=j.route)===null||c===void 0?void 0:c.path,template:(m=j.component)===null||m===void 0?void 0:m.template,blocks:(x=j.component)===null||x===void 0?void 0:x.blocks},metafields:S}),y.next=12,i({variables:{id:r.params.id,input:R}});case 12:a.FN.success("\u680F\u76EE \u201C".concat(P.name,"\u201D \u4FEE\u6539\u6210\u529F"),2e3,{placement:"bottom-start",progressBar:!0});case 13:case"end":return y.stop()}},n)})),[f,r.params.id,i]),t=v==null?void 0:v.category;(0,F.useEffect)(function(){var n,c,m,x;!t||f.setFieldsValue((0,E.Z)((0,E.Z)({},t),{},{storeTemplate:(n=t.storeTemplate)===null||n===void 0?void 0:n.id,image:(c=t.image)===null||c===void 0?void 0:c.id,parent:((m=t.parent)===null||m===void 0?void 0:m.id)==l?null:(x=t.parent)===null||x===void 0?void 0:x.id}))},[t,f,l]);var de=(0,F.useCallback)(function(){history.back()},[]);return(0,e.jsx)(te.v,{loading:Z,header:{title:"\u7F16\u8F91\u680F\u76EE"},children:(0,e.jsxs)(a.l0,{form:f,className:"form d-flex flex-column flex-lg-row",children:[(0,e.jsx)(le,{categoryTreeData:T}),(0,e.jsxs)("div",{className:"d-flex flex-column flex-row-fluid gap-7 gap-lg-10",children:[(0,e.jsxs)(a.mQ,{defaultActiveKey:"general",renderContainer:!1,className:"border-0 fs-4 fw-bold mb-n2 nav-line-tabs-2x",children:[(0,e.jsx)(a.mQ.TabPane,{tab:"\u57FA\u672C\u4FE1\u606F",forceRender:!0,children:(0,e.jsx)(Y,{})},"general"),(0,e.jsx)(a.mQ.TabPane,{tab:"\u9AD8\u7EA7\u8BBE\u7F6E",forceRender:!0,children:(0,e.jsx)(L,{category:t})},"advanced"),(0,e.jsx)(a.mQ.TabPane,{tab:"\u5143\u6570\u636E",forceRender:!0,children:(0,e.jsx)(ee,{})},"metadata")]}),(0,e.jsx)(K.Z,{style:{zIndex:9},offsetBottom:16,children:(0,e.jsxs)("div",{className:W()("d-flex bg-body-color p-5 mx-4 tw-rounded-2xl justify-content-end"),children:[(0,e.jsx)(a.zx,{onClick:de,variant:"light",className:"me-5",children:"\u53D6\u6D88"}),(0,e.jsx)(a.zx,{onClick:C,loading:h,children:"\u4FDD\u5B58\u66F4\u6539"})]})})]})]})})}var oe=re}}]);

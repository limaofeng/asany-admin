var le=Object.prototype.hasOwnProperty;var J=Object.getOwnPropertySymbols,te=Object.prototype.propertyIsEnumerable;var O=Object.assign;var X=(b,C)=>{var t={};for(var p in b)le.call(b,p)&&C.indexOf(p)<0&&(t[p]=b[p]);if(b!=null&&J)for(var p of J(b))C.indexOf(p)<0&&te.call(b,p)&&(t[p]=b[p]);return t};(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[6030,3975],{33201:function(){},30098:function(b,C,t){"use strict";t.d(C,{G:function(){return w.Z}});var p=t(80064),w=t(48655),o=t(39981)},86328:function(b,C,t){"use strict";t.r(C),t.d(C,{default:function(){return re}});var p=t(91220),w=t(86582),o=t(67294),v=t(95551),A=t(51615),z=t(1861),i=t(28865),M=t(14928),U=t(3182),L=t(2824),K=t(94043),B=t.n(K),$=t(94184),P=t.n($),r=t(11974),W=t(54108),e=t(85893);function Z(d){return["zip"].includes(d.extension)?(0,e.jsx)(i.ZP,{name:"Bootstrap/file-zip-fill",className:"svg-icon-2x"}):d.mimeType.startsWith("image/")?(0,e.jsx)(i.ZP,{name:"Bootstrap/file-image-fill",className:"svg-icon-2x"}):d.mimeType.startsWith("video/")?(0,e.jsx)(i.ZP,{name:"Bootstrap/file-play-fill",className:"svg-icon-2x"}):(0,e.jsx)(i.ZP,{name:"Bootstrap/file-post-fill",className:"svg-icon-2x"})}function H(d){var s=d.file,n=(0,A.k6)(),m=(0,v.tT)("cloud-drive.index",function(u){return u.api.base}),c=(0,v.tT)("cloud-drive.index",function(u){return u.api.upload}),N=(0,o.useCallback)(function(){c.cancel(s.id)},[c,s.id]),l=(0,o.useCallback)(function(){m.closeTransfers(),n.push("/drive/folders/".concat(s.result.parentFolder.id))},[m,s.result,n]),h=(0,o.useCallback)(function(){c.start(s.id)},[c,s.id]),F=(0,o.useCallback)(function(){c.restore(s.id)},[c,s.id]),f=(0,o.useCallback)(function(){c.pause(s.id)},[c,s.id]),y=(0,o.useCallback)(function(){c.delete(s.id)},[c,s.id]);return(0,e.jsxs)("li",{className:P()("file-item",{"file-item-uploaded":["completed","error"].includes(s.state)}),children:[(0,e.jsx)("div",{className:"file-icon",children:Z(s)}),(0,e.jsxs)("div",{className:"file-details",children:[(0,e.jsx)("div",{className:"file-title",children:s.name}),(0,e.jsx)("div",{className:P()("file-transfer-progress progress",{"opacity-0":s.state=="completed"}),children:(0,e.jsx)(r.Ex,{color:"success",percent:s.progress})}),(0,e.jsxs)("div",{className:"file-status",children:[(0,e.jsx)("div",{className:"file-size",children:(0,W.jb)(s.size)}),s.state=="error"&&(0,e.jsx)("div",{className:"upload-error text-danger",children:"\u4E0A\u4F20\u51FA\u73B0\u9519\u8BEF!"}),!["completed","error"].includes(s.state)&&(0,e.jsx)("div",{className:"file-transfer-rate",children:s.progress==100?"\u7B49\u5F85\u5B8C\u6210...":!!s.uploadSpeed&&s.uploadSpeed+"/s"})]})]}),(0,e.jsxs)("div",{className:"file-actions",children:[s.state=="waiting"&&(0,e.jsx)(r.zx,{icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/clock",className:"svg-icon-4"})}),s.state=="uploading"&&(0,e.jsx)(r.zx,{onClick:f,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/pause",className:"svg-icon-4"})}),s.state=="paused"&&(0,e.jsx)(r.zx,{onClick:h,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/arrow-up-short",className:"svg-icon-4"})}),["canceled","error"].includes(s.state)&&(0,e.jsx)(r.zx,{onClick:F,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/arrow-counterclockwise",className:"svg-icon-4"})}),s.state=="completed"&&(0,e.jsx)(r.zx,{onClick:l,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/folder2",className:"svg-icon-6"})}),!["completed","canceled","error"].includes(s.state)&&(0,e.jsx)(r.zx,{onClick:N,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/x",className:"svg-icon-4"})}),["completed","canceled","error"].includes(s.state)&&(0,e.jsx)(r.zx,{onClick:y,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/eraser",className:"svg-icon-6"})})]})]},s.id)}function G(){var d=(0,v.tT)("cloud-drive.index",function(s){var n=s.state;return n.uploadFiles});return(0,e.jsx)(z.E,{className:P()("custom-scrollbar"),options:{scrollbars:{autoHide:"scroll"}},children:d.length?(0,e.jsx)("ul",{className:"transfer-file-list",children:d.map(function(s){return(0,e.jsx)(H,{file:s},s.id)})}):(0,e.jsxs)("div",{className:"transfer-list-empty",children:[(0,e.jsx)("img",{src:"/assets/media/illustrations/dozzy-1/4.png"}),(0,e.jsx)("span",{className:"empty-title",children:"\u6CA1\u6709\u4E0A\u4F20\u4EFB\u52A1"})]})})}function Q(d){var s=d.file,n=(0,v.tT)("cloud-drive.index",function(f){return f.api.download}),m=(0,o.useCallback)(function(){n.cancel(s.id)},[n,s.id]),c=(0,o.useCallback)(function(){n.save(s.id),console.log("\u672C\u5730\u4E0B\u8F7D")},[n,s.id]),N=(0,o.useCallback)(function(){n.start(s.id)},[n,s.id]),l=(0,o.useCallback)(function(){n.restore(s.id)},[n,s.id]),h=(0,o.useCallback)(function(){n.pause(s.id)},[n,s.id]),F=(0,o.useCallback)(function(){n.delete(s.id)},[n,s.id]);return(0,e.jsxs)("li",{className:P()("file-item",{"file-item-download":["completed","error"].includes(s.state)}),children:[(0,e.jsx)("div",{className:"file-icon",children:Z(s)}),(0,e.jsxs)("div",{className:"file-details",children:[(0,e.jsx)("div",{className:"file-title",children:s.name}),(0,e.jsx)("div",{className:P()("file-transfer-progress progress",{"opacity-0":s.state=="completed"}),children:(0,e.jsx)(r.Ex,{color:"primary",percent:s.progress})}),(0,e.jsxs)("div",{className:"file-status",children:[(0,e.jsx)("div",{className:"file-size",children:!!s.size&&(0,W.jb)(s.size)}),s.state=="error"&&(0,e.jsx)("div",{className:"upload-error text-danger",children:"\u4E0B\u8F7D\u51FA\u73B0\u9519\u8BEF!"}),!["completed","error"].includes(s.state)&&(0,e.jsx)("div",{className:"file-transfer-rate",children:s.progress==0||!s.size?"\u7B49\u5F85\u8D44\u6E90...":!!s.downloadSpeed&&s.downloadSpeed+"/s"})]})]}),(0,e.jsxs)("div",{className:"file-actions",children:[s.state=="waiting"&&(0,e.jsx)(r.zx,{icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/clock",className:"svg-icon-4"})}),s.state=="downloading"&&(0,e.jsx)(r.zx,{onClick:h,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/pause",className:"svg-icon-4"})}),s.state=="paused"&&(0,e.jsx)(r.zx,{onClick:N,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/arrow-down-short",className:"svg-icon-4"})}),["canceled","error"].includes(s.state)&&(0,e.jsx)(r.zx,{onClick:l,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/arrow-counterclockwise",className:"svg-icon-4"})}),s.state=="completed"&&(0,e.jsx)(r.zx,{onClick:c,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/download",className:"svg-icon-6"})}),!["completed","canceled","error"].includes(s.state)&&(0,e.jsx)(r.zx,{onClick:m,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/x",className:"svg-icon-4"})}),["completed","canceled","error"].includes(s.state)&&(0,e.jsx)(r.zx,{onClick:F,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/eraser",className:"svg-icon-6"})})]})]},s.id)}function Y(){var d=(0,v.tT)("cloud-drive.index",function(s){var n=s.state;return n.downloadFiles});return(0,e.jsx)(z.E,{className:P()("custom-scrollbar"),options:{scrollbars:{autoHide:"scroll"}},children:d.length?(0,e.jsx)("ul",{className:"transfer-file-list",children:d.map(function(s){return(0,e.jsx)(Q,{file:s},s.id)})}):(0,e.jsxs)("div",{className:"transfer-list-empty",children:[(0,e.jsx)("img",{src:"/assets/media/illustrations/dozzy-1/4.png"}),(0,e.jsx)("span",{className:"empty-title",children:"\u6CA1\u6709\u4E0B\u8F7D\u4EFB\u52A1"})]})})}function q(){var d=(0,o.useState)("upload"),s=(0,L.Z)(d,2),n=s[0],m=s[1],c=(0,o.useCallback)(function(u){m(u)},[]),N=(0,v.tT)("cloud-drive.index",function(u){return{deleteUploadFile:u.api.upload.delete,deleteDownloadFile:u.api.download.delete}}),l=(0,v.tT)("cloud-drive.index",function(u){var x=u.state;return x.uploadFiles.filter(function(g){return g.state=="completed"})}),h=(0,v.tT)("cloud-drive.index",function(u){var x=u.state;return x.downloadFiles.filter(function(g){return g.state=="completed"})}),F=(0,o.useCallback)((0,U.Z)(B().mark(function u(){var x,g,E;return B().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:x=(0,p.Z)(l),a.prev=1,x.s();case 3:if((g=x.n()).done){a.next=9;break}return E=g.value,a.next=7,N.deleteUploadFile(E.id);case 7:a.next=3;break;case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),x.e(a.t0);case 14:return a.prev=14,x.f(),a.finish(14);case 17:case"end":return a.stop()}},u,null,[[1,11,14,17]])})),[N,l]),f=(0,o.useCallback)((0,U.Z)(B().mark(function u(){var x,g,E;return B().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:x=(0,p.Z)(h),a.prev=1,x.s();case 3:if((g=x.n()).done){a.next=9;break}return E=g.value,a.next=7,N.deleteDownloadFile(E.id);case 7:a.next=3;break;case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),x.e(a.t0);case 14:return a.prev=14,x.f(),a.finish(14);case 17:case"end":return a.stop()}},u,null,[[1,11,14,17]])})),[N,h]),y=(0,o.useMemo)(function(){return!!l.length&&n=="upload"||!!h.length&&n=="download"},[n,l.length,h.length]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"popover-header",children:[(0,e.jsx)("span",{className:"popover-title",children:"\u4F20\u8F93\u5217\u8868"}),(0,e.jsx)("div",{className:"popover-toolbar",children:y&&(0,e.jsx)("a",{className:"cursor-pointer",onClick:n=="upload"?F:f,children:"\u6E05\u7A7A\u5DF2\u5B8C\u6210"})})]}),(0,e.jsxs)(r.mQ,{activeKey:n,onChange:c,tabPosition:"left",children:[(0,e.jsx)(r.mQ.TabPane,{tab:"\u6587\u4EF6\u4E0A\u4F20",children:(0,e.jsx)(G,{})},"upload"),(0,e.jsx)(r.mQ.TabPane,{tab:"\u6587\u4EF6\u4E0B\u8F7D",children:(0,e.jsx)(Y,{})},"download")]})]})}var _=q,ee=t(30098);function se(d){var s=d.drives,n=d.onAction,m=(0,v.tT)("cloud-drive.index",function(l){var h=l.state;return h.driveId}),c=(0,o.useCallback)(function(l){if(l.startsWith("drive-"))console.log(l);else return n(l),!1;return!0},[n]),N=(0,o.useMemo)(function(){return[].concat((0,w.Z)(s.map(function(l){return{value:"drive-".concat(l.id),label:l.name}})),[{type:"separator"},{value:"preferences",label:"\u504F\u597D\u8BBE\u7F6E"}])},[s]);return(0,e.jsx)("div",{className:"app-sidebar-footer",children:(0,e.jsx)(r.Ph,{onChange:c,placement:"topCenter",value:m?"drive-".concat(m):void 0,options:N})})}function ae(){var d=(0,v.tT)("cloud-drive.index",function(a){var j=a.state;return j.driveId}),s=(0,v.tT)("cloud-drive.index",function(a){var j=a.state;return j.visibleTransfers}),n=(0,v.tT)("cloud-drive.index",function(a){return a.api.base}),m=(0,A.$B)({path:"/drive/:type/:value",strict:!0,sensitive:!0}),c=(0,A.$B)({path:"/drive/:type",strict:!0,sensitive:!0}),N=(0,M.dH)({fetchPolicy:"cache-and-network"}),l=N.data,h=(0,v.tT)("cloud-drive.index",function(a){var j=a.state;return j.driveId}),F=(0,v.tT)("cloud-drive.index",function(a){return a.setCloudDrive});(0,o.useEffect)(function(){if(!!(l!=null&&l.cloudDrives)){var a=l==null?void 0:l.cloudDrives;a.some(function(j){return j.id==h})||F(a[0])}},[l==null?void 0:l.cloudDrives,F,h]);var f=(0,o.useMemo)(function(){if(!(!(l!=null&&l.cloudDrives)||!d))return l.cloudDrives.find(function(a){return a.id==d})},[l==null?void 0:l.cloudDrives,d]),y=(0,o.useMemo)(function(){return(m==null?void 0:m.params.type)||(c==null?void 0:c.params.type)},[m,c]),u=(0,o.useMemo)(function(){return m==null?void 0:m.params.value},[m]),x=(0,o.useCallback)(function(a){a?n.openTransfers():n.closeTransfers()},[n]),g=(0,o.useMemo)(function(){return u?y=="folders"?["my-drive"]:y=="mime-types"?[u]:[y]:[y]},[y,u]),E=(0,v.tT)("cloud-drive.index",function(a){var j=a.state,k=0,I=0,D=(0,p.Z)(j.uploadFiles),S;try{for(D.s();!(S=D.n()).done;){var T=S.value;k+=T.size,I+=T.size*(T.progress/100)}}catch(V){D.e(V)}finally{D.f()}return Math.max(I/k*100<<0,j.uploadFiles.length?1:0)}),R=(0,v.tT)("cloud-drive.index",function(a){var j=a.state,k=0,I=0,D=(0,p.Z)(j.downloadFiles),S;try{for(D.s();!(S=D.n()).done;){var T=S.value;k+=T.size,I+=T.size*(T.progress/100)}}catch(V){D.e(V)}finally{D.f()}return Math.max(I/k*100<<0,j.downloadFiles.length?1:0)});return(0,e.jsxs)(ee.G,{width:280,className:"app-sidebar app-drive-sidebar",children:[(0,e.jsxs)("div",{className:"relative mt-5 px-5 pt-5 d-flex",children:[(0,e.jsx)("h1",{className:"text-gray-800 flex-row-fluid fw-bold mb-6 mx-5",children:"\u4E91\u76D8"}),(0,e.jsx)(r.J2,{visible:s,onVisibleChange:x,overlayClassName:"dialog-transfers",content:(0,e.jsx)(_,{}),children:(0,e.jsxs)("div",{className:"file-transfer-icon",children:[(0,e.jsx)(r.mZ,{className:"download-all-progress position-absolute top-50 start-50 translate-middle",width:34,percent:R,strokeWidth:6,success:{strokeColor:"#04c8c8"}}),(0,e.jsx)(r.mZ,{className:"upload-all-progress position-absolute top-50 start-50 translate-middle",width:26,percent:E,strokeWidth:7.5,success:{strokeColor:"#009ef7"}}),(0,e.jsx)(r.GM,{size:"sm",pause:!R&&!E,children:(0,e.jsx)(i.ZP,{className:"svg-icon-6",name:"Duotune/arr032"})})]})})]}),(0,e.jsxs)(z.E,{className:"app-sidebar-body flex-column-fluid d-flex flex-column px-8 custom-scrollbar",options:{scrollbars:{autoHide:"scroll"}},children:[(0,e.jsxs)(r.v2,{className:"menu-title-gray-600 menu-icon-gray-400 menu-state-bg menu-state-primary menu-state-icon-primary menu-state-bullet-primary",accordion:!1,rounded:!0,selectable:"AllMenu",openKeys:["my-drive"],selectedKeys:g,children:[(0,e.jsxs)(r.v2.SubMenu,{url:"/drive/my-drive",titleClassName:"fw-bolder",icon:(0,e.jsx)(i.ZP,{className:"svg-icon-2 me-3",name:"Duotune/abs040"}),title:"\u6211\u7684\u6587\u4EF6",children:[(0,e.jsx)(r.v2.Item,{className:"mb-2 mt-2",url:"/drive/mime-types/image",titleClassName:"fw-bolder",icon:(0,e.jsx)(i.ZP,{className:"svg-icon-2 me-3",name:"Duotune/gen006"}),children:"\u56FE\u7247"},"image"),(0,e.jsx)(r.v2.Item,{className:"mb-2",url:"/drive/mime-types/document",titleClassName:"fw-bolder",icon:(0,e.jsx)(i.ZP,{className:"svg-icon-2 me-3",name:"Duotune/fil003"}),children:"\u6587\u6863"},"document"),(0,e.jsx)(r.v2.Item,{className:"mb-2",url:"/drive/mime-types/video",titleClassName:"fw-bolder",icon:(0,e.jsx)(i.ZP,{className:"svg-icon-2 me-3",name:"Duotune/arr027"}),children:"\u89C6\u9891"},"video"),(0,e.jsx)(r.v2.Item,{className:"mb-2",url:"/drive/mime-types/audio",titleClassName:"fw-bolder",icon:(0,e.jsx)(i.ZP,{className:"svg-icon-2 me-3",name:"Duotune/elc008"}),children:"\u97F3\u9891"},"audio"),(0,e.jsx)(r.v2.Item,{url:"/drive/mime-types/other",titleClassName:"fw-bolder",icon:(0,e.jsx)(i.ZP,{className:"svg-icon-2 me-3",name:"Duotune/gen052"}),children:"\u5176\u4ED6"},"other")]},"my-drive"),(0,e.jsx)(r.v2.Separator,{}),(0,e.jsx)(r.v2.Item,{className:"mb-2",url:"/drive/starred",titleClassName:"fw-bolder",icon:(0,e.jsx)(i.ZP,{className:"svg-icon-2 me-3",name:"Duotune/abs024"}),children:"\u6536\u85CF\u5939"},"starred"),(0,e.jsx)(r.v2.Item,{url:"/drive/trash",titleClassName:"fw-bolder",icon:(0,e.jsx)(i.ZP,{className:"svg-icon-2 me-3",name:"Duotune/gen027"}),children:"\u56DE\u6536\u7AD9"},"trash"),(0,e.jsx)(r.v2.Separator,{}),(0,e.jsx)(r.v2.Item,{url:"/drive/quota",titleClassName:"fw-bolder",icon:(0,e.jsx)(i.ZP,{className:"svg-icon-2 me-3",name:"Duotune/fil020"}),children:"\u5B58\u50A8\u7A7A\u95F4"},"quota")]}),(0,e.jsxs)("div",{className:"drive-quota d-flex align-items-center flex-column mb-10",children:[(0,e.jsx)("div",{className:"h-5px mx-3 w-100 bg-light mb-2",children:(0,e.jsx)("div",{className:"bg-success rounded h-5px",role:"progressbar",style:{width:"".concat((f==null?void 0:f.quota.usage)/(f==null?void 0:f.quota.size)*100,"%")}})}),(0,e.jsxs)("div",{className:"d-flex justify-content-between w-100 mt-auto mb-2",children:[(0,e.jsxs)("span",{className:"fw-bold fs-7 text-gray-400",children:["\u5DF2\u4F7F\u7528\xA0",f==null?void 0:f.quota.usageStr,", \xA0\u5171\xA0",f==null?void 0:f.quota.sizeStr]}),(0,e.jsx)("a",{className:"fw-bolder fs-7 text-success",children:"\u6269\u5BB9"})]})]})]}),(0,e.jsx)(se,{drives:(l==null?void 0:l.cloudDrives)||[],onAction:function(){}})]})}var re=ae},77104:function(b,C,t){"use strict";var p=t(94184),w=t.n(p),o=t(67294),v=t(70861),A=t(76792),z=t(85893);const i={variant:"primary",active:!1,disabled:!1},M=o.forwardRef((e,W)=>{var{as:U,bsPrefix:L,variant:K,size:B,active:$,className:P}=e,r=X(e,["as","bsPrefix","variant","size","active","className"]);const Z=(0,A.vE)(L,"btn"),[H,{tagName:G}]=(0,v.FT)(O({tagName:U},r)),Q=G;return(0,z.jsx)(Q,O(O(O({},H),r),{ref:W,className:w()(P,Z,$&&"active",K&&`${Z}-${K}`,B&&`${Z}-${B}`,r.href&&r.disabled&&"disabled")}))});M.displayName="Button",M.defaultProps=i,C.Z=M}}]);

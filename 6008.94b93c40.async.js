(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[6008],{26008:function(w,p,s){"use strict";s.r(p),s.d(p,{default:function(){return $}});var C=s(2824),n=s(67294),A=s(28865),S=s(1861),T=s(51615),I=s(39428),F=s(11849),Z=s(3182),z=s(94184),B=s.n(z),a=s(51186),D=s(64043),e=s(85893);function K(i){var d=i.visible,x=i.onClose,b=(0,n.useState)("settings"),h=(0,C.Z)(b,2),l=h[0],g=h[1],c=a.l0.useForm(),N=(0,D.Pw)(),v=(0,C.Z)(N,2),f=v[0],j=v[1].loading,y=(0,n.useCallback)(function(o){return function(){g(o)}},[]),E=(0,n.useCallback)((0,Z.Z)((0,I.Z)().mark(function o(){var t;return(0,I.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.validateFields();case 2:return t=r.sent,t.metadata.databaseTableName||(t.metadata.databaseTableName=t.code),r.next=6,f({variables:{input:(0,F.Z)((0,F.Z)({},t),{},{features:["master","system-fields"]})}});case 6:a.FN.success("\u6A21\u578B \u201C".concat(t.name,"\u201D \u65B0\u589E\u6210\u529F"),2e3,{placement:"bottom-start",progressBar:!0});case 7:case"end":return r.stop()}},o)})),[f,c]);return(0,e.jsxs)(a.u_,{confirmLoading:j,width:592,centered:!0,visible:d,closable:!1,onCancel:x,onOk:E,children:[(0,e.jsx)(a.u_.Header,{children:(0,e.jsx)("h4",{children:"\u521B\u5EFA\u6A21\u578B"})}),(0,e.jsx)(a.u_.Body,{children:(0,e.jsxs)(a.l0,{form:c,children:[(0,e.jsxs)("div",{className:"mb-5",children:[(0,e.jsx)(a.zx,{color:l!="settings"&&"gray-700",variant:l=="settings"?"light-primary":!1,activeColor:l=="settings"?"light-primary":"secondary",className:"me-4 px-5",onClick:y("settings"),children:"\u8BBE\u7F6E"}),(0,e.jsx)(a.zx,{color:l!="advanced"&&"gray-700",variant:l=="advanced"?"light-primary":!1,activeColor:l=="advanced"?"light-primary":"secondary",className:"me-4 px-5",onClick:y("advanced"),children:"\u9AD8\u7EA7"})]}),(0,e.jsxs)("div",{className:B()("modal-tabpane",{"d-none":l!="settings"}),children:[(0,e.jsx)(a.l0.Item,{required:!1,className:"mb-5",name:"name",label:"\u663E\u793A\u540D\u79F0",help:"\u914D\u7F6E\u6A21\u578B\u65F6\u663E\u793A\u7684\u540D\u79F0, \u901A\u5E38\u4E3A\u4E2D\u6587",rules:[{required:!0,message:"\u663E\u793A\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(a.II,{solid:!0})}),(0,e.jsx)(a.l0.Item,{required:!1,className:"my-5",name:"code",label:"\u7F16\u7801",help:"\u7528\u4E8E\u901A\u8FC7 API \u8BBF\u95EE\u6B64\u6A21\u578B\u7684 ID, \u4E0D\u80FD\u4E3A\u4E2D\u6587",rules:[{required:!0,message:"\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(a.II,{solid:!0})}),(0,e.jsx)(a.l0.Item,{className:"mt-5",name:"description",label:"\u63CF\u8FF0",help:"\u4E3A\u5185\u5BB9\u7F16\u8F91\u8005\u548C API \u7528\u6237\u663E\u793A\u63D0\u793A",requiredMark:"optional",children:(0,e.jsx)(a.II.TextArea,{solid:!0,autoSize:{maxRows:4,minRows:2}})})]}),(0,e.jsx)("div",{className:B()("modal-tabpane",{"d-none":l!="advanced"}),children:(0,e.jsx)(a.l0.Item,{className:"mb-5",name:["metadata","databaseTableName"],label:"\u8868\u540D",help:"\u6620\u5C04\u5230\u6570\u636E\u5E93\u4E2D\u7684\u8868\u540D",children:(0,e.jsx)(a.II,{solid:!0})})})]})})]})}var R=K,k=s(80590);function O(i){var d=i.location,x=i.history,b=i.children,h=(0,n.useState)(!1),l=(0,C.Z)(h,2),g=l[0],c=l[1],N=(0,D.wp)(),v=N.data,f=v||{},j=f.models,y=j===void 0?[]:j,E=(0,n.useCallback)(function(){c(!0)},[]),o=(0,n.useCallback)(function(){c(!1)},[]),t=d.state.baseUrl,m=t===void 0?"":t,r=(0,n.useCallback)(function(u){return function(){x.push("".concat(m,"/schema/models/").concat(u.id))}},[m,x]),M=(0,n.useMemo)(function(){var u=(0,T.LX)(d.pathname,{path:"".concat(m,"/schema/models/:mid"),exact:!0,strict:!0});return u?"model_"+u.params.mid:""},[m,d.pathname]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(k.Z,{className:"module_secondary_sidebar",width:260,children:(0,e.jsxs)("div",{className:"h-100",children:[(0,e.jsx)("div",{className:"mx-2 p-5 mt-5",children:(0,e.jsx)("h3",{className:"fw-bold text-dark mx-0 mb-0",children:"\u67B6\u6784"})}),(0,e.jsx)(S.E,{className:"d-flex h-100 flex-column custom-scrollbar",options:{scrollbars:{autoHide:"scroll"}},children:(0,e.jsxs)(a.v2,{className:"px-7 menu-state-bg menu-title-gray-600 menu-icon-gray-400 menu-state-primary menu-state-icon-primary menu-state-bullet-primary menu-arrow-gray-500 fw-bold fs-6 my-5 my-lg-0",selectedKeys:M?[M]:[],accordion:!1,selectable:"AllMenu",fit:!0,children:[(0,e.jsxs)(a.v2.Section,{className:"menu-section-container",sectionClassName:"d-flex align-items-center",children:[(0,e.jsx)("span",{className:"menu-section text-muted text-uppercase fs-8 ls-1 flex-row-fluid",children:"\u6A21\u578B "}),(0,e.jsx)(a.zx,{icon:(0,e.jsx)(A.JO,{style:{marginRight:".2rem"},name:"Duotune/arr087",className:""}),size:"sm",variant:"white",activeColor:"light",className:"px-3 me-n4",onClick:E,children:"\u65B0\u589E"})]}),y.map(function(u){return(0,e.jsx)(a.v2.Item,{onClick:r(u),children:u.name},"model_".concat(u.id))}),(0,e.jsx)(a.v2.Item,{children:"xxxx2"}),(0,e.jsx)(a.v2.Item,{children:"xxxx3"}),(0,e.jsxs)(a.v2.Section,{className:"menu-section-container",sectionClassName:"d-flex align-items-center",children:[(0,e.jsx)("span",{className:"menu-section text-muted text-uppercase fs-8 ls-1 flex-row-fluid",children:"\u679A\u4E3E1 "}),(0,e.jsx)(a.zx,{icon:(0,e.jsx)(A.JO,{style:{marginRight:".2rem"},name:"Duotune/arr087",className:""}),size:"sm",variant:"white",className:"px-3 me-n4",children:"\u65B0\u589E"})]}),(0,e.jsx)(a.v2.Item,{children:"xxxx1"}),(0,e.jsx)(a.v2.Item,{children:"xxxx2"}),(0,e.jsx)(a.v2.Item,{children:"xxxx3"})]})})]})}),(0,e.jsx)(R,{visible:g,onClose:o}),b]})}var $=O}}]);

(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[4188],{50480:function(U,N,n){"use strict";var w=n(28865),B=n(51248),i=n(85893);function _(b){var l=b.layout,A=b.children,h=b.onLayout;return(0,i.jsxs)("div",{className:"d-flex flex-wrap my-1",children:[l&&(0,i.jsxs)("ul",{className:"nav nav-pills me-6 mb-2 mb-sm-0",children:[(0,i.jsx)("li",{className:"nav-item m-0 me-3",children:(0,i.jsx)(B.Z,{variant:"light",color:"muted",active:l=="card",activeColor:"primary",onClick:h==null?void 0:h.bind(null,"card"),icon:(0,i.jsx)(w.ZP,{name:"Duotune/gen024",className:"svg-icon-1"})})}),(0,i.jsx)("li",{className:"nav-item m-0",children:(0,i.jsx)(B.Z,{variant:"light",color:"muted",active:l=="table",onClick:h==null?void 0:h.bind(null,"table"),activeColor:"primary",className:"me-3",icon:(0,i.jsx)(w.ZP,{name:"Duotune/abs015",className:"svg-icon-1"})})})]}),A]})}N.Z=_},64188:function(U,N,n){"use strict";n.r(N);var w=n(86582),B=n(93224),i=n(2824),_=n(39428),b=n(3182),l=n(67294),A=n(28865),h=n(84059),$=n(80129),z=n.n($),I=n(73727),Q=n(81303),H=n(50480),J=n(18071),a=n(51186),e=n(85893),G=["q"];function X(u){var v=u.data,j=u.history,p=u.onDelete,M=u.onShowQRCode,y=(0,l.useCallback)(function(){var x=(0,b.Z)((0,_.Z)().mark(function P(g){var O,E;return(0,_.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return O="\u786E\u5B9A\u5220\u9664\u6D3B\u52A8 \u201C".concat(g.name,"\u201D \u5417\uFF1F"),o.next=3,a.u_.confirm({title:"\u786E\u5B9A\u5220\u9664",content:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{className:"tip-confirm",children:O}),(0,e.jsx)("p",{children:"\u5220\u9664\u7684\u64CD\u4F5C\u4E0D\u53EF\u9006,\u8BF7\u8C28\u614E\u64CD\u4F5C"})]}),okClassName:"btn-danger",okText:"\u5220\u9664"});case 3:if(E=o.sent,E.isConfirmed){o.next=6;break}return o.abrupt("return");case 6:return o.next=8,p(g.id);case 8:a.FN.success("\u6D3B\u52A8 \u201C".concat(g.name,"\u201D \u5220\u9664\u6210\u529F"),2e3,{placement:"bottom-start",progressBar:!0});case 9:case"end":return o.stop()}},P)}));return function(P){return x.apply(this,arguments)}}(),[p]),C=(0,l.useCallback)(function(x){x.key=="view"?j.push("/website/landing/pages/".concat(v.id)):x.key=="delete"?y(v):x.key=="preview"&&M(location.protocol+"//47.103.119.188:8002/lps/"+v.id)},[v,y,j,M]);return(0,e.jsx)(a.Lt,{overlay:(0,e.jsxs)(a.v2,{onClick:C,className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold fs-8 w-125px py-4",children:[(0,e.jsx)(a.v2.Item,{className:"px-3",children:"\u7F16\u8F91"},"view"),(0,e.jsx)(a.v2.Separator,{}),(0,e.jsx)(a.v2.Item,{className:"px-3",children:"\u9884\u89C8"},"preview"),(0,e.jsx)(a.v2.Separator,{}),(0,e.jsx)(a.v2.Item,{className:"px-3 actions-delete",children:"\u5220\u9664"},"delete")]}),placement:"bottomRight",children:(0,e.jsxs)(a.zx,{className:"fs-8",variant:"light",activeColor:"light-primary",children:["\u64CD\u4F5C",(0,e.jsx)(A.JO,{className:"svg-icon-5 ms-2 me-n1",name:"Duotune/arr072"})]})})}function Y(u){var v,j=u.history,p=u.location,M=(0,l.useState)(),y=(0,i.Z)(M,2),C=y[0],x=y[1],P=(0,l.useCallback)(function(s){x(s)},[]),g=(0,l.useCallback)(function(){x(void 0)},[]),O=(0,l.useState)("card"),E=(0,i.Z)(O,2),F=E[0],o=E[1],D=(0,l.useMemo)(function(){var s=u.location.query,r=s.q,t=(0,B.Z)(s,G);return r&&(t.filter={name_contains:r}),t},[u.location]),W=(0,l.useMemo)(function(){if(!D.orderBy)return{order:"descend",field:"createdAt"};var s=D.orderBy.split("_"),r=(0,i.Z)(s,2),t=r[0],d=r[1];return{order:d=="desc"?"descend":"ascend",field:t}},[D.orderBy]),R=(0,Q.F6)({fetchPolicy:"cache-and-network",variables:D}),c=R.data,k=R.loading,f=R.previousData,V=(0,l.useMemo)(function(){return k?(f==null?void 0:f.websites.length)||0:(c==null?void 0:c.websites.length)||0},[c==null?void 0:c.websites.length,k,f==null?void 0:f.websites.length]),K=(c==null?void 0:c.websites)||[],q=(0,l.useCallback)(function(s){j.replace(p.pathname+"?"+z().stringify({q:s}))},[j,p.pathname]),T=(0,l.useCallback)((0,b.Z)((0,_.Z)().mark(function s(){var r,t,d,Z=arguments;return(0,_.Z)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:for(r=Z.length,t=new Array(r),d=0;d<r;d++)t[d]=Z[d];console.log(t);case 2:case"end":return L.stop()}},s)})),[]),S=(0,l.useCallback)(function(s){return(0,b.Z)((0,_.Z)().mark(function r(){var t,d;return(0,_.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return t="\u786E\u5B9A\u5220\u9664\u9009\u4E2D\u7684, \u5171 ".concat(s.length," \u4E2A\u6D3B\u52A8\u5417\uFF1F"),m.next=3,a.u_.confirm({title:"\u786E\u5B9A\u5220\u9664",content:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{className:"tip-confirm",children:t}),(0,e.jsx)("p",{children:"\u5220\u9664\u7684\u64CD\u4F5C\u4E0D\u53EF\u9006,\u8BF7\u8C28\u614E\u64CD\u4F5C"})]}),okClassName:"btn-danger",okText:"\u5220\u9664"});case 3:if(d=m.sent,d.isConfirmed){m.next=6;break}return m.abrupt("return");case 6:return m.next=8,T.apply(void 0,(0,w.Z)(s));case 8:a.FN.success("\u6D3B\u52A8\u6279\u91CF\u5220\u9664\u6210\u529F",2e3,{placement:"bottom-start",progressBar:!0});case 9:case"end":return m.stop()}},r)}))},[T]),ee=(0,l.useMemo)(function(){return function(s){return(0,e.jsx)("div",{children:(0,e.jsx)(a.zx,{color:"success",onClick:S(s),variant:!1,children:"\u6279\u91CF\u5220\u9664"})})}},[S]);return console.log("layout",F),(0,e.jsxs)(J.v,{header:{},loading:k,footer:!1,children:[(0,e.jsxs)("div",{className:"d-flex flex-wrap flex-stack pb-7",children:[(0,e.jsx)("div",{className:"d-flex flex-wrap align-items-center",children:(0,e.jsx)(a.II.Search,{onSearch:q,defaultValue:(v=D.filter)===null||v===void 0?void 0:v.name_contains,placeholder:"\u641C\u7D22",className:"border-body bg-body w-250px"})}),(0,e.jsx)(H.Z,{onLayout:o,layout:F,children:(0,e.jsx)("div",{className:"d-flex my-0"})})]}),!V&&!k?(0,e.jsx)(a.Zb,{className:"mb-5 mb-xl-10",children:(0,e.jsx)(a.HY,{title:"\u8FD8\u6CA1\u6709\u6D3B\u52A8",description:"\u9A6C\u4E0A\u6DFB\u52A0\u4E00\u4E2A\u6D3B\u52A8\u8BD5\u8BD5",image:"/assets/media/illustrations/sigma-1/4.png",children:(0,e.jsx)(a.zx,{as:I.Link,variant:"primary",to:"/website/landing/pages/new",children:"\u65B0\u5EFA\u6D3B\u52A8"})})}):(0,e.jsxs)(e.Fragment,{children:[F=="card"?(0,e.jsx)(a.X2,{gutter:{default:6,xl:9},children:K.map(function(s){return(0,e.jsx)(a.JX,{md:6,xl:4,children:(0,e.jsxs)(a.Zb,{as:"a",to:"/websites/".concat(s.id),className:"border-hover-primary",children:[(0,e.jsxs)(a.Zb.Header,{border:!1,className:"pt-9",children:[(0,e.jsx)(a.Zb.Title,{className:"m-0",children:(0,e.jsx)(a.mN.Avatar,{size:50,labelClassName:"fs-2",className:"bg-light",src:"/assets/media/svg/brand-logos/plurk.svg",gap:3})}),(0,e.jsx)(a.Zb.Toolbar,{children:(0,e.jsx)(a.Ct,{lightStyle:"primary",className:"fw-bolder me-auto px-4 py-3",children:"In Progress"})})]}),(0,e.jsxs)(a.Zb.Body,{className:"p-9",children:[(0,e.jsx)("div",{className:"fs-3 fw-bolder text-dark",children:s.name}),(0,e.jsx)("p",{className:"text-gray-400 fw-bold fs-5 mt-1 mb-7",children:s.description}),(0,e.jsxs)("div",{className:"d-flex flex-wrap mb-5",children:[(0,e.jsxs)("div",{className:"border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 me-7 mb-3",children:[(0,e.jsx)("div",{className:"fs-6 text-gray-800 fw-bolder",children:"Sep 22, 2021"}),(0,e.jsx)("div",{className:"fw-bold text-gray-400",children:"Due Date"})]}),(0,e.jsxs)("div",{className:"border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 mb-3",children:[(0,e.jsx)("div",{className:"fs-6 text-gray-800 fw-bolder",children:"$284,900.00"}),(0,e.jsx)("div",{className:"fw-bold text-gray-400",children:"Budget"})]})]}),(0,e.jsx)(a.u,{title:"This project 50% completed",children:(0,e.jsx)("div",{className:"h-4px w-100 bg-light mb-5",children:(0,e.jsx)(a.Ex,{percent:50})})}),(0,e.jsxs)(a.mN.Group,{maxCount:5,children:[(0,e.jsx)(a.mN.Avatar,{labelClassName:"fs-2",size:35,shape:"circle",src:"/assets/media/avatars/150-1.jpg"}),(0,e.jsx)(a.mN.Avatar,{labelClassName:"fs-2",size:35,shape:"circle",src:"/assets/media/avatars/150-2.jpg"}),(0,e.jsx)(a.mN.Avatar,{labelClassName:"fs-2",size:35,shape:"circle",alt:"Susan Redwood"})]})]})]})},s.id)})}):(0,e.jsx)(a.Zb,{className:"mb-5 mb-xl-10",children:(0,e.jsx)(a.Zb.Body,{children:(0,e.jsx)(a.iA,{hover:!0,rowKey:"id",noRowsRenderer:function(){return(0,e.jsx)(a.HY,{description:"\u5217\u8868\u6570\u636E\u4E3A\u7A7A",image:"/assets/media/illustrations/sigma-1/5.png"})},rowSelection:{type:"checkbox",renderTitle:function(r){return(0,e.jsxs)(e.Fragment,{children:["\u5DF2\u9009\u4E2D",(0,e.jsx)("span",{className:"mx-2",children:r}),"\u4E2A\u6D3B\u52A8"]})},toolbar:ee},columns:[{key:"name",title:"\u540D\u79F0",sorter:!0,sortOrder:W.field=="name"?W.order:void 0,render:function(r,t){return(0,e.jsx)("div",{className:"ps-2",children:(0,e.jsx)(I.Link,{className:"text-gray-700",to:"/website/landing/pages/".concat(t.id),children:r})})}},{key:"stores",title:"\u95E8\u5E97",render:function(r){return(0,e.jsxs)("div",{className:"d-flex tw-truncate overflow-hidden pe-2",children:[(0,e.jsx)("span",{className:"tw-text-ellipsis tw-truncate overflow-hidden",children:r.map(function(t){return t.name}).join(",")}),(0,e.jsxs)("span",{children:["\u5171 ",r.length," \u5BB6\u95E8\u5E97"]})]})}},{key:"poster",title:"\u6D77\u62A5",width:80,render:function(r){return r!=null&&r.background?(0,e.jsx)("div",{className:"d-flex w-30px justify-content-center",children:(0,e.jsx)("img",{src:"//api.asany.cn/graphql"+"/preview/".concat(r.background.id),className:"h-30px w-20px"})}):(0,e.jsx)(A.JO,{className:"svg-icon-2qx text-muted",name:"Bootstrap/file-image"})}},{key:"actions",title:"\u64CD\u4F5C",width:100,render:function(r,t){return(0,e.jsx)(X,{onDelete:T,onShowQRCode:P,history:u.history,data:t})}}],dataSource:K})})}),(0,e.jsxs)(a.u_,{title:"\u9884\u89C8\u4E8C\u7EF4\u7801",dialogClassName:"w-250px",onCancel:g,visible:!!C,children:[(0,e.jsx)("div",{className:"d-inline-block",children:!!C&&(0,e.jsx)(h.Qd,{size:200,value:C})}),(0,e.jsx)("span",{children:"\u4F7F\u7528\u624B\u673A\u626B\u7801\u4E8C\u7EF4\u7801\u9884\u89C8"})]})]})]})}N.default=Y}}]);

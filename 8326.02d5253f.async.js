(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[8326,3190],{48775:function(le,Q,r){"use strict";r.d(Q,{GP:function(){return d.Z},Hk:function(){return N}});var d=r(48655),c=r(39981),s=r(67294),P=r(94184),O=r.n(P),J=r(12788),Y=r(11849),$=r(28865),F=r(37334),ne=r(2824),z=r(96486),j=r(85893),se={aside:{minimize:!1,width:280}},_=s.createContext({state:se,dispatch:function(){}}),m;(function(l){l.AsideToggle="ASIDE_TOGGLE",l.AsideWidth="ASIDE_WIDTH"})(m||(m={}));function v(l,b){switch(b.type){case"ASIDE_TOGGLE":return l.aside.minimize=!l.aside.minimize,(0,Y.Z)({},l);case"ASIDE_WIDTH":return l.aside.width=b.payload,(0,Y.Z)({},l);default:throw new Error}}var n=function(b){var D=(0,s.useReducer)(v,(0,z.cloneDeep)(se)),k=(0,ne.Z)(D,2),o=k[0],p=k[1];return(0,j.jsx)(_.Provider,{value:{state:o,dispatch:p},children:b.children})},e=function(){return(0,s.useContext)(_)},q=r(38671),ee=r(8265);function x(l){var b=l.className,D=l.header,k=l.children,o=l.collapsible,p=o===void 0?!0:o,y=l.width,g=y===void 0?280:y,A=(0,ee.$Y)(),Z=e(),T=Z.dispatch;return(0,s.useEffect)(function(){A.aside.width(g+100),T({type:m.AsideWidth,payload:g})},[A.aside,T,g]),(0,j.jsxs)("div",{className:O()("app-aside aside",b),children:[(0,j.jsx)(F.Z,{children:(0,j.jsx)(d.Z,{header:D,resizeable:!0,className:"app-sidebar",children:k})}),p&&(0,j.jsx)(t,{className:"start-100 end-0"})]})}function t(l){var b=e(),D=b.dispatch,k=b.state.aside.minimize,o=(0,s.useCallback)(function(){D({type:m.AsideToggle})},[D]);return(0,j.jsx)(q.zx,{style:(0,Y.Z)({marginBottom:"1.35rem",zIndex:105},l.style),onClick:o,activeColor:"primary",className:O()("micro-app-aside-toggle","btn-icon bg-body btn-color-gray-700 rounded-2 position-absolute translate-middle bottom-0 shadow-sm d-none d-lg-flex",l.className,{active:k}),children:(0,j.jsx)($.JO,{name:"Duotune/arr063",className:"svg-icon-2 rotate-180"})})}x.Toggle=t;var u=x,a=J.ZP.div.withConfig({displayName:"MicroApp__MicroAppContainer",componentId:"sc-1dngjf6-0"})(["--root-aside-width:",";--met-aside-width:",";"],function(l){return l.minimize?"100px":"".concat(l.width,"px")},function(l){return l.minimize?"100px":"".concat(l.width,"px")});function f(l){var b=l.children,D=l.className,k=e(),o=k.state.aside,p=o.minimize,y=o.width,g=(0,s.useCallback)(function(A){A.preventDefault()},[]);return(0,j.jsx)(a,{minimize:p,width:y,className:O()("micro-app-container page-full-content",D,{"aside-minimize":p}),onContextMenu:g,children:b})}function M(l){var b=l.children,D=l.className;return(0,j.jsx)(n,{children:(0,j.jsx)(f,{className:D,children:b})})}M.Sidebar=u;var N=M,E=r(53851)},8265:function(le,Q,r){"use strict";r.d(Q,{$Y:function(){return ne},BK:function(){return z},aM:function(){return _}});var d=r(2824),c=r(11849),s=r(67294),P=r(85893),O=s.createContext({getState:function(){return{routes:[]}},subscribe:function(){},dispatch:function(){}}),J=function(v,n){return n?n.type==="ASIDE_MINIMIZE"?(0,c.Z)((0,c.Z)({},v),{},{aside:(0,c.Z)((0,c.Z)({},v.aside),{},{minimize:!!n.payload})}):n.type==="ASIDE_WIDTH"?(0,c.Z)((0,c.Z)({},v),{},{aside:(0,c.Z)((0,c.Z)({},v.aside),{},{width:n.payload})}):n.type==="ASIDE_COLLAPSIBLE"?(0,c.Z)((0,c.Z)({},v),{},{aside:(0,c.Z)((0,c.Z)({},v.aside),{},{collapsible:n.payload})}):v:v},Y=function(v){return(0,c.Z)({},v)};function $(m){var v=(0,s.useReducer)(J,m,Y),n=(0,d.Z)(v,2),e=n[0],q=n[1],ee=(0,s.useState)([]),x=(0,d.Z)(ee,1),t=x[0],u=function(D){return function(){var k=t.indexOf(D);k>-1&&t.splice(k,1)}},a=(0,s.useCallback)(function(b){return t.unshift(b),u(b)},[t]),f=(0,s.useCallback)(function(){t.forEach(function(b){return b()})},[t]),M={getState:function(){return e},dispatch:q,subscribe:a},N=(0,s.useState)(M),E=(0,d.Z)(N,1),l=E[0];return(0,s.useEffect)(function(){l.getState=function(){return e},f()},[e]),l}var F=function(v,n){return v===n};function ne(){var m=(0,s.useContext)(O),v=(0,s.useRef)({aside:{get state(){return m.getState().aside},width:function(e){m.dispatch({type:"ASIDE_WIDTH",payload:e})},minimize:function(e){m.dispatch({type:"ASIDE_MINIMIZE",payload:e})},collapsible:function(e){m.dispatch({type:"ASIDE_COLLAPSIBLE",payload:e})}}});return v.current}function z(m){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:F;return j(m,v)}function j(m){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:F,n=(0,s.useContext)(O),e=(0,s.useReducer)(function(a){return a+1},0),q=(0,d.Z)(e,2),ee=q[1],x=(0,s.useRef)(),t=m(n.getState());function u(){var a=m(n.getState());v(a,x.current)||(x.current=a,ee())}return(0,s.useEffect)(function(){return n.subscribe(u)},[]),t}function se(){var m=useContext(O);return m.dispatch}function _(m){var v=m.children,n=m.state,e=$(n);return(0,s.useMemo)(function(){return(0,P.jsx)(O.Provider,{value:e,children:v})},[v,e])}},95901:function(le,Q,r){"use strict";r.d(Q,{dI:function(){return ee},rB:function(){return q}});var d=r(2824),c=r(67294);function s(x){return x!=null&&x!==""}function P(x,t){var u=useState(x),a=_slicedToArray(u,2),f=a[0],M=a[1];return useEffect(function(){var N=setTimeout(function(){M(x)},t);return function(){clearTimeout(N)}},[x,t]),f}var O={USERS_LIST:"users-list"},J=r(54941),Y=r(69610),$=r(36321),F=(0,J.Z)(function x(){var t=this;(0,Y.Z)(this,x),this.menu=null,this.element=null,this.getParamName=function(u){var a=document.body.hasAttribute("data-kt-name"),f=a?a+"_":"";return"kt_"+f+"theme_mode_"+u},this.getMode=function(){var u,a=t.getParamName("value"),f=t.getMenuMode(),M="light";if(!localStorage)return M;var N=localStorage.getItem(a);if(N)return N;var E=(u=t.element)===null||u===void 0?void 0:u.getAttribute("data-theme");return E||(f?f==="system"?t.getSystemMode():f:M)},this.setMode=function(u,a){var f,M,N,E=u,l=a;if(!(E!=="light"&&E!=="dark")){var b=t.getParamName("value"),D=t.getParamName("menu");l==="system"&&t.getSystemMode()!==E&&(E=t.getSystemMode()),l||(l=E);var k=((f=t.menu)===null||f===void 0?void 0:f.querySelector('[data-kt-element="mode"][data-kt-value="'+l+'"]'))||null;(M=t.element)===null||M===void 0||M.setAttribute("data-kt-theme-mode-switching","true"),(N=t.element)===null||N===void 0||N.setAttribute("data-theme",E);var o=t;setTimeout(function(){var p;(p=o.element)===null||p===void 0||p.removeAttribute("data-kt-theme-mode-switching")},300),localStorage&&localStorage.setItem(b,E),k&&localStorage&&(localStorage.setItem(D,l),t.setActiveMenuItem(k)),t.flipImages()}},this.getMenuMode=function(){var u,a=t.getParamName("menu"),f=(u=t.menu)===null||u===void 0?void 0:u.querySelector('.active[data-kt-element="mode"]'),M=f==null?void 0:f.getAttribute("data-kt-value");if(M)return M;if(!a)return"";var N=localStorage?localStorage.getItem(a):null;return N||""},this.getSystemMode=function(){return window.matchMedia("(prefers-color-scheme: dark)")?"dark":"light"},this.initMode=function(){t.setMode(t.getMode(),t.getMenuMode()),t.element&&$.EventHandlerUtil.trigger(t.element,"kt.thememode.init")},this.setActiveMenuItem=function(u){var a,f=t.getParamName("menu"),M=u.getAttribute("data-kt-value"),N=(a=t.menu)===null||a===void 0?void 0:a.querySelector('.active[data-kt-element="mode"]');N&&N.classList.remove("active"),u.classList.add("active"),localStorage&&M&&f&&localStorage.setItem(f,M)},this.handleMenu=function(){var u,a;(u=t.menu)===null||u===void 0||(a=u.querySelectorAll('[data-kt-element="mode"]'))===null||a===void 0||a.forEach(function(f){f.addEventListener("click",function(M){M.preventDefault();var N=f.getAttribute("data-kt-value"),E=N==="system"?t.getSystemMode():N;E&&t.setMode(E,N)})})},this.flipImages=function(){var u;(u=document.querySelectorAll("[data-kt-img-dark]"))===null||u===void 0||u.forEach(function(a){a.tagName==="IMG"?t.getMode()==="dark"&&a.hasAttribute("data-kt-img-dark")?(a.setAttribute("data-kt-img-light",a.getAttribute("src")||""),a.setAttribute("src",a.getAttribute("data-kt-img-dark")||"")):t.getMode()==="light"&&a.hasAttribute("data-kt-img-light")&&(a.setAttribute("data-kt-img-dark",a.getAttribute("src")||""),a.setAttribute("src",a.getAttribute("data-kt-img-light")||"")):t.getMode()==="dark"&&a.hasAttribute("data-kt-img-dark")?(a.setAttribute("data-kt-img-light",a.getAttribute("src")||""),a.style.backgroundImage="url('"+a.getAttribute("data-kt-img-dark")+"')"):t.getMode()==="light"&&a.hasAttribute("data-kt-img-light")&&(a.setAttribute("data-kt-img-dark",a.getAttribute("src")||""),a.style.backgroundImage="url('"+a.getAttribute("data-kt-img-light")+"')")})},this.on=function(u,a){if(t.element)return $.EventHandlerUtil.on(t.element,u,a)},this.off=function(u,a){if(t.element)return $.EventHandlerUtil.off(t.element,u,a)},this.init=function(){t.menu=document.querySelector('[data-kt-element="theme-mode-menu"]'),t.element=document.documentElement,t.initMode(),t.menu&&t.handleMenu()}}),ne=new F,z=r(85893),j=ne.getSystemMode(),se=function(t){var u=t!=="system"?t:j,a="/media/patterns/header-bg"+(u==="light"?".jpg":"-dark.png");document.body.style.backgroundImage='url("'.concat(toAbsoluteUrl(a),'")')},_="kt_theme_mode_value",m="kt_theme_mode_menu",v=function(t){if(!localStorage)return"light";var u=localStorage.getItem(t);return!u||u==="light"?"light":u==="dark"?"dark":"system"},n={mode:v(_),menuMode:v(m),updateMode:function(t){},updateMenuMode:function(t){}},e=(0,c.createContext)({mode:n.mode,menuMode:n.menuMode,updateMode:function(t){},updateMenuMode:function(t){}}),q=function(){return(0,c.useContext)(e)},ee=function(t){var u=t.children,a=(0,c.useState)(n.mode),f=(0,d.Z)(a,2),M=f[0],N=f[1],E=(0,c.useState)(n.menuMode),l=(0,d.Z)(E,2),b=l[0],D=l[1],k=function(y){var g=y==="system"?j:y;N(g),localStorage&&localStorage.setItem(_,g),document.documentElement.setAttribute("data-theme",g),ne.init()},o=function(y){D(y),localStorage&&localStorage.setItem(m,y)};return(0,c.useEffect)(function(){k(M),o(b)},[]),(0,z.jsx)(e.Provider,{value:{mode:M,menuMode:b,updateMode:k,updateMenuMode:o},children:u})}},70800:function(le,Q,r){"use strict";r.r(Q),r.d(Q,{default:function(){return k}});var d=r(11849),c=r(2824),s=r(67294),P=r(28865),O=r(1861),J=r(51615),Y=r(73727),$=r(32669),F=r(88403),ne=r(91220),z=r(39428),j=r(3182),se=r(22028),_=r(94184),m=r.n(_),v=r(96486),n=r(38671),e=r(85893),q=r(34155);function ee(o){var p=o.onClose,y=o.visible,g=o.user,A=o.namespace,Z=o.name,T=o.mode,V=(0,$.hI)(),C=(0,c.Z)(V,1),H=C[0],L=n.l0.useForm(),K=(0,s.useRef)(null);(0,s.useEffect)(function(){var W;!y||(L.setFieldsValue({name:Z}),(W=K.current)===null||W===void 0||W.focus(),q.nextTick(function(){var B;(B=K.current)===null||B===void 0||B.select()}))},[y]);var w=(0,s.useCallback)((0,j.Z)((0,z.Z)().mark(function W(){var B;return(0,z.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,L.validateFields();case 2:if(B=h.sent,T!="create"){h.next=6;break}return h.next=6,H({variables:{name:B.name,namespace:A}});case 6:p();case 7:case"end":return h.stop()}},W)})),[L,T,p,H,A]),U=(0,s.useCallback)(function(){p()},[p]);return(0,e.jsxs)(n.u_,{centered:!0,visible:y,dialogClassName:"modal-dialog-small w-400px",onCancel:U,onOk:w,header:!1,closable:!1,okButtonProps:{className:"btn-xs"},cancelButtonProps:{className:"btn-xs"},children:[(0,e.jsxs)("div",{className:"modal-dialog-header d-flex",children:[(0,e.jsx)("div",{className:"modal-dialog-icon",children:(0,e.jsx)(P.JO,{className:"svg-icon-5x",name:"Duotune/fil012"})}),(0,e.jsxs)("div",{className:"modal-dialog-instructions",children:[(0,e.jsx)("div",{className:"modal-dialog-title",children:T=="create"?"\u65B0\u5EFA\u6587\u4EF6\u5939":"\u4FEE\u6539\u6587\u4EF6\u5939"}),(0,e.jsx)("div",{className:"modal-dialog-description",children:T=="create"?(0,e.jsxs)(e.Fragment,{children:['\u4E3A\u8D26\u53F7 " ',g,' " \u521B\u5EFA\u9876\u5C42\u6587\u4EF6\u5939']}):(0,e.jsxs)(e.Fragment,{children:['\u4FEE\u6539\u8D26\u53F7 " ',g,' " \u4E2D ',Z," \u6587\u4EF6\u5939\u7684\u540D\u79F0"]})})]})]}),(0,e.jsx)(n.l0,{form:L,layout:"horizontal",initialValues:{name:Z},size:"xs",children:(0,e.jsx)("div",{className:"d-flex last flex-row flex-center",children:(0,e.jsx)("div",{className:"d-flex flex-column-fluid",children:(0,e.jsx)(n.l0.Item,{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u5B57"}],name:"name",label:"\u540D\u79F0",children:(0,e.jsx)(n.II,{ref:K})})})})})]})}var x=ee;function t(o){var p=o.user,y=o.onSuccess,g=o.selectedKey,A=(0,s.useState)(),Z=(0,c.Z)(A,2),T=Z[0],V=Z[1],C=(0,s.useCallback)(function(){V(void 0)},[]),H=(0,s.useCallback)((0,j.Z)((0,z.Z)().mark(function K(){return(0,z.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:V("#custom"),y();case 2:case"end":return U.stop()}},K)})),[y]),L=(0,s.useCallback)((0,j.Z)((0,z.Z)().mark(function K(){return(0,z.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:console.log(g),y();case 2:case"end":return U.stop()}},K)})),[g,y]);return(0,e.jsxs)("div",{className:"settings-mailbox-footer",children:[(0,e.jsx)("a",{onClick:H,children:(0,e.jsx)(P.ZP,{name:"Duotune/arr087",className:"svg-icon-2"})}),(0,e.jsx)("a",{onClick:L,children:(0,e.jsx)(P.ZP,{name:"Duotune/arr089",className:"svg-icon-2"})}),(0,e.jsx)(x,{mode:"create",visible:!!T,user:p,namespace:T,onClose:C})]})}var u=t,a=[{key:"#private",title:"\u9ED8\u8BA4\u6587\u4EF6\u5939",children:[]},{key:"#smart",title:"\u667A\u80FD\u6587\u4EF6\u5939",children:[]},{key:"#custom",title:"\u81EA\u5B9A\u4E49\u6587\u4EF6\u5939",children:[]}];function f(o){var p=o.user,y=(0,s.useRef)(null),g=(0,$.Tt)(),A=g.data,Z=(0,s.useState)(),T=(0,c.Z)(Z,1),V=T[0],C=(0,s.useState)(o.mailboxes),H=(0,c.Z)(C,2),L=H[0],K=H[1],w=(0,$.mf)({updateQueries:{mailUser:function(I,i){var G=i.mutationResult;return(0,d.Z)((0,d.Z)({},I),{},{mailUser:(0,d.Z)((0,d.Z)({},I.mailUser),{},{settings:(0,d.Z)((0,d.Z)({},I.mailUser.settings),{},{mailboxes:G.data.mailboxes})})})}}}),U=(0,c.Z)(w,1),W=U[0],B=(0,s.useCallback)(function(){var S=(0,j.Z)((0,z.Z)().mark(function I(i){return(0,z.Z)().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:console.log(i);case 1:case"end":return X.stop()}},I)}));return function(I){return S.apply(this,arguments)}}(),[]),ie=(0,s.useCallback)(function(S){console.log(S)},[]),h=(0,s.useCallback)(function(S){S.preventDefault(),S.stopPropagation(),console.log("handleChange",S.target.checked,S.target.value),W({variables:{mailboxes:[S.target.value],mode:S.target.checked?"ADD":"REMOVE"}})},[W]),te=(0,s.useMemo)(function(){if(!(A!=null&&A.mailboxes))return(0,v.cloneDeep)(a);var S=(0,v.cloneDeep)(a),I=(0,ne.Z)(A.mailboxes),i;try{var G=function(){var R=i.value,re=S.find(function(ue){return ue.key==R.namespace});if(R.name=="Outbox"||R.name=="INBOX")return"continue";if(!(re!=null&&re.children))return console.warn("\u9519\u8BEF\u7684\u547D\u540D\u7A7A\u95F4",re),"continue";re.children.push((0,d.Z)((0,d.Z)({},R),{},{type:"mailbox",key:R.id,title:R.name}))};for(I.s();!(i=I.n()).done;)var X=G()}catch(ae){I.e(ae)}finally{I.f()}return S[0].children=S[0].children.map(function(ae){var R=F.GG.findIndex(function(ue){return ue.id==ae.name}),re=F.GG[R];return(0,d.Z)((0,d.Z)({},ae),{},{zindex:R,title:re.name,icon:re.name})}).sort(function(ae,R){return ae.zindex-R.zindex}),S.filter(function(ae){var R;return(R=ae.children)===null||R===void 0?void 0:R.length})},[A==null?void 0:A.mailboxes]);return(0,s.useEffect)(function(){K(o.mailboxes)},[o.mailboxes]),(0,e.jsxs)("div",{className:"settings-mailbox-container",children:[(0,e.jsx)("div",{className:"settings-mailbox-notes",children:"\u8BBE\u7F6E\u9ED8\u8BA4\u6587\u4EF6\u5939\u7684\u663E\u793A\u4E0E\u9690\u85CF\uFF0C\u5E76\u53EF\u4EE5\u6DFB\u52A0\u81EA\u5B9A\u4E49\u7684\u6587\u4EF6\u5939"}),(0,e.jsx)("div",{className:"d-flex",children:(0,e.jsxs)(se.fQ,{tag:(0,e.jsx)("div",{ref:y,className:m()("flex-left settings-mailbox",{editing:!1})}),name:"MAIL_PREFERENCES",handler:ie,children:[(0,e.jsxs)("div",{className:"settings-mailbox-header d-flex",children:[(0,e.jsx)("div",{className:"field-folder",children:"\u6587\u4EF6\u5939"}),(0,e.jsx)("div",{className:"field-favorites",children:"\u6536\u85CF"})]}),(0,e.jsx)(O.E,{className:"settings-mailbox-body custom-scrollbar",options:{scrollbars:{autoHide:"scroll"}},children:(0,e.jsx)(n.N4,{className:"mailbox-treelist",rowKey:"id",expandedKeys:["#private","#smart","#custom"],draggable:!1,iconRender:function(I,i){if(!i.isDirectory)return""},columns:[{key:"title",title:"\u540D\u79F0",width:"auto",render:function(I){return(0,e.jsx)("div",{className:"title d-flex",children:(0,e.jsx)("span",{className:"text-gray-800",children:I})})}},{key:"actions",title:"\u64CD\u4F5C",className:"min-w-100px",render:function(I,i){return i.type=="directory"?(0,e.jsx)("div",{}):(0,e.jsx)(n.XZ,{value:i.namespace+"."+i.name,checked:L.includes(i.namespace+"."+i.name),onChange:h,className:"mailbox-check",size:"sm"})}}],dataSource:te})}),(0,e.jsx)(u,{user:p,onSuccess:B,selectedKey:V})]})})]})}var M=f;function N(o){var p=o.visible,y=o.onCancel,g=o.mailUser,A=(0,s.useState)(!1),Z=(0,c.Z)(A,2),T=Z[0],V=Z[1],C=(0,s.useState)("mailbox"),H=(0,c.Z)(C,2),L=H[0],K=H[1],w=(0,s.useCallback)(function(){V(!0)},[]),U=(0,s.useCallback)(function(B){K(B)},[]),W=(0,s.useMemo)(function(){return g!=null&&g.settings?g.settings:{mailboxes:[]}},[g]);return(0,e.jsx)(n.u_,{centered:!0,maskClosable:!1,visible:p,onCancel:y,onOk:w,confirmLoading:T,scroll:!1,dialogClassName:"mw-750px mail-preferences",header:(0,e.jsx)(n.u_.Header,{children:(0,e.jsxs)(n.JL,{onSelect:U,selectedKey:L,children:[(0,e.jsx)(n.JL.Item,{className:"me-2 mb-md-0",children:(0,e.jsxs)(n.JL.Link,{className:"btn d-flex flex-column btn-active-light-primary",children:[(0,e.jsx)(P.ZP,{name:"Duotune/cod001",className:"svg-icon-2 me-0"}),(0,e.jsx)("span",{className:"d-flex flex-column align-items-start pt-2",children:(0,e.jsx)("span",{className:"fs-7",children:"\u901A\u7528"})})]})},"general"),(0,e.jsx)(n.JL.Item,{className:"me-2 mb-md-0",children:(0,e.jsxs)(n.JL.Link,{className:"btn d-flex flex-column btn-active-light-primary",children:[(0,e.jsx)(P.ZP,{name:"Duotune/cod001",className:"svg-icon-2 me-0"}),(0,e.jsx)("span",{className:"d-flex flex-column align-items-start pt-2",children:(0,e.jsx)("span",{className:"fs-7",children:"\u8D26\u53F7"})})]})},"account"),(0,e.jsx)(n.JL.Item,{className:"me-2 mb-md-0",children:(0,e.jsxs)(n.JL.Link,{className:"btn d-flex flex-column btn-active-light-success",children:[(0,e.jsx)(P.ZP,{name:"Duotune/fil012",className:"svg-icon-2  me-0"}),(0,e.jsx)("span",{className:"d-flex flex-column align-items-start pt-2",children:(0,e.jsx)("span",{className:"fs-7",children:"\u6587\u4EF6\u5939"})})]})},"mailbox"),(0,e.jsx)(n.JL.Item,{className:"me-2 mb-md-0",children:(0,e.jsxs)(n.JL.Link,{className:"btn d-flex flex-column btn-active-light-dark",children:[(0,e.jsx)(P.ZP,{name:"Duotune/art008",className:"svg-icon-2  me-0"}),(0,e.jsx)("span",{className:"d-flex flex-column align-items-start pt-2",children:(0,e.jsx)("span",{className:"fs-7",children:"\u7B7E\u540D"})})]})},"signature"),(0,e.jsx)(n.JL.Item,{className:"me-2 mb-md-0",children:(0,e.jsxs)(n.JL.Link,{className:"btn d-flex flex-column btn-active-light-warning",children:[(0,e.jsx)(P.ZP,{name:"Duotune/art008",className:"svg-icon-2  me-0"}),(0,e.jsx)("span",{className:"d-flex flex-column align-items-start pt-2",children:(0,e.jsx)("span",{className:"fs-7",children:"\u6A21\u7248"})})]})},"template")]})}),footer:!1,children:(0,e.jsx)(M,{user:g==null?void 0:g.name,mailboxes:W.mailboxes})})}var E=N,l=r(48775);function b(o){var p=o.onAction;return(0,e.jsx)("div",{className:"email-sidebar-footer",children:(0,e.jsx)("span",{className:"mail-settings",onClick:p,children:"\u504F\u597D\u8BBE\u7F6E"})})}function D(){var o,p=(0,s.useState)(!1),y=(0,c.Z)(p,2),g=y[0],A=y[1],Z=(0,J.$B)({path:"/mail/:folder",strict:!0,sensitive:!0}),T=(0,s.useMemo)(function(){return Z!=null&&Z.params.folder?[Z.params.folder]:[]},[Z]),V=(0,$.FW)({fetchPolicy:"cache-and-network"}),C=V.data,H=(0,$.Tt)({fetchPolicy:"cache-and-network"}),L=H.data,K=(0,$.c3)({fetchPolicy:"cache-and-network"}),w=K.data,U=(0,s.useCallback)(function(){A(!1)},[]),W=(0,s.useCallback)(function(){A(!0)},[]),B=(0,s.useMemo)(function(){if(!(C!=null&&C.mailUser)||!(L!=null&&L.mailboxes)){var h=F.LJ.INBOX,te=F.LJ.Outbox;return{inbox:(0,d.Z)((0,d.Z)({},h),{},{title:h.name,key:h.id.toLowerCase()}),outbox:(0,d.Z)((0,d.Z)({},te),{},{title:te.name,key:te.id.toLowerCase()}),private:F.GG.filter(function(i){return!["Outbox","INBOX"].includes(i.id)}).map(function(i){return(0,d.Z)((0,d.Z)({},i),{},{title:i.name,key:i.id.toLowerCase(),count:0})}),smart:[],custom:[]}}var S=L.mailboxes.map(function(i){if(i.namespace=="#private"){var G=F.GG.findIndex(function(X){return X.id==i.name});return(0,d.Z)((0,d.Z)({},i),{},{index:G,title:F.GG[G].name,icon:F.GG[G].icon,key:i.name.toLowerCase()})}return(0,d.Z)((0,d.Z)({},i),{},{title:i.name,index:0,icon:void 0,key:i.name.toLowerCase()})}).filter(function(i){var G,X;return["Outbox","INBOX"].includes(i.name)?!0:C==null||(G=C.mailUser)===null||G===void 0||(X=G.settings)===null||X===void 0?void 0:X.mailboxes.includes(i.namespace+"."+i.name)}).sort(function(i,G){return i.index-G.index}),I=S.filter(function(i){return i.namespace=="#private"});return{inbox:I.find(function(i){return i.name=="INBOX"}),outbox:I.find(function(i){return i.name=="Outbox"}),private:I.filter(function(i){return!["Outbox","INBOX"].includes(i.name)}),smart:S.filter(function(i){return i.namespace=="#smart"}),custom:S.filter(function(i){return i.namespace=="#custom"})}},[C==null?void 0:C.mailUser,L==null?void 0:L.mailboxes]),ie=(0,s.useMemo)(function(){var h;return(w==null||(h=w.inbox)===null||h===void 0?void 0:h.unread)||0},[w==null||(o=w.inbox)===null||o===void 0?void 0:o.unread]);return(0,e.jsxs)(l.GP,{width:280,collapsible:!1,className:"email-sidebar-aside",children:[(0,e.jsxs)("div",{className:"email-sidebar",children:[(0,e.jsx)(n.zx,{as:Y.Link,to:"/mail/compose",className:"email-compose text-uppercase",children:"\u5199\u4FE1"}),(0,e.jsx)(O.E,{className:"email-sidebar-body custom-scrollbar",options:{scrollbars:{autoHide:"scroll"}},children:(0,e.jsxs)(n.v2,{className:"menu-title-gray-600 menu-icon-gray-400 menu-state-bg menu-state-primary menu-state-icon-primary menu-state-bullet-primary mb-10",accordion:!1,rounded:!0,selectable:"AllMenu",selectedKeys:T,children:[(0,e.jsx)(n.v2.Item,{url:"/mail/inbox",titleClassName:"fw-bolder",icon:(0,e.jsx)(P.JO,{className:"svg-icon-2 me-3",name:"Duotune/com010"}),badge:!!ie&&(0,e.jsx)(n.Ct,{size:"sm",lightStyle:F.LJ.INBOX.badge,children:ie}),children:B.inbox.title},"inbox"),(0,e.jsx)(n.v2.Section,{children:"\u6587\u4EF6\u5939"}),B.private.map(function(h){var te,S=(te=F.LJ[h.name])===null||te===void 0?void 0:te.badge;return(0,e.jsx)(n.v2.Item,{className:"mb-1",url:"/mail/".concat(h.key),titleClassName:"fw-bolder",icon:(0,e.jsx)(P.JO,{className:"svg-icon-2 me-3",name:h.icon}),badge:!!S&&!!h.count&&(0,e.jsx)(n.Ct,{size:"sm",lightStyle:S,children:h.count}),children:h.title},h.key)}),B.custom.length&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.v2.Section,{children:"\u81EA\u5B9A\u4E49"}),B.custom.map(function(h){return(0,e.jsx)(n.v2.Item,{className:"mb-1",url:"/mail/".concat(h.key),titleClassName:"fw-bolder",children:h.title},h.key)})]})]})}),(0,e.jsx)(b,{onAction:W})]}),(0,e.jsx)(E,{mailUser:C==null?void 0:C.mailUser,visible:g,onCancel:U})]})}var k=D},88403:function(le,Q,r){"use strict";r.d(Q,{LJ:function(){return c},GG:function(){return s},ss:function(){return P}});var d=r(5618),c={INBOX:{id:"INBOX",name:"\u6536\u4EF6\u7BB1",icon:"Duotune/com010",badge:"success"},Sent:{id:"Sent",name:"\u5DF2\u53D1\u9001",icon:"Duotune/gen016"},Drafts:{id:"Drafts",name:"\u8349\u7A3F",icon:"Duotune/gen009",badge:"primary"},Archive:{id:"Archive",name:"\u5F52\u6863",icon:"Duotune/lay010"},Spam:{id:"Spam",name:"\u5783\u573E\u90AE\u4EF6",icon:"Duotune/gen044"},Trash:{id:"Trash",name:"\u56DE\u6536\u7AD9",icon:"Duotune/gen027",badge:"warning"},Outbox:{id:"Outbox",name:"\u53D1\u4EF6\u7BB1",icon:"Duotune/gen027"}},s=Object.keys(c).map(function(O){return c[O]});function P(O){var J=(0,d.N8)(O);return J.name||J.address&&J.address.substring(0,J.address.indexOf("@"))}}}]);

(self.webpackChunk=self.webpackChunk||[]).push([[7277],{58795:function(S,h,a){"use strict";a.d(h,{RE:function(){return T},Tk:function(){return Z},ry:function(){return O},x:function(){return j}});var _=a(97857),l=a.n(_),N=a(68400),Q=a.n(N),p=a(75063),Y=a(37887),k=a(50319),f,H,B,t,z,E={},n=(0,p.Ps)(f||(f=Q()([`
    fragment OrganizationProfile on Organization {
  id
  code
  name
  logo
  description
  email
  url
  location {
    province
    city
    district
    street
  }
}
    `]))),O=(0,p.Ps)(H||(H=Q()([`
    query organization($id: ID!) {
  organization(id: $id) {
    ...OrganizationProfile
  }
}
    `,""])),n);function Z(i){var s=l()(l()({},E),i);return Y.a(O,s)}function R(i){var s=_objectSpread(_objectSpread({},E),i);return Apollo.useLazyQuery(O,s)}function e(i){var s=_objectSpread(_objectSpread({},E),i);return Apollo.useSuspenseQuery(O,s)}var J=(0,p.Ps)(B||(B=Q()([`
    mutation updateOrganizationProfile($id: ID!, $input: UpdateOrganizationProfileUpdateInput!) {
  updateOrganizationProfile(id: $id, input: $input) {
    ...OrganizationProfile
  }
}
    `,""])),n);function T(i){var s=l()(l()({},E),i);return k.D(J,s)}var M=(0,p.Ps)(t||(t=Q()([`
    mutation renameOrganizationCode($id: ID!, $code: String!) {
  renameOrganizationCode(id: $id, code: $code) {
    ...OrganizationProfile
  }
}
    `,""])),n);function j(i){var s=l()(l()({},E),i);return k.D(M,s)}var F=(0,p.Ps)(z||(z=Q()([`
    query permissionsConnection($where: PermissionWhereInput, $page: Int, $pageSize: Int, $orderBy: OrderBy = "createdAt_desc") {
  total: permissionsConnection(pageSize: 1) {
    totalCount
  }
  connection: permissionsConnection(
    where: $where
    page: $page
    pageSize: $pageSize
    orderBy: $orderBy
  ) {
    totalPage
    pageSize
    current: currentPage
    total: totalCount
    edges {
      node {
        id
      }
    }
  }
}
    `])));function W(i){var s=_objectSpread(_objectSpread({},E),i);return Apollo.useQuery(F,s)}function w(i){var s=_objectSpread(_objectSpread({},E),i);return Apollo.useLazyQuery(F,s)}function U(i){var s=_objectSpread(_objectSpread({},E),i);return Apollo.useSuspenseQuery(F,s)}},47277:function(S,h,a){"use strict";a.r(h),a.d(h,{default:function(){return i}});var _=a(15009),l=a.n(_),N=a(97857),Q=a.n(N),p=a(49677),Y=a.n(p),k=a(99289),f=a.n(k),H=a(5574),B=a.n(H),t=a(62435),z=a(96974),E=a(73588),n=a(13757),O="data:image/png;base64,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",Z=a(93967),R=a.n(Z),e=a(86074);function J(s){var u=s.data,C=s.visible,o=s.onCancel,y=(0,t.useState)(!0),c=B()(y,2),g=c[0],d=c[1],v=(0,t.useCallback)(function(D,I){d(I.code!==(u==null?void 0:u.code))},[u]),r=(0,t.useCallback)(function(){},[]);return(0,e.jsxs)(n.Modal,{dialogClassName:R()("delete-organization-modal w-450px"),visible:C,onCancel:o,title:"\u786E\u5B9A\u5220\u9664\u7EC4\u7EC7\u5417\uFF1F",footer:!1,children:[(0,e.jsx)(n.Alert,{type:"danger",message:"\u8BF7\u4ED4\u7EC6\u9605\u8BFB\u4EE5\u4E0B\u4E8B\u9879"}),(0,e.jsxs)("div",{className:"inner-body",children:[(0,e.jsxs)("p",{children:["\u60A8\u5373\u5C06\u6C38\u4E45\u5220\u9664\u7EC4\u7EC7: ",(0,e.jsx)("b",{children:u==null?void 0:u.code}),"\uFF0C\u4EE5\u53CA\u4E0E\u7EC4\u7EC7\u5173\u8054\u7684\u6240\u6709\u5185\u5BB9\u3002\u4E00\u65E6\u786E\u8BA4 \u5220\u9664\uFF0C\u6B64\u64CD\u4F5C\u4FBF\u65E0\u6CD5\u64A4\u9500\u548C\u6062\u590D\u3002"]}),(0,e.jsx)(n.Separator,{className:"my-5"}),(0,e.jsxs)(n.Form,{onFinish:r,onValuesChange:v,children:[(0,e.jsx)(n.Form.Item,{className:"mb-5",name:"code",label:"\u8F93\u5165\u7EC4\u7EC7\u4EE3\u7801\u4EE5\u786E\u8BA4\u5220\u9664",children:(0,e.jsx)(n.Input,{solid:!0})}),(0,e.jsx)(n.Button,{htmlType:"submit",className:"confirm-delete-account",disabled:g,variant:"light-danger",children:"\u5220\u9664\u7EC4\u7EC7"})]})]})]})}var T=J,M=a(12708),j=a(58795);function F(s){var u=s.data,C=s.visible,o=s.onCancel,y=(0,t.useState)(1),c=B()(y,2),g=c[0],d=c[1],v=(0,j.x)(),r=B()(v,2),D=r[0],I=r[1].loading,A=(0,t.useCallback)(function(){var m=f()(l()().mark(function $(b){return l()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,D({variables:{id:u.id,code:b.code}});case 2:return n.Toast.success("\u7EC4\u7EC7\u4EE3\u7801\u4FEE\u6539\u6210\u529F",3e3,{placement:"top-center",progressBar:!0}),L.next=5,(0,M._v)(300);case 5:d(1),o();case 7:case"end":return L.stop()}},$)}));return function($){return m.apply(this,arguments)}}(),[u,o,D]),x=(0,t.useCallback)(f()(l()().mark(function m(){return l()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,M._v)(300);case 2:d(2);case 3:case"end":return b.stop()}},m)})),[]),P=(0,t.useCallback)(function(){d(1),o()},[o]);return(0,e.jsx)(n.Modal,{dialogClassName:R()("rename-organization-modal w-450px",{"waiting-to-continue":g===1}),visible:C,onCancel:P,title:g===1?"\u786E\u5B9A\u4FEE\u6539\u7EC4\u7EC7\u4EE3\u7801\u5417\uFF1F":"\u8F93\u5165\u65B0\u7684\u7EC4\u7EC7\u4EE3\u7801",footer:!1,children:g===1?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.Alert,{type:"danger",message:"\u8BF7\u4ED4\u7EC6\u9605\u8BFB\u4EE5\u4E0B\u6CE8\u610F\u4E8B\u9879, \u4E86\u89E3\u53EF\u80FD\u9020\u6210\u7684\u526F\u4F5C\u7528"}),(0,e.jsxs)("div",{className:"inner-body",children:[(0,e.jsx)("ul",{className:"mb-6 ms-6",children:(0,e.jsx)("li",{children:"\u4FEE\u6539\u7EC4\u7EC7\u4EE3\u7801\u53EF\u80FD\u9700\u8981\u51E0\u5206\u949F\u624D\u80FD\u5B8C\u6210\u3002"})}),(0,e.jsx)(n.Button,{onClick:x,className:"confirm-to-continue",variant:"light-danger",children:"\u6211\u660E\u767D\u4E86\uFF0C\u7EE7\u7EED\u4FEE\u6539"})]})]}):(0,e.jsxs)(n.Form,{onFinish:A,initialValues:u,children:[(0,e.jsxs)("div",{className:"mb-5",children:[(0,e.jsx)(n.Form.Item,{name:"code",rules:[{required:!0,message:"\u7EC4\u7EC7\u4EE3\u7801\u4E0D\u80FD\u4E3A\u7A7A"},{min:6,message:"\u81F3\u5C11\u5F97\u5305\u542B6\u4E2A\u5B57\u7B26"},{pattern:/^[a-zA-Z]\w{5,19}$/,message:"\u7EC4\u7EC7\u4EE3\u7801\u53EA\u80FD\u4E3A\u5B57\u6BCD\u6216\u8005\u6570\u5B57\uFF0C\u800C\u4E14\u5FC5\u987B\u4EE5\u5B57\u6BCD\u5F00\u5934"}],help:"\u7EC4\u7EC7\u4EE3\u7801\u53EA\u80FD\u4E3A\u5B57\u6BCD\u6216\u8005\u6570\u5B57\uFF0C\u800C\u4E14\u5FC5\u987B\u4EE5\u5B57\u6BCD\u5F00\u5934",children:(0,e.jsx)(n.Input,{})}),(0,e.jsx)("p",{className:"text-small mt-2",children:"\u8F93\u5165\u4E00\u4E2A\u65B0\u7684\u7EC4\u7EC7\u4EE3\u7801"})]}),(0,e.jsx)(n.Button,{htmlType:"submit",loading:I,className:"change-name-save",children:"\u4FEE\u6539\u7EC4\u7EC7\u4EE3\u7801"})]})})}var W=F;function w(s){var u=s.data,C=(0,t.useState)(!1),o=B()(C,2),y=o[0],c=o[1],g=(0,t.useState)(!1),d=B()(g,2),v=d[0],r=d[1],D=(0,t.useCallback)(function(){c(!0)},[]),I=(0,t.useCallback)(function(){c(!1)},[]),A=(0,t.useCallback)(function(){r(!0)},[]),x=(0,t.useCallback)(function(){r(!1)},[]);return(0,e.jsxs)(n.Card,{className:"mb-5 mb-xl-10",children:[(0,e.jsx)(n.Card.Header,{children:(0,e.jsx)(n.Card.Title,{className:"text-danger",children:"\u5371\u9669\u533A\u57DF"})}),(0,e.jsx)(n.Card.Body,{children:(0,e.jsxs)("div",{className:"w-800px danger-zone rounded border border-danger",children:[(0,e.jsxs)("div",{className:"p-5 border-bottom border-secondary d-flex align-items-center",children:[(0,e.jsxs)("div",{className:"flex-row-fluid",children:[(0,e.jsx)("div",{className:"fw-bolder",children:"\u4FEE\u6539\u7EC4\u7EC7\u4EE3\u7801"}),(0,e.jsx)("span",{className:"text-small",children:"\u4FEE\u6539\u7EC4\u7EC7\u4EE3\u7801\u53EF\u80FD\u4F1A\u4EA7\u751F\u610F\u60F3\u4E0D\u5230\u7684\u526F\u4F5C\u7528"})]}),(0,e.jsx)(n.Button,{onClick:D,type:"solid",variant:"danger",children:"\u4FEE\u6539\u7EC4\u7EC7\u4EE3\u7801"}),(0,e.jsx)(W,{data:u,visible:y,onCancel:I})]}),(0,e.jsxs)("div",{className:"p-5 border-bottom border-secondary d-flex align-items-center",children:[(0,e.jsxs)("div",{className:"flex-row-fluid",children:[(0,e.jsx)("div",{className:"fw-bolder",children:"\u5220\u9664\u7EC4\u7EC7"}),(0,e.jsx)("span",{className:"text-small",children:"\u5E10\u6237\u5220\u9664\u540E\uFF0C\u5C06\u65E0\u6CD5\u6062\u590D\u3002\u8BF7\u8C28\u614E\u64CD\u4F5C"})]}),(0,e.jsx)(n.Button,{onClick:A,type:"solid",variant:"danger",children:"\u5220\u9664\u7EC4\u7EC7"}),(0,e.jsx)(T,{data:u,visible:v,onCancel:x})]})]})})]})}function U(){var s=(0,z.UO)(),u=n.Form.useForm(),C=(0,j.Tk)({variables:{id:s.id}}),o=C.data,y=C.loading,c=(0,j.RE)({refetchQueries:[{query:j.ry,variables:{id:s.id}}]}),g=B()(c,2),d=g[0],v=g[1].loading,r=o==null?void 0:o.organization;(0,t.useEffect)(function(){r&&u.setFieldsValue(r)},[r,u]);var D=(0,t.useCallback)(f()(l()().mark(function I(){var A,x;return l()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,u.getFieldsValue();case 2:return A=m.sent,x=Object.assign({},(Y()(A),A)),m.next=6,d({variables:{id:r==null?void 0:r.id,input:Q()({},x)}});case 6:n.Toast.success("\u8D44\u6599\u66F4\u65B0\u6210\u529F",3e3,{placement:"bottom-left",progressBar:!0});case 7:case"end":return m.stop()}},I)})),[u,r,d]);return(0,e.jsxs)(E.vs,{className:"page-organization-settings-profile",header:{title:"\u901A\u7528\u8BBE\u7F6E"},footer:!1,children:[(0,e.jsxs)(n.Card,{className:"mb-5 mb-xl-10",children:[(0,e.jsx)(n.Card.Header,{children:(0,e.jsx)(n.Card.Title,{children:"\u901A\u7528\u8BBE\u7F6E"})}),(0,e.jsx)(n.Card.Body,{children:(0,e.jsxs)(n.BlockUI,{overlayClassName:"bg-white bg-opacity-25",loading:y,children:[(0,e.jsxs)(n.Form,{form:u,className:"mw-800px row d-flex flex-shrink-0 flex-column-reverse flex-md-row",children:[(0,e.jsx)("div",{className:"mw-500px col-12 col-md-8",children:(0,e.jsxs)("div",{className:"mw-400px",children:[(0,e.jsx)(n.Form.Item,{className:"mb-5",name:"name",label:"\u663E\u793A\u540D\u79F0",children:(0,e.jsx)(n.Input,{solid:!0})}),(0,e.jsx)(n.Form.Item,{className:"my-5",name:"email",label:"\u90AE\u7BB1",help:"\u7EC4\u7EC7\u8054\u7CFB\u90AE\u7BB1",children:(0,e.jsx)(n.Input,{solid:!0})}),(0,e.jsx)(n.Form.Item,{className:"my-5",name:"description",label:"\u63CF\u8FF0",help:"\u8BF7\u7528\u5C11\u4E8E250\u5B57\u7B26\u63CF\u8FF0\u7EC4\u7EC7\u4FE1\u606F",children:(0,e.jsx)(n.Input.TextArea,{solid:!0,autoSize:{minRows:4,maxRows:8},showCount:!0,maxLength:250})}),(0,e.jsx)(n.Form.Item,{className:"my-5",name:"url",label:"URL",help:"\u7EC4\u7EC7\u7F51\u5740",children:(0,e.jsx)(n.Input,{solid:!0})}),(0,e.jsx)(n.Form.Item,{className:"my-5",name:"location",label:"\u6240\u5728\u5730\u533A",children:(0,e.jsx)(n.RegionPicker,{ends:function(A){var x=A.path.split("/").filter(function(P){return!!P}).length;return A.type==="city"||x===2},resultType:"object",solid:!0,placeholder:"\u9009\u62E9\u7EC4\u7EC7\u6240\u5728\u7684\u5730\u533A"})})]})}),(0,e.jsx)("div",{className:"col-12 col-md-4",children:(0,e.jsx)("div",{className:"row",children:(0,e.jsx)(n.Form.Item,{className:"mb-5",name:"logo",label:"\u7EC4\u7EC7\u6807\u5FD7",help:"\u5141\u8BB8\u7684\u6587\u4EF6\u7C7B\u578B:png, jpg, jpeg",children:(0,e.jsx)(n.Upload.Image,{width:125,height:125,space:"7VE4SSrk",crop:{height:300,zoomable:!1,aspectRatio:1},background:O})})})})]}),(0,e.jsx)(n.Button,{loading:v,onClick:D,children:"\u66F4\u65B0\u8D44\u6599"})]})})]}),(0,e.jsx)(w,{data:r})]})}var i=U},49677:function(S){function h(a){if(a==null)throw new TypeError("Cannot destructure "+a)}S.exports=h,S.exports.__esModule=!0,S.exports.default=S.exports}}]);

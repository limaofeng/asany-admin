"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7095],{27095:function(H,i,a){a.r(i),a.d(i,{default:function(){return O}});var E=a(13769),M=a.n(E),$=a(15009),o=a.n($),c=a(99289),l=a.n(c),v=a(5574),p=a.n(v),y=a(62435),U=a(96974),D=a(39711),K=a(46027),m=a(93967),Z=a.n(m),re=a(19755),_=a.n(re),ae=a(30381),te=a.n(ae),Q=a(38018),ne=a(73588),r=a(13757),t=a(42755),n=a(81620),e=a(86074),s=["q"],d={DRAFT:{title:"\u8349\u7A3F",lightStyle:"danger"},PUBLISHED:{title:"\u5DF2\u53D1\u5E03"},SCHEDULED:{title:"\u8BA1\u5212",lightStyle:"primary"}};window._MoreshowOrhide=function(u){return _()(u).parent().siblings().show(),_()(u).parent().remove(),!1};function x(u){var h=u.selectedRows,R=u.refetch,N=(0,t.nT)(),w=p()(N,1),T=w[0],W=(0,n.Z)({title:(0,e.jsxs)(e.Fragment,{children:["\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9",h.length>1&&(0,e.jsxs)(e.Fragment,{children:["\u201C",(0,e.jsx)("strong",{children:h.length}),"\u201C`"]}),"\u7BC7\u6587\u7AE0\u5417\uFF1F"]}),content:h.length>1?'\u60A8\u5373\u5C06\u5220\u9664\u4EE5\u4E0B\u6587\u7AE0:<ul className="py-2">'.concat(h.map(function(F,L){return"<li ".concat(L>=4?'style="display: none !important;"':"",' className="d-flex align-items-center text-gray-800 mb-1 fs-6"><span className="bullet bullet-dot me-2"></span><strong>').concat(F.title,"</strong></li>")}).join(""),`
              <li `).concat(h.length<=4?'style="display: none !important;"':"",' className="d-flex align-items-center text-gray-800 fs-6"><a href="javascript:void(0)" onClick="_MoreshowOrhide(this)">\u66F4\u591A</a></li></ul> '):(0,e.jsxs)(e.Fragment,{children:["\u60A8\u5373\u5C06\u5220\u9664\u201C",(0,e.jsx)("strong",{children:h[0].title}),"\u201D\u3002",(0,e.jsx)("br",{}),"\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F"]})},l()(o()().mark(function F(){return o()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,T({variables:{ids:h.map(function(z){return z.id})}});case 2:case"end":return g.stop()}},F)}))),A=p()(W,1),S=A[0],P=(0,y.useCallback)(l()(o()().mark(function F(){return o()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,S();case 2:return g.next=4,R();case 4:case"end":return g.stop()}},F)})),[S,R]);return(0,e.jsx)(r.Button,{color:"danger",onClick:P,variant:!1,size:"sm",className:"px-4 py-2",children:"\u6279\u91CF\u5220\u9664"})}function b(u){var h=u.data,R=u.refetch,N=u.baseUrl,w=(0,y.useState)(!1),T=p()(w,2),W=T[0],A=T[1],S=(0,U.s0)(),P=(0,t.eU)(),F=p()(P,1),L=F[0],g=(0,n.Z)({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u7BC7\u6587\u7AE0\u5417\uFF1F",content:(0,e.jsxs)(e.Fragment,{children:["\u60A8\u5373\u5C06\u5220\u9664\u201C",(0,e.jsx)("strong",{children:h.title}),"\u201D\u3002\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F"]})},l()(o()().mark(function J(){return o()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,L({variables:{id:h.id}});case 2:case"end":return B.stop()}},J)}))),z=p()(g,1),Y=z[0],G=(0,y.useCallback)(l()(o()().mark(function J(){return o()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,Y();case 2:return B.next=4,R();case 4:case"end":return B.stop()}},J)})),[Y,R]),k=(0,y.useCallback)(function(J){var q=J.key;q==="edit"?S("".concat(N,"/articles/").concat(h.id)):q==="delete"&&(A(!1),G())},[]);return(0,e.jsx)(r.Dropdown,{overlay:(0,e.jsxs)(r.Menu,{onClick:k,className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold w-125px py-4",children:[(0,e.jsx)(r.Menu.Item,{className:"px-3",children:"\u7F16\u8F91"},"edit"),(0,e.jsx)(r.Menu.Item,{className:"px-3",children:"\u53D1\u5E03"},"publish"),(0,e.jsx)(r.Menu.Item,{className:"px-3 actions-delete",children:"\u5220\u9664"},"delete")]}),placement:"bottomRight",onVisibleChange:A,visible:W,children:(0,e.jsxs)(r.Button,{variant:"light",activeColor:"light-primary",children:["\u64CD \u4F5C",(0,e.jsx)(K.ZP,{className:"ms-2 svg-icon-5 m-0",name:"Duotune/arr072"})]})})}function V(){var u,h,R=(0,U.UO)(),N=R.cid,w=(0,U.bx)(),T=w.rootCategoryId,W=w.categories,A=w.baseUrl,S=(0,U.TH)(),P=(0,U.s0)(),F=(0,y.useMemo)(function(){var j=Q.parse(S.search),C=j.q,f=M()(j,s);return f.where||(f.where={}),C&&(f.where={Keyword:C}),f.where.category={id:N,subColumns:!0},f},[location.search,N]),L=(0,t.gk)({variables:F,fetchPolicy:"cache-and-network"}),g=L.data,z=L.refetch,Y=L.loading,G=L.previousData,k=(0,y.useMemo)(function(){return Y?(G==null?void 0:G.articles)||{edges:[],total:0,current:1}:(g==null?void 0:g.articles)||{edges:[],total:0,current:1}},[g==null?void 0:g.articles,Y,G==null?void 0:G.articles]),J=(0,y.useMemo)(function(){return k.edges.map(function(j){return j.node})},[k.edges]),q=(0,y.useCallback)(function(j){var C=Q.parse(location.search);C.q=j,P(location.pathname+"?"+Q.stringify(C),{replace:!0})},[]),B=(0,y.useCallback)(function(j,C,f){var X,I={};if((X=F.where)!==null&&X!==void 0&&X.Keyword){var ee;I.q=(ee=F.where)===null||ee===void 0?void 0:ee.Keyword}f&&(I.orderBy=f.field+"_"+(f.order==="ascend"?"asc":"desc")),I.page=j.current,P(location.pathname+"?"+Q.stringify(I),{replace:!0})},[(u=F.where)===null||u===void 0?void 0:u.Keyword]),ie=(0,y.useState)([]),se=p()(ie,2),ue=se[0],ce=se[1],le=(0,y.useCallback)(function(j,C){ce(C)},[ce]),oe=(0,y.useMemo)(function(){return function(j,C){return(0,e.jsx)(x,{selectedRows:C,refetch:z})}},[z]);return(0,e.jsx)(ne.vs,{loading:Y,header:{title:(h=W.find(function(j){return j.id===N}))===null||h===void 0?void 0:h.name},children:(0,e.jsx)("div",{className:"tab-content",children:(0,e.jsxs)(r.Card,{flush:!0,headerClassName:"mt-5",children:[(0,e.jsxs)(r.Card.Header,{className:"pt-8",children:[(0,e.jsx)(r.Card.Title,{className:"flex-column",children:(0,e.jsx)(r.Input.Search,{solid:!0,className:"w-250px",placeholder:"\u641C\u7D22\u6587\u7AE0",onSearch:q})}),(0,e.jsx)(r.Card.Toolbar,{children:(0,e.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,e.jsx)(r.Dropdown,{overlay:(0,e.jsxs)(r.Menu,{className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold w-125px py-4",children:[(0,e.jsx)(r.Menu.Item,{className:"px-3",children:"\u6700\u65B0"},"edit"),(0,e.jsx)(r.Menu.Item,{className:"px-3",children:"\u6700\u665A"},"publish"),(0,e.jsx)(r.Menu.Item,{className:"px-3 actions-delete",children:"\u6700\u8FD1\u66F4\u65B0\u7684"},"delete"),(0,e.jsx)(r.Menu.Item,{className:"px-3 actions-delete",children:"\u70B9\u51FB\u91CF"},"delete")]}),placement:"bottomLeft",children:(0,e.jsx)(r.Button,{variant:"white",className:"me-3",icon:(0,e.jsx)(K.ZP,{className:"svg-icon-2",name:"Duotune/gen031"}),children:"\u6392\u5E8F: \u6700\u65B0"})}),(0,e.jsx)(r.Button,{as:D.rU,variant:"primary",className:"me-3",icon:(0,e.jsx)(K.ZP,{className:"svg-icon-2",name:"Duotune/arr075"}),to:"".concat(A,"/cms/categories/").concat(N,"/articles/new"),children:"\u65B0\u5EFA\u6587\u7AE0"})]})})]}),(0,e.jsx)(r.Card.Body,{className:"pt-0",children:k.total?(0,e.jsx)(r.Table,{rowKey:"id",rowSelection:{type:"checkbox",onChange:le,selectedRowKeys:(ue||[]).map(function(j){return j.id}),renderTitle:function(C){return(0,e.jsxs)(e.Fragment,{children:["\u5DF2\u9009\u4E2D",(0,e.jsx)("span",{className:"mx-2",children:C}),"\u7BC7\u6587\u7AE0"]})},toolbar:oe},pagination:k,dataSource:J,onChange:B,rowHeight:136,columns:[{title:"\u6807\u9898",dataIndex:"title",key:"title",render:function(C,f){var X;return(0,e.jsxs)("div",{className:"d-flex flex-row tw-truncate overflow-hidden",children:[(0,e.jsxs)("div",{className:"d-flex flex-column align-items-start tw-truncate overflow-hidden",children:[(0,e.jsxs)("div",{className:"meta-container no-selecto-drag",children:[(0,e.jsx)(D.rU,{to:"/xx/12",className:"user-message",children:"\u6797\u66AE\u6625"}),(0,e.jsx)("span",{className:"created-at",children:te()(f.createdAt).fromNow()}),(0,e.jsx)("div",{className:"category_list",children:f.categories.filter(function(I){return I.id!==T}).map(function(I){return(0,e.jsx)(D.rU,{to:"".concat(A,"/cms/categories/").concat(I.id,"/articles"),className:"tag",children:I.name},I.id)})})]}),(0,e.jsx)(D.rU,{onClick:function(ee){return ee.stopPropagation()},to:"".concat(A,"/cms/categories/").concat(N,"/articles/").concat(f.id),className:"mt-2 mb-2 text-gray-800 no-selecto-drag fs-4 text-hover-primary mb-1",children:C}),(0,e.jsx)("div",{className:Z()("summary mb-2 w-100 tw-text-ellipsis tw-truncate w-100",{"pe-8":!f.image}),children:(0,e.jsx)("span",{className:"text-muted fs-base no-selecto-drag",children:f.summary||"\u6CA1\u6709\u4EFB\u4F55\u5185\u5BB9..."})}),(0,e.jsxs)("div",{className:"fs-base",children:[(0,e.jsxs)(D.rU,{className:"text-muted no-selecto-drag text-hover-primary me-8",to:"".concat(A,"/cms/categories/").concat(N,"/articles/").concat(f.id),children:[(0,e.jsx)(K.ZP,{className:"svg-icon-4 me-2",name:"Bootstrap/eye"}),"41W"]}),(0,e.jsxs)(D.rU,{className:"text-muted no-selecto-drag text-hover-primary me-8",to:"".concat(A,"/cms/categories/").concat(N,"/articles/").concat(f.id,"#comments"),children:[(0,e.jsx)(K.ZP,{className:"svg-icon-6 me-2",name:"Bootstrap/chat"}),"41W"]})]})]}),f.image&&(0,e.jsx)("div",{className:"px-8 d-flex align-items-end",children:(0,e.jsx)(r.Symbol,{className:"article-image",src:"https://api.asany.cn"+"/preview/".concat((X=f.image)===null||X===void 0?void 0:X.id)})})]})}},{title:"\u72B6\u6001",dataIndex:"status",width:120,render:function(C){return(0,e.jsx)(r.Badge,{lightStyle:d[C].lightStyle,children:d[C].title})}},{title:"\u64CD\u4F5C",key:"action",width:140,render:function(C,f){return(0,e.jsx)(b,{baseUrl:"".concat(A,"/cms/categories/").concat(N),data:f,refetch:z})}}]}):(0,e.jsxs)(r.Empty,{title:"\u65B0\u589E\u6587\u7AE0",description:"\u8BE5\u680F\u76EE\u8FD8\u662F\u7A7A\u7684\uFF0C\u6CA1\u6709\u4EFB\u4F55\u6587\u7AE0",image:"/assets/media/illustrations/sigma-1/4.png",children:[(0,e.jsx)(r.Button,{as:D.rU,className:"me-2",variant:"light",to:"".concat(A,"/settings"),children:"\u67E5\u770B\u680F\u76EE\u4FE1\u606F"}),(0,e.jsx)(r.Button,{as:D.rU,variant:"primary",to:"".concat(A,"/cms/categories/").concat(N,"/articles/new"),children:"\u65B0\u5EFA\u6587\u7AE0"})]})})]})})})}var O=V},38018:function(H,i,a){var E=a(5574).default,M=a(64599).default,$=a(52677).default,o=a(19632).default,c=a(62072),l=a(44020),v=a(13615),p=a(92806),y=function(t){return t==null};function U(r){switch(r.arrayFormat){case"index":return function(t){return function(n,e){var s=n.length;return e===void 0||r.skipNull&&e===null||r.skipEmptyString&&e===""?n:e===null?[].concat(o(n),[[m(t,r),"[",s,"]"].join("")]):[].concat(o(n),[[m(t,r),"[",m(s,r),"]=",m(e,r)].join("")])}};case"bracket":return function(t){return function(n,e){return e===void 0||r.skipNull&&e===null||r.skipEmptyString&&e===""?n:e===null?[].concat(o(n),[[m(t,r),"[]"].join("")]):[].concat(o(n),[[m(t,r),"[]=",m(e,r)].join("")])}};case"comma":case"separator":return function(t){return function(n,e){return e==null||e.length===0?n:n.length===0?[[m(t,r),"=",m(e,r)].join("")]:[[n,m(e,r)].join(r.arrayFormatSeparator)]}};default:return function(t){return function(n,e){return e===void 0||r.skipNull&&e===null||r.skipEmptyString&&e===""?n:e===null?[].concat(o(n),[m(t,r)]):[].concat(o(n),[[m(t,r),"=",m(e,r)].join("")])}}}}function D(r){var t;switch(r.arrayFormat){case"index":return function(n,e,s){if(t=/\[(\d*)\]$/.exec(n),n=n.replace(/\[\d*\]$/,""),!t){s[n]=e;return}s[n]===void 0&&(s[n]={}),s[n][t[1]]=e};case"bracket":return function(n,e,s){if(t=/(\[\])$/.exec(n),n=n.replace(/\[\]$/,""),!t){s[n]=e;return}if(s[n]===void 0){s[n]=[e];return}s[n]=[].concat(s[n],e)};case"comma":case"separator":return function(n,e,s){var d=typeof e=="string"&&e.includes(r.arrayFormatSeparator),x=typeof e=="string"&&!d&&Z(e,r).includes(r.arrayFormatSeparator);e=x?Z(e,r):e;var b=d||x?e.split(r.arrayFormatSeparator).map(function(V){return Z(V,r)}):e===null?e:Z(e,r);s[n]=b};default:return function(n,e,s){if(s[n]===void 0){s[n]=e;return}s[n]=[].concat(s[n],e)}}}function K(r){if(typeof r!="string"||r.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function m(r,t){return t.encode?t.strict?c(r):encodeURIComponent(r):r}function Z(r,t){return t.decode?l(r):r}function re(r){return Array.isArray(r)?r.sort():$(r)==="object"?re(Object.keys(r)).sort(function(t,n){return Number(t)-Number(n)}).map(function(t){return r[t]}):r}function _(r){var t=r.indexOf("#");return t!==-1&&(r=r.slice(0,t)),r}function ae(r){var t="",n=r.indexOf("#");return n!==-1&&(t=r.slice(n)),t}function te(r){r=_(r);var t=r.indexOf("?");return t===-1?"":r.slice(t+1)}function Q(r,t){return t.parseNumbers&&!Number.isNaN(Number(r))&&typeof r=="string"&&r.trim()!==""?r=Number(r):t.parseBooleans&&r!==null&&(r.toLowerCase()==="true"||r.toLowerCase()==="false")&&(r=r.toLowerCase()==="true"),r}function ne(r,t){t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t),K(t.arrayFormatSeparator);var n=D(t),e=Object.create(null);if(typeof r!="string"||(r=r.trim().replace(/^[?#&]/,""),!r))return e;var s=M(r.split("&")),d;try{for(s.s();!(d=s.n()).done;){var x=d.value;if(x!==""){var b=v(t.decode?x.replace(/\+/g," "):x,"="),V=E(b,2),O=V[0],u=V[1];u=u===void 0?null:["comma","separator"].includes(t.arrayFormat)?u:Z(u,t),n(Z(O,t),u,e)}}}catch(S){s.e(S)}finally{s.f()}for(var h=0,R=Object.keys(e);h<R.length;h++){var N=R[h],w=e[N];if($(w)==="object"&&w!==null)for(var T=0,W=Object.keys(w);T<W.length;T++){var A=W[T];w[A]=Q(w[A],t)}else e[N]=Q(w,t)}return t.sort===!1?e:(t.sort===!0?Object.keys(e).sort():Object.keys(e).sort(t.sort)).reduce(function(S,P){var F=e[P];return F&&$(F)==="object"&&!Array.isArray(F)?S[P]=re(F):S[P]=F,S},Object.create(null))}i.extract=te,i.parse=ne,i.stringify=function(r,t){if(!r)return"";t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t),K(t.arrayFormatSeparator);for(var n=function(u){return t.skipNull&&y(r[u])||t.skipEmptyString&&r[u]===""},e=U(t),s={},d=0,x=Object.keys(r);d<x.length;d++){var b=x[d];n(b)||(s[b]=r[b])}var V=Object.keys(s);return t.sort!==!1&&V.sort(t.sort),V.map(function(O){var u=r[O];return u===void 0?"":u===null?m(O,t):Array.isArray(u)?u.reduce(e(O),[]).join("&"):m(O,t)+"="+m(u,t)}).filter(function(O){return O.length>0}).join("&")},i.parseUrl=function(r,t){t=Object.assign({decode:!0},t);var n=v(r,"#"),e=E(n,2),s=e[0],d=e[1];return Object.assign({url:s.split("?")[0]||"",query:ne(te(r),t)},t&&t.parseFragmentIdentifier&&d?{fragmentIdentifier:Z(d,t)}:{})},i.stringifyUrl=function(r,t){t=Object.assign({encode:!0,strict:!0},t);var n=_(r.url).split("?")[0]||"",e=i.extract(r.url),s=i.parse(e,{sort:!1}),d=Object.assign(s,r.query),x=i.stringify(d,t);x&&(x="?".concat(x));var b=ae(r.url);return r.fragmentIdentifier&&(b="#".concat(m(r.fragmentIdentifier,t))),"".concat(n).concat(x).concat(b)},i.pick=function(r,t,n){n=Object.assign({parseFragmentIdentifier:!0},n);var e=i.parseUrl(r,n),s=e.url,d=e.query,x=e.fragmentIdentifier;return i.stringifyUrl({url:s,query:p(d,t),fragmentIdentifier:x},n)},i.exclude=function(r,t,n){var e=Array.isArray(t)?function(s){return!t.includes(s)}:function(s,d){return!t(s,d)};return i.pick(r,e,n)}},13615:function(H){H.exports=function(i,a){if(!(typeof i=="string"&&typeof a=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(a==="")return[i];var E=i.indexOf(a);return E===-1?[i]:[i.slice(0,E),i.slice(E+a.length)]}},62072:function(H){H.exports=function(i){return encodeURIComponent(i).replace(/[!'()*]/g,function(a){return"%".concat(a.charCodeAt(0).toString(16).toUpperCase())})}},44020:function(H){var i="%[a-f0-9]{2}",a=new RegExp("("+i+")|([^%]+?)","gi"),E=new RegExp("("+i+")+","gi");function M(c,l){try{return[decodeURIComponent(c.join(""))]}catch(y){}if(c.length===1)return c;l=l||1;var v=c.slice(0,l),p=c.slice(l);return Array.prototype.concat.call([],M(v),M(p))}function $(c){try{return decodeURIComponent(c)}catch(p){for(var l=c.match(a)||[],v=1;v<l.length;v++)c=M(l,v).join(""),l=c.match(a)||[];return c}}function o(c){for(var l={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},v=E.exec(c);v;){try{l[v[0]]=decodeURIComponent(v[0])}catch(K){var p=$(v[0]);p!==v[0]&&(l[v[0]]=p)}v=E.exec(c)}l["%C2"]="\uFFFD";for(var y=Object.keys(l),U=0;U<y.length;U++){var D=y[U];c=c.replace(new RegExp(D,"g"),l[D])}return c}H.exports=function(c){if(typeof c!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof c+"`");try{return c=c.replace(/\+/g," "),decodeURIComponent(c)}catch(l){return o(c)}}},92806:function(H){H.exports=function(i,a){for(var E={},M=Object.keys(i),$=Array.isArray(a),o=0;o<M.length;o++){var c=M[o],l=i[c];($?a.indexOf(c)!==-1:a(c,l,i))&&(E[c]=l)}return E}}}]);

var ne=Object.prototype.hasOwnProperty;var ae=Object.getOwnPropertySymbols,te=Object.prototype.propertyIsEnumerable;var V=Object.assign;var re=(P,E)=>{var r={};for(var m in P)ne.call(P,m)&&E.indexOf(m)<0&&(r[m]=P[m]);if(P!=null&&ae)for(var m of ae(P))E.indexOf(m)<0&&te.call(P,m)&&(r[m]=P[m]);return r};(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[6030,3975],{33201:function(){},48775:function(P,E,r){"use strict";r.d(E,{GP:function(){return m.Z},Hk:function(){return _}});var m=r(48655),X=r(39981),i=r(67294),l=r(94184),T=r.n(l),u=r(28865),S=r(37334),k=r(2824),K=r(11849),W=r(96486),j=r(85893),A={aside:{minimize:!1}},U=i.createContext({state:A,dispatch:function(){}}),C;(function(x){x.AsideToggle="ASIDE_TOGGLE"})(C||(C={}));function n(x,y){switch(y.type){case"ASIDE_TOGGLE":return x.aside.minimize=!x.aside.minimize,(0,K.Z)({},x);default:throw new Error}}var R=function(y){var F=(0,i.useReducer)(n,(0,W.cloneDeep)(A)),Z=(0,k.Z)(F,2),d=Z[0],s=Z[1];return(0,j.jsx)(U.Provider,{value:{state:d,dispatch:s},children:y.children})},e=function(){return(0,i.useContext)(U)},w=r(53704);function L(x){var y=x.children,F=e(),Z=F.dispatch,d=F.state.aside.minimize,s=(0,i.useCallback)(function(){Z({type:C.AsideToggle})},[Z]);return(0,j.jsxs)("div",{className:T()("app-aside aside"),children:[(0,j.jsx)(S.Z,{children:(0,j.jsx)(m.Z,{resizeable:!0,className:"app-sidebar",children:y})}),(0,j.jsx)(w.zx,{style:{marginBottom:"1.35rem",zIndex:10},onClick:s,activeColor:"primary",className:T()("btn-icon bg-body btn-color-gray-700 rounded-2 position-absolute translate-middle start-100 end-0 bottom-0 shadow-sm d-none d-lg-flex",{active:d}),children:(0,j.jsx)(u.JO,{name:"Duotune/arr063",className:"svg-icon-2 rotate-180"})})]})}var G=L;function $(x){var y=x.children,F=x.className,Z=e(),d=Z.state.aside.minimize;return(0,j.jsx)("div",{className:T()("micro-app-container page-full-content",F,{"aside-minimize":d}),children:y})}function Y(x){var y=x.children,F=x.className;return(0,j.jsx)(R,{children:(0,j.jsx)($,{className:F,children:y})})}Y.Sidebar=G;var _=Y,se=r(61997)},86328:function(P,E,r){"use strict";r.r(E),r.d(E,{default:function(){return Z}});var m=r(91220),X=r(86582),i=r(67294),l=r(28865),T=r(1861),u=r(43219),S=r(51615),k=r(14928),K=r(3182),W=r(2824),j=r(94043),A=r.n(j),U=r(94184),C=r.n(U),n=r(53704),R=r(54108),e=r(85893);function w(d){return["zip"].includes(d.extension)?(0,e.jsx)(l.ZP,{name:"Bootstrap/file-zip-fill",className:"svg-icon-2x"}):d.mimeType.startsWith("image/")?(0,e.jsx)(l.ZP,{name:"Bootstrap/file-image-fill",className:"svg-icon-2x"}):d.mimeType.startsWith("video/")?(0,e.jsx)(l.ZP,{name:"Bootstrap/file-play-fill",className:"svg-icon-2x"}):(0,e.jsx)(l.ZP,{name:"Bootstrap/file-post-fill",className:"svg-icon-2x"})}function L(d){var s=d.file,o=(0,S.k6)(),f=(0,u.tT)("cloud-drive.index",function(v){return v.api.base}),c=(0,u.tT)("cloud-drive.index",function(v){return v.api.upload}),b=(0,i.useCallback)(function(){c.cancel(s.id)},[c,s.id]),t=(0,i.useCallback)(function(){f.closeTransfers(),o.push("/drive/folders/".concat(s.result.parentFolder.id))},[f,s.result,o]),N=(0,i.useCallback)(function(){c.start(s.id)},[c,s.id]),M=(0,i.useCallback)(function(){c.restore(s.id)},[c,s.id]),p=(0,i.useCallback)(function(){c.pause(s.id)},[c,s.id]),z=(0,i.useCallback)(function(){c.delete(s.id)},[c,s.id]);return(0,e.jsxs)("li",{className:C()("file-item",{"file-item-uploaded":["completed","error"].includes(s.state)}),children:[(0,e.jsx)("div",{className:"file-icon",children:w(s)}),(0,e.jsxs)("div",{className:"file-details",children:[(0,e.jsx)("div",{className:"file-title",children:s.name}),(0,e.jsx)("div",{className:C()("file-transfer-progress progress",{"opacity-0":s.state=="completed"}),children:(0,e.jsx)(n.Ex,{color:"success",percent:s.progress})}),(0,e.jsxs)("div",{className:"file-status",children:[(0,e.jsx)("div",{className:"file-size",children:(0,R.jb)(s.size)}),s.state=="error"&&(0,e.jsx)("div",{className:"upload-error text-danger",children:"\u4E0A\u4F20\u51FA\u73B0\u9519\u8BEF!"}),!["completed","error"].includes(s.state)&&(0,e.jsx)("div",{className:"file-transfer-rate",children:s.progress==100?"\u7B49\u5F85\u5B8C\u6210...":!!s.uploadSpeed&&s.uploadSpeed+"/s"})]})]}),(0,e.jsxs)("div",{className:"file-actions",children:[s.state=="waiting"&&(0,e.jsx)(n.zx,{icon:(0,e.jsx)(l.ZP,{name:"Bootstrap/clock",className:"svg-icon-4"})}),s.state=="uploading"&&(0,e.jsx)(n.zx,{onClick:p,icon:(0,e.jsx)(l.ZP,{name:"Bootstrap/pause",className:"svg-icon-4"})}),s.state=="paused"&&(0,e.jsx)(n.zx,{onClick:N,icon:(0,e.jsx)(l.ZP,{name:"Bootstrap/arrow-up-short",className:"svg-icon-4"})}),["canceled","error"].includes(s.state)&&(0,e.jsx)(n.zx,{onClick:M,icon:(0,e.jsx)(l.ZP,{name:"Bootstrap/arrow-counterclockwise",className:"svg-icon-4"})}),s.state=="completed"&&(0,e.jsx)(n.zx,{onClick:t,icon:(0,e.jsx)(l.ZP,{name:"Bootstrap/folder2",className:"svg-icon-6"})}),!["completed","canceled","error"].includes(s.state)&&(0,e.jsx)(n.zx,{onClick:b,icon:(0,e.jsx)(l.ZP,{name:"Bootstrap/x",className:"svg-icon-4"})}),["completed","canceled","error"].includes(s.state)&&(0,e.jsx)(n.zx,{onClick:z,icon:(0,e.jsx)(l.ZP,{name:"Bootstrap/eraser",className:"svg-icon-6"})})]})]},s.id)}function G(){var d=(0,u.tT)("cloud-drive.index",function(s){var o=s.state;return o.uploadFiles});return(0,e.jsx)(T.E,{className:C()("custom-scrollbar"),options:{scrollbars:{autoHide:"scroll"}},children:d.length?(0,e.jsx)("ul",{className:"transfer-file-list",children:d.map(function(s){return(0,e.jsx)(L,{file:s},s.id)})}):(0,e.jsxs)("div",{className:"transfer-list-empty",children:[(0,e.jsx)("img",{src:"/assets/media/illustrations/dozzy-1/4.png"}),(0,e.jsx)("span",{className:"empty-title",children:"\u6CA1\u6709\u4E0A\u4F20\u4EFB\u52A1"})]})})}function $(d){var s=d.file,o=(0,u.tT)("cloud-drive.index",function(p){return p.api.download}),f=(0,i.useCallback)(function(){o.cancel(s.id)},[o,s.id]),c=(0,i.useCallback)(function(){o.save(s.id),console.log("\u672C\u5730\u4E0B\u8F7D")},[o,s.id]),b=(0,i.useCallback)(function(){o.start(s.id)},[o,s.id]),t=(0,i.useCallback)(function(){o.restore(s.id)},[o,s.id]),N=(0,i.useCallback)(function(){o.pause(s.id)},[o,s.id]),M=(0,i.useCallback)(function(){o.delete(s.id)},[o,s.id]);return(0,e.jsxs)("li",{className:C()("file-item",{"file-item-download":["completed","error"].includes(s.state)}),children:[(0,e.jsx)("div",{className:"file-icon",children:w(s)}),(0,e.jsxs)("div",{className:"file-details",children:[(0,e.jsx)("div",{className:"file-title",children:s.name}),(0,e.jsx)("div",{className:C()("file-transfer-progress progress",{"opacity-0":s.state=="completed"}),children:(0,e.jsx)(n.Ex,{color:"primary",percent:s.progress})}),(0,e.jsxs)("div",{className:"file-status",children:[(0,e.jsx)("div",{className:"file-size",children:!!s.size&&(0,R.jb)(s.size)}),s.state=="error"&&(0,e.jsx)("div",{className:"upload-error text-danger",children:"\u4E0B\u8F7D\u51FA\u73B0\u9519\u8BEF!"}),!["completed","error"].includes(s.state)&&(0,e.jsx)("div",{className:"file-transfer-rate",children:s.progress==0||!s.size?"\u7B49\u5F85\u8D44\u6E90...":!!s.downloadSpeed&&s.downloadSpeed+"/s"})]})]}),(0,e.jsxs)("div",{className:"file-actions",children:[s.state=="waiting"&&(0,e.jsx)(n.zx,{icon:(0,e.jsx)(l.ZP,{name:"Bootstrap/clock",className:"svg-icon-4"})}),s.state=="downloading"&&(0,e.jsx)(n.zx,{onClick:N,icon:(0,e.jsx)(l.ZP,{name:"Bootstrap/pause",className:"svg-icon-4"})}),s.state=="paused"&&(0,e.jsx)(n.zx,{onClick:b,icon:(0,e.jsx)(l.ZP,{name:"Bootstrap/arrow-down-short",className:"svg-icon-4"})}),["canceled","error"].includes(s.state)&&(0,e.jsx)(n.zx,{onClick:t,icon:(0,e.jsx)(l.ZP,{name:"Bootstrap/arrow-counterclockwise",className:"svg-icon-4"})}),s.state=="completed"&&(0,e.jsx)(n.zx,{onClick:c,icon:(0,e.jsx)(l.ZP,{name:"Bootstrap/download",className:"svg-icon-6"})}),!["completed","canceled","error"].includes(s.state)&&(0,e.jsx)(n.zx,{onClick:f,icon:(0,e.jsx)(l.ZP,{name:"Bootstrap/x",className:"svg-icon-4"})}),["completed","canceled","error"].includes(s.state)&&(0,e.jsx)(n.zx,{onClick:M,icon:(0,e.jsx)(l.ZP,{name:"Bootstrap/eraser",className:"svg-icon-6"})})]})]},s.id)}function Y(){var d=(0,u.tT)("cloud-drive.index",function(s){var o=s.state;return o.downloadFiles});return(0,e.jsx)(T.E,{className:C()("custom-scrollbar"),options:{scrollbars:{autoHide:"scroll"}},children:d.length?(0,e.jsx)("ul",{className:"transfer-file-list",children:d.map(function(s){return(0,e.jsx)($,{file:s},s.id)})}):(0,e.jsxs)("div",{className:"transfer-list-empty",children:[(0,e.jsx)("img",{src:"/assets/media/illustrations/dozzy-1/4.png"}),(0,e.jsx)("span",{className:"empty-title",children:"\u6CA1\u6709\u4E0B\u8F7D\u4EFB\u52A1"})]})})}function _(){var d=(0,i.useState)("upload"),s=(0,W.Z)(d,2),o=s[0],f=s[1],c=(0,i.useCallback)(function(v){f(v)},[]),b=(0,u.tT)("cloud-drive.index",function(v){return{deleteUploadFile:v.api.upload.delete,deleteDownloadFile:v.api.download.delete}}),t=(0,u.tT)("cloud-drive.index",function(v){var h=v.state;return h.uploadFiles.filter(function(D){return D.state=="completed"})}),N=(0,u.tT)("cloud-drive.index",function(v){var h=v.state;return h.downloadFiles.filter(function(D){return D.state=="completed"})}),M=(0,i.useCallback)((0,K.Z)(A().mark(function v(){var h,D,I;return A().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:h=(0,m.Z)(t),a.prev=1,h.s();case 3:if((D=h.n()).done){a.next=9;break}return I=D.value,a.next=7,b.deleteUploadFile(I.id);case 7:a.next=3;break;case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),h.e(a.t0);case 14:return a.prev=14,h.f(),a.finish(14);case 17:case"end":return a.stop()}},v,null,[[1,11,14,17]])})),[b,t]),p=(0,i.useCallback)((0,K.Z)(A().mark(function v(){var h,D,I;return A().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:h=(0,m.Z)(N),a.prev=1,h.s();case 3:if((D=h.n()).done){a.next=9;break}return I=D.value,a.next=7,b.deleteDownloadFile(I.id);case 7:a.next=3;break;case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),h.e(a.t0);case 14:return a.prev=14,h.f(),a.finish(14);case 17:case"end":return a.stop()}},v,null,[[1,11,14,17]])})),[b,N]),z=(0,i.useMemo)(function(){return!!t.length&&o=="upload"||!!N.length&&o=="download"},[o,t.length,N.length]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"popover-header",children:[(0,e.jsx)("span",{className:"popover-title",children:"\u4F20\u8F93\u5217\u8868"}),(0,e.jsx)("div",{className:"popover-toolbar",children:z&&(0,e.jsx)("a",{className:"cursor-pointer",onClick:o=="upload"?M:p,children:"\u6E05\u7A7A\u5DF2\u5B8C\u6210"})})]}),(0,e.jsxs)(n.mQ,{activeKey:o,onChange:c,tabPosition:"left",children:[(0,e.jsx)(n.mQ.TabPane,{tab:"\u6587\u4EF6\u4E0A\u4F20",children:(0,e.jsx)(G,{})},"upload"),(0,e.jsx)(n.mQ.TabPane,{tab:"\u6587\u4EF6\u4E0B\u8F7D",children:(0,e.jsx)(Y,{})},"download")]})]})}var se=_,x=r(48775);function y(d){var s=d.drives,o=d.onAction,f=(0,u.tT)("cloud-drive.index",function(t){var N=t.state;return N.driveId}),c=(0,i.useCallback)(function(t){if(t.startsWith("drive-"))console.log(t);else return o(t),!1;return!0},[o]),b=(0,i.useMemo)(function(){return[].concat((0,X.Z)(s.map(function(t){return{value:"drive-".concat(t.id),label:t.name}})),[{type:"separator"},{value:"preferences",label:"\u504F\u597D\u8BBE\u7F6E"}])},[s]);return(0,e.jsx)("div",{className:"app-sidebar-footer",children:(0,e.jsx)(n.Ph,{onChange:c,placement:"topCenter",value:f?"drive-".concat(f):void 0,options:b})})}function F(){var d=(0,u.tT)("cloud-drive.index",function(a){var g=a.state;return g.driveId}),s=(0,u.tT)("cloud-drive.index",function(a){var g=a.state;return g.visibleTransfers}),o=(0,u.tT)("cloud-drive.index",function(a){return a.api.base}),f=(0,S.$B)({path:"/drive/:type/:value",strict:!0,sensitive:!0}),c=(0,S.$B)({path:"/drive/:type",strict:!0,sensitive:!0}),b=(0,k.dH)({fetchPolicy:"cache-and-network"}),t=b.data,N=(0,u.tT)("cloud-drive.index",function(a){var g=a.state;return g.driveId}),M=(0,u.tT)("cloud-drive.index",function(a){return a.setCloudDrive});(0,i.useEffect)(function(){if(!!(t!=null&&t.cloudDrives)){var a=t==null?void 0:t.cloudDrives;a.some(function(g){return g.id==N})||M(a[0])}},[t==null?void 0:t.cloudDrives,M,N]);var p=(0,i.useMemo)(function(){if(!(!(t!=null&&t.cloudDrives)||!d))return t.cloudDrives.find(function(a){return a.id==d})},[t==null?void 0:t.cloudDrives,d]),z=(0,i.useMemo)(function(){return(f==null?void 0:f.params.type)||(c==null?void 0:c.params.type)},[f,c]),v=(0,i.useMemo)(function(){return f==null?void 0:f.params.value},[f]),h=(0,i.useCallback)(function(a){a?o.openTransfers():o.closeTransfers()},[o]),D=(0,i.useMemo)(function(){return v?z=="folders"?["my-drive"]:z=="mime-types"?[v]:[z]:[z]},[z,v]),I=(0,u.tT)("cloud-drive.index",function(a){var g=a.state,H=0,Q=0,B=(0,m.Z)(g.uploadFiles),J;try{for(B.s();!(J=B.n()).done;){var O=J.value;H+=O.size,Q+=O.size*(O.progress/100)}}catch(ee){B.e(ee)}finally{B.f()}return Math.max(Q/H*100<<0,g.uploadFiles.length?1:0)}),q=(0,u.tT)("cloud-drive.index",function(a){var g=a.state,H=0,Q=0,B=(0,m.Z)(g.downloadFiles),J;try{for(B.s();!(J=B.n()).done;){var O=J.value;H+=O.size,Q+=O.size*(O.progress/100)}}catch(ee){B.e(ee)}finally{B.f()}return Math.max(Q/H*100<<0,g.downloadFiles.length?1:0)});return(0,e.jsxs)(x.GP,{width:280,className:"app-sidebar app-drive-sidebar",children:[(0,e.jsxs)("div",{className:"relative mt-5 px-5 pt-5 d-flex",children:[(0,e.jsx)("h1",{className:"text-gray-800 flex-row-fluid fw-bold mb-6 mx-5",children:"\u4E91\u76D8"}),(0,e.jsx)(n.J2,{visible:s,onVisibleChange:h,overlayClassName:"dialog-transfers",content:(0,e.jsx)(se,{}),children:(0,e.jsxs)("div",{className:"file-transfer-icon",children:[(0,e.jsx)(n.mZ,{className:"download-all-progress position-absolute top-50 start-50 translate-middle",width:34,percent:q,strokeWidth:6,success:{strokeColor:"#04c8c8"}}),(0,e.jsx)(n.mZ,{className:"upload-all-progress position-absolute top-50 start-50 translate-middle",width:26,percent:I,strokeWidth:7.5,success:{strokeColor:"#009ef7"}}),(0,e.jsx)(n.GM,{size:"sm",pause:!q&&!I,children:(0,e.jsx)(l.ZP,{className:"svg-icon-6",name:"Duotune/arr032"})})]})})]}),(0,e.jsxs)(T.E,{className:"app-sidebar-body flex-column-fluid d-flex flex-column px-8 custom-scrollbar",options:{scrollbars:{autoHide:"scroll"}},children:[(0,e.jsxs)(n.v2,{className:"menu-title-gray-600 menu-icon-gray-400 menu-state-bg menu-state-primary menu-state-icon-primary menu-state-bullet-primary",accordion:!1,rounded:!0,selectable:"AllMenu",openKeys:["my-drive"],selectedKeys:D,children:[(0,e.jsxs)(n.v2.SubMenu,{url:"/drive/my-drive",titleClassName:"fw-bolder",icon:(0,e.jsx)(l.ZP,{className:"svg-icon-2 me-3",name:"Duotune/abs040"}),title:"\u6211\u7684\u6587\u4EF6",children:[(0,e.jsx)(n.v2.Item,{className:"mb-2 mt-2",url:"/drive/mime-types/image",titleClassName:"fw-bolder",icon:(0,e.jsx)(l.ZP,{className:"svg-icon-2 me-3",name:"Duotune/gen006"}),children:"\u56FE\u7247"},"image"),(0,e.jsx)(n.v2.Item,{className:"mb-2",url:"/drive/mime-types/document",titleClassName:"fw-bolder",icon:(0,e.jsx)(l.ZP,{className:"svg-icon-2 me-3",name:"Duotune/fil003"}),children:"\u6587\u6863"},"document"),(0,e.jsx)(n.v2.Item,{className:"mb-2",url:"/drive/mime-types/video",titleClassName:"fw-bolder",icon:(0,e.jsx)(l.ZP,{className:"svg-icon-2 me-3",name:"Duotune/arr027"}),children:"\u89C6\u9891"},"video"),(0,e.jsx)(n.v2.Item,{className:"mb-2",url:"/drive/mime-types/audio",titleClassName:"fw-bolder",icon:(0,e.jsx)(l.ZP,{className:"svg-icon-2 me-3",name:"Duotune/elc008"}),children:"\u97F3\u9891"},"audio"),(0,e.jsx)(n.v2.Item,{url:"/drive/mime-types/other",titleClassName:"fw-bolder",icon:(0,e.jsx)(l.ZP,{className:"svg-icon-2 me-3",name:"Duotune/gen052"}),children:"\u5176\u4ED6"},"other")]},"my-drive"),(0,e.jsx)(n.v2.Separator,{}),(0,e.jsx)(n.v2.Item,{className:"mb-2",url:"/drive/starred",titleClassName:"fw-bolder",icon:(0,e.jsx)(l.ZP,{className:"svg-icon-2 me-3",name:"Duotune/abs024"}),children:"\u6536\u85CF\u5939"},"starred"),(0,e.jsx)(n.v2.Item,{url:"/drive/trash",titleClassName:"fw-bolder",icon:(0,e.jsx)(l.ZP,{className:"svg-icon-2 me-3",name:"Duotune/gen027"}),children:"\u56DE\u6536\u7AD9"},"trash"),(0,e.jsx)(n.v2.Separator,{}),(0,e.jsx)(n.v2.Item,{url:"/drive/quota",titleClassName:"fw-bolder",icon:(0,e.jsx)(l.ZP,{className:"svg-icon-2 me-3",name:"Duotune/fil020"}),children:"\u5B58\u50A8\u7A7A\u95F4"},"quota")]}),(0,e.jsxs)("div",{className:"drive-quota d-flex align-items-center flex-column mb-10",children:[(0,e.jsx)("div",{className:"h-5px mx-3 w-100 bg-light mb-2",children:(0,e.jsx)("div",{className:"bg-success rounded h-5px",role:"progressbar",style:{width:"".concat((p==null?void 0:p.quota.usage)/(p==null?void 0:p.quota.size)*100,"%")}})}),(0,e.jsxs)("div",{className:"d-flex justify-content-between w-100 mt-auto mb-2",children:[(0,e.jsxs)("span",{className:"fw-bold fs-7 text-gray-400",children:["\u5DF2\u4F7F\u7528\xA0",p==null?void 0:p.quota.usageStr,", \xA0\u5171\xA0",p==null?void 0:p.quota.sizeStr]}),(0,e.jsx)("a",{className:"fw-bolder fs-7 text-success",children:"\u6269\u5BB9"})]})]})]}),(0,e.jsx)(y,{drives:(t==null?void 0:t.cloudDrives)||[],onAction:function(){}})]})}var Z=F},77104:function(P,E,r){"use strict";var m=r(94184),X=r.n(m),i=r(67294),l=r(70861),T=r(76792),u=r(85893);const S={variant:"primary",active:!1,disabled:!1},k=i.forwardRef((e,R)=>{var{as:K,bsPrefix:W,variant:j,size:A,active:U,className:C}=e,n=re(e,["as","bsPrefix","variant","size","active","className"]);const w=(0,T.vE)(W,"btn"),[L,{tagName:G}]=(0,l.FT)(V({tagName:K},n)),$=G;return(0,u.jsx)($,V(V(V({},L),n),{ref:R,className:X()(C,w,U&&"active",j&&`${w}-${j}`,A&&`${w}-${A}`,n.href&&n.disabled&&"disabled")}))});k.displayName="Button",k.defaultProps=S,E.Z=k}}]);

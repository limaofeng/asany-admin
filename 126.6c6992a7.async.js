"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[126],{93818:function(U,o,i){i.r(o);var p=i(19632),S=i.n(p),I=i(5574),x=i.n(I),s=i(13769),g=i.n(s),C=i(15009),A=i.n(C),W=i(99289),T=i.n(W),F=i(62435),k=i(96974),y=i(46027),P=i(12845),G=i(38018),Z=i(10185),X=i(73588),h=i(2721),H=i(19975),u=i(86074),r=["q"];function e(n){var t=n.data,d=n.navigate,f=n.baseUrl,j=n.onDelete,b=(0,F.useCallback)(function(){var E=T()(A()().mark(function R(N){var w,c;return A()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return w="\u786E\u5B9A\u5220\u9664\u95E8\u5E97 \u201C".concat(N.name,"\u201D \u5417\uFF1F"),l.next=3,h.Modal.confirm({title:"\u786E\u5B9A\u5220\u9664",content:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{className:"tip-confirm",children:w}),(0,u.jsx)("p",{children:"\u5220\u9664\u7684\u64CD\u4F5C\u4E0D\u53EF\u9006,\u8BF7\u8C28\u614E\u64CD\u4F5C"})]}),okClassName:"btn-danger",okText:"\u5220\u9664"});case 3:if(c=l.sent,c.isConfirmed){l.next=6;break}return l.abrupt("return");case 6:return l.next=8,j(N.id);case 8:h.Toast.success("\u95E8\u5E97 \u201C".concat(N.name,"\u201D \u5220\u9664\u6210\u529F"),2e3,{placement:"bottom-left",progressBar:!0});case 9:case"end":return l.stop()}},R)}));return function(R){return E.apply(this,arguments)}}(),[j]),O=(0,F.useCallback)(function(E){E.key==="view"?d("".concat(f,"/").concat(t.id)):E.key==="delete"&&b(t)},[f,t,b,d]);return(0,u.jsx)(h.Dropdown,{overlay:(0,u.jsxs)(h.Menu,{onClick:O,className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold fs-8 w-125px py-4",children:[(0,u.jsx)(h.Menu.Item,{className:"px-3",children:"\u7F16\u8F91"},"view"),(0,u.jsx)(h.Menu.Item,{className:"px-3 actions-delete",children:"\u5220\u9664"},"delete")]}),placement:"bottomRight",children:(0,u.jsxs)(h.Button,{className:"fs-8",variant:"light",activeColor:"light-primary",children:["\u64CD\u4F5C",(0,u.jsx)(y.JO,{className:"svg-icon-5 ms-2 me-n1",name:"Duotune/arr072"})]})})}function a(){var n,t,d=(0,k.TH)(),f=(0,k.s0)(),j=d.pathname,b=(0,F.useMemo)(function(){var m=G.parse(d.search),_=m.q,v=g()(m,r);return _&&(v.filter={name_contains:_}),v},[d]),O=(0,F.useMemo)(function(){if(!b.orderBy)return{order:"descend",field:"createdAt"};var m=b.orderBy.split("_"),_=x()(m,2),v=_[0],M=_[1];return{order:M==="desc"?"descend":"ascend",field:v}},[b.orderBy]),E=(0,H.OE)({refetchQueries:[H.b_]}),R=x()(E,1),N=R[0],w=(0,H.ZL)({fetchPolicy:"cache-and-network",variables:b}),c=w.data,B=w.loading,l=w.previousData,V=(0,F.useMemo)(function(){return B?(l==null?void 0:l.total.totalCount)||0:(c==null?void 0:c.total.totalCount)||0},[c==null?void 0:c.total.totalCount,B,l==null?void 0:l.total]),K=(0,F.useMemo)(function(){return B?(l==null?void 0:l.landingStores)||{total:0,current:1}:(c==null?void 0:c.landingStores)||{total:0,current:1}},[c==null?void 0:c.landingStores,B,l==null?void 0:l.landingStores]),J=(0,F.useMemo)(function(){var m;if(B){var _;return((l==null||(_=l.landingStores)===null||_===void 0?void 0:_.edges)||[]).map(function(v){return v.node})}return((c==null||(m=c.landingStores)===null||m===void 0?void 0:m.edges)||[]).map(function(v){return v.node})},[c==null?void 0:c.landingStores,B,l==null?void 0:l.landingStores]),$=(0,F.useCallback)(function(m){f(d.pathname+"?"+G.stringify({q:m}),{replace:!0})},[f,d.pathname]),rr=(0,F.useCallback)(function(m,_,v){var M,L={};if((M=b.filter)!==null&&M!==void 0&&M.name_contains){var D;L.q=(D=b.filter)===null||D===void 0?void 0:D.name_contains}v&&(L.orderBy=v.field+"_"+(v.order==="ascend"?"asc":"desc")),L.page=m.current,f(d.pathname+"?"+G.stringify(L),{replace:!0})},[history,d.pathname,(n=b.filter)===null||n===void 0?void 0:n.name_contains]),z=(0,F.useCallback)(T()(A()().mark(function m(){var _,v,M,L,D,q=arguments;return A()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:for(_=q.length,v=new Array(_),M=0;M<_;M++)v[M]=q[M];return Q.next=3,N({variables:{ids:v}});case 3:return L=Q.sent,D=L.data,Q.abrupt("return",(D==null?void 0:D.deleteLandingStore)||0);case 6:case"end":return Q.stop()}},m)})),[N]),Y=(0,F.useCallback)(function(m){return T()(A()().mark(function _(){var v,M;return A()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return v="\u786E\u5B9A\u5220\u9664\u9009\u4E2D\u7684, \u5171 ".concat(m.length," \u4E2A\u95E8\u5E97\u5417\uFF1F"),D.next=3,h.Modal.confirm({title:"\u786E\u5B9A\u5220\u9664",content:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{className:"tip-confirm",children:v}),(0,u.jsx)("p",{children:"\u5220\u9664\u7684\u64CD\u4F5C\u4E0D\u53EF\u9006,\u8BF7\u8C28\u614E\u64CD\u4F5C"})]}),okClassName:"btn-danger",okText:"\u5220\u9664"});case 3:if(M=D.sent,M.isConfirmed){D.next=6;break}return D.abrupt("return");case 6:return D.next=8,z.apply(void 0,S()(m));case 8:h.Toast.success("\u95E8\u5E97\u6279\u91CF\u5220\u9664\u6210\u529F",2e3,{placement:"bottom-left",progressBar:!0});case 9:case"end":return D.stop()}},_)}))},[z]),er=(0,F.useMemo)(function(){return function(m){return(0,u.jsx)("div",{children:(0,u.jsx)(h.Button,{color:"success",onClick:Y(m),variant:!1,children:"\u6279\u91CF\u5220\u9664"})})}},[Y]);return(0,u.jsxs)(X.vs,{footer:!1,children:[(0,u.jsxs)("div",{className:"d-flex flex-wrap flex-stack pb-7",children:[(0,u.jsxs)("div",{className:"d-flex flex-wrap align-items-center",children:[(0,u.jsxs)("h3",{className:"fw-bolder me-5",children:["\u95E8\u5E97 (",V,")"]}),(0,u.jsx)(h.Input.Search,{onSearch:$,defaultValue:(t=b.filter)===null||t===void 0?void 0:t.name_contains,placeholder:"\u641C\u7D22",className:"border-body bg-body w-250px"})]}),(0,u.jsx)(Z.ZX,{children:(0,u.jsx)("div",{className:"d-flex my-0",children:(0,u.jsx)(h.Button,{as:P.Link,to:"".concat(j,"/new"),children:"\u65B0\u589E\u95E8\u5E97"})})})]}),!V&&!B?(0,u.jsx)(h.Card,{className:"mb-5 mb-xl-10",children:(0,u.jsx)(h.Empty,{title:"\u8FD8\u6CA1\u6709\u95E8\u5E97",description:"\u9A6C\u4E0A\u6DFB\u52A0\u4E00\u4E2A\u95E8\u5E97\u8BD5\u8BD5",image:"/assets/media/illustrations/sigma-1/4.png",children:(0,u.jsx)(h.Button,{as:P.Link,variant:"primary",to:"".concat(j,"/new"),children:"\u65B0\u589E\u95E8\u5E97"})})}):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(h.Card,{className:"mb-5 mb-xl-10",children:(0,u.jsx)(h.Card.Body,{children:(0,u.jsx)(h.BlockUI,{overlayClassName:"bg-white bg-opacity-25",loading:B,children:(0,u.jsx)(h.Table,{hover:!0,rowKey:"id",rowSelection:{type:"checkbox",renderTitle:function(_){return(0,u.jsxs)(u.Fragment,{children:["\u5DF2\u9009\u4E2D",(0,u.jsx)("span",{className:"mx-2",children:_}),"\u4E2A\u95E8\u5E97"]})},toolbar:er},noRowsRenderer:function(){return(0,u.jsx)(h.Empty,{description:"\u5217\u8868\u6570\u636E\u4E3A\u7A7A",image:"/assets/media/illustrations/sigma-1/5.png"})},columns:[{key:"code",title:"\u5E97\u53F7",sorter:!0,sortOrder:O.field==="code"?O.order:void 0,width:80},{key:"name",title:"\u540D\u79F0",sorter:!0,sortOrder:O.field==="name"?O.order:void 0,render:function(_,v){return(0,u.jsx)("div",{children:(0,u.jsx)(P.Link,{className:"text-gray-700",to:"".concat(j,"/").concat(v.id),children:_})})}},{key:"qrCode",title:"\u4E8C\u7EF4\u7801",width:60,render:function(_){return _?(0,u.jsx)("img",{src:P.APP_CONFIG.STORAGE_URL+"/preview/".concat(_.id),className:"h-30px w-30px"}):(0,u.jsx)(y.JO,{className:"svg-icon-2qx text-muted",name:"Bootstrap/qr-code"})}},{key:"actions",title:"\u64CD\u4F5C",width:100,render:function(_,v){return(0,u.jsx)(e,{baseUrl:j,onDelete:z,navigate:f,data:v})}}],pagination:K,onChange:rr,dataSource:J})})})})})]})}o.default=a},38018:function(U,o,i){var p=i(5574).default,S=i(64599).default,I=i(52677).default,x=i(19632).default,s=i(62072),g=i(44020),C=i(13615),A=i(92806),W=function(e){return e==null};function T(r){switch(r.arrayFormat){case"index":return function(e){return function(a,n){var t=a.length;return n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?a:n===null?[].concat(x(a),[[y(e,r),"[",t,"]"].join("")]):[].concat(x(a),[[y(e,r),"[",y(t,r),"]=",y(n,r)].join("")])}};case"bracket":return function(e){return function(a,n){return n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?a:n===null?[].concat(x(a),[[y(e,r),"[]"].join("")]):[].concat(x(a),[[y(e,r),"[]=",y(n,r)].join("")])}};case"comma":case"separator":return function(e){return function(a,n){return n==null||n.length===0?a:a.length===0?[[y(e,r),"=",y(n,r)].join("")]:[[a,y(n,r)].join(r.arrayFormatSeparator)]}};default:return function(e){return function(a,n){return n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?a:n===null?[].concat(x(a),[y(e,r)]):[].concat(x(a),[[y(e,r),"=",y(n,r)].join("")])}}}}function F(r){var e;switch(r.arrayFormat){case"index":return function(a,n,t){if(e=/\[(\d*)\]$/.exec(a),a=a.replace(/\[\d*\]$/,""),!e){t[a]=n;return}t[a]===void 0&&(t[a]={}),t[a][e[1]]=n};case"bracket":return function(a,n,t){if(e=/(\[\])$/.exec(a),a=a.replace(/\[\]$/,""),!e){t[a]=n;return}if(t[a]===void 0){t[a]=[n];return}t[a]=[].concat(t[a],n)};case"comma":case"separator":return function(a,n,t){var d=typeof n=="string"&&n.includes(r.arrayFormatSeparator),f=typeof n=="string"&&!d&&P(n,r).includes(r.arrayFormatSeparator);n=f?P(n,r):n;var j=d||f?n.split(r.arrayFormatSeparator).map(function(b){return P(b,r)}):n===null?n:P(n,r);t[a]=j};default:return function(a,n,t){if(t[a]===void 0){t[a]=n;return}t[a]=[].concat(t[a],n)}}}function k(r){if(typeof r!="string"||r.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function y(r,e){return e.encode?e.strict?s(r):encodeURIComponent(r):r}function P(r,e){return e.decode?g(r):r}function G(r){return Array.isArray(r)?r.sort():I(r)==="object"?G(Object.keys(r)).sort(function(e,a){return Number(e)-Number(a)}).map(function(e){return r[e]}):r}function Z(r){var e=r.indexOf("#");return e!==-1&&(r=r.slice(0,e)),r}function X(r){var e="",a=r.indexOf("#");return a!==-1&&(e=r.slice(a)),e}function h(r){r=Z(r);var e=r.indexOf("?");return e===-1?"":r.slice(e+1)}function H(r,e){return e.parseNumbers&&!Number.isNaN(Number(r))&&typeof r=="string"&&r.trim()!==""?r=Number(r):e.parseBooleans&&r!==null&&(r.toLowerCase()==="true"||r.toLowerCase()==="false")&&(r=r.toLowerCase()==="true"),r}function u(r,e){e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e),k(e.arrayFormatSeparator);var a=F(e),n=Object.create(null);if(typeof r!="string"||(r=r.trim().replace(/^[?#&]/,""),!r))return n;var t=S(r.split("&")),d;try{for(t.s();!(d=t.n()).done;){var f=d.value;if(f!==""){var j=C(e.decode?f.replace(/\+/g," "):f,"="),b=p(j,2),O=b[0],E=b[1];E=E===void 0?null:["comma","separator"].includes(e.arrayFormat)?E:P(E,e),a(P(O,e),E,n)}}}catch(K){t.e(K)}finally{t.f()}for(var R=0,N=Object.keys(n);R<N.length;R++){var w=N[R],c=n[w];if(I(c)==="object"&&c!==null)for(var B=0,l=Object.keys(c);B<l.length;B++){var V=l[B];c[V]=H(c[V],e)}else n[w]=H(c,e)}return e.sort===!1?n:(e.sort===!0?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce(function(K,J){var $=n[J];return $&&I($)==="object"&&!Array.isArray($)?K[J]=G($):K[J]=$,K},Object.create(null))}o.extract=h,o.parse=u,o.stringify=function(r,e){if(!r)return"";e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e),k(e.arrayFormatSeparator);for(var a=function(E){return e.skipNull&&W(r[E])||e.skipEmptyString&&r[E]===""},n=T(e),t={},d=0,f=Object.keys(r);d<f.length;d++){var j=f[d];a(j)||(t[j]=r[j])}var b=Object.keys(t);return e.sort!==!1&&b.sort(e.sort),b.map(function(O){var E=r[O];return E===void 0?"":E===null?y(O,e):Array.isArray(E)?E.reduce(n(O),[]).join("&"):y(O,e)+"="+y(E,e)}).filter(function(O){return O.length>0}).join("&")},o.parseUrl=function(r,e){e=Object.assign({decode:!0},e);var a=C(r,"#"),n=p(a,2),t=n[0],d=n[1];return Object.assign({url:t.split("?")[0]||"",query:u(h(r),e)},e&&e.parseFragmentIdentifier&&d?{fragmentIdentifier:P(d,e)}:{})},o.stringifyUrl=function(r,e){e=Object.assign({encode:!0,strict:!0},e);var a=Z(r.url).split("?")[0]||"",n=o.extract(r.url),t=o.parse(n,{sort:!1}),d=Object.assign(t,r.query),f=o.stringify(d,e);f&&(f="?".concat(f));var j=X(r.url);return r.fragmentIdentifier&&(j="#".concat(y(r.fragmentIdentifier,e))),"".concat(a).concat(f).concat(j)},o.pick=function(r,e,a){a=Object.assign({parseFragmentIdentifier:!0},a);var n=o.parseUrl(r,a),t=n.url,d=n.query,f=n.fragmentIdentifier;return o.stringifyUrl({url:t,query:A(d,e),fragmentIdentifier:f},a)},o.exclude=function(r,e,a){var n=Array.isArray(e)?function(t){return!e.includes(t)}:function(t,d){return!e(t,d)};return o.pick(r,n,a)}},13615:function(U){U.exports=function(o,i){if(!(typeof o=="string"&&typeof i=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(i==="")return[o];var p=o.indexOf(i);return p===-1?[o]:[o.slice(0,p),o.slice(p+i.length)]}},62072:function(U){U.exports=function(o){return encodeURIComponent(o).replace(/[!'()*]/g,function(i){return"%".concat(i.charCodeAt(0).toString(16).toUpperCase())})}},44020:function(U){var o="%[a-f0-9]{2}",i=new RegExp("("+o+")|([^%]+?)","gi"),p=new RegExp("("+o+")+","gi");function S(s,g){try{return[decodeURIComponent(s.join(""))]}catch(W){}if(s.length===1)return s;g=g||1;var C=s.slice(0,g),A=s.slice(g);return Array.prototype.concat.call([],S(C),S(A))}function I(s){try{return decodeURIComponent(s)}catch(A){for(var g=s.match(i)||[],C=1;C<g.length;C++)s=S(g,C).join(""),g=s.match(i)||[];return s}}function x(s){for(var g={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},C=p.exec(s);C;){try{g[C[0]]=decodeURIComponent(C[0])}catch(k){var A=I(C[0]);A!==C[0]&&(g[C[0]]=A)}C=p.exec(s)}g["%C2"]="\uFFFD";for(var W=Object.keys(g),T=0;T<W.length;T++){var F=W[T];s=s.replace(new RegExp(F,"g"),g[F])}return s}U.exports=function(s){if(typeof s!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof s+"`");try{return s=s.replace(/\+/g," "),decodeURIComponent(s)}catch(g){return x(s)}}},92806:function(U){U.exports=function(o,i){for(var p={},S=Object.keys(o),I=Array.isArray(i),x=0;x<S.length;x++){var s=S[x],g=o[s];(I?i.indexOf(s)!==-1:i(s,g,o))&&(p[s]=g)}return p}}}]);

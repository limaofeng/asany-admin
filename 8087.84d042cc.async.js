"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8087],{14336:function(Q,R,n){var K=n(15009),E=n.n(K),W=n(99289),I=n.n(W),$=n(97857),D=n.n($),j=n(5574),U=n.n(j),f=n(62435),p=n(79817),l=n(12708);function a(u,t){return u.replace(/{(\w+)}/g,function(m,i){return t[i]!==void 0?t[i]:m})}function r(u,t){var m=u(D()({fetchPolicy:"network-only"},(t==null?void 0:t.mutation)||{})),i=U()(m,1),e=i[0],F=(0,f.useRef)(!1),O=(0,f.useCallback)(function(){var L=I()(E()().mark(function T(s,_){var d,C,b,P,v,c,M,N,B;return E()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return d=(_==null?void 0:_.dialog)||(t==null?void 0:t.dialog)||{},C=(_==null?void 0:_.mutation)||(t==null?void 0:t.mutation)||{},b=(_==null?void 0:_.onDeleted)||(t==null?void 0:t.onDeleted),P=d.width,v=d.title,c=d.content,M=!1,Array.isArray(s)?(M=!0,typeof v=="function"&&(v=v(s,{batch:!0})),typeof c=="function"&&(c=c(s,{batch:!0}))):s&&(typeof v=="string"&&(v=a(v,s)),typeof c=="string"&&(c=a(c,s)),typeof v=="function"&&(v=v(s,{batch:!1})),typeof c=="function"&&(c=c(s,{batch:!1}))),N=function(){var A=I()(E()().mark(function S(){return E()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,e(D()(D()({fetchPolicy:"network-only"},C),{},{variables:{where:{id_in:M?s:[s==null?void 0:s.id]}}}));case 2:case"end":return x.stop()}},S)}));return function(){return A.apply(this,arguments)}}(),g.next=10,p.Modal.confirm(D()(D()({},d),{},{title:v,content:c,width:P,okText:"\u5220 \u9664",okClassName:"btn-danger",allowOutsideClick:function(){return!F.current},preConfirm:function(){var A=I()(E()().mark(function z(){var x,y,o;return E()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return F.current=!0,h.prev=1,x=document.querySelector(".swal2-confirm"),x.textContent="\u5220\u9664\u4E2D...",y=document.createElement("span"),y.classList.add("spinner-border-sm","ms-2","spinner-border","align-middle"),x.appendChild(y),h.next=9,(0,l.gw)(N(),350);case 9:o=h.sent,b&&b(o);case 11:return h.prev=11,F.current=!1,h.finish(11);case 14:case"end":return h.stop()}},z,null,[[1,,11,14]])}));function S(){return A.apply(this,arguments)}return S}()}));case 10:if(B=g.sent,B.isConfirmed){g.next=13;break}return g.abrupt("return",!1);case 13:return p.Toast.success("\u5220\u9664\u6210\u529F",2e3,{placement:"top-center",progressBar:!0}),g.abrupt("return",!0);case 15:case"end":return g.stop()}},T)}));return function(T,s){return L.apply(this,arguments)}}(),[]),V=(0,f.useCallback)(function(){var L=I()(E()().mark(function T(s,_){return E()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",O(s,_));case 1:case"end":return C.stop()}},T)}));return function(T,s){return L.apply(this,arguments)}}(),[t,e]),H=(0,f.useCallback)(function(L,T){return O(L,T)},[]);return{delete:V,deleteMany:H}}R.Z=r},58301:function(Q,R,n){n.d(R,{Oh:function(){return j},bp:function(){return U}});var K=n(97857),E=n.n(K),W=n(62435);function I(f,p){var l,a,r=f(E()({fetchPolicy:"network-only"},p)),u=r.data,t=r.loading,m=r.previousData,i=r.refetch,e=r.error,F=(0,W.useMemo)(function(){return t?m==null?void 0:m.result.pageInfo:u==null?void 0:u.result.pageInfo},[u==null||(l=u.result)===null||l===void 0?void 0:l.pageInfo.total,t,m==null||(a=m.result)===null||a===void 0?void 0:a.pageInfo.total]),O=(u==null?void 0:u.result.edges.map(function(V){return V.node}))||[];return[O,{loading:t,pageInfo:F,error:e,variables:{},refetch:i}]}function $(f,p){return p.split(".").reduce(function(l,a){return l&&l[a]!==void 0?l[a]:void 0},f)}function D(f,p,l){for(var a=p.split("."),r=f;a.length>1;){var u=a.shift();r[u]||(r[u]={}),r=r[u]}r[a[0]]=l}function j(f,p){var l=p.map(function(a){var r=a.source,u=a.target,t=a.transform,m=a.skip,i=$(f,r);if(i==null||m&&m(i))return"";var e=t?t(i):String(i);return"".concat(encodeURIComponent(u||r),"=").concat(encodeURIComponent(e))});return l.filter(function(a){return a}).join("&")}function U(f,p){var l={};return p.forEach(function(a){var r=a.source,u=a.target,t=a.transform,m=a.skip,i=f.get(r);if(!(!i||i.trim()==="")){var e=t?t(i):i;m&&m(e)||(u?D(l,u,e):l[r]=e)}}),l}R.ZP=I},18087:function(Q,R,n){n.r(R),n.d(R,{default:function(){return T}});var K=n(15009),E=n.n(K),W=n(99289),I=n.n(W),$=n(5574),D=n.n($),j=n(62435),U=n(96974),f=n(39711),p=n(46027),l=n(58301),a=n(73588),r=n(79817),u=n(12708),t=n(60551),m=n(14336),i=n(86235),e=n(86074);function F(s){var _=(0,m.Z)(i.tY,{onDeleted:function(){s&&s()},dialog:{title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",content:function(P,v){var c;if(v.batch){var M=P;c="\u786E\u5B9A\u5220\u9664\u9009\u4E2D\u7684, \u5171 ".concat(M.length," \u4E2A\u54C1\u724C\u5417\uFF1F")}else c=(0,e.jsxs)(e.Fragment,{children:["\u60A8\u5373\u5C06\u5220\u9664\u201C",(0,e.jsx)("strong",{children:P.name})]});return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{className:"tip-confirm",children:c}),(0,e.jsx)("p",{children:"\u5220\u9664\u7684\u64CD\u4F5C\u4E0D\u53EF\u9006,\u8BF7\u8C28\u614E\u64CD\u4F5C"})]})}}}),d=_.delete,C=_.deleteMany;return{delete:d,deleteMany:C}}var O=F,V="/pim";function H(s){var _=s.baseUrl,d=s.data,C=s.refetch,b=(0,j.useState)(!1),P=D()(b,2),v=P[0],c=P[1],M=(0,U.s0)(),N=O(function(){return C()}),B=N.delete,Z=(0,j.useCallback)(function(g){var A=g.key;A==="edit"?M("".concat(_,"/products/").concat(d.id)):A==="delete"&&B({name:d.name,id:d.id})},[]);return(0,e.jsx)(r.Dropdown,{overlay:(0,e.jsxs)(r.Menu,{onClick:Z,className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold w-125px py-4",children:[(0,e.jsx)(r.Menu.Item,{className:"px-3",children:"\u7F16\u8F91"},"edit"),(0,e.jsx)(r.Menu.Item,{className:"px-3",children:"\u5220\u9664"},"delete")]}),placement:"bottomRight",onVisibleChange:c,visible:v,children:(0,e.jsxs)(r.Button,{variant:"light",activeColor:"light-primary",children:["\u64CD \u4F5C",(0,e.jsx)(p.ZP,{className:"ms-2 svg-icon-5 m-0",name:"Duotune/arr072"})]})})}function L(){var s=(0,f.lr)(),_=D()(s,1),d=_[0],C=(0,U.s0)(),b=(0,j.useMemo)(function(){return(0,l.bp)(d,[{source:"q",target:"keywords"}])},[d.get("q")]),P=(0,j.useCallback)(function(y,o,k){var h=(0,l.Oh)({searchForm:b,pagination:y,filters:o,sorter:k},[{source:"searchForm.keywords",target:"q",skip:function(w){return!w}},{source:"pagination.current",target:"page",skip:function(w){return w===1}},{source:"pagination.pageSize",target:"per_page",skip:function(w){return w===15}},{source:"sorter.field",target:"sort",transform:function(w){return"".concat(w,":").concat(k.order==="ascend"?"asc":"desc")}}]);C(location.pathname+"?"+h,{replace:!0})},[b]),v=(0,j.useMemo)(function(){return(0,l.bp)(d,[{source:"q",target:"where.name_contains"},{source:"sex",target:"where.sex"},{source:"page",transform:function(o){return parseInt(o)}},{source:"per_page",transform:function(o){return parseInt(o)}},{source:"sort",target:"orderBy",transform:function(o){var k=o.split(":"),h=D()(k,2),G=h[0],w=h[1];return"".concat(G,"_").concat(w)}}])},[d.toString()]),c=(0,l.ZP)(t.kN,{variables:v,fetchPolicy:"network-only"}),M=D()(c,2),N=M[0],B=M[1],Z=B.loading,g=B.pageInfo,A=B.refetch,S=O(function(){return A()}),z=S.deleteMany,x=(0,j.useCallback)(function(y){return I()(E()().mark(function o(){return E()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:z(y);case 1:case"end":return h.stop()}},o)}))},[]);return(0,e.jsx)(a.vs,{header:{title:"\u4EA7\u54C1\u5217\u8868"},children:(0,e.jsxs)(r.Card,{className:"mb-5 mb-xl-10",children:[(0,e.jsxs)(r.Card.Header,{className:"pt-8",children:[(0,e.jsx)(r.Card.Title,{className:"flex-column",children:(0,e.jsx)(r.Input.Search,{solid:!0,className:"w-250px",placeholder:"\u641C\u7D22\u4EA7\u54C1"})}),(0,e.jsx)(r.Card.Toolbar,{children:(0,e.jsx)("div",{className:"d-flex justify-content-end",children:(0,e.jsx)(r.Button,{as:f.rU,variant:"primary",className:"me-3",icon:(0,e.jsx)(p.ZP,{className:"svg-icon-2",name:"Duotune/arr075"}),to:"/pim/products/new",children:"\u65B0\u5EFA\u4EA7\u54C1"})})})]}),(0,e.jsx)(r.Card.Body,{children:!(g!=null&&g.total)&&!Z?(0,e.jsx)(r.Card,{className:"mb-5 mb-xl-10",children:(0,e.jsx)(r.Empty,{title:"\u8FD8\u6CA1\u6709\u4EA7\u54C1",description:"\u9A6C\u4E0A\u6DFB\u52A0\u4E00\u4E2A\u4EA7\u54C1\u5427\uFF01",image:"/assets/media/illustrations/sigma-1/4.png",children:(0,e.jsx)(r.Button,{variant:"primary",children:"\u6DFB\u52A0\u4EA7\u54C1"})})}):(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(r.BlockUI,{overlayClassName:"bg-white bg-opacity-25",loading:Z,children:(0,e.jsx)(r.Table,{hover:!0,rowKey:"id",rowSelection:{type:"checkbox",renderTitle:function(o){return(0,e.jsxs)(e.Fragment,{children:["\u5DF2\u9009\u4E2D",(0,e.jsx)("span",{className:"mx-2",children:o}),"\u4E2A\u4EA7\u54C1"]})},toolbar:function(o){return(0,e.jsx)("div",{children:(0,e.jsx)(r.Button,{color:"danger",onClick:x(o),variant:!1,children:"\u6279\u91CF\u5220\u9664"})})}},noRowsRenderer:function(){return(0,e.jsx)(r.Empty,{description:"\u5217\u8868\u6570\u636E\u4E3A\u7A7A",image:"/assets/media/illustrations/sigma-1/5.png"})},columns:[{key:"id",title:"ID",sorter:!0,sortOrder:(0,u.PE)(d,"id"),width:80},{key:"brand",title:"\u54C1\u724C",width:120,render:function(o){return o==null?void 0:o.name}},{key:"name",title:"\u4EA7\u54C1\u540D\u79F0",sorter:!0,sortOrder:(0,u.PE)(d,"name")},{key:"createdAt",title:"\u521B\u5EFA\u65F6\u95F4",width:120},{title:"\u64CD\u4F5C",key:"action",width:140,render:function(o,k){return(0,e.jsx)(H,{baseUrl:V,data:k,refetch:A})}}],pagination:g,onChange:P,dataSource:N})})})})]})})}var T=L}}]);

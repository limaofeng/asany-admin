"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2897],{2897:function(V,D,a){a.r(D);var L=a(15009),d=a.n(L),T=a(97857),i=a.n(T),U=a(5574),E=a.n(U),A=a(99289),j=a.n(A),B=a(52677),R=a.n(B),s=a(62435),k=a(80983),m=a(79817),l=a(86074),P=function(e){return e!=null&&e.url?e.url:typeof(e==null?void 0:e.document)=="string"?"https://storage-api.mh-procoffeemachine.com"+"/preview/".concat(e.document):R()(e==null?void 0:e.document)==="object"?URL.createObjectURL(e.document.id):""};function I(u){return p.apply(this,arguments)}function p(){return p=j()(d()().mark(function u(e){var n,o,c;return d()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,_.next=3,fetch(e,{method:"HEAD"});case 3:return n=_.sent,o=n.headers.get("Content-Type"),c=n.headers.get("Content-Length"),_.abrupt("return",{contentType:o,contentLength:c});case 9:return _.prev=9,_.t0=_.catch(0),console.error("Error fetching URL:",_.t0),_.abrupt("return",null);case 13:case"end":return _.stop()}},u,null,[[0,9]])})),p.apply(this,arguments)}function K(u){var e,n=u.value,o=u.onChange,c=(0,s.useState)(!1),b=E()(c,2),_=b[0],f=b[1],W=(0,s.useState)(P(u.value)),M=E()(W,2),O=M[0],S=M[1],w=(0,s.useState)(((e=u.value)===null||e===void 0?void 0:e.url)||""),g=E()(w,2),h=g[0],C=g[1];(0,s.useEffect)(function(){var r;S(P(u.value)),C(((r=u.value)===null||r===void 0?void 0:r.url)||"")},[u.value]);var N=(0,s.useCallback)(function(r){r.preventDefault(),r.stopPropagation(),f(!0)},[]),F=(0,s.useCallback)(function(r){o&&o(r)},[o]),$=(0,s.useCallback)(j()(d()().mark(function r(){var v,y;return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return f(!1),t.next=3,I(h);case 3:if(v=t.sent,v){t.next=6;break}return t.abrupt("return");case 6:if(y=k.extension(v.contentType).toUpperCase(),["PDF"].includes(y)){t.next=10;break}return console.error("\u53EA\u652F\u6301PDF\u6587\u4EF6"),t.abrupt("return");case 10:F(i()(i()({},n),{},{type:y,size:v.contentLength,document:void 0,url:h}));case 11:case"end":return t.stop()}},r)})),[n,h]),x=(0,s.useCallback)(function(){f(!1),C((n==null?void 0:n.url)||"")},[n==null?void 0:n.url]),z=(0,s.useCallback)(function(r){F(i()(i()({},n),{},{type:"PDF",document:r,url:void 0}))},[n]),G=(0,s.useCallback)(function(r){C(r.target.value)},[]);return(0,l.jsxs)("div",{children:[(0,l.jsx)(m.Modal,{centered:!0,visible:_,dialogClassName:"modal-dialog-small w-500px",onCancel:x,onOk:$,title:"\u8BBE\u7F6E\u94FE\u63A5\u5F15\u7528",closable:!1,headerClassName:"border-bottom-0",bodyClassName:"py-2",footerClassName:"border-top-0",children:(0,l.jsx)(m.Input.TextArea,{autoSize:{minRows:3,maxRows:5},onChange:G,value:h})}),(0,l.jsx)("div",{className:"fv-row mb-2",children:(0,l.jsx)(m.SignleUpload,{value:n==null?void 0:n.document,accept:{"application/pdf":[".pdf"]},title:(0,l.jsxs)(l.Fragment,{children:["\u5C06\u6587\u4EF6\u62D6\u62FD\u81F3\u6B64\u5904\u3001\u70B9\u51FB\u4E0A\u4F20\uFF0C\u6216",(0,l.jsx)("a",{onClick:N,className:"",children:"\u8BBE\u7F6E"}),"\u94FE\u63A5\u5F15\u7528\u3002"]}),description:"\u652F\u6301\u7684\u6587\u6863\u683C\u5F0F\uFF1Apdf",onChange:z})}),!!O&&(0,l.jsx)(m.DocumentViewer,{url:O})]})}D.default=K}}]);

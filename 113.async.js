"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[113],{14336:function(T,o,t){var y=t(15009),C=t.n(y),b=t(97857),g=t.n(b),_=t(99289),d=t.n(_),h=t(62435),F=t(79817),L=t(12708);function E(A,f){return A.replace(/{(\w+)}/g,function(s,x){return f[x]!==void 0?f[x]:s})}function U(A,f){var s=(0,h.useRef)(!1),x=(0,h.useCallback)(function(){var i=d()(C()().mark(function j(p){var I,D,e,r;return C()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return I=A.width,D=A.title,e=A.content,p&&(typeof D=="string"&&(D=E(D,p)),typeof e=="string"&&(e=E(e,p)),typeof D=="function"&&(D=D(p)),typeof e=="function"&&(e=e(p))),n.next=5,F.Modal.confirm(g()(g()({},A),{},{title:D,content:e,width:I,okText:"\u5220 \u9664",okClassName:"btn-danger",allowOutsideClick:function(){return!s.current},preConfirm:function(){var u=d()(C()().mark(function m(){var P,O,c;return C()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return s.current=!0,M.prev=1,P=document.querySelector(".swal2-confirm"),P.textContent="\u5220\u9664\u4E2D...",O=document.createElement("span"),O.classList.add("spinner-border-sm","ms-2","spinner-border","align-middle"),P.appendChild(O),M.next=9,(0,L.gw)(f(p),350);case 9:c=M.sent,console.log(c);case 11:return M.prev=11,s.current=!1,M.finish(11);case 14:case"end":return M.stop()}},m,null,[[1,,11,14]])}));function l(){return u.apply(this,arguments)}return l}()}));case 5:if(r=n.sent,r.isConfirmed){n.next=8;break}return n.abrupt("return",!1);case 8:return F.Toast.success("\u5220\u9664\u6210\u529F",2e3,{placement:"top-center",progressBar:!0}),n.abrupt("return",!0);case 10:case"end":return n.stop()}},j)}));return function(j){return i.apply(this,arguments)}}(),[f,A]);return[x]}o.Z=U},58301:function(T,o,t){var y=t(5574),C=t.n(y),b=t(62435),g=t(12845),_=t(38018),d=t(9566),h={total:0,current:1,pageSize:10,totalPages:0,hasNextPage:!1,hasPreviousPage:!1};function F(L,E){var U,A=(0,g.useNavigate)(),f=(0,d.Z)(),s=(0,b.useMemo)(function(){return(E==null?void 0:E.toVariables)&&(E==null?void 0:E.toVariables(f))||{}},[f,E]),x=(0,b.useMemo)(function(){if(!s.orderBy)return{order:"descend",field:"createdAt"};var n=s.orderBy.split("_"),u=C()(n,2),l=u[0],m=u[1];return{order:m==="desc"?"descend":"ascend",field:l}},[s.orderBy]),i=L({fetchPolicy:"cache-and-network",variables:s}),j=i.data,p=i.loading,I=i.previousData,D=i.refetch,e=(0,b.useMemo)(function(){return p?(I==null?void 0:I.result.pageInfo)||h:(j==null?void 0:j.result.pageInfo)||h},[j==null?void 0:j.result.pageInfo.total,p,I==null?void 0:I.result.pageInfo.total]),r=(0,b.useCallback)(function(n,u,l){var m=(E==null?void 0:E.toQuery)&&E.toQuery(s,n,u,l)||"";A(location.pathname+"?"+_.stringify(m),{replace:!0})},[history,location.pathname,(U=s.filter)===null||U===void 0?void 0:U.name_contains]),a=(j==null?void 0:j.result.edges.map(function(n){return n.node}))||[];return[a,{loading:p,pageInfo:e,sorter:x,onChange:r,refetch:D}]}o.Z=F},9566:function(T,o,t){var y=t(12845),C=t(38018);function b(){var g=(0,y.useLocation)();return C.parse(g.search)}o.Z=b},30113:function(T,o,t){t.r(o);var y=t(15009),C=t.n(y),b=t(99289),g=t.n(b),_=t(5574),d=t.n(_),h=t(62435),F=t(96974),L=t(39711),E=t(46027),U=t(14336),A=t(58301),f=t(73588),s=t(79817),x=t(91726),i=t(86074),j="/pim";function p(D){var e=D.baseUrl,r=D.data,a=D.refetch,n=(0,h.useState)(!1),u=d()(n,2),l=u[0],m=u[1],P=(0,F.s0)(),O=(0,x.xq)(),c=d()(O,1),v=c[0],M=(0,U.Z)({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",content:function(K){return(0,i.jsxs)(i.Fragment,{children:["\u60A8\u5373\u5C06\u5220\u9664\u201C",(0,i.jsx)("strong",{children:K.name}),"\u201D\u3002\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F"]})}},function(){var R=g()(C()().mark(function K(S){return C()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,v({variables:{id:S==null?void 0:S.id}});case 2:a();case 3:case"end":return W.stop()}},K)}));return function(K){return R.apply(this,arguments)}}()),w=d()(M,1),N=w[0],B=(0,h.useCallback)(function(R){var K=R.key;K==="edit"?P("".concat(e,"/products/").concat(r.id)):K==="delete"&&N({name:r.name,id:r.id})},[]);return(0,i.jsx)(s.Dropdown,{overlay:(0,i.jsxs)(s.Menu,{onClick:B,className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold w-125px py-4",children:[(0,i.jsx)(s.Menu.Item,{className:"px-3",children:"\u7F16\u8F91"},"edit"),(0,i.jsx)(s.Menu.Item,{className:"px-3",children:"\u5220\u9664"},"delete")]}),placement:"bottomRight",onVisibleChange:m,visible:l,children:(0,i.jsxs)(s.Button,{variant:"light",activeColor:"light-primary",children:["\u64CD \u4F5C",(0,i.jsx)(E.ZP,{className:"ms-2 svg-icon-5 m-0",name:"Duotune/arr072"})]})})}function I(){var D=(0,A.Z)(x.kN,{toQuery:function(c,v,M,w){var N,B={};if((N=c.filter)!==null&&N!==void 0&&N.name_contains){var R;B.q=(R=c.filter)===null||R===void 0?void 0:R.name_contains}return w&&(B.orderBy=w.field+"_"+(w.order==="ascend"?"asc":"desc")),B.page=v.current,B},toVariables:function(c){return c.q&&(c.filter={name_contains:c.q},delete c.q),c}}),e=d()(D,2),r=e[0],a=e[1],n=a.loading,u=a.pageInfo,l=a.sorter,m=a.onChange,P=a.refetch;return(0,i.jsx)(f.vs,{header:{title:"\u4EA7\u54C1\u5217\u8868"},children:(0,i.jsxs)(s.Card,{className:"mb-5 mb-xl-10",children:[(0,i.jsxs)(s.Card.Header,{className:"pt-8",children:[(0,i.jsx)(s.Card.Title,{className:"flex-column",children:(0,i.jsx)(s.Input.Search,{solid:!0,className:"w-250px",placeholder:"\u641C\u7D22\u4EA7\u54C1"})}),(0,i.jsx)(s.Card.Toolbar,{children:(0,i.jsx)("div",{className:"d-flex justify-content-end",children:(0,i.jsx)(s.Button,{as:L.rU,variant:"primary",className:"me-3",icon:(0,i.jsx)(E.ZP,{className:"svg-icon-2",name:"Duotune/arr075"}),to:"/pim/products/new",children:"\u65B0\u5EFA\u4EA7\u54C1"})})})]}),(0,i.jsx)(s.Card.Body,{children:!u.total&&!n?(0,i.jsx)(s.Card,{className:"mb-5 mb-xl-10",children:(0,i.jsx)(s.Empty,{title:"\u8FD8\u6CA1\u6709\u4EA7\u54C1",description:"\u9A6C\u4E0A\u6DFB\u52A0\u4E00\u4E2A\u4EA7\u54C1\u5427\uFF01",image:"/assets/media/illustrations/sigma-1/4.png",children:(0,i.jsx)(s.Button,{variant:"primary",children:"\u6DFB\u52A0\u4EA7\u54C1"})})}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(s.BlockUI,{overlayClassName:"bg-white bg-opacity-25",loading:n,children:(0,i.jsx)(s.Table,{hover:!0,rowKey:"id",rowSelection:{type:"checkbox",renderTitle:function(c){return(0,i.jsxs)(i.Fragment,{children:["\u5DF2\u9009\u4E2D",(0,i.jsx)("span",{className:"mx-2",children:c}),"\u4E2A\u4EA7\u54C1"]})}},noRowsRenderer:function(){return(0,i.jsx)(s.Empty,{description:"\u5217\u8868\u6570\u636E\u4E3A\u7A7A",image:"/assets/media/illustrations/sigma-1/5.png"})},columns:[{key:"id",title:"ID",sorter:!0,sortOrder:l.field==="id"?l.order:void 0,width:80},{key:"brand",title:"\u54C1\u724C",width:120,render:function(c){return c==null?void 0:c.name}},{key:"name",title:"\u4EA7\u54C1\u540D\u79F0",sorter:!0,sortOrder:l.field==="name"?l.order:void 0},{key:"createdAt",title:"\u521B\u5EFA\u65F6\u95F4",width:120},{title:"\u64CD\u4F5C",key:"action",width:140,render:function(c,v){return(0,i.jsx)(p,{baseUrl:j,data:v,refetch:P})}}],pagination:u,onChange:m,dataSource:r})})})})]})})}o.default=I},38018:function(T,o,t){var y=t(5574).default,C=t(64599).default,b=t(52677).default,g=t(19632).default,_=t(62072),d=t(44020),h=t(13615),F=t(92806),L=function(r){return r==null};function E(e){switch(e.arrayFormat){case"index":return function(r){return function(a,n){var u=a.length;return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?a:n===null?[].concat(g(a),[[f(r,e),"[",u,"]"].join("")]):[].concat(g(a),[[f(r,e),"[",f(u,e),"]=",f(n,e)].join("")])}};case"bracket":return function(r){return function(a,n){return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?a:n===null?[].concat(g(a),[[f(r,e),"[]"].join("")]):[].concat(g(a),[[f(r,e),"[]=",f(n,e)].join("")])}};case"comma":case"separator":return function(r){return function(a,n){return n==null||n.length===0?a:a.length===0?[[f(r,e),"=",f(n,e)].join("")]:[[a,f(n,e)].join(e.arrayFormatSeparator)]}};default:return function(r){return function(a,n){return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?a:n===null?[].concat(g(a),[f(r,e)]):[].concat(g(a),[[f(r,e),"=",f(n,e)].join("")])}}}}function U(e){var r;switch(e.arrayFormat){case"index":return function(a,n,u){if(r=/\[(\d*)\]$/.exec(a),a=a.replace(/\[\d*\]$/,""),!r){u[a]=n;return}u[a]===void 0&&(u[a]={}),u[a][r[1]]=n};case"bracket":return function(a,n,u){if(r=/(\[\])$/.exec(a),a=a.replace(/\[\]$/,""),!r){u[a]=n;return}if(u[a]===void 0){u[a]=[n];return}u[a]=[].concat(u[a],n)};case"comma":case"separator":return function(a,n,u){var l=typeof n=="string"&&n.includes(e.arrayFormatSeparator),m=typeof n=="string"&&!l&&s(n,e).includes(e.arrayFormatSeparator);n=m?s(n,e):n;var P=l||m?n.split(e.arrayFormatSeparator).map(function(O){return s(O,e)}):n===null?n:s(n,e);u[a]=P};default:return function(a,n,u){if(u[a]===void 0){u[a]=n;return}u[a]=[].concat(u[a],n)}}}function A(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function f(e,r){return r.encode?r.strict?_(e):encodeURIComponent(e):e}function s(e,r){return r.decode?d(e):e}function x(e){return Array.isArray(e)?e.sort():b(e)==="object"?x(Object.keys(e)).sort(function(r,a){return Number(r)-Number(a)}).map(function(r){return e[r]}):e}function i(e){var r=e.indexOf("#");return r!==-1&&(e=e.slice(0,r)),e}function j(e){var r="",a=e.indexOf("#");return a!==-1&&(r=e.slice(a)),r}function p(e){e=i(e);var r=e.indexOf("?");return r===-1?"":e.slice(r+1)}function I(e,r){return r.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):r.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function D(e,r){r=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},r),A(r.arrayFormatSeparator);var a=U(r),n=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return n;var u=C(e.split("&")),l;try{for(u.s();!(l=u.n()).done;){var m=l.value;if(m!==""){var P=h(r.decode?m.replace(/\+/g," "):m,"="),O=y(P,2),c=O[0],v=O[1];v=v===void 0?null:["comma","separator"].includes(r.arrayFormat)?v:s(v,r),a(s(c,r),v,n)}}}catch($){u.e($)}finally{u.f()}for(var M=0,w=Object.keys(n);M<w.length;M++){var N=w[M],B=n[N];if(b(B)==="object"&&B!==null)for(var R=0,K=Object.keys(B);R<K.length;R++){var S=K[R];B[S]=I(B[S],r)}else n[N]=I(B,r)}return r.sort===!1?n:(r.sort===!0?Object.keys(n).sort():Object.keys(n).sort(r.sort)).reduce(function($,W){var V=n[W];return V&&b(V)==="object"&&!Array.isArray(V)?$[W]=x(V):$[W]=V,$},Object.create(null))}o.extract=p,o.parse=D,o.stringify=function(e,r){if(!e)return"";r=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},r),A(r.arrayFormatSeparator);for(var a=function(v){return r.skipNull&&L(e[v])||r.skipEmptyString&&e[v]===""},n=E(r),u={},l=0,m=Object.keys(e);l<m.length;l++){var P=m[l];a(P)||(u[P]=e[P])}var O=Object.keys(u);return r.sort!==!1&&O.sort(r.sort),O.map(function(c){var v=e[c];return v===void 0?"":v===null?f(c,r):Array.isArray(v)?v.reduce(n(c),[]).join("&"):f(c,r)+"="+f(v,r)}).filter(function(c){return c.length>0}).join("&")},o.parseUrl=function(e,r){r=Object.assign({decode:!0},r);var a=h(e,"#"),n=y(a,2),u=n[0],l=n[1];return Object.assign({url:u.split("?")[0]||"",query:D(p(e),r)},r&&r.parseFragmentIdentifier&&l?{fragmentIdentifier:s(l,r)}:{})},o.stringifyUrl=function(e,r){r=Object.assign({encode:!0,strict:!0},r);var a=i(e.url).split("?")[0]||"",n=o.extract(e.url),u=o.parse(n,{sort:!1}),l=Object.assign(u,e.query),m=o.stringify(l,r);m&&(m="?".concat(m));var P=j(e.url);return e.fragmentIdentifier&&(P="#".concat(f(e.fragmentIdentifier,r))),"".concat(a).concat(m).concat(P)},o.pick=function(e,r,a){a=Object.assign({parseFragmentIdentifier:!0},a);var n=o.parseUrl(e,a),u=n.url,l=n.query,m=n.fragmentIdentifier;return o.stringifyUrl({url:u,query:F(l,r),fragmentIdentifier:m},a)},o.exclude=function(e,r,a){var n=Array.isArray(r)?function(u){return!r.includes(u)}:function(u,l){return!r(u,l)};return o.pick(e,n,a)}},13615:function(T){T.exports=function(o,t){if(!(typeof o=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[o];var y=o.indexOf(t);return y===-1?[o]:[o.slice(0,y),o.slice(y+t.length)]}},62072:function(T){T.exports=function(o){return encodeURIComponent(o).replace(/[!'()*]/g,function(t){return"%".concat(t.charCodeAt(0).toString(16).toUpperCase())})}},44020:function(T){var o="%[a-f0-9]{2}",t=new RegExp("("+o+")|([^%]+?)","gi"),y=new RegExp("("+o+")+","gi");function C(_,d){try{return[decodeURIComponent(_.join(""))]}catch(L){}if(_.length===1)return _;d=d||1;var h=_.slice(0,d),F=_.slice(d);return Array.prototype.concat.call([],C(h),C(F))}function b(_){try{return decodeURIComponent(_)}catch(F){for(var d=_.match(t)||[],h=1;h<d.length;h++)_=C(d,h).join(""),d=_.match(t)||[];return _}}function g(_){for(var d={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},h=y.exec(_);h;){try{d[h[0]]=decodeURIComponent(h[0])}catch(A){var F=b(h[0]);F!==h[0]&&(d[h[0]]=F)}h=y.exec(_)}d["%C2"]="\uFFFD";for(var L=Object.keys(d),E=0;E<L.length;E++){var U=L[E];_=_.replace(new RegExp(U,"g"),d[U])}return _}T.exports=function(_){if(typeof _!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof _+"`");try{return _=_.replace(/\+/g," "),decodeURIComponent(_)}catch(d){return g(_)}}},92806:function(T){T.exports=function(o,t){for(var y={},C=Object.keys(o),b=Array.isArray(t),g=0;g<C.length;g++){var _=C[g],d=o[_];(b?t.indexOf(_)!==-1:t(_,d,o))&&(y[_]=d)}return y}}}]);

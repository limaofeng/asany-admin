"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2990],{92990:function(ge,X,a){a.r(X),a.d(X,{default:function(){return H}});var r=a(15009),J=a.n(r),Y=a(13769),q=a.n(Y),re=a(99289),se=a.n(re),_=a(5574),oe=a.n(_),ee=a(97857),I=a.n(ee),D=a(62435),te=a(96974),ie=a(64218),de=a(93967),G=a.n(de),ae=a(73588),t=a(79817),ne=a(12708),ce=a(12845),e=a(86074);function pe(A){var d,o,E=(0,D.useCallback)(function(){var m;window.open(ce.APP_CONFIG.WEBSITE_URL+"/designer?id="+((m=A.category)===null||m===void 0||(m=m.page)===null||m===void 0||(m=m.component)===null||m===void 0?void 0:m.id),"_blank")},[(d=A.category)===null||d===void 0||(d=d.page)===null||d===void 0||(d=d.component)===null||d===void 0?void 0:d.id]),R=(0,D.useCallback)(function(m){console.log(m.target.checked)},[]),c=(o=A.category)===null||o===void 0||(o=o.page)===null||o===void 0||(o=o.component)===null||o===void 0?void 0:o.template;return(0,e.jsxs)("div",{className:"d-flex flex-column gap-7 gap-lg-10",children:[(0,e.jsxs)(t.Card,{flush:!0,className:"py-4",title:"\u66F4\u591A\u529F\u80FD",bodyClassName:"pt-0",children:[(0,e.jsx)(t.Form.Item,{valuePropName:"checked",className:"mb-8",name:"xx",children:(0,e.jsx)(t.Checkbox,{value:"1",solid:!0,label:"\u542F\u7528\u8BC4\u8BBA"})}),(0,e.jsx)(t.Form.Item,{valuePropName:"checked",className:"mb-8",name:"x2",children:(0,e.jsx)(t.Checkbox,{value:"1",solid:!0,label:"\u5141\u8BB8\u6536\u85CF"})}),(0,e.jsx)(t.Form.Item,{valuePropName:"checked",className:"mb-8",name:["page","enabled"],children:(0,e.jsx)(t.Checkbox,{onChange:R,value:"1",solid:!0,className:"align-items-start",inputClassName:"mt-1",children:(0,e.jsxs)("div",{className:"d-flex flex-column",children:[(0,e.jsx)("div",{children:"\u81EA\u5B9A\u4E49\u680F\u76EE\u9875"}),(0,e.jsx)("div",{className:"form-item-help",children:"\u914D\u7F6E\u5355\u72EC\u7684\u5C55\u793A\u9875\u9762"})]})})})]}),(0,e.jsx)(t.Form.Item,{dependencies:[["page","enabled"]],noStyle:!0,children:function(M){var K=M.getFieldValue(["page","enabled"]);return K?(0,e.jsxs)(t.Card,{flush:!0,className:"py-4",title:"\u81EA\u5B9A\u4E49\u680F\u76EE\u9875",bodyClassName:"pt-0",children:[(0,e.jsx)(t.Form.Item,{className:"mb-6 mw-400px",name:["page","route","path"],label:"\u8BBF\u95EE\u5730\u5740",children:(0,e.jsx)(t.Input,{})}),(0,e.jsx)(t.Form.Item,{className:"mb-6",name:["page","component","template"],label:"\u9875\u9762\u6A21\u7248",children:(0,e.jsx)(t.Select2,{width:400,options:[{value:"cn.asany.ui.theme.canvas.Page",label:"\u666E\u901A\u680F\u76EE\u9875"},{value:"cn.asany.ui.theme.canvas.Page1",label:"\u5B9A\u5236\u6A21\u7248"}]})}),(0,e.jsx)(t.Form.Item,{dependencies:[["page","component","template"]],noStyle:!0,children:function(){var B=M.getFieldValue(["page","component","template"]),b=!B||c!==B;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(t.Button,{onClick:E,disabled:b,children:"\u53BB\u914D\u7F6E\u9875\u9762"}),b&&(0,e.jsx)("div",{className:"form-item-help",children:"\u5207\u6362\u6A21\u7248\u540E\uFF0C\u9700\u8981\u5148\u4FDD\u5B58"})]})}})]}):(0,e.jsx)(e.Fragment,{})}})]})}var me=pe;function l(){return(0,e.jsx)("div",{className:"d-flex flex-column gap-7 gap-lg-10",children:(0,e.jsxs)(t.Card,{flush:!0,className:"py-4",title:"\u901A\u7528",bodyClassName:"pt-0",children:[(0,e.jsx)(t.Form.Item,{className:"mb-8",name:"name",label:"\u540D\u79F0",required:!0,help:"\u540D\u79F0\u662F\u5FC5\u9700\u7684\uFF0C\u5EFA\u8BAE\u662F\u552F\u4E00\u7684",rules:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(t.Input,{placeholder:"\u680F\u76EE\u540D\u79F0",className:"mw-400px"})}),(0,e.jsx)(t.Form.Item,{name:"description",label:"\u63CF\u8FF0",help:"\u4E3A\u680F\u76EE\u8BBE\u7F6E\u63CF\u8FF0\u4EE5\u83B7\u5F97\u66F4\u597D\u7684\u53EF\u89C1\u6027\u3002",children:(0,e.jsx)(t.QuillEditor,{className:"h-300px"})})]})})}var i=l,f=a(5618);function P(){return(0,e.jsx)("div",{className:"d-flex flex-column gap-7 gap-lg-10",children:(0,e.jsxs)(t.Card,{flush:!0,className:"py-4",title:"SEO",bodyClassName:"pt-0",children:[(0,e.jsx)(t.Form.Item,{name:["meta","seo","title"],className:"mb-8",label:"\u6807\u9898",help:"\u8BBE\u7F6E\u5143\u6570\u636E\u6807\u9898, \u5EFA\u8BAE\u5173\u952E\u8BCD\u8981\u7B80\u5355, \u51C6\u786E",children:(0,e.jsx)(t.Input,{className:"mw-400px"})}),(0,e.jsx)(t.Form.Item,{name:["meta","seo","description"],className:"mb-8",label:"\u63CF\u8FF0",help:"\u8BBE\u7F6E\u5143\u6570\u636E\u63CF\u8FF0, \u4EE5\u63D0\u9AD8\u6392\u540D",children:(0,e.jsx)(t.QuillEditor,{className:"h-300px"})}),(0,e.jsx)(t.Form.Item,{name:["meta","seo","keywords"],label:"\u5173\u952E\u5B57",help:(0,e.jsxs)(e.Fragment,{children:["\u8BBE\u7F6E\u680F\u76EE\u76F8\u5173\u7684\u5173\u952E\u5B57\u5217\u8868\u3002\u901A\u8FC7\u5728\u6BCF\u4E2A\u5173\u952E\u5B57\u4E4B\u95F4\u6DFB\u52A0",(0,e.jsx)("code",{children:","}),"\u6765\u5206\u9694\u5173\u952E\u5B57"]}),children:(0,e.jsx)(f.ZP,{className:"form-control"})})]})})}var C=P,N=a(69366),j=a(42646);function fe(A){var d=A.categoryTreeData,o=(0,j.St)(),E=o.data,R=(E==null?void 0:E.articleStoreTemplates)||[];return(0,e.jsxs)("div",{className:"d-flex flex-column gap-7 gap-lg-10 w-100 w-lg-300px mb-7 me-lg-10",children:[(0,e.jsxs)(t.Card,{flush:!0,className:"py-4",title:"\u7F29\u7565\u56FE",bodyClassName:"text-center pt-0",children:[(0,e.jsx)(t.Form.Item,{name:"image",children:(0,e.jsx)(t.Upload.Image,{width:150,height:150,className:"mb-3",space:"orX8kLOV",accept:".png, .jpg, .jpeg",crop:{height:300,zoomable:!1,aspectRatio:1},background:"/assets/media/svg/files/blank-image.svg"})}),(0,e.jsx)("div",{className:"text-muted fs-7",children:"\u8BBE\u7F6E\u680F\u76EE\u7F29\u7565\u56FE\u3002\u4EC5\u63A5\u53D7 *.png\u3001*.jpg \u548C *.jpeg \u683C\u5F0F\u7684\u56FE\u7247"})]}),(0,e.jsx)(t.Card,{flush:!0,className:"py-4",title:"\u4E0A\u7EA7\u680F\u76EE",children:(0,e.jsxs)(t.Card.Body,{className:"pt-0",children:[(0,e.jsx)(t.Form.Item,{className:"mb-3",name:"parent",children:(0,e.jsx)(N.Z,{style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:d,placeholder:"\u9009\u62E9\u4E0A\u7EA7\u680F\u76EE, \u9ED8\u8BA4\u6839\u680F\u76EE",treeDefaultExpandAll:!0,allowClear:!0,transitionName:""})}),(0,e.jsx)("div",{className:"text-muted fs-7",children:"\u9009\u62E9\u4E0A\u7EA7\u680F\u76EE,\u672A\u9009\u62E9\u5C06\u6DFB\u52A0\u5230\u6839\u76EE\u5F55"})]})}),(0,e.jsxs)(t.Card,{flush:!0,className:"py-4",title:"\u5B58\u50A8\u6A21\u677F",bodyClassName:"pt-0",children:[(0,e.jsx)(t.Form.Item,{className:"mb-3",name:"storeTemplate",label:"\u9009\u62E9\u5B58\u50A8\u6A21\u677F",children:(0,e.jsx)(t.Select2,{options:R.map(function(c){return{value:c.id,label:c.name}})})}),(0,e.jsx)("div",{className:"text-muted fs-7",children:"\u4ECE\u60A8\u5F53\u524D\u7684\u4E3B\u9898\u4E2D\u5206\u914D\u4E00\u4E2A\u6A21\u677F\u6765\u5B9A\u4E49\u680F\u76EE\u6587\u7AE0\u7684\u663E\u793A\u65B9\u5F0F"})]})]})}var he=fe,ve=["meta","page"];function $(){var A=(0,te.bx)(),d=A.rootCategoryId,o=A.categories,E=(0,te.UO)();console.log("rootCategoryId",d);var R=(0,j.WP)({fetchPolicy:"cache-and-network",variables:{id:E.id}}),c=R.data,m=R.loading,M=(0,D.useMemo)(function(){return!o||!o.length?[]:(0,ne.G_)(o.map(function(v){return I()(I()({},v),{},{value:v.id,title:v.name})}),{idKey:"id",childrenKey:"children",pidKey:"parent.id",sort:function(y,x){return y.index-x.index}})},[o]),K=(0,j.Qu)(),O=oe()(K,2),B=O[0],b=O[1].loading,F=t.Form.useForm(),ue=(0,D.useCallback)(se()(J()().mark(function v(){var y,x,p,T,z,L,Q,le,W,V,k,Z,s,u,n,w;return J()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,F.validateFields();case 2:for(T=S.sent,z=T.meta,L=T.page,Q=q()(T,ve),le={seo_title:"single_line_text_field",seo_description:"multi_line_text_field",seo_keywords:"list.single_line_text_field"},W=[],V=0,k=Object.keys(z);V<k.length;V++)for(Z=k[V],s=0,u=Object.keys(z[Z]);s<u.length;s++)n=u[s],W.push({namespace:Z,key:n,value:z[Z][n],type:le[Z+"_"+n]});return w=I()(I()({},Q),{},{page:{enabled:L.enabled,path:(y=L.route)===null||y===void 0?void 0:y.path,template:(x=L.component)===null||x===void 0?void 0:x.template,blocks:(p=L.component)===null||p===void 0?void 0:p.blocks},metafields:W}),S.next=12,B({variables:{id:E.id,input:w}});case 12:t.Toast.success("\u680F\u76EE \u201C".concat(Q.name,"\u201D \u4FEE\u6539\u6210\u529F"),2e3,{placement:"bottom-left",progressBar:!0});case 13:case"end":return S.stop()}},v)})),[F,E.id,B]),h=c==null?void 0:c.category;(0,D.useEffect)(function(){var v,y,x,p;h&&F.setFieldsValue(I()(I()({},h),{},{storeTemplate:(v=h.storeTemplate)===null||v===void 0?void 0:v.id,image:(y=h.image)===null||y===void 0?void 0:y.id,parent:((x=h.parent)===null||x===void 0?void 0:x.id)===d?null:(p=h.parent)===null||p===void 0?void 0:p.id}))},[h,F,d]);var g=(0,D.useCallback)(function(){history.back()},[]);return(0,e.jsx)(ae.vs,{loading:m,header:{title:"\u7F16\u8F91\u680F\u76EE"},children:(0,e.jsxs)(t.Form,{form:F,className:"form d-flex flex-column flex-lg-row",children:[(0,e.jsx)(he,{categoryTreeData:M}),(0,e.jsxs)("div",{className:"d-flex flex-column flex-row-fluid gap-7 gap-lg-10",children:[(0,e.jsxs)(t.Tabs,{defaultActiveKey:"general",contentContainer:!1,type:"line-tabs",className:"border-0 fs-4 fw-bold mb-n2 nav-line-tabs-2x",children:[(0,e.jsx)(t.Tabs.TabPane,{tab:"\u57FA\u672C\u4FE1\u606F",forceRender:!0,children:(0,e.jsx)(i,{})},"general"),(0,e.jsx)(t.Tabs.TabPane,{tab:"\u9AD8\u7EA7\u8BBE\u7F6E",forceRender:!0,children:(0,e.jsx)(me,{category:h})},"advanced"),(0,e.jsx)(t.Tabs.TabPane,{tab:"\u5143\u6570\u636E",forceRender:!0,children:(0,e.jsx)(C,{})},"metadata")]}),(0,e.jsx)(ie.Z,{style:{zIndex:9},offsetBottom:16,children:(0,e.jsxs)("div",{className:G()("d-flex bg-body-color p-5 mx-4 tw-rounded-2xl justify-content-end"),children:[(0,e.jsx)(t.Button,{onClick:g,variant:"light",className:"me-5",children:"\u53D6\u6D88"}),(0,e.jsx)(t.Button,{onClick:ue,loading:b,children:"\u4FDD\u5B58\u66F4\u6539"})]})})]})]})})}var H=$},64218:function(ge,X,a){a.d(X,{Z:function(){return me}});var r=a(62435),J=a(93967),Y=a.n(J),q=a(48555),re=a(98423),se=a(74902),_=a(75164);function oe(l){let i;const f=C=>()=>{i=null,l.apply(void 0,(0,se.Z)(C))},P=function(){if(i==null){for(var C=arguments.length,N=new Array(C),j=0;j<C;j++)N[j]=arguments[j];i=(0,_.Z)(f(N))}};return P.cancel=()=>{_.Z.cancel(i),i=null},P}var ee=oe,I=a(53124),D=a(92030);const te=l=>{const{componentCls:i}=l;return{[i]:{position:"fixed",zIndex:l.zIndexPopup}}},ie=l=>({zIndexPopup:l.zIndexBase+10});var de=(0,D.I$)("Affix",te,ie);function G(l){return l!==window?l.getBoundingClientRect():{top:0,bottom:window.innerHeight}}function ae(l,i,f){if(f!==void 0&&Math.round(i.top)>Math.round(l.top)-f)return f+i.top}function t(l,i,f){if(f!==void 0&&Math.round(i.bottom)<Math.round(l.bottom)+f){const P=window.innerHeight-i.bottom;return f+P}}const ne=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"];function ce(){return typeof window!="undefined"?window:null}var e;(function(l){l[l.None=0]="None",l[l.Prepare=1]="Prepare"})(e||(e={}));var me=r.forwardRef((l,i)=>{var f;const{style:P,offsetTop:C,offsetBottom:N,prefixCls:j,className:fe,rootClassName:he,children:ve,target:$,onChange:H}=l,{getPrefixCls:A,getTargetContainer:d}=r.useContext(I.E_),o=A("affix",j),[E,R]=r.useState(!1),[c,m]=r.useState(),[M,K]=r.useState(),O=r.useRef(e.None),B=r.useRef(null),b=r.useRef(),F=r.useRef(null),ue=r.useRef(null),h=r.useRef(null),g=(f=$!=null?$:d)!==null&&f!==void 0?f:ce,v=N===void 0&&C===void 0?0:C,y=()=>{if(O.current!==e.Prepare||!ue.current||!F.current||!g)return;const s=g();if(s){const u={status:e.None},n=G(F.current);if(n.top===0&&n.left===0&&n.width===0&&n.height===0)return;const w=G(s),U=ae(n,w,v),S=t(n,w,N);U!==void 0?(u.affixStyle={position:"fixed",top:U,width:n.width,height:n.height},u.placeholderStyle={width:n.width,height:n.height}):S!==void 0&&(u.affixStyle={position:"fixed",bottom:S,width:n.width,height:n.height},u.placeholderStyle={width:n.width,height:n.height}),u.lastAffix=!!u.affixStyle,E!==u.lastAffix&&(H==null||H(u.lastAffix)),O.current=u.status,m(u.affixStyle),K(u.placeholderStyle),R(u.lastAffix)}},x=()=>{var s;O.current=e.Prepare,y()},p=ee(()=>{x()}),T=ee(()=>{if(g&&c){const s=g();if(s&&F.current){const u=G(s),n=G(F.current),w=ae(n,u,v),U=t(n,u,N);if(w!==void 0&&c.top===w||U!==void 0&&c.bottom===U)return}}x()}),z=()=>{const s=g==null?void 0:g();s&&(ne.forEach(u=>{var n;b.current&&((n=B.current)===null||n===void 0||n.removeEventListener(u,b.current)),s==null||s.addEventListener(u,T)}),B.current=s,b.current=T)},L=()=>{h.current&&(clearTimeout(h.current),h.current=null);const s=g==null?void 0:g();ne.forEach(u=>{var n;s==null||s.removeEventListener(u,T),b.current&&((n=B.current)===null||n===void 0||n.removeEventListener(u,b.current))}),p.cancel(),T.cancel()};r.useImperativeHandle(i,()=>({updatePosition:p})),r.useEffect(()=>(h.current=setTimeout(z),()=>L()),[]),r.useEffect(()=>{z()},[$,c]),r.useEffect(()=>{p()},[$,C,N]);const[Q,le,W]=de(o),V=Y()(he,le,o,W),k=Y()({[V]:c});let Z=(0,re.Z)(l,["prefixCls","offsetTop","offsetBottom","target","onChange","rootClassName"]);return Q(r.createElement(q.Z,{onResize:p},r.createElement("div",Object.assign({style:P,className:fe,ref:F},Z),c&&r.createElement("div",{style:M,"aria-hidden":"true"}),r.createElement("div",{className:k,ref:ue,style:c},r.createElement(q.Z,{onResize:p},ve)))))})}}]);

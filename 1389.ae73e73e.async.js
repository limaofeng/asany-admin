(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[1389],{91389:function(L,b,r){"use strict";r.r(b);var u=r(14843),o=r(52620),a=r(85893);function m(t){var s,i=t.isLast,$=t.route,A=t.url,F=t.params,h=(0,u.zR)({variables:{id:F.id}}),C=h.data,P=h.loading;return(0,a.jsx)(o.Z,{className:t.className,href:i?void 0:A,children:P?(0,a.jsx)(a.Fragment,{children:"\u52A0\u8F7D\u4E2D..."}):(0,a.jsx)(a.Fragment,{children:C==null||(s=C.app)===null||s===void 0?void 0:s.title})},$.id)}b.default=m},14843:function(L,b,r){"use strict";r.d(b,{u7:function(){return u.u7},pM:function(){return u.pM},dP:function(){return u.dP},zR:function(){return u.zR},bo:function(){return u.bo},CF:function(){return u.CF},hT:function(){return u.hT},X4:function(){return u.X4},rq:function(){return u.rq},qb:function(){return u.qb},a$:function(){return u.a$},mp:function(){return u.mp},WE:function(){return u.WE},HC:function(){return u.HC},cT:function(){return A},Hr:function(){return P},r3:function(){return u.r3},bI:function(){return u.bI},A6:function(){return u.A6},LV:function(){return u.LV}});var u=r(8305),o=r(39428),a=r(3182),m=r(2824),t=r(67294),s=r(51186),i=r(85893);function $(e,p){var d,E=(0,u.rz)({variables:{id:e==null?void 0:e.id},refetchQueries:[{query:u.dP,variables:{id:e==null||(d=e.application)===null||d===void 0?void 0:d.id}}]}),R=(0,m.Z)(E,1),c=R[0],j=(0,t.useCallback)((0,a.Z)((0,o.Z)().mark(function Z(){var M;return(0,o.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,s.u_.confirm({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u8DEF\u7531\u5417\uFF1F",content:(0,i.jsxs)(i.Fragment,{children:["\u60A8\u5373\u5C06\u5220\u9664\u201C",(0,i.jsx)("strong",{children:e.name}),"\u201D\u3002\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F"]}),okText:"\u5220 \u9664",okClassName:"btn-danger"});case 2:if(M=l.sent,!M.isConfirmed){l.next=8;break}return l.next=6,c();case 6:s.FN.success("\u5220\u9664\u6210\u529F"),p(e);case 8:case"end":return l.stop()}},Z)})),[c,e,p]);return[j]}var A=$,F=r(11849),h=r(25496);function C(e,p){var d,E,R,c=s.l0.useForm(),j=(0,t.useState)(!1),Z=(0,m.Z)(j,2),M=Z[0],v=Z[1],l=(0,u.X4)({fetchPolicy:"no-cache",refetchQueries:[{query:u.dP,variables:{id:e==null||(d=e.application)===null||d===void 0?void 0:d.id}}]}),I=(0,m.Z)(l,1),B=I[0],N=(0,u.LV)({fetchPolicy:"no-cache",refetchQueries:[{query:u.dP,variables:{id:e==null||(E=e.application)===null||E===void 0?void 0:E.id}}]}),O=(0,m.Z)(N,1),T=O[0],S=(0,t.useMemo)(function(){return e!=null&&e.id?(0,a.Z)((0,o.Z)().mark(function y(){var f,D,g;return(0,o.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),n.prev=1,n.next=4,c.validateFields();case 4:return f=n.sent,n.next=7,s.FN.promise((0,h.gw)(T({variables:{id:e.id,input:(0,F.Z)({},f)}}),350),{pending:"\u63D0\u4EA4\u4E2D...",success:{render:function(){return(0,i.jsxs)(i.Fragment,{children:["\u8DEF\u7531 ",(0,i.jsx)("strong",{children:f.name})," \u4FDD\u5B58\u6210\u529F"]})}},error:"\u63D0\u4EA4\u51FA\u9519"},{duration:2e3,placement:"top-center"});case 7:D=n.sent,g=D.data,p(g.updateRoute),v(!1),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),v(!1);case 16:case"end":return n.stop()}},y,null,[[1,13]])})):(0,a.Z)((0,o.Z)().mark(function y(){var f,D,g;return(0,o.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),n.prev=1,n.next=4,c.validateFields();case 4:return f=n.sent,n.next=7,s.FN.promise((0,h.gw)(B({variables:{input:(0,F.Z)((0,F.Z)({},f),{},{application:e.application.id})}}),350),{pending:"\u63D0\u4EA4\u4E2D...",success:{render:function(){return(0,i.jsxs)(i.Fragment,{children:["\u8DEF\u7531 ",(0,i.jsx)("strong",{children:f.name})," \u65B0\u589E\u6210\u529F"]})}},error:"\u63D0\u4EA4\u51FA\u9519"},{duration:2e3,placement:"top-center"});case 7:D=n.sent,g=D.data,p(g.createRoute),v(!1),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),v(!1);case 16:case"end":return n.stop()}},y,null,[[1,13]])}))},[B,e==null||(R=e.application)===null||R===void 0?void 0:R.id,e==null?void 0:e.id,c,p,T]);return[S,{form:c,submitting:M}]}var P=C}}]);

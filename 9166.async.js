"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9166,1201],{51253:function(Q,L,t){t.d(L,{GP:function(){return A.Z},Hk:function(){return U},xx:function(){return S.x}});var l=t(74958),A=t(5166),S=t(19260),d=t(68400),f=t.n(d),F=t(62435),h=t(93967),M=t.n(h),D=t(94589),r=t(97857),R=t.n(r),a=t(46027),K=t(10582),B=t(42687),W=t(79817),w=t(5574),o=t.n(w),n=t(96486),e=t(86074),i={aside:{minimize:!1,width:280}},c=F.createContext({state:i,dispatch:function(){}}),p=function(u){return u.AsideToggle="ASIDE_TOGGLE",u.AsideWidth="ASIDE_WIDTH",u}({});function v(u,g){switch(g.type){case"ASIDE_TOGGLE":return u.aside.minimize=!u.aside.minimize,R()({},u);case"ASIDE_WIDTH":return u.aside.width=g.payload,R()({},u);default:throw new Error}}var E=function(g){var j=(0,F.useReducer)(v,(0,n.cloneDeep)(i)),T=o()(j,2),s=T[0],$=T[1];return(0,e.jsx)(c.Provider,{value:{state:s,dispatch:$},children:g.children})},y=function(){return(0,F.useContext)(c)},x=t(65495);function b(u){var g=y(),j=g.dispatch,T=g.state.aside.minimize,s=(0,F.useCallback)(function(){j({type:p.AsideToggle})},[j]);return(0,e.jsx)(W.Button,{style:R()({marginBottom:"1.35rem",zIndex:105},u.style),onClick:s,activeColor:"primary",className:M()("micro-app-aside-toggle","btn-icon bg-body btn-color-gray-700 rounded-2 position-absolute translate-middle bottom-0 shadow-sm d-none d-lg-flex",u.className,{active:T}),children:(0,e.jsx)(a.JO,{name:"Duotune/arr063",className:"svg-icon-2 rotate-180"})})}var C={"drawer drawer-start":{maxWidth:992}};function P(u){var g=u.className,j=u.header,T=u.children,s=u.collapsible,$=s===void 0?!0:s,G=u.width,H=G===void 0?280:G,Z=(0,B.$Y)(),X=y(),V=X.dispatch;(0,F.useEffect)(function(){Z.aside.width(H+100),V({type:p.AsideWidth,payload:H})},[Z.aside,V,H]);var J=(0,K.CN)(C),Y=(0,B.BK)(function(k){return k.aside.drawer});return(0,e.jsxs)("div",{className:M()("app-aside aside",g,J,{"drawer-on":Y}),children:[(0,e.jsx)(x.Z,{children:(0,e.jsx)(A.Z,{header:j,resizeable:!0,className:"app-sidebar",children:T})}),$&&(0,e.jsx)(b,{className:"start-100 end-0"})]})}P.Toggle=b;var O=P,N,I=D.ZP.div(N||(N=f()([`
  --root-aside-width: `,`;
  --met-aside-width: `,`;
`])),function(u){return u.minimize?"100px":"".concat(u.width,"px")},function(u){return u.minimize?"100px":"".concat(u.width,"px")});function z(u){var g=u.children,j=u.className,T=y(),s=T.state.aside,$=s.minimize,G=s.width,H=(0,F.useCallback)(function(Z){Z.preventDefault()},[]);return(0,e.jsx)(I,{minimize:$,width:G,className:M()("micro-app-container page-full-content",j,{"aside-minimize":$}),onContextMenu:H,children:g})}function m(u){var g=u.children,j=u.className;return(0,e.jsx)(E,{children:(0,e.jsx)(z,{className:j,children:g})})}m.Sidebar=O;var U=m},42687:function(Q,L,t){t.d(L,{$Y:function(){return a},BK:function(){return B},aM:function(){return w}});var l=t(5574),A=t.n(l),S=t(97857),d=t.n(S),f=t(62435),F=t(86074),h=f.createContext({getState:function(){return{routes:[]}},subscribe:function(){},dispatch:function(){}}),M=function(n,e){return e?e.type==="ASIDE_MINIMIZE"?d()(d()({},n),{},{aside:d()(d()({},n.aside),{},{minimize:!!e.payload})}):e.type==="ASIDE_WIDTH"?d()(d()({},n),{},{aside:d()(d()({},n.aside),{},{width:e.payload})}):e.type==="ASIDE_COLLAPSIBLE"?d()(d()({},n),{},{aside:d()(d()({},n.aside),{},{collapsible:e.payload})}):e.type==="ASIDE_DRAWER"?d()(d()({},n),{},{aside:d()(d()({},n.aside),{},{drawer:e.payload})}):n:n},D=function(n){return d()({},n)};function r(o){var n=(0,f.useReducer)(M,o,D),e=A()(n,2),i=e[0],c=e[1],p=(0,f.useState)([]),v=A()(p,1),E=v[0],y=function(z){return function(){var m=E.indexOf(z);m>-1&&E.splice(m,1)}},x=(0,f.useCallback)(function(I){return E.unshift(I),y(I)},[E]),b=(0,f.useCallback)(function(){E.forEach(function(I){return I()})},[E]),C={getState:function(){return i},dispatch:c,subscribe:x},P=(0,f.useState)(C),O=A()(P,1),N=O[0];return(0,f.useEffect)(function(){N.getState=function(){return i},b()},[i]),N}var R=function(n,e){return n===e};function a(){var o=(0,f.useContext)(h),n=(0,f.useRef)({aside:{get state(){return o.getState().aside},width:function(i){o.dispatch({type:"ASIDE_WIDTH",payload:i})},minimize:function(i){o.dispatch({type:"ASIDE_MINIMIZE",payload:i})},collapsible:function(i){o.dispatch({type:"ASIDE_COLLAPSIBLE",payload:i})},drawer:function(i){o.dispatch({type:"ASIDE_DRAWER",payload:i})}}});return n.current}function K(o){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R,e=(0,f.useContext)(h),i=(0,f.useReducer)(function(x){return x+1},0),c=A()(i,2),p=c[1],v=(0,f.useRef)(),E=o(e.getState());function y(){var x=o(e.getState());n(x,v.current)||(v.current=x,p())}return(0,f.useEffect)(function(){return e.subscribe(y)},[]),E}function B(o){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R;return K(o,n)}function W(){var o=useContext(h);return o.dispatch}function w(o){var n=o.children,e=o.state,i=r(e);return(0,f.useMemo)(function(){return(0,F.jsx)(h.Provider,{value:i,children:n})},[n,i])}},85947:function(Q,L,t){t.d(L,{u7:function(){return l.u7},pM:function(){return l.pM},dP:function(){return l.dP},zR:function(){return l.zR},bo:function(){return l.bo},CF:function(){return l.CF},hT:function(){return l.hT},X4:function(){return l.X4},rq:function(){return l.rq},qb:function(){return l.qb},a$:function(){return l.a$},mp:function(){return l.mp},WE:function(){return l.WE},HC:function(){return l.HC},cT:function(){return a},Hr:function(){return o},r3:function(){return l.r3},bI:function(){return l.bI},A6:function(){return l.A6},LV:function(){return l.LV}});var l=t(10557),A=t(15009),S=t.n(A),d=t(99289),f=t.n(d),F=t(5574),h=t.n(F),M=t(62435),D=t(79817),r=t(86074);function R(n,e){var i,c=(0,l.rz)({variables:{id:n==null?void 0:n.id},refetchQueries:[{query:l.dP,variables:{id:n==null||(i=n.application)===null||i===void 0?void 0:i.id}}]}),p=h()(c,1),v=p[0],E=(0,M.useCallback)(f()(S()().mark(function y(){var x;return S()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,D.Modal.confirm({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u8DEF\u7531\u5417\uFF1F",content:(0,r.jsxs)(r.Fragment,{children:["\u60A8\u5373\u5C06\u5220\u9664\u201C",(0,r.jsx)("strong",{children:n.name}),"\u201D\u3002\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F"]}),okText:"\u5220 \u9664",okClassName:"btn-danger"});case 2:if(x=C.sent,!x.isConfirmed){C.next=8;break}return C.next=6,v();case 6:D.Toast.success("\u5220\u9664\u6210\u529F"),e(n);case 8:case"end":return C.stop()}},y)})),[v,n,e]);return[E]}var a=R,K=t(97857),B=t.n(K),W=t(12708);function w(n,e){var i,c,p,v=D.Form.useForm(),E=(0,M.useState)(!1),y=h()(E,2),x=y[0],b=y[1],C=(0,l.X4)({fetchPolicy:"no-cache",refetchQueries:[{query:l.dP,variables:{id:n==null||(i=n.application)===null||i===void 0?void 0:i.id}}]}),P=h()(C,1),O=P[0],N=(0,l.LV)({fetchPolicy:"no-cache",refetchQueries:[{query:l.dP,variables:{id:n==null||(c=n.application)===null||c===void 0?void 0:c.id}}]}),I=h()(N,1),z=I[0],m=(0,M.useMemo)(function(){return n!=null&&n.id?f()(S()().mark(function U(){var u,g,j;return S()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return b(!0),s.prev=1,s.next=4,v.validateFields();case 4:return u=s.sent,s.next=7,D.Toast.promise((0,W.gw)(z({variables:{id:n.id,input:B()({},u)}}),350),{pending:"\u63D0\u4EA4\u4E2D...",success:{render:function(){return(0,r.jsxs)(r.Fragment,{children:["\u8DEF\u7531 ",(0,r.jsx)("strong",{children:u.name})," \u4FDD\u5B58\u6210\u529F"]})}},error:"\u63D0\u4EA4\u51FA\u9519"},{duration:2e3,placement:"top-center"});case 7:g=s.sent,j=g.data,e(j.updateRoute),b(!1),s.next=16;break;case 13:s.prev=13,s.t0=s.catch(1),b(!1);case 16:case"end":return s.stop()}},U,null,[[1,13]])})):f()(S()().mark(function U(){var u,g,j;return S()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return b(!0),s.prev=1,s.next=4,v.validateFields();case 4:return u=s.sent,s.next=7,D.Toast.promise((0,W.gw)(O({variables:{input:B()(B()({},u),{},{application:n.application.id})}}),350),{pending:"\u63D0\u4EA4\u4E2D...",success:{render:function(){return(0,r.jsxs)(r.Fragment,{children:["\u8DEF\u7531 ",(0,r.jsx)("strong",{children:u.name})," \u65B0\u589E\u6210\u529F"]})}},error:"\u63D0\u4EA4\u51FA\u9519"},{duration:2e3,placement:"top-center"});case 7:g=s.sent,j=g.data,e(j.createRoute),b(!1),s.next=16;break;case 13:s.prev=13,s.t0=s.catch(1),b(!1);case 16:case"end":return s.stop()}},U,null,[[1,13]])}))},[O,n==null||(p=n.application)===null||p===void 0?void 0:p.id,n==null?void 0:n.id,v,e,z]);return[m,{form:v,submitting:x}]}var o=w},13196:function(Q,L,t){t.r(L),t.d(L,{default:function(){return n}});var l=t(96974),A=t(51253),S=t(5574),d=t.n(S),f=t(97857),F=t.n(f),h=t(62435),M=t(46027),D=t(12845),r=t(79817),R=t(12708),a=t(86074);function K(e,i){return e.children&&e.children.length?(0,a.jsx)(r.Menu.SubMenu,{url:"/websites/".concat(i,"/cms/categories/").concat(e.id,"/articles"),bullet:!0,icon:e.icon,title:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"flex-row-fluid",children:e.name}),(0,a.jsx)(r.Tooltip,{title:"\u680F\u76EE\u8BBE\u7F6E",children:(0,a.jsx)("div",{children:(0,a.jsx)(D.Link,{onClick:function(p){return p.stopPropagation()},className:"category-setting me-2 text-primary",to:"/websites/".concat(i,"/cms/categories/").concat(e.id),children:(0,a.jsx)(M.JO,{name:"Bootstrap/gear",className:"svg-icon-primary"})})})})]})},"category_".concat(e.id)):(0,a.jsx)(r.Menu.Item,{url:"/websites/".concat(i,"/cms/categories/").concat(e.id,"/articles"),bullet:!0,icon:e.icon,title:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"flex-row-fluid",children:e.name}),(0,a.jsx)(r.Tooltip,{title:"\u680F\u76EE\u8BBE\u7F6E",children:(0,a.jsx)(D.Link,{onClick:function(p){return p.stopPropagation()},className:"category-setting me-4 text-primary",to:"/websites/".concat(i,"/cms/categories/").concat(e.id),children:(0,a.jsx)(M.JO,{name:"Bootstrap/gear",className:"svg-icon-primary"})})})]})},"category_".concat(e.id))}console.log("renderChannel",K);function B(e){var i=e.location,c=e.app,p=(0,h.useMemo)(function(){return(0,R.G_)(e.categories.map(function(m){return F()({},m)}),{idKey:"id",childrenKey:"children",pidKey:"parent.id",sort:function(U,u){return U.index-u.index}})},[e.categories]),v=(0,h.useMemo)(function(){var m=(0,l.LX)("/websites/:sid/cms/categories/:cid",i.pathname);return m?"category_".concat(m.params.cid):"my-drive"},[i.pathname]),E=(0,h.useState)(v),y=d()(E,2),x=y[0],b=y[1],C=(0,h.useState)(p.map(function(m){return m.id})),P=d()(C,2),O=P[0],N=P[1];(0,h.useEffect)(function(){v&&b(v)},[v]);var I=(0,h.useCallback)(function(m){console.log("selectedKey",m.key),b(m.key)},[]),z=(0,h.useCallback)(function(m){N(m)},[]);return(0,h.useEffect)(function(){N(p.map(function(m){return"category_".concat(m.id)}))},[p.map(function(m){return m.id}).join(",")]),console.log("app 21",c),(0,a.jsxs)(r.BlockUI,{zIndex:10,className:"my-5 p-5",overlayClassName:"bg-white bg-opacity-25",loading:!1,children:[(0,a.jsx)("div",{className:"mx-5",children:(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)(r.Symbol.Avatar,{alt:"\u5565\u5730\u65B9",className:"me-5"}),(0,a.jsxs)("div",{className:"flex-grow-1",children:[(0,a.jsx)("a",{className:"text-dark fw-bolder text-hover-primary fs-6",children:c.title}),(0,a.jsx)("span",{className:"text-muted d-block fw-bold",children:c.description})]})]})}),(0,a.jsxs)(r.Menu,{fit:!0,accordion:!1,selectable:"AllMenu",className:"menu-title-gray-600 menu-icon-gray-400 menu-state-primary menu-state-icon-primary menu-state-bullet-primary menu-arrow-gray-500 fw-bold fs-6 px-6 my-5 my-lg-0",selectedKeys:x?[x]:[],onSelect:I,openKeys:O,onOpenChange:z,children:[(0,a.jsx)(r.Menu.Section,{contentClassName:"pt-6 pb-0",children:"\u901A\u7528"}),(0,a.jsx)(r.Menu.Item,{bullet:!0,icon:"",title:"\u57FA\u672C\u4FE1\u606F",url:"/apps/".concat(c.id,"/profile")}),(0,a.jsx)(r.Menu.Item,{bullet:!0,icon:"",title:"\u7EC4\u7EC7\u673A\u6784",url:""}),(0,a.jsx)(r.Menu.Section,{contentClassName:"pt-6 pb-0",children:"\u5916\u89C2"}),(0,a.jsx)(r.Menu.Item,{bullet:!0,icon:"",title:"\u767B\u5F55\u8BBE\u7F6E",url:""}),(0,a.jsx)(r.Menu.Item,{bullet:!0,icon:"",title:"\u5E03\u5C40",url:""}),(0,a.jsx)(r.Menu.Item,{bullet:!0,icon:"",title:"\u95E8\u6237",url:""}),(0,a.jsx)(r.Menu.Section,{contentClassName:"pt-6 pb-0",children:"\u529F\u80FD\u96C6\u6210"}),(0,a.jsx)(r.Menu.Item,{bullet:!0,icon:"",title:"\u4FE1\u606F",url:""}),(0,a.jsx)(r.Menu.Item,{bullet:!0,icon:"",title:"\u90AE\u4EF6",url:""}),(0,a.jsx)(r.Menu.Item,{bullet:!0,icon:"",title:"\u65E5\u7A0B",url:""}),(0,a.jsx)(r.Menu.Section,{contentClassName:"pt-6 pb-0",children:"\u7B2C\u4E09\u65B9\u96C6\u6210"}),(0,a.jsx)(r.Menu.Item,{bullet:!0,icon:"",title:"\u9489\u9489",url:""}),(0,a.jsx)(r.Menu.Item,{bullet:!0,icon:"",title:"\u5FAE\u4FE1",url:""}),(0,a.jsx)(r.Menu.Item,{bullet:!0,icon:"",title:"\u4F01\u4E1A\u5FAE\u4FE1",url:""}),(0,a.jsx)(r.Menu.Section,{contentClassName:"pt-6 pb-0",children:"\u5F00\u53D1\u8005\u8BBE\u7F6E"}),(0,a.jsx)(r.Menu.Item,{bullet:!0,icon:"",title:"\u5F00\u53D1\u4FE1\u606F",url:"/apps/".concat(c.id,"/api_keys")}),(0,a.jsx)(r.Menu.Item,{bullet:!0,icon:"",title:"\u4F1A\u8BDD\u7BA1\u7406",url:"/apps/".concat(c.id,"/sessions")}),(0,a.jsx)(r.Menu.Item,{bullet:!0,icon:"",title:"\u83DC\u5355\u8BBE\u7F6E",url:"/apps/".concat(c.id,"/menus")}),(0,a.jsx)(r.Menu.Item,{bullet:!0,icon:"",title:"\u8DEF\u7531\u8BBE\u7F6E",url:"/apps/".concat(c.id,"/routes")}),(0,a.jsx)(r.Menu.Item,{bullet:!0,icon:"",title:"\u7EC4\u4EF6\u7BA1\u7406",url:"/apps/".concat(c.id,"/components")})]})]})}var W=B,w=t(85947);function o(){var e=(0,l.UO)(),i=e.id,c=(0,w.zR)({variables:{id:i}}),p=c.data,v=p===void 0?{}:p,E=c.loading,y=v.app;return console.log("app 1",y),(0,a.jsx)(A.Hk,{loading:E,className:"micro-app-website",children:y&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.Hk.Sidebar,{children:(0,a.jsx)(W,{app:y,location})}),(0,a.jsx)(l.j3,{context:{app:y,baseUrl:"/apps/"+i}})]})})}var n=o}}]);

"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9166,1201],{51253:function(w,L,t){t.d(L,{GP:function(){return F.Z},Hk:function(){return z},xx:function(){return M.x}});var s=t(74958),F=t(5166),M=t(19260),f=t(68400),d=t.n(f),D=t(62435),v=t(93967),I=t.n(v),B=t(94589),u=t(97857),T=t.n(u),n=t(46027),K=t(42687),N=t(10811),W=t(5574),U=t.n(W),o=t(96486),e=t(86074),r={aside:{minimize:!1,width:280}},i=D.createContext({state:r,dispatch:function(){}}),c=function(a){return a.AsideToggle="ASIDE_TOGGLE",a.AsideWidth="ASIDE_WIDTH",a}({});function m(a,y){switch(y.type){case"ASIDE_TOGGLE":return a.aside.minimize=!a.aside.minimize,T()({},a);case"ASIDE_WIDTH":return a.aside.width=y.payload,T()({},a);default:throw new Error}}var p=function(y){var g=(0,D.useReducer)(m,(0,o.cloneDeep)(r)),S=U()(g,2),C=S[0],$=S[1];return(0,e.jsx)(i.Provider,{value:{state:C,dispatch:$},children:y.children})},h=function(){return(0,D.useContext)(i)},x=t(65495);function E(a){var y=h(),g=y.dispatch,S=y.state.aside.minimize,C=(0,D.useCallback)(function(){g({type:c.AsideToggle})},[g]);return(0,e.jsx)(N.Button,{style:T()({marginBottom:"1.35rem",zIndex:105},a.style),onClick:C,activeColor:"primary",className:I()("micro-app-aside-toggle","btn-icon bg-body btn-color-gray-700 rounded-2 position-absolute translate-middle bottom-0 shadow-sm d-none d-lg-flex",a.className,{active:S}),children:(0,e.jsx)(n.JO,{name:"Duotune/arr063",className:"svg-icon-2 rotate-180"})})}function j(a){var y=a.className,g=a.header,S=a.children,C=a.collapsible,$=C===void 0?!0:C,l=a.width,H=l===void 0?280:l,G=(0,K.$Y)(),Q=h(),Z=Q.dispatch;return(0,D.useEffect)(function(){G.aside.width(H+100),Z({type:c.AsideWidth,payload:H})},[G.aside,Z,H]),(0,e.jsxs)("div",{className:I()("app-aside aside",y),children:[(0,e.jsx)(x.Z,{children:(0,e.jsx)(F.Z,{header:g,resizeable:!0,className:"app-sidebar",children:S})}),$&&(0,e.jsx)(E,{className:"start-100 end-0"})]})}j.Toggle=E;var b=j,R,O=B.ZP.div(R||(R=d()([`
  --root-aside-width: `,`;
  --met-aside-width: `,`;
`])),function(a){return a.minimize?"100px":"".concat(a.width,"px")},function(a){return a.minimize?"100px":"".concat(a.width,"px")});function P(a){var y=a.children,g=a.className,S=h(),C=S.state.aside,$=C.minimize,l=C.width,H=(0,D.useCallback)(function(G){G.preventDefault()},[]);return(0,e.jsx)(O,{minimize:$,width:l,className:I()("micro-app-container page-full-content",g,{"aside-minimize":$}),onContextMenu:H,children:y})}function A(a){var y=a.children,g=a.className;return(0,e.jsx)(p,{children:(0,e.jsx)(P,{className:g,children:y})})}A.Sidebar=b;var z=A},42687:function(w,L,t){t.d(L,{$Y:function(){return n},BK:function(){return N},aM:function(){return U}});var s=t(5574),F=t.n(s),M=t(97857),f=t.n(M),d=t(62435),D=t(86074),v=d.createContext({getState:function(){return{routes:[]}},subscribe:function(){},dispatch:function(){}}),I=function(e,r){return r?r.type==="ASIDE_MINIMIZE"?f()(f()({},e),{},{aside:f()(f()({},e.aside),{},{minimize:!!r.payload})}):r.type==="ASIDE_WIDTH"?f()(f()({},e),{},{aside:f()(f()({},e.aside),{},{width:r.payload})}):r.type==="ASIDE_COLLAPSIBLE"?f()(f()({},e),{},{aside:f()(f()({},e.aside),{},{collapsible:r.payload})}):e:e},B=function(e){return f()({},e)};function u(o){var e=(0,d.useReducer)(I,o,B),r=F()(e,2),i=r[0],c=r[1],m=(0,d.useState)([]),p=F()(m,1),h=p[0],x=function(z){return function(){var a=h.indexOf(z);a>-1&&h.splice(a,1)}},E=(0,d.useCallback)(function(A){return h.unshift(A),x(A)},[h]),j=(0,d.useCallback)(function(){h.forEach(function(A){return A()})},[h]),b={getState:function(){return i},dispatch:c,subscribe:E},R=(0,d.useState)(b),O=F()(R,1),P=O[0];return(0,d.useEffect)(function(){P.getState=function(){return i},j()},[i]),P}var T=function(e,r){return e===r};function n(){var o=(0,d.useContext)(v),e=(0,d.useRef)({aside:{get state(){return o.getState().aside},width:function(i){o.dispatch({type:"ASIDE_WIDTH",payload:i})},minimize:function(i){o.dispatch({type:"ASIDE_MINIMIZE",payload:i})},collapsible:function(i){o.dispatch({type:"ASIDE_COLLAPSIBLE",payload:i})}}});return e.current}function K(o){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T,r=(0,d.useContext)(v),i=(0,d.useReducer)(function(E){return E+1},0),c=F()(i,2),m=c[1],p=(0,d.useRef)(),h=o(r.getState());function x(){var E=o(r.getState());e(E,p.current)||(p.current=E,m())}return(0,d.useEffect)(function(){return r.subscribe(x)},[]),h}function N(o){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T;return K(o,e)}function W(){var o=useContext(v);return o.dispatch}function U(o){var e=o.children,r=o.state,i=u(r);return(0,d.useMemo)(function(){return(0,D.jsx)(v.Provider,{value:i,children:e})},[e,i])}},85947:function(w,L,t){t.d(L,{u7:function(){return s.u7},pM:function(){return s.pM},dP:function(){return s.dP},zR:function(){return s.zR},bo:function(){return s.bo},CF:function(){return s.CF},hT:function(){return s.hT},X4:function(){return s.X4},rq:function(){return s.rq},qb:function(){return s.qb},a$:function(){return s.a$},mp:function(){return s.mp},WE:function(){return s.WE},HC:function(){return s.HC},cT:function(){return n},Hr:function(){return o},r3:function(){return s.r3},bI:function(){return s.bI},A6:function(){return s.A6},LV:function(){return s.LV}});var s=t(10557),F=t(15009),M=t.n(F),f=t(99289),d=t.n(f),D=t(5574),v=t.n(D),I=t(62435),B=t(10811),u=t(86074);function T(e,r){var i,c=(0,s.rz)({variables:{id:e==null?void 0:e.id},refetchQueries:[{query:s.dP,variables:{id:e==null||(i=e.application)===null||i===void 0?void 0:i.id}}]}),m=v()(c,1),p=m[0],h=(0,I.useCallback)(d()(M()().mark(function x(){var E;return M()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,B.Modal.confirm({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u8DEF\u7531\u5417\uFF1F",content:(0,u.jsxs)(u.Fragment,{children:["\u60A8\u5373\u5C06\u5220\u9664\u201C",(0,u.jsx)("strong",{children:e.name}),"\u201D\u3002\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F"]}),okText:"\u5220 \u9664",okClassName:"btn-danger"});case 2:if(E=b.sent,!E.isConfirmed){b.next=8;break}return b.next=6,p();case 6:B.Toast.success("\u5220\u9664\u6210\u529F"),r(e);case 8:case"end":return b.stop()}},x)})),[p,e,r]);return[h]}var n=T,K=t(97857),N=t.n(K),W=t(12708);function U(e,r){var i,c,m,p=B.Form.useForm(),h=(0,I.useState)(!1),x=v()(h,2),E=x[0],j=x[1],b=(0,s.X4)({fetchPolicy:"no-cache",refetchQueries:[{query:s.dP,variables:{id:e==null||(i=e.application)===null||i===void 0?void 0:i.id}}]}),R=v()(b,1),O=R[0],P=(0,s.LV)({fetchPolicy:"no-cache",refetchQueries:[{query:s.dP,variables:{id:e==null||(c=e.application)===null||c===void 0?void 0:c.id}}]}),A=v()(P,1),z=A[0],a=(0,I.useMemo)(function(){return e!=null&&e.id?d()(M()().mark(function y(){var g,S,C;return M()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return j(!0),l.prev=1,l.next=4,p.validateFields();case 4:return g=l.sent,l.next=7,B.Toast.promise((0,W.gw)(z({variables:{id:e.id,input:N()({},g)}}),350),{pending:"\u63D0\u4EA4\u4E2D...",success:{render:function(){return(0,u.jsxs)(u.Fragment,{children:["\u8DEF\u7531 ",(0,u.jsx)("strong",{children:g.name})," \u4FDD\u5B58\u6210\u529F"]})}},error:"\u63D0\u4EA4\u51FA\u9519"},{duration:2e3,placement:"top-center"});case 7:S=l.sent,C=S.data,r(C.updateRoute),j(!1),l.next=16;break;case 13:l.prev=13,l.t0=l.catch(1),j(!1);case 16:case"end":return l.stop()}},y,null,[[1,13]])})):d()(M()().mark(function y(){var g,S,C;return M()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return j(!0),l.prev=1,l.next=4,p.validateFields();case 4:return g=l.sent,l.next=7,B.Toast.promise((0,W.gw)(O({variables:{input:N()(N()({},g),{},{application:e.application.id})}}),350),{pending:"\u63D0\u4EA4\u4E2D...",success:{render:function(){return(0,u.jsxs)(u.Fragment,{children:["\u8DEF\u7531 ",(0,u.jsx)("strong",{children:g.name})," \u65B0\u589E\u6210\u529F"]})}},error:"\u63D0\u4EA4\u51FA\u9519"},{duration:2e3,placement:"top-center"});case 7:S=l.sent,C=S.data,r(C.createRoute),j(!1),l.next=16;break;case 13:l.prev=13,l.t0=l.catch(1),j(!1);case 16:case"end":return l.stop()}},y,null,[[1,13]])}))},[O,e==null||(m=e.application)===null||m===void 0?void 0:m.id,e==null?void 0:e.id,p,r,z]);return[a,{form:p,submitting:E}]}var o=U},13196:function(w,L,t){t.r(L),t.d(L,{default:function(){return e}});var s=t(96974),F=t(51253),M=t(5574),f=t.n(M),d=t(97857),D=t.n(d),v=t(62435),I=t(46027),B=t(12845),u=t(10811),T=t(12708),n=t(86074);function K(r,i){return r.children&&r.children.length?(0,n.jsx)(u.Menu.SubMenu,{url:"/websites/".concat(i,"/cms/categories/").concat(r.id,"/articles"),bullet:!0,icon:r.icon,title:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"flex-row-fluid",children:r.name}),(0,n.jsx)(u.Tooltip,{title:"\u680F\u76EE\u8BBE\u7F6E",children:(0,n.jsx)("div",{children:(0,n.jsx)(B.Link,{onClick:function(m){return m.stopPropagation()},className:"category-setting me-2 text-primary",to:"/websites/".concat(i,"/cms/categories/").concat(r.id),children:(0,n.jsx)(I.JO,{name:"Bootstrap/gear",className:"svg-icon-primary"})})})})]})},"category_".concat(r.id)):(0,n.jsx)(u.Menu.Item,{url:"/websites/".concat(i,"/cms/categories/").concat(r.id,"/articles"),bullet:!0,icon:r.icon,title:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"flex-row-fluid",children:r.name}),(0,n.jsx)(u.Tooltip,{title:"\u680F\u76EE\u8BBE\u7F6E",children:(0,n.jsx)(B.Link,{onClick:function(m){return m.stopPropagation()},className:"category-setting me-4 text-primary",to:"/websites/".concat(i,"/cms/categories/").concat(r.id),children:(0,n.jsx)(I.JO,{name:"Bootstrap/gear",className:"svg-icon-primary"})})})]})},"category_".concat(r.id))}console.log("renderChannel",K);function N(r){var i=r.location,c=r.app,m=(0,v.useMemo)(function(){return(0,T.G_)(r.categories.map(function(a){return D()({},a)}),{idKey:"id",childrenKey:"children",pidKey:"parent.id",sort:function(y,g){return y.index-g.index}})},[r.categories]),p=(0,v.useMemo)(function(){var a=(0,s.LX)("/websites/:sid/cms/categories/:cid",i.pathname);return a?"category_".concat(a.params.cid):"my-drive"},[i.pathname]),h=(0,v.useState)(p),x=f()(h,2),E=x[0],j=x[1],b=(0,v.useState)(m.map(function(a){return a.id})),R=f()(b,2),O=R[0],P=R[1];(0,v.useEffect)(function(){p&&j(p)},[p]);var A=(0,v.useCallback)(function(a){console.log("selectedKey",a.key),j(a.key)},[]),z=(0,v.useCallback)(function(a){P(a)},[]);return(0,v.useEffect)(function(){P(m.map(function(a){return"category_".concat(a.id)}))},[m.map(function(a){return a.id}).join(",")]),console.log("app 21",c),(0,n.jsxs)(u.BlockUI,{zIndex:10,className:"my-5 p-5",overlayClassName:"bg-white bg-opacity-25",loading:!1,children:[(0,n.jsx)("div",{className:"mx-5",children:(0,n.jsxs)("div",{className:"d-flex align-items-center",children:[(0,n.jsx)(u.Symbol.Avatar,{alt:"\u5565\u5730\u65B9",className:"me-5"}),(0,n.jsxs)("div",{className:"flex-grow-1",children:[(0,n.jsx)("a",{className:"text-dark fw-bolder text-hover-primary fs-6",children:c.title}),(0,n.jsx)("span",{className:"text-muted d-block fw-bold",children:c.description})]})]})}),(0,n.jsxs)(u.Menu,{fit:!0,accordion:!1,selectable:"AllMenu",className:"menu-title-gray-600 menu-icon-gray-400 menu-state-primary menu-state-icon-primary menu-state-bullet-primary menu-arrow-gray-500 fw-bold fs-6 px-6 my-5 my-lg-0",selectedKeys:E?[E]:[],onSelect:A,openKeys:O,onOpenChange:z,children:[(0,n.jsx)(u.Menu.Section,{contentClassName:"pt-6 pb-0",children:"\u901A\u7528"}),(0,n.jsx)(u.Menu.Item,{bullet:!0,icon:"",title:"\u57FA\u672C\u4FE1\u606F",url:"/apps/".concat(c.id,"/profile")}),(0,n.jsx)(u.Menu.Item,{bullet:!0,icon:"",title:"\u7EC4\u7EC7\u673A\u6784",url:""}),(0,n.jsx)(u.Menu.Section,{contentClassName:"pt-6 pb-0",children:"\u5916\u89C2"}),(0,n.jsx)(u.Menu.Item,{bullet:!0,icon:"",title:"\u767B\u5F55\u8BBE\u7F6E",url:""}),(0,n.jsx)(u.Menu.Item,{bullet:!0,icon:"",title:"\u5E03\u5C40",url:""}),(0,n.jsx)(u.Menu.Item,{bullet:!0,icon:"",title:"\u95E8\u6237",url:""}),(0,n.jsx)(u.Menu.Section,{contentClassName:"pt-6 pb-0",children:"\u529F\u80FD\u96C6\u6210"}),(0,n.jsx)(u.Menu.Item,{bullet:!0,icon:"",title:"\u4FE1\u606F",url:""}),(0,n.jsx)(u.Menu.Item,{bullet:!0,icon:"",title:"\u90AE\u4EF6",url:""}),(0,n.jsx)(u.Menu.Item,{bullet:!0,icon:"",title:"\u65E5\u7A0B",url:""}),(0,n.jsx)(u.Menu.Section,{contentClassName:"pt-6 pb-0",children:"\u7B2C\u4E09\u65B9\u96C6\u6210"}),(0,n.jsx)(u.Menu.Item,{bullet:!0,icon:"",title:"\u9489\u9489",url:""}),(0,n.jsx)(u.Menu.Item,{bullet:!0,icon:"",title:"\u5FAE\u4FE1",url:""}),(0,n.jsx)(u.Menu.Item,{bullet:!0,icon:"",title:"\u4F01\u4E1A\u5FAE\u4FE1",url:""}),(0,n.jsx)(u.Menu.Section,{contentClassName:"pt-6 pb-0",children:"\u5F00\u53D1\u8005\u8BBE\u7F6E"}),(0,n.jsx)(u.Menu.Item,{bullet:!0,icon:"",title:"\u5F00\u53D1\u4FE1\u606F",url:"/apps/".concat(c.id,"/api_keys")}),(0,n.jsx)(u.Menu.Item,{bullet:!0,icon:"",title:"\u4F1A\u8BDD\u7BA1\u7406",url:"/apps/".concat(c.id,"/sessions")}),(0,n.jsx)(u.Menu.Item,{bullet:!0,icon:"",title:"\u83DC\u5355\u8BBE\u7F6E",url:"/apps/".concat(c.id,"/menus")}),(0,n.jsx)(u.Menu.Item,{bullet:!0,icon:"",title:"\u8DEF\u7531\u8BBE\u7F6E",url:"/apps/".concat(c.id,"/routes")}),(0,n.jsx)(u.Menu.Item,{bullet:!0,icon:"",title:"\u7EC4\u4EF6\u7BA1\u7406",url:"/apps/".concat(c.id,"/components")})]})]})}var W=N,U=t(85947);function o(){var r=(0,s.UO)(),i=r.id,c=(0,U.zR)({variables:{id:i}}),m=c.data,p=m===void 0?{}:m,h=c.loading,x=p.app;return console.log("app 1",x),(0,n.jsx)(F.Hk,{loading:h,className:"micro-app-website",children:x&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F.Hk.Sidebar,{children:(0,n.jsx)(W,{app:x,location})}),(0,n.jsx)(s.j3,{context:{app:x,baseUrl:"/apps/"+i}})]})})}var e=o}}]);

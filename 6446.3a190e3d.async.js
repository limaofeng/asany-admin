(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[6446,3190],{48775:function($,W,r){"use strict";r.d(W,{GP:function(){return S.Z},Hk:function(){return h}});var S=r(48655),s=r(39981),p=r(67294),T=r(94184),Z=r.n(T),L=r(12788),M=r(11849),P=r(28865),o=r(37334),j=r(2824),w=r(96486),C=r(85893),z={aside:{minimize:!1,width:280}},D=p.createContext({state:z,dispatch:function(){}}),c;(function(i){i.AsideToggle="ASIDE_TOGGLE",i.AsideWidth="ASIDE_WIDTH"})(c||(c={}));function f(i,g){switch(g.type){case"ASIDE_TOGGLE":return i.aside.minimize=!i.aside.minimize,(0,M.Z)({},i);case"ASIDE_WIDTH":return i.aside.width=g.payload,(0,M.Z)({},i);default:throw new Error}}var a=function(g){var A=(0,p.useReducer)(f,(0,w.cloneDeep)(z)),y=(0,j.Z)(A,2),E=y[0],I=y[1];return(0,C.jsx)(D.Provider,{value:{state:E,dispatch:I},children:g.children})},u=function(){return(0,p.useContext)(D)},x=r(74200),N=r(8265);function l(i){var g=i.className,A=i.header,y=i.children,E=i.collapsible,I=E===void 0?!0:E,k=i.width,v=k===void 0?280:k,O=(0,N.$Y)(),B=u(),F=B.dispatch;return(0,p.useEffect)(function(){O.aside.width(v+100),F({type:c.AsideWidth,payload:v})},[O.aside,F,v]),(0,C.jsxs)("div",{className:Z()("app-aside aside",g),children:[(0,C.jsx)(o.Z,{children:(0,C.jsx)(S.Z,{header:A,resizeable:!0,className:"app-sidebar",children:y})}),I&&(0,C.jsx)(e,{className:"start-100 end-0"})]})}function e(i){var g=u(),A=g.dispatch,y=g.state.aside.minimize,E=(0,p.useCallback)(function(){A({type:c.AsideToggle})},[A]);return(0,C.jsx)(x.zx,{style:(0,M.Z)({marginBottom:"1.35rem",zIndex:105},i.style),onClick:E,activeColor:"primary",className:Z()("micro-app-aside-toggle","btn-icon bg-body btn-color-gray-700 rounded-2 position-absolute translate-middle bottom-0 shadow-sm d-none d-lg-flex",i.className,{active:y}),children:(0,C.jsx)(P.JO,{name:"Duotune/arr063",className:"svg-icon-2 rotate-180"})})}l.Toggle=e;var n=l,t=L.ZP.div.withConfig({displayName:"MicroApp__MicroAppContainer",componentId:"sc-1dngjf6-0"})(["--root-aside-width:",";--met-aside-width:",";"],function(i){return i.minimize?"100px":"".concat(i.width,"px")},function(i){return i.minimize?"100px":"".concat(i.width,"px")});function d(i){var g=i.children,A=i.className,y=u(),E=y.state.aside,I=E.minimize,k=E.width,v=(0,p.useCallback)(function(O){O.preventDefault()},[]);return(0,C.jsx)(t,{minimize:I,width:k,className:Z()("micro-app-container page-full-content",A,{"aside-minimize":I}),onContextMenu:v,children:g})}function m(i){var g=i.children,A=i.className;return(0,C.jsx)(a,{children:(0,C.jsx)(d,{className:A,children:g})})}m.Sidebar=n;var h=m,b=r(53851)},8265:function($,W,r){"use strict";r.d(W,{$Y:function(){return j},BK:function(){return w},aM:function(){return D}});var S=r(2824),s=r(11849),p=r(67294),T=r(85893),Z=p.createContext({getState:function(){return{routes:[]}},subscribe:function(){},dispatch:function(){}}),L=function(f,a){return a?a.type==="ASIDE_MINIMIZE"?(0,s.Z)((0,s.Z)({},f),{},{aside:(0,s.Z)((0,s.Z)({},f.aside),{},{minimize:!!a.payload})}):a.type==="ASIDE_WIDTH"?(0,s.Z)((0,s.Z)({},f),{},{aside:(0,s.Z)((0,s.Z)({},f.aside),{},{width:a.payload})}):a.type==="ASIDE_COLLAPSIBLE"?(0,s.Z)((0,s.Z)({},f),{},{aside:(0,s.Z)((0,s.Z)({},f.aside),{},{collapsible:a.payload})}):f:f},M=function(f){return(0,s.Z)({},f)};function P(c){var f=(0,p.useReducer)(L,c,M),a=(0,S.Z)(f,2),u=a[0],x=a[1],N=(0,p.useState)([]),l=(0,S.Z)(N,1),e=l[0],n=function(A){return function(){var y=e.indexOf(A);y>-1&&e.splice(y,1)}},t=(0,p.useCallback)(function(g){return e.unshift(g),n(g)},[e]),d=(0,p.useCallback)(function(){e.forEach(function(g){return g()})},[e]),m={getState:function(){return u},dispatch:x,subscribe:t},h=(0,p.useState)(m),b=(0,S.Z)(h,1),i=b[0];return(0,p.useEffect)(function(){i.getState=function(){return u},d()},[u]),i}var o=function(f,a){return f===a};function j(){var c=(0,p.useContext)(Z),f=(0,p.useRef)({aside:{get state(){return c.getState().aside},width:function(u){c.dispatch({type:"ASIDE_WIDTH",payload:u})},minimize:function(u){c.dispatch({type:"ASIDE_MINIMIZE",payload:u})},collapsible:function(u){c.dispatch({type:"ASIDE_COLLAPSIBLE",payload:u})}}});return f.current}function w(c){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return C(c,f)}function C(c){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,a=(0,p.useContext)(Z),u=(0,p.useReducer)(function(t){return t+1},0),x=(0,S.Z)(u,2),N=x[1],l=(0,p.useRef)(),e=c(a.getState());function n(){var t=c(a.getState());f(t,l.current)||(l.current=t,N())}return(0,p.useEffect)(function(){return a.subscribe(n)},[]),e}function z(){var c=useContext(Z);return c.dispatch}function D(c){var f=c.children,a=c.state,u=P(a);return(0,p.useMemo)(function(){return(0,T.jsx)(Z.Provider,{value:u,children:f})},[f,u])}},95901:function($,W,r){"use strict";r.d(W,{dI:function(){return N},rB:function(){return x}});var S=r(2824),s=r(67294);function p(l){return l!=null&&l!==""}function T(l,e){var n=useState(l),t=_slicedToArray(n,2),d=t[0],m=t[1];return useEffect(function(){var h=setTimeout(function(){m(l)},e);return function(){clearTimeout(h)}},[l,e]),d}var Z={USERS_LIST:"users-list"},L=r(54941),M=r(69610),P=r(36321),o=(0,L.Z)(function l(){var e=this;(0,M.Z)(this,l),this.menu=null,this.element=null,this.getParamName=function(n){var t=document.body.hasAttribute("data-kt-name"),d=t?t+"_":"";return"kt_"+d+"theme_mode_"+n},this.getMode=function(){var n,t=e.getParamName("value"),d=e.getMenuMode(),m="light";if(!localStorage)return m;var h=localStorage.getItem(t);if(h)return h;var b=(n=e.element)===null||n===void 0?void 0:n.getAttribute("data-theme");return b||(d?d==="system"?e.getSystemMode():d:m)},this.setMode=function(n,t){var d,m,h,b=n,i=t;if(!(b!=="light"&&b!=="dark")){var g=e.getParamName("value"),A=e.getParamName("menu");i==="system"&&e.getSystemMode()!==b&&(b=e.getSystemMode()),i||(i=b);var y=((d=e.menu)===null||d===void 0?void 0:d.querySelector('[data-kt-element="mode"][data-kt-value="'+i+'"]'))||null;(m=e.element)===null||m===void 0||m.setAttribute("data-kt-theme-mode-switching","true"),(h=e.element)===null||h===void 0||h.setAttribute("data-theme",b);var E=e;setTimeout(function(){var I;(I=E.element)===null||I===void 0||I.removeAttribute("data-kt-theme-mode-switching")},300),localStorage&&localStorage.setItem(g,b),y&&localStorage&&(localStorage.setItem(A,i),e.setActiveMenuItem(y)),e.flipImages()}},this.getMenuMode=function(){var n,t=e.getParamName("menu"),d=(n=e.menu)===null||n===void 0?void 0:n.querySelector('.active[data-kt-element="mode"]'),m=d==null?void 0:d.getAttribute("data-kt-value");if(m)return m;if(!t)return"";var h=localStorage?localStorage.getItem(t):null;return h||""},this.getSystemMode=function(){return window.matchMedia("(prefers-color-scheme: dark)")?"dark":"light"},this.initMode=function(){e.setMode(e.getMode(),e.getMenuMode()),e.element&&P.EventHandlerUtil.trigger(e.element,"kt.thememode.init")},this.setActiveMenuItem=function(n){var t,d=e.getParamName("menu"),m=n.getAttribute("data-kt-value"),h=(t=e.menu)===null||t===void 0?void 0:t.querySelector('.active[data-kt-element="mode"]');h&&h.classList.remove("active"),n.classList.add("active"),localStorage&&m&&d&&localStorage.setItem(d,m)},this.handleMenu=function(){var n,t;(n=e.menu)===null||n===void 0||(t=n.querySelectorAll('[data-kt-element="mode"]'))===null||t===void 0||t.forEach(function(d){d.addEventListener("click",function(m){m.preventDefault();var h=d.getAttribute("data-kt-value"),b=h==="system"?e.getSystemMode():h;b&&e.setMode(b,h)})})},this.flipImages=function(){var n;(n=document.querySelectorAll("[data-kt-img-dark]"))===null||n===void 0||n.forEach(function(t){t.tagName==="IMG"?e.getMode()==="dark"&&t.hasAttribute("data-kt-img-dark")?(t.setAttribute("data-kt-img-light",t.getAttribute("src")||""),t.setAttribute("src",t.getAttribute("data-kt-img-dark")||"")):e.getMode()==="light"&&t.hasAttribute("data-kt-img-light")&&(t.setAttribute("data-kt-img-dark",t.getAttribute("src")||""),t.setAttribute("src",t.getAttribute("data-kt-img-light")||"")):e.getMode()==="dark"&&t.hasAttribute("data-kt-img-dark")?(t.setAttribute("data-kt-img-light",t.getAttribute("src")||""),t.style.backgroundImage="url('"+t.getAttribute("data-kt-img-dark")+"')"):e.getMode()==="light"&&t.hasAttribute("data-kt-img-light")&&(t.setAttribute("data-kt-img-dark",t.getAttribute("src")||""),t.style.backgroundImage="url('"+t.getAttribute("data-kt-img-light")+"')")})},this.on=function(n,t){if(e.element)return P.EventHandlerUtil.on(e.element,n,t)},this.off=function(n,t){if(e.element)return P.EventHandlerUtil.off(e.element,n,t)},this.init=function(){e.menu=document.querySelector('[data-kt-element="theme-mode-menu"]'),e.element=document.documentElement,e.initMode(),e.menu&&e.handleMenu()}}),j=new o,w=r(85893),C=j.getSystemMode(),z=function(e){var n=e!=="system"?e:C,t="/media/patterns/header-bg"+(n==="light"?".jpg":"-dark.png");document.body.style.backgroundImage='url("'.concat(toAbsoluteUrl(t),'")')},D="kt_theme_mode_value",c="kt_theme_mode_menu",f=function(e){if(!localStorage)return"light";var n=localStorage.getItem(e);return!n||n==="light"?"light":n==="dark"?"dark":"system"},a={mode:f(D),menuMode:f(c),updateMode:function(e){},updateMenuMode:function(e){}},u=(0,s.createContext)({mode:a.mode,menuMode:a.menuMode,updateMode:function(e){},updateMenuMode:function(e){}}),x=function(){return(0,s.useContext)(u)},N=function(e){var n=e.children,t=(0,s.useState)(a.mode),d=(0,S.Z)(t,2),m=d[0],h=d[1],b=(0,s.useState)(a.menuMode),i=(0,S.Z)(b,2),g=i[0],A=i[1],y=function(k){var v=k==="system"?C:k;h(v),localStorage&&localStorage.setItem(D,v),document.documentElement.setAttribute("data-theme",v),j.init()},E=function(k){A(k),localStorage&&localStorage.setItem(c,k)};return(0,s.useEffect)(function(){y(m),E(g)},[]),(0,w.jsx)(u.Provider,{value:{mode:m,menuMode:g,updateMode:y,updateMenuMode:E},children:n})}},81303:function($,W,r){"use strict";r.d(W,{v7:function(){return l},_$:function(){return c},F6:function(){return C}});var S=r(11849),s=r(20310),p=r(76058),T=r(64718),Z=r(38460),L,M,P,o,j={},w=(0,p.Ps)(L||(L=(0,s.Z)([`
    query websites {
  websites {
    id
    name
    description
  }
}
    `])));function C(e){var n=(0,S.Z)((0,S.Z)({},j),e);return T.a(w,n)}function z(e){var n=_objectSpread(_objectSpread({},j),e);return Apollo.useLazyQuery(w,n)}var D=(0,p.Ps)(M||(M=(0,s.Z)([`
    query website($id: ID!) {
  website(id: $id) {
    id
    name
    description
    channel {
      id
    }
    application {
      id
    }
  }
}
    `])));function c(e){var n=(0,S.Z)((0,S.Z)({},j),e);return T.a(D,n)}function f(e){var n=_objectSpread(_objectSpread({},j),e);return Apollo.useLazyQuery(D,n)}var a=(0,p.Ps)(P||(P=(0,s.Z)([`
    mutation createWebsite($input: WebsiteCreateInput!) {
  createWebsite(input: $input) {
    id
    name
  }
}
    `])));function u(e){var n=_objectSpread(_objectSpread({},j),e);return Apollo.useMutation(a,n)}var x=(0,p.Ps)(o||(o=(0,s.Z)([`
    query websiteArticleCategories($id: ID!) {
  categories: articleCategories(where: {parent: {id: $id, subColumns: true}}) {
    id
    icon
    name
    fullName
    path
    index
    level
    image
    storeTemplate {
      id
    }
    parent {
      id
    }
  }
}
    `])));function N(e){var n=_objectSpread(_objectSpread({},j),e);return Apollo.useQuery(x,n)}function l(e){var n=(0,S.Z)((0,S.Z)({},j),e);return Z.t(x,n)}},17731:function($,W,r){"use strict";r.r(W),r.d(W,{default:function(){return f}});var S=r(2824),s=r(67294),p=r(11849),T=r(28865),Z=r(51615),L=r(73727),M=r(74200),P=r(25496),o=r(85893);function j(a,u){return a.children&&a.children.length?(0,o.jsx)(M.v2.SubMenu,{url:"/websites/".concat(u,"/cms/categories/").concat(a.id,"/articles"),bullet:!0,icon:a.icon,title:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"flex-row-fluid",children:a.name}),(0,o.jsx)(M.u,{title:"\u680F\u76EE\u8BBE\u7F6E",children:(0,o.jsx)("div",{children:(0,o.jsx)(L.Link,{onClick:function(N){return N.stopPropagation()},className:"category-setting me-2 text-primary",to:"/websites/".concat(u,"/cms/categories/").concat(a.id),children:(0,o.jsx)(T.JO,{name:"Bootstrap/gear",className:"svg-icon-primary"})})})})]}),children:(a.children||[]).map(function(x){return j(x,u)})},"category_".concat(a.id)):(0,o.jsx)(M.v2.Item,{url:"/websites/".concat(u,"/cms/categories/").concat(a.id,"/articles"),bullet:!0,icon:a.icon,title:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"flex-row-fluid",children:a.name}),(0,o.jsx)(M.u,{title:"\u680F\u76EE\u8BBE\u7F6E",children:(0,o.jsx)(L.Link,{onClick:function(N){return N.stopPropagation()},className:"category-setting me-4 text-primary",to:"/websites/".concat(u,"/cms/categories/").concat(a.id),children:(0,o.jsx)(T.JO,{name:"Bootstrap/gear",className:"svg-icon-primary"})})})]})},"category_".concat(a.id))}function w(a){var u=a.id,x=a.location,N=a.loading,l=a.website,e=(0,Z.k6)(),n=(0,s.useMemo)(function(){return(0,P.G_)(a.categories.map(function(v){return(0,p.Z)({},v)}),{idKey:"id",childrenKey:"children",pidKey:"parent.id",sort:function(O,B){return O.index-B.index}})},[a.categories]),t=(0,s.useMemo)(function(){var v=(0,Z.LX)(x.pathname,{path:"/websites/:sid/cms/categories/:cid",exact:!1,strict:!0});if(v)return"category_".concat(v.params.cid);var O=(0,Z.LX)(x.pathname,{path:"/websites/:sid/files",exact:!1,strict:!0});return O?"files":"my-drive"},[x.pathname]),d=(0,s.useState)(t),m=(0,S.Z)(d,2),h=m[0],b=m[1],i=(0,s.useState)(n.map(function(v){return v.id})),g=(0,S.Z)(i,2),A=g[0],y=g[1];(0,s.useEffect)(function(){!t||b(t)},[t]);var E=(0,s.useCallback)(function(v){console.log("selectedKey",v.key),b(v.key)},[]),I=(0,s.useCallback)(function(){var v;h.startsWith("category_")&&(v=h.split("_")[1]),e.push("/websites/".concat(u,"/cms/categories/new")+(v?"?parent_category_id=".concat(v):""))},[e,u,h]),k=(0,s.useCallback)(function(v){y(v)},[]);return(0,s.useEffect)(function(){y(n.map(function(v){return"category_".concat(v.id)}))},[n.map(function(v){return v.id}).join(",")]),(0,o.jsxs)(M.bH,{zIndex:10,className:"my-5 p-5",overlayClassName:"bg-white bg-opacity-25",loading:!1,children:[(0,o.jsx)("div",{children:(0,o.jsx)("h1",{className:"text-gray-800 fw-bold mx-5",children:(l==null?void 0:l.name)||" "})}),(0,o.jsxs)(M.v2,{fit:!0,accordion:!1,selectable:"AllMenu",className:"menu-title-gray-600 menu-icon-gray-400 menu-state-primary menu-state-icon-primary menu-state-bullet-primary menu-arrow-gray-500 fw-bold fs-6 px-6 my-5 my-lg-0",selectedKeys:h?[h]:[],onSelect:E,openKeys:A,onOpenChange:k,children:[(0,o.jsxs)(M.v2.Section,{className:"pt-8 pb-0 flex-row-fluid align-items-center",contentClassName:"d-flex flex-row-fluid",sectionClassName:"d-flex flex-row-fluid",children:[(0,o.jsxs)("span",{className:"text-muted text-uppercase fs-8 ls-1 align-items-center d-flex flex-row-fluid",children:["\u680F\u76EE ",N&&" - loading..."]}),(0,o.jsx)(M.zx,{icon:(0,o.jsx)(T.JO,{style:{marginRight:".2rem"},name:"Duotune/arr087",className:""}),size:"sm",variant:"white",className:"py-1 px-3 me-n4",onClick:I,children:"\u65B0\u589E"})]}),n.map(function(v){return j(v,u)}),(0,o.jsx)(M.v2.Section,{children:"\u8BBE\u7F6E"}),(0,o.jsx)(M.v2.Item,{bullet:!0,icon:"",title:"\u901A\u7528\u8BBE\u7F6E",url:"/websites/".concat(u,"/settings/general")},"settings_general"),(0,o.jsx)(M.v2.Item,{bullet:!0,icon:"",title:"\u6587\u4EF6\u7BA1\u7406",url:"/websites/".concat(u,"/files")},"files"),(0,o.jsx)(M.v2.Item,{bullet:!0,icon:"",title:"\u5BFC\u822A\u83DC\u5355",url:"/websites/".concat(u,"/settings/navigation")},"settings_navigation")]})]})}var C=w,z=r(81303),D=r(48775);function c(a){var u=a.match,x=a.children,N=a.location,l=u.params.sid,e=(0,z._$)({fetchPolicy:"cache-and-network",variables:{id:l}}),n=e.data,t=e.loading,d=n==null?void 0:n.website,m=d==null?void 0:d.channel.id,h=(0,z.v7)({fetchPolicy:"cache-and-network"}),b=(0,S.Z)(h,2),i=b[0],g=b[1],A=g.data,y=A===void 0?{categories:[]}:A,E=g.loading,I=(0,s.useMemo)(function(){return!(y!=null&&y.categories)||!y.categories.length?[]:y.categories},[y==null?void 0:y.categories]);return(0,s.useEffect)(function(){!m||i({variables:{id:m}})},[i,m]),(0,o.jsxs)(D.Hk,{className:"micro-app-website",children:[(0,o.jsx)(D.Hk.Sidebar,{children:(0,o.jsx)(C,{website:d,categories:I,location:N,id:u.params.sid,loading:t||E})}),m&&!E&&s.Children.map(x,function(k){return k.props.location.state={rootCategoryId:m,categories:I,baseUrl:"/websites/"+l},k})]})}var f=c}}]);

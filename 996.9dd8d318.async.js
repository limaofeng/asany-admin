(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[996],{91896:function(F,y,s){"use strict";s.d(y,{Z:function(){return i}});function i(){return i=Object.assign?Object.assign.bind():function(c){for(var d=1;d<arguments.length;d++){var A=arguments[d];for(var r in A)Object.prototype.hasOwnProperty.call(A,r)&&(c[r]=A[r])}return c},i.apply(this,arguments)}},92957:function(F,y,s){"use strict";s.d(y,{ry:function(){return b},Tk:function(){return P},RE:function(){return N},x:function(){return J},Bg:function(){return R}});var i=s(11849),c=s(20310),d=s(49704),A=s(64718),r=s(21919),t,Z,L,z,p,n={},e=(0,d.Ps)(t||(t=(0,c.Z)([`
    fragment OrganizationProfile on Organization {
  id
  code
  name
  logo
  description
  email
  url
  location {
    province
    city
    district
    street
  }
}
    `]))),b=(0,d.Ps)(Z||(Z=(0,c.Z)([`
    query organization($id: ID!) {
  organization(id: $id) {
    ...OrganizationProfile
  }
}
    `,""])),e);function P(u){var a=(0,i.Z)((0,i.Z)({},n),u);return A.a(b,a)}function j(u){var a=_objectSpread(_objectSpread({},n),u);return Apollo.useLazyQuery(b,a)}var H=(0,d.Ps)(L||(L=(0,c.Z)([`
    mutation updateOrganizationProfile($id: ID!, $input: UpdateOrganizationProfileUpdateInput!) {
  updateOrganizationProfile(id: $id, input: $input) {
    ...OrganizationProfile
  }
}
    `,""])),e);function N(u){var a=(0,i.Z)((0,i.Z)({},n),u);return r.D(H,a)}var Y=(0,d.Ps)(z||(z=(0,c.Z)([`
    mutation renameOrganizationCode($id: ID!, $code: String!) {
  renameOrganizationCode(id: $id, code: $code) {
    ...OrganizationProfile
  }
}
    `,""])),e);function J(u){var a=(0,i.Z)((0,i.Z)({},n),u);return r.D(Y,a)}var M=(0,d.Ps)(p||(p=(0,c.Z)([`
    query permissionsConnection($filter: PermissionFilter, $page: Int, $pageSize: Int, $orderBy: OrderBy = "createdAt_desc") {
  total: permissionsConnection(pageSize: 1) {
    totalCount
  }
  connection: permissionsConnection(
    filter: $filter
    page: $page
    pageSize: $pageSize
    orderBy: $orderBy
  ) {
    totalPage
    pageSize
    current: currentPage
    total: totalCount
    edges {
      node {
        id
        name
        description
      }
    }
  }
}
    `])));function R(u){var a=(0,i.Z)((0,i.Z)({},n),u);return A.a(M,a)}function _(u){var a=_objectSpread(_objectSpread({},n),u);return Apollo.useLazyQuery(M,a)}},50996:function(F,y,s){"use strict";s.r(y),s.d(y,{default:function(){return _}});var i=s(39428),c=s(11849),d=s(91896),A=s(3182),r=s(2824),t=s(67294),Z=s(27375),L=s.n(Z),z=s(94184),p=s.n(z),n=s(38671),e=s(85893);function b(u){var a=u.data,E=u.visible,o=u.onCancel,C=(0,t.useState)(!0),m=(0,r.Z)(C,2),I=m[0],g=m[1],v=(0,t.useCallback)(function(l,D){g(D.code!=(a==null?void 0:a.code))},[a]),x=(0,t.useCallback)(function(){},[]);return(0,e.jsxs)(n.u_,{dialogClassName:p()("delete-organization-modal w-450px"),visible:E,onCancel:o,title:"\u786E\u5B9A\u5220\u9664\u7EC4\u7EC7\u5417\uFF1F",footer:!1,children:[(0,e.jsx)(n.bZ,{type:"danger",message:"\u8BF7\u4ED4\u7EC6\u9605\u8BFB\u4EE5\u4E0B\u4E8B\u9879"}),(0,e.jsxs)("div",{className:"inner-body",children:[(0,e.jsxs)("p",{children:["\u60A8\u5373\u5C06\u6C38\u4E45\u5220\u9664\u7EC4\u7EC7: ",(0,e.jsx)("b",{children:a==null?void 0:a.code}),"\uFF0C\u4EE5\u53CA\u4E0E\u7EC4\u7EC7\u5173\u8054\u7684\u6240\u6709\u5185\u5BB9\u3002\u4E00\u65E6\u786E\u8BA4 \u5220\u9664\uFF0C\u6B64\u64CD\u4F5C\u4FBF\u65E0\u6CD5\u64A4\u9500\u548C\u6062\u590D\u3002"]}),(0,e.jsx)(n.Z0,{className:"my-5"}),(0,e.jsxs)(n.l0,{onFinish:x,onValuesChange:v,children:[(0,e.jsx)(n.l0.Item,{className:"mb-5",name:"code",label:"\u8F93\u5165\u7EC4\u7EC7\u4EE3\u7801\u4EE5\u786E\u8BA4\u5220\u9664",children:(0,e.jsx)(n.II,{solid:!0})}),(0,e.jsx)(n.zx,{htmlType:"submit",className:"confirm-delete-account",disabled:I,variant:"light-danger",children:"\u5220\u9664\u7EC4\u7EC7"})]})]})]})}var P=b,j=s(92957),H=s(25496);function N(u){var a=u.data,E=u.visible,o=u.onCancel,C=(0,t.useState)(1),m=(0,r.Z)(C,2),I=m[0],g=m[1],v=(0,j.x)(),x=(0,r.Z)(v,2),l=x[0],D=x[1].loading,h=(0,t.useCallback)(function(){var S=(0,A.Z)((0,i.Z)().mark(function B(O){return(0,i.Z)().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,l({variables:{id:a.id,code:O.code}});case 2:return n.FN.success("\u7EC4\u7EC7\u4EE3\u7801\u4FEE\u6539\u6210\u529F",3e3,{placement:"top-center",progressBar:!0}),k.next=5,(0,H._v)(300);case 5:g(1),o();case 7:case"end":return k.stop()}},B)}));return function(B){return S.apply(this,arguments)}}(),[a,o,l]),Q=(0,t.useCallback)((0,A.Z)((0,i.Z)().mark(function S(){return(0,i.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,H._v)(300);case 2:g(2);case 3:case"end":return O.stop()}},S)})),[]),f=(0,t.useCallback)(function(){g(1),o()},[o]);return(0,e.jsx)(n.u_,{dialogClassName:p()("rename-organization-modal w-450px",{"waiting-to-continue":I==1}),visible:E,onCancel:f,title:I==1?"\u786E\u5B9A\u4FEE\u6539\u7EC4\u7EC7\u4EE3\u7801\u5417\uFF1F":"\u8F93\u5165\u65B0\u7684\u7EC4\u7EC7\u4EE3\u7801",footer:!1,children:I==1?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.bZ,{type:"danger",message:"\u8BF7\u4ED4\u7EC6\u9605\u8BFB\u4EE5\u4E0B\u6CE8\u610F\u4E8B\u9879, \u4E86\u89E3\u53EF\u80FD\u9020\u6210\u7684\u526F\u4F5C\u7528"}),(0,e.jsxs)("div",{className:"inner-body",children:[(0,e.jsx)("ul",{className:"mb-6 ms-6",children:(0,e.jsx)("li",{children:"\u4FEE\u6539\u7EC4\u7EC7\u4EE3\u7801\u53EF\u80FD\u9700\u8981\u51E0\u5206\u949F\u624D\u80FD\u5B8C\u6210\u3002"})}),(0,e.jsx)(n.zx,{onClick:Q,className:"confirm-to-continue",variant:"light-danger",children:"\u6211\u660E\u767D\u4E86\uFF0C\u7EE7\u7EED\u4FEE\u6539"})]})]}):(0,e.jsxs)(n.l0,{onFinish:h,initialValues:a,children:[(0,e.jsxs)("div",{className:"mb-5",children:[(0,e.jsx)(n.l0.Item,{name:"code",rules:[{required:!0,message:"\u7EC4\u7EC7\u4EE3\u7801\u4E0D\u80FD\u4E3A\u7A7A"},{min:6,message:"\u81F3\u5C11\u5F97\u5305\u542B6\u4E2A\u5B57\u7B26"},{pattern:/^[a-zA-Z]\w{5,19}$/,message:"\u7EC4\u7EC7\u4EE3\u7801\u53EA\u80FD\u4E3A\u5B57\u6BCD\u6216\u8005\u6570\u5B57\uFF0C\u800C\u4E14\u5FC5\u987B\u4EE5\u5B57\u6BCD\u5F00\u5934"}],help:"\u7EC4\u7EC7\u4EE3\u7801\u53EA\u80FD\u4E3A\u5B57\u6BCD\u6216\u8005\u6570\u5B57\uFF0C\u800C\u4E14\u5FC5\u987B\u4EE5\u5B57\u6BCD\u5F00\u5934",children:(0,e.jsx)(n.II,{})}),(0,e.jsx)("p",{className:"text-small mt-2",children:"\u8F93\u5165\u4E00\u4E2A\u65B0\u7684\u7EC4\u7EC7\u4EE3\u7801"})]}),(0,e.jsx)(n.zx,{htmlType:"submit",loading:D,className:"change-name-save",children:"\u4FEE\u6539\u7EC4\u7EC7\u4EE3\u7801"})]})})}var Y=N,J=s(18071);function M(u){var a=u.data,E=(0,t.useState)(!1),o=(0,r.Z)(E,2),C=o[0],m=o[1],I=(0,t.useState)(!1),g=(0,r.Z)(I,2),v=g[0],x=g[1],l=(0,t.useCallback)(function(){m(!0)},[]),D=(0,t.useCallback)(function(){m(!1)},[]),h=(0,t.useCallback)(function(){x(!0)},[]),Q=(0,t.useCallback)(function(){x(!1)},[]);return(0,e.jsxs)(n.Zb,{className:"mb-5 mb-xl-10",children:[(0,e.jsx)(n.Zb.Header,{children:(0,e.jsx)(n.Zb.Title,{className:"text-danger",children:"\u5371\u9669\u533A\u57DF"})}),(0,e.jsx)(n.Zb.Body,{children:(0,e.jsxs)("div",{className:"w-800px danger-zone rounded border border-danger",children:[(0,e.jsxs)("div",{className:"p-5 border-bottom border-secondary d-flex align-items-center",children:[(0,e.jsxs)("div",{className:"flex-row-fluid",children:[(0,e.jsx)("div",{className:"fw-bolder",children:"\u4FEE\u6539\u7EC4\u7EC7\u4EE3\u7801"}),(0,e.jsx)("span",{className:"text-small",children:"\u4FEE\u6539\u7EC4\u7EC7\u4EE3\u7801\u53EF\u80FD\u4F1A\u4EA7\u751F\u610F\u60F3\u4E0D\u5230\u7684\u526F\u4F5C\u7528"})]}),(0,e.jsx)(n.zx,{onClick:l,type:"solid",variant:"danger",children:"\u4FEE\u6539\u7EC4\u7EC7\u4EE3\u7801"}),(0,e.jsx)(Y,{data:a,visible:C,onCancel:D})]}),(0,e.jsxs)("div",{className:"p-5 border-bottom border-secondary d-flex align-items-center",children:[(0,e.jsxs)("div",{className:"flex-row-fluid",children:[(0,e.jsx)("div",{className:"fw-bolder",children:"\u5220\u9664\u7EC4\u7EC7"}),(0,e.jsx)("span",{className:"text-small",children:"\u5E10\u6237\u5220\u9664\u540E\uFF0C\u5C06\u65E0\u6CD5\u6062\u590D\u3002\u8BF7\u8C28\u614E\u64CD\u4F5C"})]}),(0,e.jsx)(n.zx,{onClick:h,type:"solid",variant:"danger",children:"\u5220\u9664\u7EC4\u7EC7"}),(0,e.jsx)(P,{data:a,visible:v,onCancel:Q})]})]})})]})}function R(u){var a=u.match,E=n.l0.useForm(),o=(0,j.Tk)({variables:{id:a.params.id}}),C=o.data,m=o.loading,I=(0,j.RE)({refetchQueries:[{query:j.ry,variables:{id:a.params.id}}]}),g=(0,r.Z)(I,2),v=g[0],x=g[1].loading,l=C==null?void 0:C.organization;(0,t.useEffect)(function(){!l||E.setFieldsValue(l)},[l,E]);var D=(0,t.useCallback)((0,A.Z)((0,i.Z)().mark(function h(){var Q,f;return(0,i.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,E.getFieldsValue();case 2:return Q=B.sent,f=(0,d.Z)({},Q),B.next=6,v({variables:{id:l==null?void 0:l.id,input:(0,c.Z)({},f)}});case 6:n.FN.success("\u8D44\u6599\u66F4\u65B0\u6210\u529F",3e3,{placement:"bottom-start",progressBar:!0});case 7:case"end":return B.stop()}},h)})),[E,l,v]);return(0,e.jsxs)(J.vs,{className:"page-organization-settings-profile",header:{title:"\u901A\u7528\u8BBE\u7F6E"},footer:!1,children:[(0,e.jsxs)(n.Zb,{className:"mb-5 mb-xl-10",children:[(0,e.jsx)(n.Zb.Header,{children:(0,e.jsx)(n.Zb.Title,{children:"\u901A\u7528\u8BBE\u7F6E"})}),(0,e.jsx)(n.Zb.Body,{children:(0,e.jsxs)(n.bH,{overlayClassName:"bg-white bg-opacity-25",loading:m,children:[(0,e.jsxs)(n.l0,{form:E,className:"mw-800px row d-flex flex-shrink-0 flex-column-reverse flex-md-row",children:[(0,e.jsx)("div",{className:"mw-500px col-12 col-md-8",children:(0,e.jsxs)("div",{className:"mw-400px",children:[(0,e.jsx)(n.l0.Item,{className:"mb-5",name:"name",label:"\u663E\u793A\u540D\u79F0",children:(0,e.jsx)(n.II,{solid:!0})}),(0,e.jsx)(n.l0.Item,{className:"my-5",name:"email",label:"\u90AE\u7BB1",help:"\u7EC4\u7EC7\u8054\u7CFB\u90AE\u7BB1",children:(0,e.jsx)(n.II,{solid:!0})}),(0,e.jsx)(n.l0.Item,{className:"my-5",name:"description",label:"\u63CF\u8FF0",help:"\u8BF7\u7528\u5C11\u4E8E250\u5B57\u7B26\u63CF\u8FF0\u7EC4\u7EC7\u4FE1\u606F",children:(0,e.jsx)(n.II.TextArea,{solid:!0,autoSize:{minRows:4,maxRows:8},showCount:!0,maxLength:250})}),(0,e.jsx)(n.l0.Item,{className:"my-5",name:"url",label:"URL",help:"\u7EC4\u7EC7\u7F51\u5740",children:(0,e.jsx)(n.II,{solid:!0})}),(0,e.jsx)(n.l0.Item,{className:"my-5",name:"location",label:"\u6240\u5728\u5730\u533A",children:(0,e.jsx)(n.H6,{ends:function(Q){var f=Q.path.split("/").filter(function(S){return!!S}).length;return Q.type=="city"||f==2},resultType:"object",solid:!0,placeholder:"\u9009\u62E9\u7EC4\u7EC7\u6240\u5728\u7684\u5730\u533A"})})]})}),(0,e.jsx)("div",{className:"col-12 col-md-4",children:(0,e.jsx)("div",{className:"row",children:(0,e.jsx)(n.l0.Item,{className:"mb-5",name:"logo",label:"\u7EC4\u7EC7\u6807\u5FD7",help:"\u5141\u8BB8\u7684\u6587\u4EF6\u7C7B\u578B:png, jpg, jpeg",children:(0,e.jsx)(n.gq.Image,{width:125,height:125,space:"7VE4SSrk",crop:{height:300,zoomable:!1,aspectRatio:1},backgroundImage:L()})})})})]}),(0,e.jsx)(n.zx,{loading:x,onClick:D,children:"\u66F4\u65B0\u8D44\u6599"})]})})]}),(0,e.jsx)(M,{data:l})]})}var _=R},27375:function(F){F.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaQAAAGkCAIAAADxLsZiAAAF5ElEQVR4nOzXYc3bQBgGwaYyDRMwL6MyLxMwgYPQHx+ASm3iS7IzBO6RYq3eLGOMXwDf7vfsAQB3EDsgQeyABLEDEsQOSBA7IEHsgASxAxLEDkgQOyBB7IAEsQMSxA5IEDsgQeyABLEDEsQOSBA7IEHsgASxAxLEDkgQOyBB7IAEsQMSxA5IEDsgQeyABLEDEsQOSBA7IEHsgASxAxLEDkgQOyBhue2l8zpue4t/tq377AnP5Kv7CPd8dS47IEHsgASxAxLEDkgQOyBB7IAEsQMSxA5IEDsgQeyABLEDEsQOSBA7IEHsgASxAxLEDkgQOyBB7IAEsQMSxA5IEDsgQeyABLEDEsQOSBA7IEHsgASxAxLEDkgQOyBB7IAEsQMSxA5IEDsgQeyABLEDEsQOSBA7IEHsgASxAxLEDkgQOyBB7IAEsQMSxA5IEDsgQeyABLEDEsQOSBA7IEHsgASxAxLEDkgQOyBB7IAEsQMSxA5IEDsgQeyABLEDEsQOSBA7IEHsgASxAxLEDkgQOyBB7IAEsQMSxA5IEDsgYZk9gPdyXsfsCfASYvdftnWfPeGZvrJ0fiN++BsLJIgdkCB2QILYAQliBySIHZAgdkCC2AEJYgckiB2QIHZAgtgBCWIHJIgdkCB2QILYAQliBySIHZAgdkCC2AEJYgckiB2QIHZAgtgBCWIHJIgdkCB2QILYAQliBySIHZAgdkCC2AEJYgckiB2QIHZAgtgBCWIHJIgdkCB2QILYAQliBySIHZAgdkCC2AEJYgckiB2QIHZAgtgBCWIHJIgdkCB2QILYAQliBySIHZAgdkCC2AEJYgckiB2QIHZAgtgBCWIHJIgdkCB2QILYAQliBySIHZAgdkCC2AEJy+wBn+28jtkT+Au/ET9cdkCC2AEJYgckiB2QIHZAgtgBCWIHJIgdkCB2QILYAQliBySIHZAgdkCC2AEJYgckiB2QIHZAgtgBCWIHJIgdkCB2QILYAQliBySIHZAgdkCC2AEJYgckiB2QIHZAgtgBCWIHJIgdkCB2QILYAQliBySIHZAgdkCC2AEJYgckiB2QIHZAgtgBCWIHJIgdkCB2QILYAQliBySIHZAgdkCC2AEJYgckiB2QIHZAgtgBCWIHJIgdkCB2QILYAQliBySIHZAgdkCC2AEJYgckiB2QIHZAgtgBCWIHJIgdkCB2QILYAQmPMcbsDbyL8zpmT3i+bd1nT+AtuOyABLEDEsQOSBA7IEHsgASxAxLEDkgQOyBB7IAEsQMSxA5IEDsgQeyABLEDEsQOSBA7IEHsgASxAxLEDkgQOyBB7IAEsQMSxA5IEDsgQeyABLEDEsQOSBA7IEHsgASxAxLEDkgQOyBB7IAEsQMSxA5IEDsgQeyABLEDEsQOSBA7IEHsgASxAxLEDkgQOyBB7IAEsQMSxA5IEDsgQeyABLEDEsQOSBA7IEHsgASxAxLEDkgQOyBB7IAEsQMSxA5IEDsgQeyABLEDEsQOSBA7IEHsgASxAxLEDkgQOyDhMca456XzOu55CPgs27rf8IrLDkgQOyBB7IAEsQMSxA5IEDsgQeyABLEDEsQOSBA7IEHsgASxAxLEDkgQOyBB7IAEsQMSxA5IEDsgQeyABLEDEsQOSBA7IEHsgASxAxLEDkgQOyBB7IAEsQMSxA5IEDsgQeyABLEDEsQOSBA7IEHsgASxAxLEDkgQOyBB7IAEsQMSxA5IEDsgQeyABLEDEsQOSBA7IEHsgASxAxLEDkgQOyBB7IAEsQMSxA5IEDsgQeyABLEDEsQOSBA7IEHsgASxAxLEDkgQOyBB7IAEsQMSxA5IEDsgQeyABLEDEsQOSBA7IOExxpi9AeDlXHZAgtgBCWIHJIgdkCB2QILYAQliBySIHZAgdkCC2AEJYgckiB2QIHZAgtgBCWIHJIgdkCB2QILYAQliBySIHZAgdkCC2AEJYgckiB2QIHZAgtgBCWIHJIgdkCB2QILYAQliBySIHZAgdkDCnwAAAP//PXQnjKZ4puYAAAAASUVORK5CYII="}}]);

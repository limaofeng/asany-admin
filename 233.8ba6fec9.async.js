"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[233],{90233:function(J,h,e){e.r(h);var j=e(15009),t=e.n(j),R=e(99289),f=e.n(R),y=e(5574),m=e.n(y),a=e(62435),c=e(96974),A=e(73588),l=e(2721),p=e(12708),L=e(60489),E=e(74600),s=e(86074),v=l.Tabs.TabPane,B=a.memo(function(){return(0,s.jsx)(l.Card,{className:"email-compose-tools",children:(0,s.jsxs)(l.Tabs,{className:"nav-line-tabs-2x mb-5 fs-6",children:[(0,s.jsx)(v,{tab:"\u901A\u8BAF\u5F55",children:"11111"},"contacts"),(0,s.jsx)(v,{tab:"\u7F51\u76D8",children:"222222"},"storage"),(0,s.jsx)(v,{tab:"\u4FE1\u7EB8",children:"222222"},"stationery")]})})});function I(){var u,x=(0,c.s0)(),K=(0,c.UO)(),M=K.id,W=(0,c.TH)(),S=(0,E.Pg)({fetchPolicy:"cache-and-network"}),g=m()(S,2),D=g[0],P=g[1],_=P.data,N=P.loading,k=(0,E.k0)({refetchQueries:[E.Nd]}),F=m()(k,1),b=F[0],n=(0,a.useRef)({isChanged:!1,state:"default",message:(u=W.state)===null||u===void 0?void 0:u.message}),$=(0,a.useReducer)(function(r){return r+1},0),z=m()($,2),O=z[1],G=(0,a.useCallback)(function(){var r=f()(t()().mark(function i(T){return t()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return n.current.isChanged=!1,O(),d.next=4,(0,p._v)(120);case 4:x("/mail/sent/".concat(T.id));case 5:case"end":return d.stop()}},i)}));return function(i){return r.apply(this,arguments)}}(),[history]),w=(0,a.useCallback)(function(r){n.current.message=r,n.current.isChanged||(n.current.isChanged=!0,O())},[]),H=(0,a.useCallback)(function(r){return f()(t()().mark(function i(){return t()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,b({variables:{id:n.current.message.id}});case 2:r();case 3:case"end":return o.stop()}},i)}))},[b]);(0,a.useEffect)(function(){M&&D({variables:{id:M}})},[D,M]),(0,a.useMemo)(function(){_!=null&&_.message&&(n.current.message=_.message)},[_==null?void 0:_.message]);var C=n.current,Q=C.message,Z=C.isChanged;return console.log("handleDoNotStore",H),(0,s.jsxs)(A.vs,{className:"apps-email-compose",header:!1,footer:!1,children:[(0,s.jsx)(l.Spin,{spinning:N&&!Z,children:(0,s.jsx)(L.Z,{message:Q,onAutoSave:w,onSend:G})}),(0,s.jsx)(B,{})]})}var U=a.memo(I);h.default=U}}]);

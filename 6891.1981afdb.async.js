var $=Object.prototype.hasOwnProperty;var Z=Object.getOwnPropertySymbols,H=Object.prototype.propertyIsEnumerable;var T=Object.assign;var w=(f,j)=>{var e={};for(var r in f)$.call(f,r)&&j.indexOf(r)<0&&(e[r]=f[r]);if(f!=null&&Z)for(var r of Z(f))j.indexOf(r)<0&&H.call(f,r)&&(e[r]=f[r]);return e};(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[6891,3975],{33201:function(){},48775:function(f,j,e){"use strict";e.d(j,{GP:function(){return r.Z},Hk:function(){return p}});var r=e(48655),d=e(39981),E=e(67294),P=e(94184),A=e.n(P),K=e(28865),o=e(37334),S=e(2824),t=e(11849),W=e(96486),u=e(85893),B={aside:{minimize:!1}},D=E.createContext({state:B,dispatch:function(){}}),C;(function(s){s.AsideToggle="ASIDE_TOGGLE"})(C||(C={}));function N(s,c){switch(c.type){case"ASIDE_TOGGLE":return s.aside.minimize=!s.aside.minimize,(0,t.Z)({},s);default:throw new Error}}var I=function(c){var l=(0,E.useReducer)(N,(0,W.cloneDeep)(B)),m=(0,S.Z)(l,2),y=m[0],b=m[1];return(0,u.jsx)(D.Provider,{value:{state:y,dispatch:b},children:c.children})},a=function(){return(0,E.useContext)(D)},i=e(53704);function v(s){var c=s.children,l=a(),m=l.dispatch,y=l.state.aside.minimize,b=(0,E.useCallback)(function(){m({type:C.AsideToggle})},[m]);return(0,u.jsxs)("div",{className:A()("app-aside aside"),children:[(0,u.jsx)(o.Z,{children:(0,u.jsx)(r.Z,{resizeable:!0,className:"app-sidebar",children:c})}),(0,u.jsx)(i.zx,{style:{marginBottom:"1.35rem",zIndex:10},onClick:b,activeColor:"primary",className:A()("btn-icon bg-body btn-color-gray-700 rounded-2 position-absolute translate-middle start-100 end-0 bottom-0 shadow-sm d-none d-lg-flex",{active:y}),children:(0,u.jsx)(K.JO,{name:"Duotune/arr063",className:"svg-icon-2 rotate-180"})})]})}var g=v;function x(s){var c=s.children,l=s.className,m=a(),y=m.state.aside.minimize;return(0,u.jsx)("div",{className:A()("micro-app-container page-full-content",l,{"aside-minimize":y}),children:c})}function M(s){var c=s.children,l=s.className;return(0,u.jsx)(I,{children:(0,u.jsx)(x,{className:l,children:c})})}M.Sidebar=g;var p=M,O=e(61997)},17731:function(f,j,e){"use strict";e.r(j),e.d(j,{default:function(){return I}});var r=e(2824),d=e(67294),E=e(11849),P=e(28865),A=e(51615),K=e(73727),o=e(53704),S=e(25496),t=e(85893);function W(a,i){return a.children&&a.children.length?(0,t.jsx)(o.v2.SubMenu,{url:"/websites/".concat(i,"/cms/categories/").concat(a.id,"/articles"),bullet:!0,icon:a.icon,title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"flex-row-fluid",children:a.name}),(0,t.jsx)(o.u,{title:"\u680F\u76EE\u8BBE\u7F6E",children:(0,t.jsx)("div",{children:(0,t.jsx)(K.Link,{onClick:function(g){return g.stopPropagation()},className:"category-setting me-2 text-primary",to:"/websites/".concat(i,"/cms/categories/").concat(a.id),children:(0,t.jsx)(P.JO,{name:"Bootstrap/gear",className:"svg-icon-primary"})})})})]}),children:(a.children||[]).map(function(v){return W(v,i)})},"category_".concat(a.id)):(0,t.jsx)(o.v2.Item,{url:"/websites/".concat(i,"/cms/categories/").concat(a.id,"/articles"),bullet:!0,icon:a.icon,title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"flex-row-fluid",children:a.name}),(0,t.jsx)(o.u,{title:"\u680F\u76EE\u8BBE\u7F6E",children:(0,t.jsx)(K.Link,{onClick:function(g){return g.stopPropagation()},className:"category-setting me-4 text-primary",to:"/websites/".concat(i,"/cms/categories/").concat(a.id),children:(0,t.jsx)(P.JO,{name:"Bootstrap/gear",className:"svg-icon-primary"})})})]})},"category_".concat(a.id))}function u(a){var i=a.id,v=a.location,g=a.loading,x=a.website,M=(0,A.k6)(),p=(0,d.useMemo)(function(){return(0,S.G_)(a.categories.map(function(n){return(0,E.Z)({},n)}),{idKey:"id",childrenKey:"children",pidKey:"parent.id",sort:function(U,G){return U.index-G.index}})},[a.categories]),O=(0,d.useMemo)(function(){var n=(0,A.LX)(v.pathname,{path:"/websites/:sid/cms/categories/:cid",exact:!1,strict:!0});return console.log("channelMatch",n),n?"category_".concat(n.params.cid):"my-drive"},[v.pathname]),s=(0,d.useState)(O),c=(0,r.Z)(s,2),l=c[0],m=c[1],y=(0,d.useState)(p.map(function(n){return n.id})),b=(0,r.Z)(y,2),z=b[0],h=b[1];(0,d.useEffect)(function(){!O||m(O)},[O]);var F=(0,d.useCallback)(function(n){console.log("selectedKey",n.key),m(n.key)},[]),L=(0,d.useCallback)(function(){var n;l.startsWith("category_")&&(n=l.split("_")[1]),M.push("/websites/".concat(i,"/cms/categories/new")+(n?"?parent_category_id=".concat(n):""))},[M,i,l]),R=(0,d.useCallback)(function(n){h(n)},[]);return(0,d.useEffect)(function(){h(p.map(function(n){return"category_".concat(n.id)}))},[p.map(function(n){return n.id}).join(",")]),(0,t.jsxs)(o.bH,{zIndex:10,className:"my-5 p-5",overlayClassName:"bg-white bg-opacity-25",loading:!1,children:[(0,t.jsx)("div",{children:(0,t.jsx)("h1",{className:"text-gray-800 fw-bold mx-5",children:(x==null?void 0:x.name)||" "})}),(0,t.jsxs)(o.v2,{fit:!0,accordion:!1,selectable:"AllMenu",className:"menu-title-gray-600 menu-icon-gray-400 menu-state-primary menu-state-icon-primary menu-state-bullet-primary menu-arrow-gray-500 fw-bold fs-6 px-6 my-5 my-lg-0",selectedKeys:l?[l]:[],onSelect:F,openKeys:z,onOpenChange:R,children:[(0,t.jsx)(o.v2.Section,{className:"pt-8 pb-2",title:"\u7F51\u7AD9\u7BA1\u7406"},"website-manage-section"),(0,t.jsx)(o.v2.Item,{bullet:!0,icon:"",title:"\u7F51\u7AD9\u5217\u8868",url:""},"websites"),(0,t.jsxs)(o.v2.Section,{className:"pt-8 pb-0 d-flex align-items-center",children:[(0,t.jsxs)("span",{className:"menu-section text-muted text-uppercase fs-8 ls-1 flex-row-fluid",children:["\u680F\u76EE ",g&&" - loading..."]}),(0,t.jsx)(o.zx,{icon:(0,t.jsx)(P.JO,{style:{marginRight:".2rem"},name:"Duotune/arr087",className:""}),size:"sm",variant:"white",className:"py-1 px-3 me-n4",onClick:L,children:"\u65B0\u589E"})]}),p.map(function(n){return W(n,i)}),(0,t.jsx)(o.v2.Section,{children:"\u8BBE\u7F6E"}),(0,t.jsx)(o.v2.Item,{bullet:!0,icon:"",title:"\u901A\u7528\u8BBE\u7F6E",url:"/websites/".concat(i,"/settings/general")},"settings_general"),(0,t.jsx)(o.v2.Item,{bullet:!0,icon:"",title:"\u5BFC\u822A\u83DC\u5355",url:"/websites/".concat(i,"/settings/navigation")},"settings_navigation")]})]})}var B=u,D=e(81303),C=e(48775);function N(a){var i=a.match,v=a.children,g=a.location,x=i.params.id,M=(0,D._$)({fetchPolicy:"cache-and-network",variables:{id:x}}),p=M.data,O=M.loading,s=p==null?void 0:p.website,c=s==null?void 0:s.channel.id,l=(0,D.v7)({fetchPolicy:"cache-and-network"}),m=(0,r.Z)(l,2),y=m[0],b=m[1],z=b.data,h=z===void 0?{categories:[]}:z,F=b.loading,L=(0,d.useMemo)(function(){return!(h!=null&&h.categories)||!h.categories.length?[]:h.categories},[h==null?void 0:h.categories]);return(0,d.useEffect)(function(){!c||y({variables:{id:c}})},[y,c]),(0,t.jsxs)(C.Hk,{className:"micro-app-website",children:[(0,t.jsx)(C.Hk.Sidebar,{children:(0,t.jsx)(B,{website:s,categories:L,location:g,id:i.params.id,loading:O||F})}),c&&!F&&d.Children.map(v,function(R){return R.props.location.state={rootCategoryId:c,categories:L,baseUrl:"/websites/"+x},R})]})}var I=N},77104:function(f,j,e){"use strict";var r=e(94184),d=e.n(r),E=e(67294),P=e(70861),A=e(76792),K=e(85893);const o={variant:"primary",active:!1,disabled:!1},S=E.forwardRef((a,I)=>{var{as:t,bsPrefix:W,variant:u,size:B,active:D,className:C}=a,N=w(a,["as","bsPrefix","variant","size","active","className"]);const i=(0,A.vE)(W,"btn"),[v,{tagName:g}]=(0,P.FT)(T({tagName:t},N)),x=g;return(0,K.jsx)(x,T(T(T({},v),N),{ref:I,className:d()(C,i,D&&"active",u&&`${i}-${u}`,B&&`${i}-${B}`,N.href&&N.disabled&&"disabled")}))});S.displayName="Button",S.defaultProps=o,j.Z=S}}]);

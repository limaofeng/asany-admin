"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8087],{14336:function(Q,R,n){var $=n(15009),C=n.n($),S=n(99289),F=n.n(S),Z=n(97857),E=n.n(Z),P=n(5574),K=n.n(P),_=n(67294),p=n(89717),d=n(12708);function u(a,t){return a.replace(/{(\w+)}/g,function(s,h){return t[h]!==void 0?t[h]:s})}function r(a,t){var s=a(E()({fetchPolicy:"network-only"},(t==null?void 0:t.mutation)||{})),h=K()(s,1),e=h[0],D=(0,_.useRef)(!1),A=(0,_.useRef)(null),B=(0,_.useCallback)(function(){var O=F()(C()().mark(function y(i,l){var j,x,b,k,m,v,L,w,U;return C()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return j=(l==null?void 0:l.dialog)||(t==null?void 0:t.dialog)||{},x=(l==null?void 0:l.mutation)||(t==null?void 0:t.mutation)||{},b=(l==null?void 0:l.onDeleted)||(t==null?void 0:t.onDeleted),k=j.width,m=j.title,v=j.content,L=!1,Array.isArray(i)?(L=!0,typeof m=="function"&&(m=m(i,{batch:!0})),typeof v=="function"&&(v=v(i,{batch:!0}))):i&&(typeof m=="string"&&(m=u(m,i)),typeof v=="string"&&(v=u(v,i)),typeof m=="function"&&(m=m(i,{batch:!1})),typeof v=="function"&&(v=v(i,{batch:!1}))),w=function(){var W=F()(C()().mark(function V(){return C()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,e(E()(E()({fetchPolicy:"network-only"},x),{},{variables:{where:{id_in:L?i:[i==null?void 0:i.id]}}}));case 2:case"end":return c.stop()}},V)}));return function(){return W.apply(this,arguments)}}(),g.next=10,p.Modal.confirm(E()(E()({},j),{},{title:m,content:v,width:k,okText:"\u5220 \u9664",okClassName:"btn-danger",allowOutsideClick:function(){return!D.current},preConfirm:function(){var W=F()(C()().mark(function G(){var c,o,M;return C()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return D.current=!0,A.current=null,f.prev=2,c=document.querySelector(".swal2-confirm"),c.textContent="\u5220\u9664\u4E2D...",o=document.createElement("span"),o.classList.add("spinner-border-sm","ms-2","spinner-border","align-middle"),c.appendChild(o),f.next=10,(0,d.gw)(w(),350);case 10:M=f.sent,b&&b(i,M),f.next=17;break;case 14:f.prev=14,f.t0=f.catch(2),A.current=f.t0;case 17:return f.prev=17,D.current=!1,f.finish(17);case 20:case"end":return f.stop()}},G,null,[[2,14,17,20]])}));function V(){return W.apply(this,arguments)}return V}()}));case 10:if(U=g.sent,!A.current){g.next=14;break}return p.Toast.error("\u5220\u9664\u5931\u8D25:"+A.current.message,2e3,{placement:"top-center",progressBar:!0}),g.abrupt("return",!1);case 14:if(U.isConfirmed){g.next=16;break}return g.abrupt("return",!1);case 16:return p.Toast.success("\u5220\u9664\u6210\u529F",2e3,{placement:"top-center",progressBar:!0}),g.abrupt("return",!0);case 18:case"end":return g.stop()}},y)}));return function(y,i){return O.apply(this,arguments)}}(),[]),z=(0,_.useCallback)(function(O,y){return B(O,y)},[t,e]),H=(0,_.useCallback)(function(O,y){return B(O,y)},[]);return{delete:z,deleteMany:H}}R.Z=r},58301:function(Q,R,n){n.d(R,{Oh:function(){return P},bp:function(){return K}});var $=n(97857),C=n.n($),S=n(67294);function F(_,p){var d,u,r=_(C()({fetchPolicy:"network-only"},p)),a=r.data,t=r.loading,s=r.previousData,h=r.refetch,e=r.error,D=(0,S.useMemo)(function(){return t?s==null?void 0:s.result.pageInfo:a==null?void 0:a.result.pageInfo},[a==null||(d=a.result)===null||d===void 0?void 0:d.pageInfo.total,t,s==null||(u=s.result)===null||u===void 0?void 0:u.pageInfo.total]),A=(0,S.useMemo)(function(){return a!=null&&a.result?a.result.edges.map(function(B){return B.node}):t&&s!==null&&s!==void 0&&s.result?s.result.edges.map(function(B){return B.node}):[]},[t,a==null?void 0:a.result,s==null?void 0:s.result]);return[A,{loading:t,pageInfo:D,error:e,variables:{},refetch:h}]}function Z(_,p){return p.split(".").reduce(function(d,u){return d&&d[u]!==void 0?d[u]:void 0},_)}function E(_,p,d){for(var u=p.split("."),r=_;u.length>1;){var a=u.shift();r[a]||(r[a]={}),r=r[a]}r[u[0]]=d}function P(_,p){var d=p.map(function(u){var r=u.source,a=u.target,t=u.transform,s=u.skip,h=Z(_,r);if(h==null||s&&s(h))return"";var e=t?t(h):String(h);return"".concat(encodeURIComponent(a||r),"=").concat(encodeURIComponent(e))});return d.filter(function(u){return u}).join("&")}function K(_,p){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=d;return p.forEach(function(r){var a=r.source,t=r.target,s=r.transform,h=r.skip,e=_.get(a);if(!(!e||e.trim()==="")){var D=s?s(e):e;h&&h(D)||(t?E(u,t,D):u[a]=D)}}),u}R.ZP=F},18087:function(Q,R,n){n.r(R),n.d(R,{default:function(){return O}});var $=n(15009),C=n.n($),S=n(99289),F=n.n(S),Z=n(5574),E=n.n(Z),P=n(67294),K=n(96974),_=n(39711),p=n(46027),d=n(58301),u=n(73588),r=n(89717),a=n(12708),t=n(60551),s=n(14336),h=n(86235),e=n(85893);function D(y){var i=(0,s.Z)(h.tY,{onDeleted:function(){y&&y()},dialog:{title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",content:function(b,k){var m;if(k.batch){var v=b;m="\u786E\u5B9A\u5220\u9664\u9009\u4E2D\u7684, \u5171 ".concat(v.length," \u4E2A\u54C1\u724C\u5417\uFF1F")}else m=(0,e.jsxs)(e.Fragment,{children:["\u60A8\u5373\u5C06\u5220\u9664\u201C",(0,e.jsx)("strong",{children:b.name})]});return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{className:"tip-confirm",children:m}),(0,e.jsx)("p",{children:"\u5220\u9664\u7684\u64CD\u4F5C\u4E0D\u53EF\u9006,\u8BF7\u8C28\u614E\u64CD\u4F5C"})]})}}}),l=i.delete,j=i.deleteMany;return{delete:l,deleteMany:j}}var A=D,B="/pim";function z(y){var i=y.baseUrl,l=y.data,j=y.refetch,x=(0,P.useState)(!1),b=E()(x,2),k=b[0],m=b[1],v=(0,K.s0)(),L=A(function(){return j()}),w=L.delete,U=(0,P.useCallback)(function(N){var g=N.key;g==="edit"?v("".concat(i,"/products/").concat(l.id)):g==="delete"&&w({name:l.name,id:l.id})},[]);return(0,e.jsx)(r.Dropdown,{overlay:(0,e.jsxs)(r.Menu,{onClick:U,className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold w-125px py-4",children:[(0,e.jsx)(r.Menu.Item,{className:"px-3",children:"\u7F16\u8F91"},"edit"),(0,e.jsx)(r.Menu.Item,{className:"px-3",children:"\u5220\u9664"},"delete")]}),placement:"bottomRight",onVisibleChange:m,visible:k,children:(0,e.jsxs)(r.Button,{variant:"light",activeColor:"light-primary",children:["\u64CD \u4F5C",(0,e.jsx)(p.ZP,{className:"ms-2 svg-icon-5 m-0",name:"Duotune/arr072"})]})})}function H(){var y=(0,_.lr)(),i=E()(y,1),l=i[0],j=(0,K.s0)(),x=(0,P.useMemo)(function(){return(0,d.bp)(l,[{source:"q",target:"keywords"}])},[l.get("q")]),b=(0,P.useCallback)(function(c,o,M){var T=(0,d.Oh)({searchForm:x,pagination:c,filters:o,sorter:M},[{source:"searchForm.keywords",target:"q",skip:function(I){return!I}},{source:"pagination.current",target:"page",skip:function(I){return I===1}},{source:"pagination.pageSize",target:"per_page",skip:function(I){return I===15}},{source:"sorter.field",target:"sort",transform:function(I){return"".concat(I,":").concat(M.order==="ascend"?"asc":"desc")}}]);j(location.pathname+"?"+T,{replace:!0})},[x]),k=(0,P.useMemo)(function(){return(0,d.bp)(l,[{source:"q",target:"where.name_contains"},{source:"sex",target:"where.sex"},{source:"page",transform:function(o){return parseInt(o)}},{source:"per_page",transform:function(o){return parseInt(o)}},{source:"sort",target:"orderBy",transform:function(o){var M=o.split(":"),T=E()(M,2),f=T[0],I=T[1];return"".concat(f,"_").concat(I)}}])},[l.toString()]),m=(0,d.ZP)(t.kN,{variables:k,fetchPolicy:"network-only"}),v=E()(m,2),L=v[0],w=v[1],U=w.loading,N=w.pageInfo,g=w.refetch,W=A(function(){return g()}),V=W.deleteMany,G=(0,P.useCallback)(function(c){return F()(C()().mark(function o(){return C()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:V(c);case 1:case"end":return T.stop()}},o)}))},[]);return(0,e.jsx)(u.vs,{header:{title:"\u4EA7\u54C1\u5217\u8868"},children:(0,e.jsxs)(r.Card,{className:"mb-5 mb-xl-10",children:[(0,e.jsxs)(r.Card.Header,{className:"pt-8",children:[(0,e.jsx)(r.Card.Title,{className:"flex-column",children:(0,e.jsx)(r.Input.Search,{solid:!0,className:"w-250px",placeholder:"\u641C\u7D22\u4EA7\u54C1"})}),(0,e.jsx)(r.Card.Toolbar,{children:(0,e.jsx)("div",{className:"d-flex justify-content-end",children:(0,e.jsx)(r.Button,{as:_.rU,variant:"primary",className:"me-3",icon:(0,e.jsx)(p.ZP,{className:"svg-icon-2",name:"Duotune/arr075"}),to:"/pim/products/new",children:"\u65B0\u5EFA\u4EA7\u54C1"})})})]}),(0,e.jsx)(r.Card.Body,{children:!(N!=null&&N.total)&&!U?(0,e.jsx)(r.Card,{className:"mb-5 mb-xl-10",children:(0,e.jsx)(r.Empty,{title:"\u8FD8\u6CA1\u6709\u4EA7\u54C1",description:"\u9A6C\u4E0A\u6DFB\u52A0\u4E00\u4E2A\u4EA7\u54C1\u5427\uFF01",image:"/assets/media/illustrations/sigma-1/4.png",children:(0,e.jsx)(r.Button,{variant:"primary",children:"\u6DFB\u52A0\u4EA7\u54C1"})})}):(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(r.BlockUI,{overlayClassName:"bg-white bg-opacity-25",loading:U,children:(0,e.jsx)(r.Table,{hover:!0,rowKey:"id",rowSelection:{type:"checkbox",renderTitle:function(o){return(0,e.jsxs)(e.Fragment,{children:["\u5DF2\u9009\u4E2D",(0,e.jsx)("span",{className:"mx-2",children:o}),"\u4E2A\u4EA7\u54C1"]})},toolbar:function(o){return(0,e.jsx)("div",{children:(0,e.jsx)(r.Button,{color:"danger",onClick:G(o),variant:!1,children:"\u6279\u91CF\u5220\u9664"})})}},noRowsRenderer:function(){return(0,e.jsx)(r.Empty,{description:"\u5217\u8868\u6570\u636E\u4E3A\u7A7A",image:"/assets/media/illustrations/sigma-1/5.png"})},columns:[{key:"id",title:"ID",sorter:!0,sortOrder:(0,a.PE)(l,"id"),width:80},{key:"brand",title:"\u54C1\u724C",width:120,render:function(o){return o==null?void 0:o.name}},{key:"name",title:"\u4EA7\u54C1\u540D\u79F0",sorter:!0,sortOrder:(0,a.PE)(l,"name")},{key:"createdAt",title:"\u521B\u5EFA\u65F6\u95F4",width:120},{title:"\u64CD\u4F5C",key:"action",width:140,render:function(o,M){return(0,e.jsx)(z,{baseUrl:B,data:M,refetch:g})}}],pagination:N,onChange:b,dataSource:L})})})})]})})}var O=H}}]);

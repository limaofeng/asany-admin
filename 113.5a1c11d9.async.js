"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[113],{14336:function(N,y,r){var U=r(15009),h=r.n(U),L=r(97857),A=r.n(L),x=r(99289),p=r.n(x),j=r(62435),T=r(79817),c=r(12708);function d(a,t){return a.replace(/{(\w+)}/g,function(n,s){return t[s]!==void 0?t[s]:n})}function _(a,t){var n=(0,j.useRef)(!1),s=(0,j.useCallback)(function(){var e=p()(h()().mark(function o(i){var I,l,m,D;return h()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return I=a.width,l=a.title,m=a.content,i&&(typeof l=="string"&&(l=d(l,i)),typeof m=="string"&&(m=d(m,i)),typeof l=="function"&&(l=l(i)),typeof m=="function"&&(m=m(i))),f.next=5,T.Modal.confirm(A()(A()({},a),{},{title:l,content:m,width:I,okText:"\u5220 \u9664",okClassName:"btn-danger",allowOutsideClick:function(){return!n.current},preConfirm:function(){var P=p()(h()().mark(function K(){var M,v,u;return h()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return n.current=!0,E.prev=1,M=document.querySelector(".swal2-confirm"),M.textContent="\u5220\u9664\u4E2D...",v=document.createElement("span"),v.classList.add("spinner-border-sm","ms-2","spinner-border","align-middle"),M.appendChild(v),E.next=9,(0,c.gw)(t(i),350);case 9:u=E.sent,console.log(u);case 11:return E.prev=11,n.current=!1,E.finish(11);case 14:case"end":return E.stop()}},K,null,[[1,,11,14]])}));function b(){return P.apply(this,arguments)}return b}()}));case 5:if(D=f.sent,D.isConfirmed){f.next=8;break}return f.abrupt("return",!1);case 8:return T.Toast.success("\u5220\u9664\u6210\u529F",2e3,{placement:"top-center",progressBar:!0}),f.abrupt("return",!0);case 10:case"end":return f.stop()}},o)}));return function(o){return e.apply(this,arguments)}}(),[t,a]);return[s]}y.Z=_},58301:function(N,y,r){r.d(y,{Oh:function(){return j},bp:function(){return T}});var U=r(97857),h=r.n(U),L=r(62435);function A(c,d){var _,a,t=c(h()({fetchPolicy:"network-only"},d)),n=t.data,s=t.loading,e=t.previousData,o=t.refetch,i=t.error,I=(0,L.useMemo)(function(){return s?e==null?void 0:e.result.pageInfo:n==null?void 0:n.result.pageInfo},[n==null||(_=n.result)===null||_===void 0?void 0:_.pageInfo.total,s,e==null||(a=e.result)===null||a===void 0?void 0:a.pageInfo.total]),l=(n==null?void 0:n.result.edges.map(function(m){return m.node}))||[];return[l,{loading:s,pageInfo:I,error:i,variables:{},refetch:o}]}function x(c,d){return d.split(".").reduce(function(_,a){return _&&_[a]!==void 0?_[a]:void 0},c)}function p(c,d,_){for(var a=d.split("."),t=c;a.length>1;){var n=a.shift();t[n]||(t[n]={}),t=t[n]}t[a[0]]=_}function j(c,d){var _=d.map(function(a){var t=a.source,n=a.target,s=a.transform,e=a.skip,o=x(c,t);if(o==null||e&&e(o))return"";var i=s?s(o):String(o);return"".concat(encodeURIComponent(n||t),"=").concat(encodeURIComponent(i))});return _.filter(function(a){return a}).join("&")}function T(c,d){var _={};return d.forEach(function(a){var t=a.source,n=a.target,s=a.transform,e=a.skip,o=c.get(t);if(!(!o||o.trim()==="")){var i=s?s(o):o;e&&e(i)||(n?p(_,n,i):_[t]=i)}}),_}y.ZP=A},30113:function(N,y,r){r.r(y);var U=r(15009),h=r.n(U),L=r(99289),A=r.n(L),x=r(5574),p=r.n(x),j=r(62435),T=r(96974),c=r(39711),d=r(46027),_=r(14336),a=r(58301),t=r(73588),n=r(79817),s=r(91726),e=r(86074),o="/pim";function i(l){var m=l.baseUrl,D=l.data,C=l.refetch,f=(0,j.useState)(!1),P=p()(f,2),b=P[0],K=P[1],M=(0,T.s0)(),v=(0,s.xq)(),u=p()(v,1),B=u[0],E=(0,_.Z)({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",content:function(O){return(0,e.jsxs)(e.Fragment,{children:["\u60A8\u5373\u5C06\u5220\u9664\u201C",(0,e.jsx)("strong",{children:O.name}),"\u201D\u3002\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F"]})}},function(){var g=A()(h()().mark(function O(k){return h()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,B({variables:{id:k==null?void 0:k.id}});case 2:C();case 3:case"end":return F.stop()}},O)}));return function(O){return g.apply(this,arguments)}}()),W=p()(E,1),w=W[0],R=(0,j.useCallback)(function(g){var O=g.key;O==="edit"?M("".concat(m,"/products/").concat(D.id)):O==="delete"&&w({name:D.name,id:D.id})},[]);return(0,e.jsx)(n.Dropdown,{overlay:(0,e.jsxs)(n.Menu,{onClick:R,className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold w-125px py-4",children:[(0,e.jsx)(n.Menu.Item,{className:"px-3",children:"\u7F16\u8F91"},"edit"),(0,e.jsx)(n.Menu.Item,{className:"px-3",children:"\u5220\u9664"},"delete")]}),placement:"bottomRight",onVisibleChange:K,visible:b,children:(0,e.jsxs)(n.Button,{variant:"light",activeColor:"light-primary",children:["\u64CD \u4F5C",(0,e.jsx)(d.ZP,{className:"ms-2 svg-icon-5 m-0",name:"Duotune/arr072"})]})})}function I(){var l=(0,a.ZP)(s.kN,{toQuery:function(u,B,E,W){var w,R={};if((w=u.filter)!==null&&w!==void 0&&w.name_contains){var g;R.q=(g=u.filter)===null||g===void 0?void 0:g.name_contains}return W&&(R.orderBy=W.field+"_"+(W.order==="ascend"?"asc":"desc")),R.page=B.current,R},toVariables:function(u){return u.q&&(u.filter={name_contains:u.q},delete u.q),u}}),m=p()(l,2),D=m[0],C=m[1],f=C.loading,P=C.pageInfo,b=C.sorter,K=C.onChange,M=C.refetch;return(0,e.jsx)(t.vs,{header:{title:"\u4EA7\u54C1\u5217\u8868"},children:(0,e.jsxs)(n.Card,{className:"mb-5 mb-xl-10",children:[(0,e.jsxs)(n.Card.Header,{className:"pt-8",children:[(0,e.jsx)(n.Card.Title,{className:"flex-column",children:(0,e.jsx)(n.Input.Search,{solid:!0,className:"w-250px",placeholder:"\u641C\u7D22\u4EA7\u54C1"})}),(0,e.jsx)(n.Card.Toolbar,{children:(0,e.jsx)("div",{className:"d-flex justify-content-end",children:(0,e.jsx)(n.Button,{as:c.rU,variant:"primary",className:"me-3",icon:(0,e.jsx)(d.ZP,{className:"svg-icon-2",name:"Duotune/arr075"}),to:"/pim/products/new",children:"\u65B0\u5EFA\u4EA7\u54C1"})})})]}),(0,e.jsx)(n.Card.Body,{children:!P.total&&!f?(0,e.jsx)(n.Card,{className:"mb-5 mb-xl-10",children:(0,e.jsx)(n.Empty,{title:"\u8FD8\u6CA1\u6709\u4EA7\u54C1",description:"\u9A6C\u4E0A\u6DFB\u52A0\u4E00\u4E2A\u4EA7\u54C1\u5427\uFF01",image:"/assets/media/illustrations/sigma-1/4.png",children:(0,e.jsx)(n.Button,{variant:"primary",children:"\u6DFB\u52A0\u4EA7\u54C1"})})}):(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.BlockUI,{overlayClassName:"bg-white bg-opacity-25",loading:f,children:(0,e.jsx)(n.Table,{hover:!0,rowKey:"id",rowSelection:{type:"checkbox",renderTitle:function(u){return(0,e.jsxs)(e.Fragment,{children:["\u5DF2\u9009\u4E2D",(0,e.jsx)("span",{className:"mx-2",children:u}),"\u4E2A\u4EA7\u54C1"]})}},noRowsRenderer:function(){return(0,e.jsx)(n.Empty,{description:"\u5217\u8868\u6570\u636E\u4E3A\u7A7A",image:"/assets/media/illustrations/sigma-1/5.png"})},columns:[{key:"id",title:"ID",sorter:!0,sortOrder:b.field==="id"?b.order:void 0,width:80},{key:"brand",title:"\u54C1\u724C",width:120,render:function(u){return u==null?void 0:u.name}},{key:"name",title:"\u4EA7\u54C1\u540D\u79F0",sorter:!0,sortOrder:b.field==="name"?b.order:void 0},{key:"createdAt",title:"\u521B\u5EFA\u65F6\u95F4",width:120},{title:"\u64CD\u4F5C",key:"action",width:140,render:function(u,B){return(0,e.jsx)(i,{baseUrl:o,data:B,refetch:M})}}],pagination:P,onChange:K,dataSource:D})})})})]})})}y.default=I}}]);

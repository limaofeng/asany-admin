"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9166,267],{51253:function(V,$,t){t.d($,{GP:function(){return S.Z},Hk:function(){return R},xx:function(){return j.x}});var s=t(74958),S=t(5166),j=t(19260),z=t(68400),B=t.n(z),y=t(62435),h=t(93967),F=t.n(h),C=t(94589),a=t(97857),D=t.n(a),e=t(46027),O=t(35908),b=t(42687),P=t(79817),w=t(5574),G=t.n(w),i=t(96486),r=t(86074),o={aside:{minimize:!1,width:280}},l=y.createContext({state:o,dispatch:function(){}}),d=function(n){return n.AsideToggle="ASIDE_TOGGLE",n.AsideWidth="ASIDE_WIDTH",n}({});function p(n,m){switch(m.type){case"ASIDE_TOGGLE":return n.aside.minimize=!n.aside.minimize,D()({},n);case"ASIDE_WIDTH":return n.aside.width=m.payload,D()({},n);default:throw new Error}}var A=function(m){var f=(0,y.useReducer)(p,(0,i.cloneDeep)(o)),E=G()(f,2),u=E[0],N=E[1];return(0,r.jsx)(l.Provider,{value:{state:u,dispatch:N},children:m.children})},v=function(){return(0,y.useContext)(l)},M=t(65495);function g(n){var m=v(),f=m.dispatch,E=m.state.aside.minimize,u=(0,y.useCallback)(function(){f({type:d.AsideToggle})},[f]);return(0,r.jsx)(P.Button,{style:D()({marginBottom:"1.35rem",zIndex:105},n.style),onClick:u,activeColor:"primary",className:F()("micro-app-aside-toggle","btn-icon bg-body btn-color-gray-700 rounded-2 position-absolute translate-middle bottom-0 shadow-sm d-none d-lg-flex",n.className,{active:E}),children:(0,r.jsx)(e.JO,{name:"Duotune/arr063",className:"svg-icon-2 rotate-180"})})}var x={"drawer drawer-start":{maxWidth:992}};function T(n){var m=n.className,f=n.header,E=n.children,u=n.collapsible,N=u===void 0?!0:u,Q=n.width,W=Q===void 0?280:Q,U=(0,b.$Y)(),Z=v(),X=Z.dispatch;(0,y.useEffect)(function(){U.aside.width(W+100),X({type:d.AsideWidth,payload:W})},[U.aside,X,W]);var J=(0,O.CN)(x),Y=(0,b.BK)(function(k){return k.aside.drawer});return(0,r.jsxs)("div",{className:F()("app-aside aside",m,J,{"drawer-on":Y}),children:[(0,r.jsx)(M.Z,{children:(0,r.jsx)(S.Z,{header:f,resizeable:!0,className:"app-sidebar",children:E})}),N&&(0,r.jsx)(g,{className:"start-100 end-0"})]})}T.Toggle=g;var L=T,I,H=C.ZP.div(I||(I=B()([`
  --root-aside-width: `,`;
  --met-aside-width: `,`;
`])),function(n){return n.minimize?"100px":"".concat(n.width,"px")},function(n){return n.minimize?"100px":"".concat(n.width,"px")});function K(n){var m=n.children,f=n.className,E=v(),u=E.state.aside,N=u.minimize,Q=u.width,W=(0,y.useCallback)(function(U){U.preventDefault()},[]);return(0,r.jsx)(H,{minimize:N,width:Q,className:F()("micro-app-container page-full-content",f,{"aside-minimize":N}),onContextMenu:W,children:m})}function c(n){var m=n.children,f=n.className;return(0,r.jsx)(A,{children:(0,r.jsx)(K,{className:f,children:m})})}c.Sidebar=L;var R=c},85947:function(V,$,t){t.d($,{u7:function(){return s.u7},pM:function(){return s.pM},dP:function(){return s.dP},zR:function(){return s.zR},bo:function(){return s.bo},CF:function(){return s.CF},hT:function(){return s.hT},X4:function(){return s.X4},rq:function(){return s.rq},qb:function(){return s.qb},a$:function(){return s.a$},mp:function(){return s.mp},WE:function(){return s.WE},HC:function(){return s.HC},cT:function(){return e},Hr:function(){return G},r3:function(){return s.r3},bI:function(){return s.bI},A6:function(){return s.A6},LV:function(){return s.LV}});var s=t(10557),S=t(15009),j=t.n(S),z=t(99289),B=t.n(z),y=t(5574),h=t.n(y),F=t(62435),C=t(79817),a=t(86074);function D(i,r){var o,l=(0,s.rz)({variables:{id:i==null?void 0:i.id},refetchQueries:[{query:s.dP,variables:{id:i==null||(o=i.application)===null||o===void 0?void 0:o.id}}]}),d=h()(l,1),p=d[0],A=(0,F.useCallback)(B()(j()().mark(function v(){var M;return j()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,C.Modal.confirm({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u8DEF\u7531\u5417\uFF1F",content:(0,a.jsxs)(a.Fragment,{children:["\u60A8\u5373\u5C06\u5220\u9664\u201C",(0,a.jsx)("strong",{children:i.name}),"\u201D\u3002\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F"]}),okText:"\u5220 \u9664",okClassName:"btn-danger"});case 2:if(M=x.sent,!M.isConfirmed){x.next=8;break}return x.next=6,p();case 6:C.Toast.success("\u5220\u9664\u6210\u529F"),r(i);case 8:case"end":return x.stop()}},v)})),[p,i,r]);return[A]}var e=D,O=t(97857),b=t.n(O),P=t(12708);function w(i,r){var o,l,d,p=C.Form.useForm(),A=(0,F.useState)(!1),v=h()(A,2),M=v[0],g=v[1],x=(0,s.X4)({fetchPolicy:"no-cache",refetchQueries:[{query:s.dP,variables:{id:i==null||(o=i.application)===null||o===void 0?void 0:o.id}}]}),T=h()(x,1),L=T[0],I=(0,s.LV)({fetchPolicy:"no-cache",refetchQueries:[{query:s.dP,variables:{id:i==null||(l=i.application)===null||l===void 0?void 0:l.id}}]}),H=h()(I,1),K=H[0],c=(0,F.useMemo)(function(){return i!=null&&i.id?B()(j()().mark(function R(){var n,m,f;return j()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return g(!0),u.prev=1,u.next=4,p.validateFields();case 4:return n=u.sent,u.next=7,C.Toast.promise((0,P.gw)(K({variables:{id:i.id,input:b()({},n)}}),350),{pending:"\u63D0\u4EA4\u4E2D...",success:{render:function(){return(0,a.jsxs)(a.Fragment,{children:["\u8DEF\u7531 ",(0,a.jsx)("strong",{children:n.name})," \u4FDD\u5B58\u6210\u529F"]})}},error:"\u63D0\u4EA4\u51FA\u9519"},{duration:2e3,placement:"top-center"});case 7:m=u.sent,f=m.data,r(f.updateRoute),g(!1),u.next=16;break;case 13:u.prev=13,u.t0=u.catch(1),g(!1);case 16:case"end":return u.stop()}},R,null,[[1,13]])})):B()(j()().mark(function R(){var n,m,f;return j()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return g(!0),u.prev=1,u.next=4,p.validateFields();case 4:return n=u.sent,u.next=7,C.Toast.promise((0,P.gw)(L({variables:{input:b()(b()({},n),{},{application:i.application.id})}}),350),{pending:"\u63D0\u4EA4\u4E2D...",success:{render:function(){return(0,a.jsxs)(a.Fragment,{children:["\u8DEF\u7531 ",(0,a.jsx)("strong",{children:n.name})," \u65B0\u589E\u6210\u529F"]})}},error:"\u63D0\u4EA4\u51FA\u9519"},{duration:2e3,placement:"top-center"});case 7:m=u.sent,f=m.data,r(f.createRoute),g(!1),u.next=16;break;case 13:u.prev=13,u.t0=u.catch(1),g(!1);case 16:case"end":return u.stop()}},R,null,[[1,13]])}))},[L,i==null||(d=i.application)===null||d===void 0?void 0:d.id,i==null?void 0:i.id,p,r,K]);return[c,{form:p,submitting:M}]}var G=w},13196:function(V,$,t){t.r($),t.d($,{default:function(){return i}});var s=t(96974),S=t(51253),j=t(5574),z=t.n(j),B=t(97857),y=t.n(B),h=t(62435),F=t(46027),C=t(12845),a=t(79817),D=t(12708),e=t(86074);function O(r,o){return r.children&&r.children.length?(0,e.jsx)(a.Menu.SubMenu,{url:"/websites/".concat(o,"/cms/categories/").concat(r.id,"/articles"),bullet:!0,icon:r.icon,title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{className:"flex-row-fluid",children:r.name}),(0,e.jsx)(a.Tooltip,{title:"\u680F\u76EE\u8BBE\u7F6E",children:(0,e.jsx)("div",{children:(0,e.jsx)(C.Link,{onClick:function(d){return d.stopPropagation()},className:"category-setting me-2 text-primary",to:"/websites/".concat(o,"/cms/categories/").concat(r.id),children:(0,e.jsx)(F.JO,{name:"Bootstrap/gear",className:"svg-icon-primary"})})})})]})},"category_".concat(r.id)):(0,e.jsx)(a.Menu.Item,{url:"/websites/".concat(o,"/cms/categories/").concat(r.id,"/articles"),bullet:!0,icon:r.icon,title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{className:"flex-row-fluid",children:r.name}),(0,e.jsx)(a.Tooltip,{title:"\u680F\u76EE\u8BBE\u7F6E",children:(0,e.jsx)(C.Link,{onClick:function(d){return d.stopPropagation()},className:"category-setting me-4 text-primary",to:"/websites/".concat(o,"/cms/categories/").concat(r.id),children:(0,e.jsx)(F.JO,{name:"Bootstrap/gear",className:"svg-icon-primary"})})})]})},"category_".concat(r.id))}console.log("renderChannel",O);function b(r){var o=r.location,l=r.app,d=(0,h.useMemo)(function(){return(0,D.G_)(r.categories.map(function(c){return y()({},c)}),{idKey:"id",childrenKey:"children",pidKey:"parent.id",sort:function(R,n){return R.index-n.index}})},[r.categories]),p=(0,h.useMemo)(function(){var c=(0,s.LX)("/websites/:sid/cms/categories/:cid",o.pathname);return c?"category_".concat(c.params.cid):"my-drive"},[o.pathname]),A=(0,h.useState)(p),v=z()(A,2),M=v[0],g=v[1],x=(0,h.useState)(d.map(function(c){return c.id})),T=z()(x,2),L=T[0],I=T[1];(0,h.useEffect)(function(){p&&g(p)},[p]);var H=(0,h.useCallback)(function(c){console.log("selectedKey",c.key),g(c.key)},[]),K=(0,h.useCallback)(function(c){I(c)},[]);return(0,h.useEffect)(function(){I(d.map(function(c){return"category_".concat(c.id)}))},[d.map(function(c){return c.id}).join(",")]),console.log("app 21",l),(0,e.jsxs)(a.BlockUI,{zIndex:10,className:"my-5 p-5",overlayClassName:"bg-white bg-opacity-25",loading:!1,children:[(0,e.jsx)("div",{className:"mx-5",children:(0,e.jsxs)("div",{className:"d-flex align-items-center",children:[(0,e.jsx)(a.Symbol.Avatar,{alt:"\u5565\u5730\u65B9",className:"me-5"}),(0,e.jsxs)("div",{className:"flex-grow-1",children:[(0,e.jsx)("a",{className:"text-dark fw-bolder text-hover-primary fs-6",children:l.title}),(0,e.jsx)("span",{className:"text-muted d-block fw-bold",children:l.description})]})]})}),(0,e.jsxs)(a.Menu,{fit:!0,accordion:!1,selectable:"AllMenu",className:"menu-title-gray-600 menu-icon-gray-400 menu-state-primary menu-state-icon-primary menu-state-bullet-primary menu-arrow-gray-500 fw-bold fs-6 px-6 my-5 my-lg-0",selectedKeys:M?[M]:[],onSelect:H,openKeys:L,onOpenChange:K,children:[(0,e.jsx)(a.Menu.Section,{contentClassName:"pt-6 pb-0",children:"\u901A\u7528"}),(0,e.jsx)(a.Menu.Item,{bullet:!0,icon:"",title:"\u57FA\u672C\u4FE1\u606F",url:"/apps/".concat(l.id,"/profile")}),(0,e.jsx)(a.Menu.Item,{bullet:!0,icon:"",title:"\u7EC4\u7EC7\u673A\u6784",url:""}),(0,e.jsx)(a.Menu.Section,{contentClassName:"pt-6 pb-0",children:"\u5916\u89C2"}),(0,e.jsx)(a.Menu.Item,{bullet:!0,icon:"",title:"\u767B\u5F55\u8BBE\u7F6E",url:""}),(0,e.jsx)(a.Menu.Item,{bullet:!0,icon:"",title:"\u5E03\u5C40",url:""}),(0,e.jsx)(a.Menu.Item,{bullet:!0,icon:"",title:"\u95E8\u6237",url:""}),(0,e.jsx)(a.Menu.Section,{contentClassName:"pt-6 pb-0",children:"\u529F\u80FD\u96C6\u6210"}),(0,e.jsx)(a.Menu.Item,{bullet:!0,icon:"",title:"\u4FE1\u606F",url:""}),(0,e.jsx)(a.Menu.Item,{bullet:!0,icon:"",title:"\u90AE\u4EF6",url:""}),(0,e.jsx)(a.Menu.Item,{bullet:!0,icon:"",title:"\u65E5\u7A0B",url:""}),(0,e.jsx)(a.Menu.Section,{contentClassName:"pt-6 pb-0",children:"\u7B2C\u4E09\u65B9\u96C6\u6210"}),(0,e.jsx)(a.Menu.Item,{bullet:!0,icon:"",title:"\u9489\u9489",url:""}),(0,e.jsx)(a.Menu.Item,{bullet:!0,icon:"",title:"\u5FAE\u4FE1",url:""}),(0,e.jsx)(a.Menu.Item,{bullet:!0,icon:"",title:"\u4F01\u4E1A\u5FAE\u4FE1",url:""}),(0,e.jsx)(a.Menu.Section,{contentClassName:"pt-6 pb-0",children:"\u5F00\u53D1\u8005\u8BBE\u7F6E"}),(0,e.jsx)(a.Menu.Item,{bullet:!0,icon:"",title:"\u5F00\u53D1\u4FE1\u606F",url:"/apps/".concat(l.id,"/api_keys")}),(0,e.jsx)(a.Menu.Item,{bullet:!0,icon:"",title:"\u4F1A\u8BDD\u7BA1\u7406",url:"/apps/".concat(l.id,"/sessions")}),(0,e.jsx)(a.Menu.Item,{bullet:!0,icon:"",title:"\u83DC\u5355\u8BBE\u7F6E",url:"/apps/".concat(l.id,"/menus")}),(0,e.jsx)(a.Menu.Item,{bullet:!0,icon:"",title:"\u8DEF\u7531\u8BBE\u7F6E",url:"/apps/".concat(l.id,"/routes")}),(0,e.jsx)(a.Menu.Item,{bullet:!0,icon:"",title:"\u7EC4\u4EF6\u7BA1\u7406",url:"/apps/".concat(l.id,"/components")})]})]})}var P=b,w=t(85947);function G(){var r=(0,s.UO)(),o=r.id,l=(0,w.zR)({variables:{id:o}}),d=l.data,p=d===void 0?{}:d,A=l.loading,v=p.app;return console.log("app 1",v),(0,e.jsx)(S.Hk,{loading:A,className:"micro-app-website",children:v&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(S.Hk.Sidebar,{children:(0,e.jsx)(P,{app:v,location})}),(0,e.jsx)(s.j3,{context:{app:v,baseUrl:"/apps/"+o}})]})})}var i=G}}]);

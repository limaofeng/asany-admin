"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[572,1836],{51253:function(Q,$,t){t.d($,{GP:function(){return p.Z},Hk:function(){return b},xx:function(){return j.x}});var k=t(74958),p=t(5166),j=t(19260),h=t(68400),v=t.n(h),S=t(62435),x=t(93967),L=t.n(x),M=t(94589),U=t(97857),z=t.n(U),_=t(46027),u=t(42687),A=t(13757),P=t(5574),N=t.n(P),d=t(96486),i=t(86074),o={aside:{minimize:!1,width:280}},g=S.createContext({state:o,dispatch:function(){}}),O=function(r){return r.AsideToggle="ASIDE_TOGGLE",r.AsideWidth="ASIDE_WIDTH",r}({});function f(r,E){switch(E.type){case"ASIDE_TOGGLE":return r.aside.minimize=!r.aside.minimize,z()({},r);case"ASIDE_WIDTH":return r.aside.width=E.payload,z()({},r);default:throw new Error}}var y=function(E){var I=(0,S.useReducer)(f,(0,d.cloneDeep)(o)),C=N()(I,2),T=C[0],R=C[1];return(0,i.jsx)(g.Provider,{value:{state:T,dispatch:R},children:E.children})},D=function(){return(0,S.useContext)(g)},K=t(65495);function s(r){var E=D(),I=E.dispatch,C=E.state.aside.minimize,T=(0,S.useCallback)(function(){I({type:O.AsideToggle})},[I]);return(0,i.jsx)(A.Button,{style:z()({marginBottom:"1.35rem",zIndex:105},r.style),onClick:T,activeColor:"primary",className:L()("micro-app-aside-toggle","btn-icon bg-body btn-color-gray-700 rounded-2 position-absolute translate-middle bottom-0 shadow-sm d-none d-lg-flex",r.className,{active:C}),children:(0,i.jsx)(_.JO,{name:"Duotune/arr063",className:"svg-icon-2 rotate-180"})})}function e(r){var E=r.className,I=r.header,C=r.children,T=r.collapsible,R=T===void 0?!0:T,B=r.width,W=B===void 0?280:B,H=(0,u.$Y)(),G=D(),F=G.dispatch;return(0,S.useEffect)(function(){H.aside.width(W+100),F({type:O.AsideWidth,payload:W})},[H.aside,F,W]),(0,i.jsxs)("div",{className:L()("app-aside aside",E),children:[(0,i.jsx)(K.Z,{children:(0,i.jsx)(p.Z,{header:I,resizeable:!0,className:"app-sidebar",children:C})}),R&&(0,i.jsx)(s,{className:"start-100 end-0"})]})}e.Toggle=s;var n=e,a,m=M.ZP.div(a||(a=v()([`
  --root-aside-width: `,`;
  --met-aside-width: `,`;
`])),function(r){return r.minimize?"100px":"".concat(r.width,"px")},function(r){return r.minimize?"100px":"".concat(r.width,"px")});function c(r){var E=r.children,I=r.className,C=D(),T=C.state.aside,R=T.minimize,B=T.width,W=(0,S.useCallback)(function(H){H.preventDefault()},[]);return(0,i.jsx)(m,{minimize:R,width:B,className:L()("micro-app-container page-full-content",I,{"aside-minimize":R}),onContextMenu:W,children:E})}function l(r){var E=r.children,I=r.className;return(0,i.jsx)(y,{children:(0,i.jsx)(c,{className:I,children:E})})}l.Sidebar=n;var b=l},42687:function(Q,$,t){t.d($,{$Y:function(){return _},BK:function(){return A},aM:function(){return N}});var k=t(5574),p=t.n(k),j=t(97857),h=t.n(j),v=t(62435),S=t(86074),x=v.createContext({getState:function(){return{routes:[]}},subscribe:function(){},dispatch:function(){}}),L=function(i,o){return o?o.type==="ASIDE_MINIMIZE"?h()(h()({},i),{},{aside:h()(h()({},i.aside),{},{minimize:!!o.payload})}):o.type==="ASIDE_WIDTH"?h()(h()({},i),{},{aside:h()(h()({},i.aside),{},{width:o.payload})}):o.type==="ASIDE_COLLAPSIBLE"?h()(h()({},i),{},{aside:h()(h()({},i.aside),{},{collapsible:o.payload})}):i:i},M=function(i){return h()({},i)};function U(d){var i=(0,v.useReducer)(L,d,M),o=p()(i,2),g=o[0],O=o[1],f=(0,v.useState)([]),y=p()(f,1),D=y[0],K=function(b){return function(){var r=D.indexOf(b);r>-1&&D.splice(r,1)}},s=(0,v.useCallback)(function(l){return D.unshift(l),K(l)},[D]),e=(0,v.useCallback)(function(){D.forEach(function(l){return l()})},[D]),n={getState:function(){return g},dispatch:O,subscribe:s},a=(0,v.useState)(n),m=p()(a,1),c=m[0];return(0,v.useEffect)(function(){c.getState=function(){return g},e()},[g]),c}var z=function(i,o){return i===o};function _(){var d=(0,v.useContext)(x),i=(0,v.useRef)({aside:{get state(){return d.getState().aside},width:function(g){d.dispatch({type:"ASIDE_WIDTH",payload:g})},minimize:function(g){d.dispatch({type:"ASIDE_MINIMIZE",payload:g})},collapsible:function(g){d.dispatch({type:"ASIDE_COLLAPSIBLE",payload:g})}}});return i.current}function u(d){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:z,o=(0,v.useContext)(x),g=(0,v.useReducer)(function(s){return s+1},0),O=p()(g,2),f=O[1],y=(0,v.useRef)(),D=d(o.getState());function K(){var s=d(o.getState());i(s,y.current)||(y.current=s,f())}return(0,v.useEffect)(function(){return o.subscribe(K)},[]),D}function A(d){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:z;return u(d,i)}function P(){var d=useContext(x);return d.dispatch}function N(d){var i=d.children,o=d.state,g=U(o);return(0,v.useMemo)(function(){return(0,S.jsx)(x.Provider,{value:g,children:i})},[i,g])}},96414:function(Q,$,t){t.d($,{dI:function(){return K},rB:function(){return D}});var k=t(5574),p=t.n(k),j=t(62435),h={USERS_LIST:"users-list"};function v(s){return s!=null&&s!==""}function S(s,e){var n=useState(s),a=_slicedToArray(n,2),m=a[0],c=a[1];return useEffect(function(){var l=setTimeout(function(){c(s)},e);return function(){clearTimeout(l)}},[s,e]),m}var x=t(72004),L=t.n(x),M=t(12444),U=t.n(M),z=t(9783),_=t.n(z),u=t(8606),A=L()(function s(){var e=this;U()(this,s),_()(this,"menu",null),_()(this,"element",null),_()(this,"getParamName",function(n){var a=document.body.hasAttribute("data-kt-name"),m=a?a+"_":"";return"kt_"+m+"theme_mode_"+n}),_()(this,"getMode",function(){var n,a=e.getParamName("value"),m=e.getMenuMode(),c="light";if(!localStorage)return c;var l=localStorage.getItem(a);if(l)return l;var b=(n=e.element)===null||n===void 0?void 0:n.getAttribute("data-theme");return b||(m?m==="system"?e.getSystemMode():m:c)}),_()(this,"setMode",function(n,a){var m,c,l,b=n,r=a;if(!(b!=="light"&&b!=="dark")){var E=e.getParamName("value"),I=e.getParamName("menu");r==="system"&&e.getSystemMode()!==b&&(b=e.getSystemMode()),r||(r=b);var C=((m=e.menu)===null||m===void 0?void 0:m.querySelector('[data-kt-element="mode"][data-kt-value="'+r+'"]'))||null;(c=e.element)===null||c===void 0||c.setAttribute("data-kt-theme-mode-switching","true"),(l=e.element)===null||l===void 0||l.setAttribute("data-theme",b);var T=e;setTimeout(function(){var R;(R=T.element)===null||R===void 0||R.removeAttribute("data-kt-theme-mode-switching")},300),localStorage&&localStorage.setItem(E,b),C&&localStorage&&(localStorage.setItem(I,r),e.setActiveMenuItem(C)),e.flipImages()}}),_()(this,"getMenuMode",function(){var n,a=e.getParamName("menu"),m=(n=e.menu)===null||n===void 0?void 0:n.querySelector('.active[data-kt-element="mode"]'),c=m==null?void 0:m.getAttribute("data-kt-value");if(c)return c;if(!a)return"";var l=localStorage?localStorage.getItem(a):null;return l||""}),_()(this,"getSystemMode",function(){return window.matchMedia("(prefers-color-scheme: dark)")?"dark":"light"}),_()(this,"initMode",function(){e.setMode(e.getMode(),e.getMenuMode()),e.element&&u.EventHandlerUtil.trigger(e.element,"kt.thememode.init")}),_()(this,"setActiveMenuItem",function(n){var a,m=e.getParamName("menu"),c=n.getAttribute("data-kt-value"),l=(a=e.menu)===null||a===void 0?void 0:a.querySelector('.active[data-kt-element="mode"]');l&&l.classList.remove("active"),n.classList.add("active"),localStorage&&c&&m&&localStorage.setItem(m,c)}),_()(this,"handleMenu",function(){var n;(n=e.menu)===null||n===void 0||(n=n.querySelectorAll('[data-kt-element="mode"]'))===null||n===void 0||n.forEach(function(a){a.addEventListener("click",function(m){m.preventDefault();var c=a.getAttribute("data-kt-value"),l=c==="system"?e.getSystemMode():c;l&&e.setMode(l,c)})})}),_()(this,"flipImages",function(){var n;(n=document.querySelectorAll("[data-kt-img-dark]"))===null||n===void 0||n.forEach(function(a){a.tagName==="IMG"?e.getMode()==="dark"&&a.hasAttribute("data-kt-img-dark")?(a.setAttribute("data-kt-img-light",a.getAttribute("src")||""),a.setAttribute("src",a.getAttribute("data-kt-img-dark")||"")):e.getMode()==="light"&&a.hasAttribute("data-kt-img-light")&&(a.setAttribute("data-kt-img-dark",a.getAttribute("src")||""),a.setAttribute("src",a.getAttribute("data-kt-img-light")||"")):e.getMode()==="dark"&&a.hasAttribute("data-kt-img-dark")?(a.setAttribute("data-kt-img-light",a.getAttribute("src")||""),a.style.backgroundImage="url('"+a.getAttribute("data-kt-img-dark")+"')"):e.getMode()==="light"&&a.hasAttribute("data-kt-img-light")&&(a.setAttribute("data-kt-img-dark",a.getAttribute("src")||""),a.style.backgroundImage="url('"+a.getAttribute("data-kt-img-light")+"')")})}),_()(this,"on",function(n,a){if(e.element)return u.EventHandlerUtil.on(e.element,n,a)}),_()(this,"off",function(n,a){if(e.element)return u.EventHandlerUtil.off(e.element,n,a)}),_()(this,"init",function(){e.menu=document.querySelector('[data-kt-element="theme-mode-menu"]'),e.element=document.documentElement,e.initMode(),e.menu&&e.handleMenu()})}),P=new A,N=t(86074),d=P.getSystemMode(),i=function(e){var n=e!=="system"?e:d,a="/media/patterns/header-bg"+(n==="light"?".jpg":"-dark.png");document.body.style.backgroundImage='url("'.concat(toAbsoluteUrl(a),'")')},o="kt_theme_mode_value",g="kt_theme_mode_menu",O=function(e){if(!localStorage)return"light";var n=localStorage.getItem(e);return!n||n==="light"?"light":n==="dark"?"dark":"system"},f={mode:O(o),menuMode:O(g),updateMode:function(e){},updateMenuMode:function(e){}},y=(0,j.createContext)({mode:f.mode,menuMode:f.menuMode,updateMode:function(e){},updateMenuMode:function(e){}}),D=function(){return(0,j.useContext)(y)},K=function(e){var n=e.children,a=(0,j.useState)(f.mode),m=p()(a,2),c=m[0],l=m[1],b=(0,j.useState)(f.menuMode),r=p()(b,2),E=r[0],I=r[1],C=function(B){var W=B==="system"?d:B;l(W),localStorage&&localStorage.setItem(o,W),document.documentElement.setAttribute("data-theme",W),P.init()},T=function(B){I(B),localStorage&&localStorage.setItem(g,B)};return(0,j.useEffect)(function(){C(c),T(E)},[]),(0,N.jsx)(y.Provider,{value:{mode:c,menuMode:E,updateMode:C,updateMenuMode:T},children:n})}},22337:function(Q,$,t){t.r($);var k=t(62435),p=t(96974),j=t(12845),h=t(70844),v=t(51253),S=t(13757),x=t(12708),L=t(58795),M=t(86074);function U(u,A){if(u.type==="SECTION")return(0,M.jsx)(S.Menu.Section,{children:u.name},u.id);if(u.type==="URL")return(0,M.jsx)(S.Menu.Item,{as:j.Link,bullet:!0,icon:u.icon,title:u.name,url:(0,p.Gn)(u.path,A)},u.id);if(u.type==="SEPARATOR")return(0,M.jsx)(S.Menu.Separator,{className:"my-1"},u.id);if(u.type==="MENU")return(0,M.jsx)(S.Menu.SubMenu,{bullet:!0,icon:u.icon,title:u.name,children:(u.children||[]).map(function(P){return U(P,A)})},u.id);throw new Error("\u4E0D\u652F\u6301\u7684 MenuType"+u.type)}var z=[];function _(u){var A,P=u.menu,N=(P==null?void 0:P.children)||z,d=(0,p.TH)(),i=(0,k.useMemo)(function(){return(0,h.nG)(d.pathname,N,!0)},[N,d.pathname]),o=(0,p.bS)("/organizations/:id/settings"),g=(0,L.Tk)({variables:{id:o==null?void 0:o.params.id},fetchPolicy:"cache-and-network"}),O=g.data,f=O==null?void 0:O.organization;return(0,M.jsxs)(v.GP,{children:[(0,M.jsxs)("div",{className:"mt-5 px-10 pt-5 mb-6 d-flex align-items-center",children:[(0,M.jsx)(S.Symbol.Avatar,{size:50,className:"me-5",src:(0,x.Fz)(f==null||(A=f.logo)===null||A===void 0?void 0:A.id,{size:"300x300"}),alt:f==null?void 0:f.name}),(0,M.jsxs)("div",{className:"d-flex flex-column",children:[(0,M.jsx)("div",{className:"fw-bolder d-flex align-items-center fs-5",children:f==null?void 0:f.name}),(0,M.jsx)("a",{href:"#",className:"fw-bold text-muted text-hover-primary fs-7",children:f==null?void 0:f.code})]})]}),(0,M.jsx)(S.Menu,{className:"menu-fit menu-title-gray-600 menu-icon-gray-400 menu-state-primary menu-state-icon-primary menu-state-bullet-primary menu-arrow-gray-500 fw-bold fs-6 px-6 pb-6 my-5 my-lg-0",selectedKeys:i.map(function(y){return y.key}),children:N.filter(function(y){return!y.hideInMenu}).map(function(y){return U(y,(o==null?void 0:o.params)||{id:"id"})})})]})}$.default=_},58795:function(Q,$,t){t.d($,{RE:function(){return g},Tk:function(){return N},ry:function(){return P},x:function(){return f}});var k=t(97857),p=t.n(k),j=t(68400),h=t.n(j),v=t(75063),S=t(37887),x=t(50319),L,M,U,z,_,u={},A=(0,v.Ps)(L||(L=h()([`
    fragment OrganizationProfile on Organization {
  id
  code
  name
  logo
  description
  email
  url
  location {
    province
    city
    district
    street
  }
}
    `]))),P=(0,v.Ps)(M||(M=h()([`
    query organization($id: ID!) {
  organization(id: $id) {
    ...OrganizationProfile
  }
}
    `,""])),A);function N(e){var n=p()(p()({},u),e);return S.a(P,n)}function d(e){var n=_objectSpread(_objectSpread({},u),e);return Apollo.useLazyQuery(P,n)}function i(e){var n=_objectSpread(_objectSpread({},u),e);return Apollo.useSuspenseQuery(P,n)}var o=(0,v.Ps)(U||(U=h()([`
    mutation updateOrganizationProfile($id: ID!, $input: UpdateOrganizationProfileUpdateInput!) {
  updateOrganizationProfile(id: $id, input: $input) {
    ...OrganizationProfile
  }
}
    `,""])),A);function g(e){var n=p()(p()({},u),e);return x.D(o,n)}var O=(0,v.Ps)(z||(z=h()([`
    mutation renameOrganizationCode($id: ID!, $code: String!) {
  renameOrganizationCode(id: $id, code: $code) {
    ...OrganizationProfile
  }
}
    `,""])),A);function f(e){var n=p()(p()({},u),e);return x.D(O,n)}var y=(0,v.Ps)(_||(_=h()([`
    query permissionsConnection($where: PermissionWhereInput, $page: Int, $pageSize: Int, $orderBy: OrderBy = "createdAt_desc") {
  total: permissionsConnection(pageSize: 1) {
    totalCount
  }
  connection: permissionsConnection(
    where: $where
    page: $page
    pageSize: $pageSize
    orderBy: $orderBy
  ) {
    totalPage
    pageSize
    current: currentPage
    total: totalCount
    edges {
      node {
        id
      }
    }
  }
}
    `])));function D(e){var n=_objectSpread(_objectSpread({},u),e);return Apollo.useQuery(y,n)}function K(e){var n=_objectSpread(_objectSpread({},u),e);return Apollo.useLazyQuery(y,n)}function s(e){var n=_objectSpread(_objectSpread({},u),e);return Apollo.useSuspenseQuery(y,n)}}}]);

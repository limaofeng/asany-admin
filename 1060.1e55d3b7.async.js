(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[1060],{51060:function(Ne,q,x){"use strict";x.r(q),x.d(q,{default:function(){return Ae}});var de=x(86582),he=x(93224),Z=x(2824),G=x(3182),fe=x(94043),k=x.n(fe),A=x(67294),me=Object.defineProperty,H=Object.getOwnPropertySymbols,ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,ne=(d,s,l)=>s in d?me(d,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):d[s]=l,T=(d,s)=>{for(var l in s||(s={}))ee.call(s,l)&&ne(d,l,s[l]);if(H)for(var l of H(s))te.call(s,l)&&ne(d,l,s[l]);return d},X=(d,s)=>{var l={};for(var a in d)ee.call(d,a)&&s.indexOf(a)<0&&(l[a]=d[a]);if(d!=null&&H)for(var a of H(d))s.indexOf(a)<0&&te.call(d,a)&&(l[a]=d[a]);return l};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var z;(d=>{const s=class{constructor(e,t,n,r){if(this.version=e,this.errorCorrectionLevel=t,this.modules=[],this.isFunction=[],e<s.MIN_VERSION||e>s.MAX_VERSION)throw"Version value out of range";if(r<-1||r>7)throw"Mask value out of range";this.size=e*4+17;let i=[];for(let u=0;u<this.size;u++)i.push(!1);for(let u=0;u<this.size;u++)this.modules.push(i.slice()),this.isFunction.push(i.slice());this.drawFunctionPatterns();const o=this.addEccAndInterleave(n);if(this.drawCodewords(o),r==-1){let u=1e9;for(let C=0;C<8;C++){this.applyMask(C),this.drawFormatBits(C);const v=this.getPenaltyScore();v<u&&(r=C,u=v),this.applyMask(C)}}m(0<=r&&r<=7),this.mask=r,this.applyMask(r),this.drawFormatBits(r),this.isFunction=[]}static encodeText(e,t){const n=d.QrSegment.makeSegments(e);return s.encodeSegments(n,t)}static encodeBinary(e,t){const n=d.QrSegment.makeBytes(e);return s.encodeSegments([n],t)}static encodeSegments(e,t,n=1,r=40,i=-1,o=!0){if(!(s.MIN_VERSION<=n&&n<=r&&r<=s.MAX_VERSION)||i<-1||i>7)throw"Invalid value";let u,C;for(u=n;;u++){const f=s.getNumDataCodewords(u,t)*8,R=w.getTotalBits(e,u);if(R<=f){C=R;break}if(u>=r)throw"Data too long"}for(const f of[s.Ecc.MEDIUM,s.Ecc.QUARTILE,s.Ecc.HIGH])o&&C<=s.getNumDataCodewords(u,f)*8&&(t=f);let v=[];for(const f of e){a(f.mode.modeBits,4,v),a(f.numChars,f.mode.numCharCountBits(u),v);for(const R of f.getData())v.push(R)}m(v.length==C);const M=s.getNumDataCodewords(u,t)*8;m(v.length<=M),a(0,Math.min(4,M-v.length),v),a(0,(8-v.length%8)%8,v),m(v.length%8==0);for(let f=236;v.length<M;f^=236^17)a(f,8,v);let P=[];for(;P.length*8<v.length;)P.push(0);return v.forEach((f,R)=>P[R>>>3]|=f<<7-(R&7)),new s(u,t,P,i)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let n=0;n<this.size;n++)this.setFunctionModule(6,n,n%2==0),this.setFunctionModule(n,6,n%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let n=0;n<t;n++)for(let r=0;r<t;r++)n==0&&r==0||n==0&&r==t-1||n==t-1&&r==0||this.drawAlignmentPattern(e[n],e[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let n=t;for(let i=0;i<10;i++)n=n<<1^(n>>>9)*1335;const r=(t<<10|n)^21522;m(r>>>15==0);for(let i=0;i<=5;i++)this.setFunctionModule(8,i,h(r,i));this.setFunctionModule(8,7,h(r,6)),this.setFunctionModule(8,8,h(r,7)),this.setFunctionModule(7,8,h(r,8));for(let i=9;i<15;i++)this.setFunctionModule(14-i,8,h(r,i));for(let i=0;i<8;i++)this.setFunctionModule(this.size-1-i,8,h(r,i));for(let i=8;i<15;i++)this.setFunctionModule(8,this.size-15+i,h(r,i));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let n=0;n<12;n++)e=e<<1^(e>>>11)*7973;const t=this.version<<12|e;m(t>>>18==0);for(let n=0;n<18;n++){const r=h(t,n),i=this.size-11+n%3,o=Math.floor(n/3);this.setFunctionModule(i,o,r),this.setFunctionModule(o,i,r)}}drawFinderPattern(e,t){for(let n=-4;n<=4;n++)for(let r=-4;r<=4;r++){const i=Math.max(Math.abs(r),Math.abs(n)),o=e+r,u=t+n;0<=o&&o<this.size&&0<=u&&u<this.size&&this.setFunctionModule(o,u,i!=2&&i!=4)}}drawAlignmentPattern(e,t){for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)this.setFunctionModule(e+r,t+n,Math.max(Math.abs(r),Math.abs(n))!=1)}setFunctionModule(e,t,n){this.modules[t][e]=n,this.isFunction[t][e]=!0}addEccAndInterleave(e){const t=this.version,n=this.errorCorrectionLevel;if(e.length!=s.getNumDataCodewords(t,n))throw"Invalid argument";const r=s.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][t],i=s.ECC_CODEWORDS_PER_BLOCK[n.ordinal][t],o=Math.floor(s.getNumRawDataModules(t)/8),u=r-o%r,C=Math.floor(o/r);let v=[];const M=s.reedSolomonComputeDivisor(i);for(let f=0,R=0;f<r;f++){let F=e.slice(R,R+C-i+(f<u?0:1));R+=F.length;const Q=s.reedSolomonComputeRemainder(F,M);f<u&&F.push(0),v.push(F.concat(Q))}let P=[];for(let f=0;f<v[0].length;f++)v.forEach((R,F)=>{(f!=C-i||F>=u)&&P.push(R[f])});return m(P.length==o),P}drawCodewords(e){if(e.length!=Math.floor(s.getNumRawDataModules(this.version)/8))throw"Invalid argument";let t=0;for(let n=this.size-1;n>=1;n-=2){n==6&&(n=5);for(let r=0;r<this.size;r++)for(let i=0;i<2;i++){const o=n-i,C=(n+1&2)==0?this.size-1-r:r;!this.isFunction[C][o]&&t<e.length*8&&(this.modules[C][o]=h(e[t>>>3],7-(t&7)),t++)}}m(t==e.length*8)}applyMask(e){if(e<0||e>7)throw"Mask value out of range";for(let t=0;t<this.size;t++)for(let n=0;n<this.size;n++){let r;switch(e){case 0:r=(n+t)%2==0;break;case 1:r=t%2==0;break;case 2:r=n%3==0;break;case 3:r=(n+t)%3==0;break;case 4:r=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:r=n*t%2+n*t%3==0;break;case 6:r=(n*t%2+n*t%3)%2==0;break;case 7:r=((n+t)%2+n*t%3)%2==0;break;default:throw"Unreachable"}!this.isFunction[t][n]&&r&&(this.modules[t][n]=!this.modules[t][n])}}getPenaltyScore(){let e=0;for(let i=0;i<this.size;i++){let o=!1,u=0,C=[0,0,0,0,0,0,0];for(let v=0;v<this.size;v++)this.modules[i][v]==o?(u++,u==5?e+=s.PENALTY_N1:u>5&&e++):(this.finderPenaltyAddHistory(u,C),o||(e+=this.finderPenaltyCountPatterns(C)*s.PENALTY_N3),o=this.modules[i][v],u=1);e+=this.finderPenaltyTerminateAndCount(o,u,C)*s.PENALTY_N3}for(let i=0;i<this.size;i++){let o=!1,u=0,C=[0,0,0,0,0,0,0];for(let v=0;v<this.size;v++)this.modules[v][i]==o?(u++,u==5?e+=s.PENALTY_N1:u>5&&e++):(this.finderPenaltyAddHistory(u,C),o||(e+=this.finderPenaltyCountPatterns(C)*s.PENALTY_N3),o=this.modules[v][i],u=1);e+=this.finderPenaltyTerminateAndCount(o,u,C)*s.PENALTY_N3}for(let i=0;i<this.size-1;i++)for(let o=0;o<this.size-1;o++){const u=this.modules[i][o];u==this.modules[i][o+1]&&u==this.modules[i+1][o]&&u==this.modules[i+1][o+1]&&(e+=s.PENALTY_N2)}let t=0;for(const i of this.modules)t=i.reduce((o,u)=>o+(u?1:0),t);const n=this.size*this.size,r=Math.ceil(Math.abs(t*20-n*10)/n)-1;return m(0<=r&&r<=9),e+=r*s.PENALTY_N4,m(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(this.version==1)return[];{const e=Math.floor(this.version/7)+2,t=this.version==32?26:Math.ceil((this.version*4+4)/(e*2-2))*2;let n=[6];for(let r=this.size-7;n.length<e;r-=t)n.splice(1,0,r);return n}}static getNumRawDataModules(e){if(e<s.MIN_VERSION||e>s.MAX_VERSION)throw"Version number out of range";let t=(16*e+128)*e+64;if(e>=2){const n=Math.floor(e/7)+2;t-=(25*n-10)*n-55,e>=7&&(t-=36)}return m(208<=t&&t<=29648),t}static getNumDataCodewords(e,t){return Math.floor(s.getNumRawDataModules(e)/8)-s.ECC_CODEWORDS_PER_BLOCK[t.ordinal][e]*s.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw"Degree out of range";let t=[];for(let r=0;r<e-1;r++)t.push(0);t.push(1);let n=1;for(let r=0;r<e;r++){for(let i=0;i<t.length;i++)t[i]=s.reedSolomonMultiply(t[i],n),i+1<t.length&&(t[i]^=t[i+1]);n=s.reedSolomonMultiply(n,2)}return t}static reedSolomonComputeRemainder(e,t){let n=t.map(r=>0);for(const r of e){const i=r^n.shift();n.push(0),t.forEach((o,u)=>n[u]^=s.reedSolomonMultiply(o,i))}return n}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw"Byte out of range";let n=0;for(let r=7;r>=0;r--)n=n<<1^(n>>>7)*285,n^=(t>>>r&1)*e;return m(n>>>8==0),n}finderPenaltyCountPatterns(e){const t=e[1];m(t<=this.size*3);const n=t>0&&e[2]==t&&e[3]==t*3&&e[4]==t&&e[5]==t;return(n&&e[0]>=t*4&&e[6]>=t?1:0)+(n&&e[6]>=t*4&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,n){return e&&(this.finderPenaltyAddHistory(t,n),t=0),t+=this.size,this.finderPenaltyAddHistory(t,n),this.finderPenaltyCountPatterns(n)}finderPenaltyAddHistory(e,t){t[0]==0&&(e+=this.size),t.pop(),t.unshift(e)}};let l=s;l.MIN_VERSION=1,l.MAX_VERSION=40,l.PENALTY_N1=3,l.PENALTY_N2=3,l.PENALTY_N3=40,l.PENALTY_N4=10,l.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],l.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],d.QrCode=l;function a(e,t,n){if(t<0||t>31||e>>>t!=0)throw"Value out of range";for(let r=t-1;r>=0;r--)n.push(e>>>r&1)}function h(e,t){return(e>>>t&1)!=0}function m(e){if(!e)throw"Assertion error"}const g=class{constructor(e,t,n){if(this.mode=e,this.numChars=t,this.bitData=n,t<0)throw"Invalid argument";this.bitData=n.slice()}static makeBytes(e){let t=[];for(const n of e)a(n,8,t);return new g(g.Mode.BYTE,e.length,t)}static makeNumeric(e){if(!g.isNumeric(e))throw"String contains non-numeric characters";let t=[];for(let n=0;n<e.length;){const r=Math.min(e.length-n,3);a(parseInt(e.substr(n,r),10),r*3+1,t),n+=r}return new g(g.Mode.NUMERIC,e.length,t)}static makeAlphanumeric(e){if(!g.isAlphanumeric(e))throw"String contains unencodable characters in alphanumeric mode";let t=[],n;for(n=0;n+2<=e.length;n+=2){let r=g.ALPHANUMERIC_CHARSET.indexOf(e.charAt(n))*45;r+=g.ALPHANUMERIC_CHARSET.indexOf(e.charAt(n+1)),a(r,11,t)}return n<e.length&&a(g.ALPHANUMERIC_CHARSET.indexOf(e.charAt(n)),6,t),new g(g.Mode.ALPHANUMERIC,e.length,t)}static makeSegments(e){return e==""?[]:g.isNumeric(e)?[g.makeNumeric(e)]:g.isAlphanumeric(e)?[g.makeAlphanumeric(e)]:[g.makeBytes(g.toUtf8ByteArray(e))]}static makeEci(e){let t=[];if(e<0)throw"ECI assignment value out of range";if(e<1<<7)a(e,8,t);else if(e<1<<14)a(2,2,t),a(e,14,t);else if(e<1e6)a(6,3,t),a(e,21,t);else throw"ECI assignment value out of range";return new g(g.Mode.ECI,0,t)}static isNumeric(e){return g.NUMERIC_REGEX.test(e)}static isAlphanumeric(e){return g.ALPHANUMERIC_REGEX.test(e)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let n=0;for(const r of e){const i=r.mode.numCharCountBits(t);if(r.numChars>=1<<i)return Infinity;n+=4+i+r.bitData.length}return n}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let n=0;n<e.length;n++)e.charAt(n)!="%"?t.push(e.charCodeAt(n)):(t.push(parseInt(e.substr(n+1,2),16)),n+=2);return t}};let w=g;w.NUMERIC_REGEX=/^[0-9]*$/,w.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,w.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",d.QrSegment=w})(z||(z={})),(d=>{let s;(l=>{const a=class{constructor(m,g){this.ordinal=m,this.formatBits=g}};let h=a;h.LOW=new a(0,1),h.MEDIUM=new a(1,0),h.QUARTILE=new a(2,3),h.HIGH=new a(3,2),l.Ecc=h})(s=d.QrCode||(d.QrCode={}))})(z||(z={})),(d=>{let s;(l=>{const a=class{constructor(m,g){this.modeBits=m,this.numBitsCharCount=g}numCharCountBits(m){return this.numBitsCharCount[Math.floor((m+7)/17)]}};let h=a;h.NUMERIC=new a(1,[10,12,14]),h.ALPHANUMERIC=new a(2,[9,11,13]),h.BYTE=new a(4,[8,16,16]),h.KANJI=new a(8,[8,10,12]),h.ECI=new a(7,[0,0,0]),l.Mode=h})(s=d.QrSegment||(d.QrSegment={}))})(z||(z={}));var L=z;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var re={L:L.QrCode.Ecc.LOW,M:L.QrCode.Ecc.MEDIUM,Q:L.QrCode.Ecc.QUARTILE,H:L.QrCode.Ecc.HIGH},W={size:128,level:"L",bgColor:"#FFFFFF",fgColor:"#000000",includeMargin:!1},K=4,ge=.1;function se(d,s=0){const l=[];return d.forEach(function(a,h){let m=null;a.forEach(function(g,w){if(!g&&m!==null){l.push(`M${m+s} ${h+s}h${w-m}v1H${m+s}z`),m=null;return}if(w===a.length-1){if(!g)return;m===null?l.push(`M${w+s},${h+s} h1v1H${w+s}z`):l.push(`M${m+s},${h+s} h${w+1-m}v1H${m+s}z`);return}g&&m===null&&(m=w)})}),l.join("")}function ie(d,s){return d.slice().map((l,a)=>a<s.y||a>=s.y+s.h?l:l.map((h,m)=>m<s.x||m>=s.x+s.w?h:!1))}function ae(d,s){const{imageSettings:l,size:a,includeMargin:h}=d;if(l==null)return null;const m=h?K:0,g=s.length+m*2,w=Math.floor(a*ge),e=g/a,t=(l.width||w)*e,n=(l.height||w)*e,r=l.x==null?s.length/2-t/2:l.x*e,i=l.y==null?s.length/2-n/2:l.y*e;let o=null;if(l.excavate){let u=Math.floor(r),C=Math.floor(i),v=Math.ceil(t+r-u),M=Math.ceil(n+i-C);o={x:u,y:C,w:v,h:M}}return{x:r,y:i,h:n,w:t,excavation:o}}var ve=function(){try{new Path2D().addPath(new Path2D)}catch(d){return!1}return!0}();function V(d){const s=(0,A.useRef)(null),l=(0,A.useRef)(null);function a(){const{value:M,size:P,level:f,bgColor:R,fgColor:F,includeMargin:Q}=d;if(s.current!=null){const U=s.current,D=U.getContext("2d");if(!D)return;let I=L.QrCode.encodeText(M,re[f]).getModules();const j=Q?K:0,$=I.length+j*2,p=ae(d,I),E=l.current,y=p!=null&&E!==null&&E.complete&&E.naturalHeight!==0&&E.naturalWidth!==0;y&&p.excavation!=null&&(I=ie(I,p.excavation));const S=window.devicePixelRatio||1;U.height=U.width=P*S;const B=P/$*S;D.scale(B,B),D.fillStyle=R,D.fillRect(0,0,$,$),D.fillStyle=F,ve?D.fill(new Path2D(se(I,j))):I.forEach(function(b,Y){b.forEach(function(ce,O){ce&&D.fillRect(O+j,Y+j,1,1)})}),y&&D.drawImage(E,p.x+j,p.y+j,p.w,p.h)}}(0,A.useEffect)(()=>{a()});const h=d,{value:m,size:g,level:w,bgColor:e,fgColor:t,style:n,includeMargin:r,imageSettings:i}=h,o=X(h,["value","size","level","bgColor","fgColor","style","includeMargin","imageSettings"]),u=T({height:g,width:g},n);let C=null,v=i==null?void 0:i.src;return v!=null&&(C=A.createElement("img",{src:v,key:v,style:{display:"none"},onLoad:()=>{a()},ref:l})),A.createElement(A.Fragment,null,A.createElement("canvas",T({style:u,height:g,width:g,ref:s},o)),C)}V.defaultProps=W;function oe(d){const s=d,{value:l,size:a,level:h,bgColor:m,fgColor:g,includeMargin:w,imageSettings:e}=s,t=X(s,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let n=L.QrCode.encodeText(l,re[h]).getModules();const r=w?K:0,i=n.length+r*2,o=ae(d,n);let u=null;e!=null&&o!=null&&(o.excavation!=null&&(n=ie(n,o.excavation)),u=A.createElement("image",{xlinkHref:e.src,height:o.h,width:o.w,x:o.x+r,y:o.y+r,preserveAspectRatio:"none"}));const C=se(n,r);return A.createElement("svg",T({shapeRendering:"crispEdges",height:a,width:a,viewBox:`0 0 ${i} ${i}`},t),A.createElement("path",{fill:m,d:`M0,0 h${i}v${i}H0z`}),A.createElement("path",{fill:g,d:C}),u)}oe.defaultProps=W;var Ce=d=>{const s=d,{renderAs:l}=s,a=X(s,["renderAs"]),h=l==="svg"?oe:V;return A.createElement(h,T({},a))};Ce.defaultProps=T({renderAs:"canvas"},W);var _=x(73727),pe=x(80129),le=x.n(pe),ue=x(28865),J=x(81303),Ee=x(50480),we=x(75468),N=x(69851),c=x(85893);function Me(d){var s=d.data,l=d.history,a=d.onDelete,h=d.onShowQRCode,m=(0,A.useCallback)(function(){var w=(0,G.Z)(k().mark(function e(t){var n,r;return k().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n="\u786E\u5B9A\u5220\u9664\u6D3B\u52A8 \u201C".concat(t.name,"\u201D \u5417\uFF1F"),o.next=3,N.u_.confirm({title:"\u786E\u5B9A\u5220\u9664",content:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{className:"tip-confirm",children:n}),(0,c.jsx)("p",{children:"\u5220\u9664\u7684\u64CD\u4F5C\u4E0D\u53EF\u9006,\u8BF7\u8C28\u614E\u64CD\u4F5C"})]}),okClassName:"btn-danger",okText:"\u5220\u9664"});case 3:if(r=o.sent,r.isConfirmed){o.next=6;break}return o.abrupt("return");case 6:return o.next=8,a(t.id);case 8:N.FN.success("\u6D3B\u52A8 \u201C".concat(t.name,"\u201D \u5220\u9664\u6210\u529F"),2e3,{placement:"bottom-start",progressBar:!0});case 9:case"end":return o.stop()}},e)}));return function(e){return w.apply(this,arguments)}}(),[a]),g=(0,A.useCallback)(function(w){w.key=="view"?l.push("/website/landing/pages/".concat(s.id)):w.key=="delete"?m(s):w.key=="preview"&&h("https://wmf.app.asany.cn/lps/"+s.id)},[s,m,l,h]);return(0,c.jsx)(N.Lt,{overlay:(0,c.jsxs)(N.v2,{onClick:g,className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold fs-8 w-125px py-4",children:[(0,c.jsx)(N.v2.Item,{className:"px-3",children:"\u7F16\u8F91"},"view"),(0,c.jsx)(N.v2.Separator,{}),(0,c.jsx)(N.v2.Item,{className:"px-3",children:"\u9884\u89C8"},"preview"),(0,c.jsx)(N.v2.Separator,{}),(0,c.jsx)(N.v2.Item,{className:"px-3 actions-delete",children:"\u5220\u9664"},"delete")]}),placement:"bottomRight",children:(0,c.jsxs)(N.zx,{className:"fs-8",variant:"light",activeColor:"light-primary",children:["\u64CD\u4F5C",(0,c.jsx)(ue.JO,{className:"svg-icon-5 ms-2 me-n1",name:"Duotune/arr072"})]})})}function ye(d){var s,l,a=d.history,h=d.location,m=(0,A.useState)(),g=(0,Z.Z)(m,2),w=g[0],e=g[1],t=(0,A.useCallback)(function(p){e(p)},[]),n=(0,A.useCallback)(function(){e(void 0)},[]),r=(0,A.useMemo)(function(){var p=d.location.query,E=p.q,y=(0,he.Z)(p,["q"]);return E&&(y.filter={name_contains:E}),y},[d.location]),i=(0,A.useMemo)(function(){if(!r.orderBy)return{order:"descend",field:"createdAt"};var p=r.orderBy.split("_"),E=(0,Z.Z)(p,2),y=E[0],S=E[1];return{order:S=="desc"?"descend":"ascend",field:y}},[r.orderBy]),o=(0,J.hD)({refetchQueries:[J.MZ]}),u=(0,Z.Z)(o,1),C=u[0],v=(0,J.gr)({fetchPolicy:"cache-and-network",variables:r}),M=v.data,P=v.loading,f=v.previousData,R=(0,A.useMemo)(function(){return P?(f==null?void 0:f.total.totalCount)||0:(M==null?void 0:M.total.totalCount)||0},[M==null?void 0:M.total.totalCount,P,f==null?void 0:f.total]),F=(0,A.useMemo)(function(){return P?(f==null?void 0:f.landingPages)||{total:0,current:1}:(M==null?void 0:M.landingPages)||{total:0,current:1}},[M==null?void 0:M.landingPages,P,f==null?void 0:f.landingPages]),Q=(0,A.useMemo)(function(){var p;if(P){var E;return((f==null||(E=f.landingPages)===null||E===void 0?void 0:E.edges)||[]).map(function(y){return y.node})}return((M==null||(p=M.landingPages)===null||p===void 0?void 0:p.edges)||[]).map(function(y){return y.node})},[M==null?void 0:M.landingPages,P,f==null?void 0:f.landingPages]),U=(0,A.useCallback)(function(p){a.replace(h.pathname+"?"+le().stringify({q:p}))},[a,h.pathname]),D=(0,A.useCallback)(function(p,E,y){var S,B={};if((S=r.filter)!==null&&S!==void 0&&S.name_contains){var b;B.q=(b=r.filter)===null||b===void 0?void 0:b.name_contains}y&&(B.orderBy=y.field+"_"+(y.order=="ascend"?"asc":"desc")),B.page=p.current,a.replace(h.pathname+"?"+le().stringify(B))},[a,h.pathname,(s=r.filter)===null||s===void 0?void 0:s.name_contains]),I=(0,A.useCallback)((0,G.Z)(k().mark(function p(){var E,y,S,B,b,Y=arguments;return k().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:for(E=Y.length,y=new Array(E),S=0;S<E;S++)y[S]=Y[S];return O.next=3,C({variables:{ids:y}});case 3:return B=O.sent,b=B.data,O.abrupt("return",(b==null?void 0:b.deleteLandingPage)||0);case 6:case"end":return O.stop()}},p)})),[C]),j=(0,A.useCallback)(function(p){return(0,G.Z)(k().mark(function E(){var y,S;return k().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return y="\u786E\u5B9A\u5220\u9664\u9009\u4E2D\u7684, \u5171 ".concat(p.length," \u4E2A\u6D3B\u52A8\u5417\uFF1F"),b.next=3,N.u_.confirm({title:"\u786E\u5B9A\u5220\u9664",content:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{className:"tip-confirm",children:y}),(0,c.jsx)("p",{children:"\u5220\u9664\u7684\u64CD\u4F5C\u4E0D\u53EF\u9006,\u8BF7\u8C28\u614E\u64CD\u4F5C"})]}),okClassName:"btn-danger",okText:"\u5220\u9664"});case 3:if(S=b.sent,S.isConfirmed){b.next=6;break}return b.abrupt("return");case 6:return b.next=8,I.apply(void 0,(0,de.Z)(p));case 8:N.FN.success("\u6D3B\u52A8\u6279\u91CF\u5220\u9664\u6210\u529F",2e3,{placement:"bottom-start",progressBar:!0});case 9:case"end":return b.stop()}},E)}))},[I]),$=(0,A.useMemo)(function(){return function(p){return(0,c.jsx)("div",{children:(0,c.jsx)(N.zx,{color:"success",onClick:j(p),variant:!1,children:"\u6279\u91CF\u5220\u9664"})})}},[j]);return(0,c.jsxs)(we.v,{footer:!1,children:[(0,c.jsxs)("div",{className:"d-flex flex-wrap flex-stack pb-7",children:[(0,c.jsxs)("div",{className:"d-flex flex-wrap align-items-center",children:[(0,c.jsxs)("h3",{className:"fw-bolder me-5",children:["\u6D3B\u52A8 (",R,")"]}),(0,c.jsx)(N.II.Search,{onSearch:U,defaultValue:(l=r.filter)===null||l===void 0?void 0:l.name_contains,placeholder:"\u641C\u7D22",className:"border-body bg-body w-250px"})]}),(0,c.jsx)(Ee.Z,{children:(0,c.jsx)("div",{className:"d-flex my-0",children:(0,c.jsx)(N.zx,{as:_.Link,variant:"primary",to:"/website/landing/pages/new",children:"\u65B0\u589E\u6D3B\u52A8"})})})]}),!R&&!P?(0,c.jsx)(N.Zb,{className:"mb-5 mb-xl-10",children:(0,c.jsx)(N.HY,{title:"\u8FD8\u6CA1\u6709\u6D3B\u52A8",description:"\u9A6C\u4E0A\u6DFB\u52A0\u4E00\u4E2A\u6D3B\u52A8\u8BD5\u8BD5",image:"/assets/media/illustrations/sigma-1/4.png",children:(0,c.jsx)(N.zx,{as:_.Link,variant:"primary",to:"/website/landing/pages/new",children:"\u65B0\u5EFA\u6D3B\u52A8"})})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(N.Zb,{className:"mb-5 mb-xl-10",children:(0,c.jsx)(N.Zb.Body,{children:(0,c.jsx)(N.bH,{overlayClassName:"bg-white bg-opacity-25",loading:P,children:(0,c.jsx)(N.iA,{hover:!0,rowKey:"id",noRowsRenderer:function(){return(0,c.jsx)(N.HY,{description:"\u5217\u8868\u6570\u636E\u4E3A\u7A7A",image:"/assets/media/illustrations/sigma-1/5.png"})},rowSelection:{type:"checkbox",renderTitle:function(E){return(0,c.jsxs)(c.Fragment,{children:["\u5DF2\u9009\u4E2D",(0,c.jsx)("span",{className:"mx-2",children:E}),"\u4E2A\u6D3B\u52A8"]})},toolbar:$},columns:[{key:"name",title:"\u540D\u79F0",sorter:!0,sortOrder:i.field=="name"?i.order:void 0,render:function(E,y){return(0,c.jsx)("div",{className:"ps-2",children:(0,c.jsx)(_.Link,{className:"text-gray-700",to:"/website/landing/pages/".concat(y.id),children:E})})}},{key:"stores",title:"\u95E8\u5E97",render:function(E){return(0,c.jsxs)("div",{className:"d-flex tw-truncate overflow-hidden pe-2",children:[(0,c.jsx)("span",{className:"tw-text-ellipsis tw-truncate overflow-hidden",children:E.map(function(y){return y.name}).join(",")}),(0,c.jsxs)("span",{children:["\u5171 ",E.length," \u5BB6\u95E8\u5E97"]})]})}},{key:"poster",title:"\u6D77\u62A5",className:"w-100px",render:function(E){return E!=null&&E.background?(0,c.jsx)("div",{className:"d-flex w-30px justify-content-center",children:(0,c.jsx)("img",{src:"//api.asany.cn"+"/preview/".concat(E.background.id),className:"h-30px w-20px"})}):(0,c.jsx)(ue.JO,{className:"svg-icon-2qx text-muted",name:"Bootstrap/file-image"})}},{key:"createdAt",title:"\u521B\u5EFA\u65F6\u95F4",className:"w-150px",sorter:!0,sortOrder:i.field=="createdAt"?i.order:void 0},{key:"actions",title:"\u64CD\u4F5C",className:"w-150px",render:function(E,y){return(0,c.jsx)(Me,{onDelete:I,onShowQRCode:t,history:d.history,data:y})}}],pagination:F,onChange:D,dataSource:Q})})})}),(0,c.jsxs)(N.u_,{title:"\u9884\u89C8\u4E8C\u7EF4\u7801",dialogClassName:"w-250px",onCancel:n,visible:!!w,okButtonProps:{style:{display:"none"}},children:[(0,c.jsx)("div",{className:"d-inline-block",children:!!w&&(0,c.jsx)(V,{size:200,value:w})}),(0,c.jsx)("span",{children:"\u4F7F\u7528\u624B\u673A\u626B\u7801\u4E8C\u7EF4\u7801\u9884\u89C8"})]})]})]})}var Ae=ye}}]);

var re=Object.prototype.hasOwnProperty;var J=Object.getOwnPropertySymbols,le=Object.prototype.propertyIsEnumerable;var U=Object.assign;var X=(b,C)=>{var t={};for(var v in b)re.call(b,v)&&C.indexOf(v)<0&&(t[v]=b[v]);if(b!=null&&J)for(var v of J(b))C.indexOf(v)<0&&le.call(b,v)&&(t[v]=b[v]);return t};(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[6030,3975],{33201:function(){},34106:function(b,C,t){"use strict";t.d(C,{GP:function(){return v.Z},Hk:function(){return o.ZP}});var v=t(48655),K=t(39981),o=t(21428),i=t(53851)},86328:function(b,C,t){"use strict";t.r(C),t.d(C,{default:function(){return ae}});var v=t(91220),K=t(86582),o=t(67294),i=t(28865),A=t(1861),m=t(7020),w=t(51615),M=t(14928),T=t(39428),W=t(3182),R=t(2824),L=t(94184),y=t.n(L),r=t(51186),B=t(54108),e=t(85893);function z(d){return["zip"].includes(d.extension)?(0,e.jsx)(i.ZP,{name:"Bootstrap/file-zip-fill",className:"svg-icon-2x"}):d.mimeType.startsWith("image/")?(0,e.jsx)(i.ZP,{name:"Bootstrap/file-image-fill",className:"svg-icon-2x"}):d.mimeType.startsWith("video/")?(0,e.jsx)(i.ZP,{name:"Bootstrap/file-play-fill",className:"svg-icon-2x"}):(0,e.jsx)(i.ZP,{name:"Bootstrap/file-post-fill",className:"svg-icon-2x"})}function k(d){var s=d.file,n=(0,w.k6)(),f=(0,m.tT)("cloud-drive.index",function(u){return u.api.base}),c=(0,m.tT)("cloud-drive.index",function(u){return u.api.upload}),N=(0,o.useCallback)(function(){c.cancel(s.id)},[c,s.id]),l=(0,o.useCallback)(function(){f.closeTransfers(),n.push("/drive/folders/".concat(s.result.parentFolder.id))},[f,s.result,n]),h=(0,o.useCallback)(function(){c.start(s.id)},[c,s.id]),E=(0,o.useCallback)(function(){c.restore(s.id)},[c,s.id]),p=(0,o.useCallback)(function(){c.pause(s.id)},[c,s.id]),P=(0,o.useCallback)(function(){c.delete(s.id)},[c,s.id]);return(0,e.jsxs)("li",{className:y()("file-item",{"file-item-uploaded":["completed","error"].includes(s.state)}),children:[(0,e.jsx)("div",{className:"file-icon",children:z(s)}),(0,e.jsxs)("div",{className:"file-details",children:[(0,e.jsx)("div",{className:"file-title",children:s.name}),(0,e.jsx)("div",{className:y()("file-transfer-progress progress",{"opacity-0":s.state=="completed"}),children:(0,e.jsx)(r.Ex,{color:"success",percent:s.progress})}),(0,e.jsxs)("div",{className:"file-status",children:[(0,e.jsx)("div",{className:"file-size",children:(0,B.jb)(s.size)}),s.state=="error"&&(0,e.jsx)("div",{className:"upload-error text-danger",children:"\u4E0A\u4F20\u51FA\u73B0\u9519\u8BEF!"}),!["completed","error"].includes(s.state)&&(0,e.jsx)("div",{className:"file-transfer-rate",children:s.progress==100?"\u7B49\u5F85\u5B8C\u6210...":!!s.uploadSpeed&&s.uploadSpeed+"/s"})]})]}),(0,e.jsxs)("div",{className:"file-actions",children:[s.state=="waiting"&&(0,e.jsx)(r.zx,{icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/clock",className:"svg-icon-4"})}),s.state=="uploading"&&(0,e.jsx)(r.zx,{onClick:p,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/pause",className:"svg-icon-4"})}),s.state=="paused"&&(0,e.jsx)(r.zx,{onClick:h,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/arrow-up-short",className:"svg-icon-4"})}),["canceled","error"].includes(s.state)&&(0,e.jsx)(r.zx,{onClick:E,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/arrow-counterclockwise",className:"svg-icon-4"})}),s.state=="completed"&&(0,e.jsx)(r.zx,{onClick:l,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/folder2",className:"svg-icon-6"})}),!["completed","canceled","error"].includes(s.state)&&(0,e.jsx)(r.zx,{onClick:N,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/x",className:"svg-icon-4"})}),["completed","canceled","error"].includes(s.state)&&(0,e.jsx)(r.zx,{onClick:P,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/eraser",className:"svg-icon-6"})})]})]},s.id)}function H(){var d=(0,m.tT)("cloud-drive.index",function(s){var n=s.state;return n.uploadFiles});return(0,e.jsx)(A.E,{className:y()("custom-scrollbar"),options:{scrollbars:{autoHide:"scroll"}},children:d.length?(0,e.jsx)("ul",{className:"transfer-file-list",children:d.map(function(s){return(0,e.jsx)(k,{file:s},s.id)})}):(0,e.jsxs)("div",{className:"transfer-list-empty",children:[(0,e.jsx)("img",{src:"/assets/media/illustrations/dozzy-1/4.png"}),(0,e.jsx)("span",{className:"empty-title",children:"\u6CA1\u6709\u4E0A\u4F20\u4EFB\u52A1"})]})})}function G(d){var s=d.file,n=(0,m.tT)("cloud-drive.index",function(p){return p.api.download}),f=(0,o.useCallback)(function(){n.cancel(s.id)},[n,s.id]),c=(0,o.useCallback)(function(){n.save(s.id),console.log("\u672C\u5730\u4E0B\u8F7D")},[n,s.id]),N=(0,o.useCallback)(function(){n.start(s.id)},[n,s.id]),l=(0,o.useCallback)(function(){n.restore(s.id)},[n,s.id]),h=(0,o.useCallback)(function(){n.pause(s.id)},[n,s.id]),E=(0,o.useCallback)(function(){n.delete(s.id)},[n,s.id]);return(0,e.jsxs)("li",{className:y()("file-item",{"file-item-download":["completed","error"].includes(s.state)}),children:[(0,e.jsx)("div",{className:"file-icon",children:z(s)}),(0,e.jsxs)("div",{className:"file-details",children:[(0,e.jsx)("div",{className:"file-title",children:s.name}),(0,e.jsx)("div",{className:y()("file-transfer-progress progress",{"opacity-0":s.state=="completed"}),children:(0,e.jsx)(r.Ex,{color:"primary",percent:s.progress})}),(0,e.jsxs)("div",{className:"file-status",children:[(0,e.jsx)("div",{className:"file-size",children:!!s.size&&(0,B.jb)(s.size)}),s.state=="error"&&(0,e.jsx)("div",{className:"upload-error text-danger",children:"\u4E0B\u8F7D\u51FA\u73B0\u9519\u8BEF!"}),!["completed","error"].includes(s.state)&&(0,e.jsx)("div",{className:"file-transfer-rate",children:s.progress==0||!s.size?"\u7B49\u5F85\u8D44\u6E90...":!!s.downloadSpeed&&s.downloadSpeed+"/s"})]})]}),(0,e.jsxs)("div",{className:"file-actions",children:[s.state=="waiting"&&(0,e.jsx)(r.zx,{icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/clock",className:"svg-icon-4"})}),s.state=="downloading"&&(0,e.jsx)(r.zx,{onClick:h,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/pause",className:"svg-icon-4"})}),s.state=="paused"&&(0,e.jsx)(r.zx,{onClick:N,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/arrow-down-short",className:"svg-icon-4"})}),["canceled","error"].includes(s.state)&&(0,e.jsx)(r.zx,{onClick:l,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/arrow-counterclockwise",className:"svg-icon-4"})}),s.state=="completed"&&(0,e.jsx)(r.zx,{onClick:c,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/download",className:"svg-icon-6"})}),!["completed","canceled","error"].includes(s.state)&&(0,e.jsx)(r.zx,{onClick:f,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/x",className:"svg-icon-4"})}),["completed","canceled","error"].includes(s.state)&&(0,e.jsx)(r.zx,{onClick:E,icon:(0,e.jsx)(i.ZP,{name:"Bootstrap/eraser",className:"svg-icon-6"})})]})]},s.id)}function Q(){var d=(0,m.tT)("cloud-drive.index",function(s){var n=s.state;return n.downloadFiles});return(0,e.jsx)(A.E,{className:y()("custom-scrollbar"),options:{scrollbars:{autoHide:"scroll"}},children:d.length?(0,e.jsx)("ul",{className:"transfer-file-list",children:d.map(function(s){return(0,e.jsx)(G,{file:s},s.id)})}):(0,e.jsxs)("div",{className:"transfer-list-empty",children:[(0,e.jsx)("img",{src:"/assets/media/illustrations/dozzy-1/4.png"}),(0,e.jsx)("span",{className:"empty-title",children:"\u6CA1\u6709\u4E0B\u8F7D\u4EFB\u52A1"})]})})}function Y(){var d=(0,o.useState)("upload"),s=(0,R.Z)(d,2),n=s[0],f=s[1],c=(0,o.useCallback)(function(u){f(u)},[]),N=(0,m.tT)("cloud-drive.index",function(u){return{deleteUploadFile:u.api.upload.delete,deleteDownloadFile:u.api.download.delete}}),l=(0,m.tT)("cloud-drive.index",function(u){var x=u.state;return x.uploadFiles.filter(function(g){return g.state=="completed"})}),h=(0,m.tT)("cloud-drive.index",function(u){var x=u.state;return x.downloadFiles.filter(function(g){return g.state=="completed"})}),E=(0,o.useCallback)((0,W.Z)((0,T.Z)().mark(function u(){var x,g,F;return(0,T.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:x=(0,v.Z)(l),a.prev=1,x.s();case 3:if((g=x.n()).done){a.next=9;break}return F=g.value,a.next=7,N.deleteUploadFile(F.id);case 7:a.next=3;break;case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),x.e(a.t0);case 14:return a.prev=14,x.f(),a.finish(14);case 17:case"end":return a.stop()}},u,null,[[1,11,14,17]])})),[N,l]),p=(0,o.useCallback)((0,W.Z)((0,T.Z)().mark(function u(){var x,g,F;return(0,T.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:x=(0,v.Z)(h),a.prev=1,x.s();case 3:if((g=x.n()).done){a.next=9;break}return F=g.value,a.next=7,N.deleteDownloadFile(F.id);case 7:a.next=3;break;case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),x.e(a.t0);case 14:return a.prev=14,x.f(),a.finish(14);case 17:case"end":return a.stop()}},u,null,[[1,11,14,17]])})),[N,h]),P=(0,o.useMemo)(function(){return!!l.length&&n=="upload"||!!h.length&&n=="download"},[n,l.length,h.length]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"popover-header",children:[(0,e.jsx)("span",{className:"popover-title",children:"\u4F20\u8F93\u5217\u8868"}),(0,e.jsx)("div",{className:"popover-toolbar",children:P&&(0,e.jsx)("a",{className:"cursor-pointer",onClick:n=="upload"?E:p,children:"\u6E05\u7A7A\u5DF2\u5B8C\u6210"})})]}),(0,e.jsxs)(r.mQ,{activeKey:n,onChange:c,tabPosition:"left",children:[(0,e.jsx)(r.mQ.TabPane,{tab:"\u6587\u4EF6\u4E0A\u4F20",children:(0,e.jsx)(H,{})},"upload"),(0,e.jsx)(r.mQ.TabPane,{tab:"\u6587\u4EF6\u4E0B\u8F7D",children:(0,e.jsx)(Q,{})},"download")]})]})}var q=Y,_=t(34106);function ee(d){var s=d.drives,n=d.onAction,f=(0,m.tT)("cloud-drive.index",function(l){var h=l.state;return h.driveId}),c=(0,o.useCallback)(function(l){if(l.startsWith("drive-"))console.log(l);else return n(l),!1;return!0},[n]),N=(0,o.useMemo)(function(){return[].concat((0,K.Z)(s.map(function(l){return{value:"drive-".concat(l.id),label:l.name}})),[{type:"separator"},{value:"preferences",label:"\u504F\u597D\u8BBE\u7F6E"}])},[s]);return(0,e.jsx)("div",{className:"app-sidebar-footer",children:(0,e.jsx)(r.Ph,{onChange:c,placement:"topCenter",value:f?"drive-".concat(f):void 0,options:N})})}function se(){var d=(0,m.tT)("cloud-drive.index",function(a){var j=a.state;return j.driveId}),s=(0,m.tT)("cloud-drive.index",function(a){var j=a.state;return j.visibleTransfers}),n=(0,m.tT)("cloud-drive.index",function(a){return a.api.base}),f=(0,w.$B)({path:"/drive/:type/:value",strict:!0,sensitive:!0}),c=(0,w.$B)({path:"/drive/:type",strict:!0,sensitive:!0}),N=(0,M.dH)({fetchPolicy:"cache-and-network"}),l=N.data,h=(0,m.tT)("cloud-drive.index",function(a){var j=a.state;return j.driveId}),E=(0,m.tT)("cloud-drive.index",function(a){return a.setCloudDrive});(0,o.useEffect)(function(){if(!!(l!=null&&l.cloudDrives)){var a=l==null?void 0:l.cloudDrives;a.some(function(j){return j.id==h})||E(a[0])}},[l==null?void 0:l.cloudDrives,E,h]);var p=(0,o.useMemo)(function(){if(!(!(l!=null&&l.cloudDrives)||!d))return l.cloudDrives.find(function(a){return a.id==d})},[l==null?void 0:l.cloudDrives,d]),P=(0,o.useMemo)(function(){return(f==null?void 0:f.params.type)||(c==null?void 0:c.params.type)},[f,c]),u=(0,o.useMemo)(function(){return f==null?void 0:f.params.value},[f]),x=(0,o.useCallback)(function(a){a?n.openTransfers():n.closeTransfers()},[n]),g=(0,o.useMemo)(function(){return u?P=="folders"?["my-drive"]:P=="mime-types"?[u]:[P]:[P]},[P,u]),F=(0,m.tT)("cloud-drive.index",function(a){var j=a.state,I=0,O=0,D=(0,v.Z)(j.uploadFiles),S;try{for(D.s();!(S=D.n()).done;){var Z=S.value;I+=Z.size,O+=Z.size*(Z.progress/100)}}catch(V){D.e(V)}finally{D.f()}return Math.max(O/I*100<<0,j.uploadFiles.length?1:0)}),$=(0,m.tT)("cloud-drive.index",function(a){var j=a.state,I=0,O=0,D=(0,v.Z)(j.downloadFiles),S;try{for(D.s();!(S=D.n()).done;){var Z=S.value;I+=Z.size,O+=Z.size*(Z.progress/100)}}catch(V){D.e(V)}finally{D.f()}return Math.max(O/I*100<<0,j.downloadFiles.length?1:0)});return(0,e.jsxs)(_.GP,{collapsible:!1,width:280,className:"app-sidebar app-drive-sidebar",children:[(0,e.jsxs)("div",{className:"relative mt-5 px-5 pt-5 d-flex",children:[(0,e.jsx)("h1",{className:"text-gray-800 flex-row-fluid fw-bold mb-6 mx-5",children:"\u4E91\u76D8"}),(0,e.jsx)(r.J2,{visible:s,onVisibleChange:x,overlayClassName:"dialog-transfers",content:(0,e.jsx)(q,{}),children:(0,e.jsxs)("div",{className:"file-transfer-icon",children:[(0,e.jsx)(r.mZ,{className:"download-all-progress position-absolute top-50 start-50 translate-middle",width:34,percent:$,strokeWidth:6,success:{strokeColor:"#04c8c8"}}),(0,e.jsx)(r.mZ,{className:"upload-all-progress position-absolute top-50 start-50 translate-middle",width:26,percent:F,strokeWidth:7.5,success:{strokeColor:"#009ef7"}}),(0,e.jsx)(r.GM,{size:"sm",pause:!$&&!F,children:(0,e.jsx)(i.ZP,{className:"svg-icon-6",name:"Duotune/arr032"})})]})})]}),(0,e.jsxs)(A.E,{className:"app-sidebar-body flex-column-fluid d-flex flex-column px-8 custom-scrollbar",options:{scrollbars:{autoHide:"scroll"}},children:[(0,e.jsxs)(r.v2,{className:"menu-title-gray-600 menu-icon-gray-400 menu-state-bg menu-state-primary menu-state-icon-primary menu-state-bullet-primary",accordion:!1,rounded:!0,selectable:"AllMenu",openKeys:["my-drive"],selectedKeys:g,children:[(0,e.jsxs)(r.v2.SubMenu,{url:"/drive/my-drive",titleClassName:"fw-bolder",icon:(0,e.jsx)(i.ZP,{className:"svg-icon-2 me-3",name:"Duotune/abs040"}),title:"\u6211\u7684\u6587\u4EF6",children:[(0,e.jsx)(r.v2.Item,{className:"mb-2 mt-2",url:"/drive/mime-types/image",titleClassName:"fw-bolder",icon:(0,e.jsx)(i.ZP,{className:"svg-icon-2 me-3",name:"Duotune/gen006"}),children:"\u56FE\u7247"},"image"),(0,e.jsx)(r.v2.Item,{className:"mb-2",url:"/drive/mime-types/document",titleClassName:"fw-bolder",icon:(0,e.jsx)(i.ZP,{className:"svg-icon-2 me-3",name:"Duotune/fil003"}),children:"\u6587\u6863"},"document"),(0,e.jsx)(r.v2.Item,{className:"mb-2",url:"/drive/mime-types/video",titleClassName:"fw-bolder",icon:(0,e.jsx)(i.ZP,{className:"svg-icon-2 me-3",name:"Duotune/arr027"}),children:"\u89C6\u9891"},"video"),(0,e.jsx)(r.v2.Item,{className:"mb-2",url:"/drive/mime-types/audio",titleClassName:"fw-bolder",icon:(0,e.jsx)(i.ZP,{className:"svg-icon-2 me-3",name:"Duotune/elc008"}),children:"\u97F3\u9891"},"audio"),(0,e.jsx)(r.v2.Item,{url:"/drive/mime-types/other",titleClassName:"fw-bolder",icon:(0,e.jsx)(i.ZP,{className:"svg-icon-2 me-3",name:"Duotune/gen052"}),children:"\u5176\u4ED6"},"other")]},"my-drive"),(0,e.jsx)(r.v2.Separator,{}),(0,e.jsx)(r.v2.Item,{className:"mb-2",url:"/drive/starred",titleClassName:"fw-bolder",icon:(0,e.jsx)(i.ZP,{className:"svg-icon-2 me-3",name:"Duotune/abs024"}),children:"\u6536\u85CF\u5939"},"starred"),(0,e.jsx)(r.v2.Item,{url:"/drive/trash",titleClassName:"fw-bolder",icon:(0,e.jsx)(i.ZP,{className:"svg-icon-2 me-3",name:"Duotune/gen027"}),children:"\u56DE\u6536\u7AD9"},"trash"),(0,e.jsx)(r.v2.Separator,{}),(0,e.jsx)(r.v2.Item,{url:"/drive/quota",titleClassName:"fw-bolder",icon:(0,e.jsx)(i.ZP,{className:"svg-icon-2 me-3",name:"Duotune/fil020"}),children:"\u5B58\u50A8\u7A7A\u95F4"},"quota")]}),(0,e.jsxs)("div",{className:"drive-quota d-flex align-items-center flex-column mb-10",children:[(0,e.jsx)("div",{className:"h-5px mx-3 w-100 bg-light mb-2",children:(0,e.jsx)("div",{className:"bg-success rounded h-5px",role:"progressbar",style:{width:"".concat((p==null?void 0:p.quota.usage)/(p==null?void 0:p.quota.size)*100,"%")}})}),(0,e.jsxs)("div",{className:"d-flex justify-content-between w-100 mt-auto mb-2",children:[(0,e.jsxs)("span",{className:"fw-bold fs-7 text-gray-400",children:["\u5DF2\u4F7F\u7528\xA0",p==null?void 0:p.quota.usageStr,", \xA0\u5171\xA0",p==null?void 0:p.quota.sizeStr]}),(0,e.jsx)("a",{className:"fw-bolder fs-7 text-success",children:"\u6269\u5BB9"})]})]})]}),(0,e.jsx)(ee,{drives:(l==null?void 0:l.cloudDrives)||[],onAction:function(){}})]})}var ae=se},77104:function(b,C,t){"use strict";var v=t(94184),K=t.n(v),o=t(67294),i=t(70861),A=t(76792),m=t(85893);const w={variant:"primary",active:!1,disabled:!1},M=o.forwardRef((z,e)=>{var{as:T,bsPrefix:W,variant:R,size:L,active:y,className:r}=z,B=X(z,["as","bsPrefix","variant","size","active","className"]);const k=(0,A.vE)(W,"btn"),[H,{tagName:G}]=(0,i.FT)(U({tagName:T},B)),Q=G;return(0,m.jsx)(Q,U(U(U({},H),B),{ref:e,className:K()(r,k,y&&"active",R&&`${k}-${R}`,L&&`${k}-${L}`,B.href&&B.disabled&&"disabled")}))});M.displayName="Button",M.defaultProps=w,C.Z=M}}]);

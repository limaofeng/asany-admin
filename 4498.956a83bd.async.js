(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[4498],{54498:function(R,k,u){"use strict";u.r(k);var _=u(3182),c=u(2824),l=u(94043),r=u.n(l),o=u(67294),p=u(82949),O=u.n(p),j=u(51615),M=u(40839),B=u(54782),f=u(69851),U=u(19228),y=u(75468),i=u(85893),a=f.mQ.TabPane,n=o.memo(function(){return(0,i.jsx)(f.Zb,{className:"email-compose-tools",children:(0,i.jsxs)(f.mQ,{className:"nav-line-tabs-2x mb-5 fs-6",children:[(0,i.jsx)(a,{tab:"\u901A\u8BAF\u5F55",children:"11111"},"contacts"),(0,i.jsx)(a,{tab:"\u7F51\u76D8",children:"222222"},"storage"),(0,i.jsx)(a,{tab:"\u4FE1\u7EB8",children:"222222"},"stationery")]})})});function s(t){var d,h=t.match.params.id,x=t.location,b=(0,j.k6)(),w=(0,M.Pg)({fetchPolicy:"cache-and-network"}),L=(0,c.Z)(w,2),N=L[0],T=L[1],E=T.data,K=T.loading,Z=(0,M.k0)({refetchQueries:[M.Nd]}),z=(0,c.Z)(Z,1),F=z[0],C=(0,o.useRef)({isChanged:!1,state:"default",message:(d=x.state)===null||d===void 0?void 0:d.message}),$=(0,o.useReducer)(function(m){return m+1},0),H=(0,c.Z)($,2),S=H[1],Q=(0,o.useCallback)(function(){var m=(0,_.Z)(r().mark(function g(A){return r().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return C.current.isChanged=!1,S(),D.next=4,(0,U._v)(120);case 4:b.push("/mail/sent/".concat(A.id));case 5:case"end":return D.stop()}},g)}));return function(g){return m.apply(this,arguments)}}(),[b]),G=(0,o.useCallback)(function(m){C.current.message=m,C.current.isChanged||(C.current.isChanged=!0,S())},[]),V=(0,o.useCallback)(function(m){return(0,_.Z)(r().mark(function g(){return r().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,F({variables:{id:C.current.message.id}});case 2:m();case 3:case"end":return v.stop()}},g)}))},[F]);(0,o.useEffect)(function(){!h||N({variables:{id:h}})},[N,h]),(0,o.useMemo)(function(){!(E!=null&&E.message)||(C.current.message=E.message)},[E==null?void 0:E.message]);var W=C.current,P=W.message,I=W.isChanged;return(0,i.jsxs)(y.v,{className:"apps-email-compose",header:!1,footer:!1,children:[(0,i.jsx)(O(),{disableNative:!0,when:!!(P!=null&&P.id)&&I,children:function(g){var A=g.onConfirm,v=g.onCancel;return(0,i.jsxs)(f.u_,{centered:!0,visible:!0,footer:null,onCancel:v,dialogClassName:"mw-550px",bodyClassName:"mx-5 pt-0 pb-15",header:(0,i.jsx)(f.u_.Header,{className:"ms-5 border-0",children:(0,i.jsx)("h1",{className:"modal-title pt-6 pb-4",children:"\u5C06\u6B64\u90AE\u4EF6\u5B58\u50A8\u4E3A\u8349\u7A3F\u5417\uFF1F"})}),children:[(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsx)("div",{className:"mh-375px scroll-y me-n7 pe-7 fs-6 text-muted",children:(0,i.jsx)("p",{children:" \u6B64\u90AE\u4EF6\u5C1A\u672A\u53D1\u9001\uFF0C\u4E14\u542B\u6709\u672A\u5B58\u50A8\u7684\u66F4\u6539\u5185\u5BB9\u3002\u60A8\u53EF\u4EE5\u5148\u5C06\u5176\u5B58\u50A8\u4E3A\u8349\u7A3F\uFF0C\u7A0D\u540E\u518D\u5904\u7406\u3002"})})}),(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsx)("div",{className:"fw-bold",children:(0,i.jsx)(f.zx,{variantStyle:"light",variant:"danger",onClick:V(A),children:"\u4E0D\u5B58\u50A8"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)(f.zx,{variant:"light",className:"me-3",onClick:v,children:"\u53D6\u6D88"}),(0,i.jsx)(f.zx,{onClick:A,children:"\u5B58\u50A8"})]})]})]})}}),(0,i.jsx)(f.yC,{spinning:K&&!I,children:(0,i.jsx)(B.Z,{message:P,onAutoSave:G,onSend:Q})}),(0,i.jsx)(n,{})]})}var e=o.memo(s);k.default=e},82949:function(R,k,u){R.exports=function(_){var c={};function l(r){if(c[r])return c[r].exports;var o=c[r]={i:r,l:!1,exports:{}};return _[r].call(o.exports,o,o.exports,l),o.l=!0,o.exports}return l.m=_,l.c=c,l.d=function(r,o,p){l.o(r,o)||Object.defineProperty(r,o,{configurable:!1,enumerable:!0,get:p})},l.n=function(r){var o=r&&r.__esModule?function(){return r.default}:function(){return r};return l.d(o,"a",o),o},l.o=function(r,o){return Object.prototype.hasOwnProperty.call(r,o)},l.p="",l(l.s=0)}([function(_,c,l){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var r=Object.assign||function(a){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&(a[e]=s[e])}return a},o=function(){function a(n,s){for(var e=0;e<s.length;e++){var t=s[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(n,s,e){return s&&a(n.prototype,s),e&&a(n,e),n}}(),p=l(1),O=M(p),j=l(2);function M(a){return a&&a.__esModule?a:{default:a}}function B(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function f(a,n){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:a}function U(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(a,n):a.__proto__=n)}var y={action:null,isActive:!1,nextLocation:null},i=function(a){U(n,a);function n(s){B(this,n);var e=f(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,s));return e._prevUserAction="",e._isMounted=!0,e.block=e.block.bind(e),e.onBeforeUnload=e.onBeforeUnload.bind(e),e.onCancel=e.onCancel.bind(e),e.onConfirm=e.onConfirm.bind(e),e.when=e.when.bind(e),e.state=r({},y,{unblock:function(){}}),e}return o(n,[{key:"componentDidMount",value:function(){this.props.disableNative||window.addEventListener("beforeunload",this.onBeforeUnload),this.setState({unblock:this.props.history.block(this.block)})}},{key:"componentDidUpdate",value:function(e,t){this._prevUserAction==="CANCEL"&&typeof this.props.afterCancel=="function"?this.props.afterCancel():this._prevUserAction==="CONFIRM"&&typeof this.props.afterConfirm=="function"&&this.props.afterConfirm(),this._prevUserAction=""}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this._prevUserAction==="CONFIRM"&&typeof this.props.afterConfirm=="function"&&(this._prevUserAction="",this.props.afterConfirm()),this.state.unblock(),this.props.disableNative||window.removeEventListener("beforeunload",this.onBeforeUnload)}},{key:"block",value:function(e,t){var d=this.when(e,t);return d&&this.setState({action:t,nextLocation:e,isActive:!0}),!d}},{key:"navigateToNextLocation",value:function(e){var t=this,d=this.state,h=d.action,x=d.nextLocation;h={POP:this.props.allowGoBack?"goBack":"push",PUSH:"push",REPLACE:"replace"}[h||"PUSH"],x||(x={pathname:"/"});var b=this.props.history;if(this.state.unblock(),this._prevUserAction="CONFIRM",h==="goBack"){var w=b.listen(function(){w(),t._isMounted&&t.setState(r({},y,{unblock:b.block(t.block)}))});b.goBack()}else b[h](x),this._isMounted&&this.setState(r({},y,{unblock:this.props.history.block(this.block)}))}},{key:"onCancel",value:function(){var e=this;(this.props.beforeCancel||function(t){t()})(function(){e._prevUserAction="CANCEL",e.setState(r({},y))})}},{key:"onConfirm",value:function(){var e=this;(this.props.beforeConfirm||function(t){t()})(function(){e.navigateToNextLocation(e.props.afterConfirm)})}},{key:"onBeforeUnload",value:function(e){if(!!this.when()){var t=`Do you want to leave this site?

Changes you made may not be saved.`;return e.returnValue=t,t}}},{key:"when",value:function(e,t){return typeof this.props.when=="function"?this.props.when(this.props.location,e,t):this.props.when}},{key:"render",value:function(){return!this.state.isActive&&!this.props.renderIfNotActive?null:O.default.createElement("div",null,this.props.children({isActive:this.state.isActive,onConfirm:this.onConfirm,onCancel:this.onCancel}))}}]),n}(O.default.Component);c.default=(0,j.withRouter)(i)},function(_,c){_.exports=u(67294)},function(_,c){_.exports=u(73727)}])}}]);

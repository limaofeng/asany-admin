var ve=Object.prototype.hasOwnProperty;var ce=Object.getOwnPropertySymbols,fe=Object.prototype.propertyIsEnumerable;var se=Object.assign;var oe=(I,B)=>{var a={};for(var s in I)ve.call(I,s)&&B.indexOf(s)<0&&(a[s]=I[s]);if(I!=null&&ce)for(var s of ce(I))B.indexOf(s)<0&&fe.call(I,s)&&(a[s]=I[s]);return a};(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[8033,3975],{33201:function(){},48775:function(I,B,a){"use strict";a.d(B,{GP:function(){return s.Z},Hk:function(){return le}});var s=a(48655),g=a(39981),t=a(67294),b=a(94184),L=a.n(b),T=a(28865),w=a(37334),O=a(2824),E=a(11849),Y=a(96486),f=a(85893),Q={aside:{minimize:!1}},M=t.createContext({state:Q,dispatch:function(){}}),H;(function(d){d.AsideToggle="ASIDE_TOGGLE"})(H||(H={}));function $(d,U){switch(U.type){case"ASIDE_TOGGLE":return d.aside.minimize=!d.aside.minimize,(0,E.Z)({},d);default:throw new Error}}var q=function(U){var R=(0,t.useReducer)($,(0,Y.cloneDeep)(Q)),K=(0,O.Z)(R,2),V=K[0],ae=K[1];return(0,f.jsx)(M.Provider,{value:{state:V,dispatch:ae},children:U.children})},X=function(){return(0,t.useContext)(M)},l=a(53704);function e(d){var U=d.children,R=X(),K=R.dispatch,V=R.state.aside.minimize,ae=(0,t.useCallback)(function(){K({type:H.AsideToggle})},[K]);return(0,f.jsxs)("div",{className:L()("app-aside aside"),children:[(0,f.jsx)(w.Z,{children:(0,f.jsx)(s.Z,{resizeable:!0,className:"app-sidebar",children:U})}),(0,f.jsx)(l.zx,{style:{marginBottom:"1.35rem",zIndex:10},onClick:ae,activeColor:"primary",className:L()("btn-icon bg-body btn-color-gray-700 rounded-2 position-absolute translate-middle start-100 end-0 bottom-0 shadow-sm d-none d-lg-flex",{active:V}),children:(0,f.jsx)(T.JO,{name:"Duotune/arr063",className:"svg-icon-2 rotate-180"})})]})}var _=e;function ee(d){var U=d.children,R=d.className,K=X(),V=K.state.aside.minimize;return(0,f.jsx)("div",{className:L()("micro-app-container page-full-content",R,{"aside-minimize":V}),children:U})}function te(d){var U=d.children,R=d.className;return(0,f.jsx)(q,{children:(0,f.jsx)(ee,{className:R,children:U})})}te.Sidebar=_;var le=te,re=a(61997)},70800:function(I,B,a){"use strict";a.r(B),a.d(B,{default:function(){return me}});var s=a(11849),g=a(2824),t=a(67294),b=a(28865),L=a(1861),T=a(51615),w=a(73727),O=a(40839),E=a(88403),Y=a(91220),f=a(3182),Q=a(94043),M=a.n(Q),H=a(22028),$=a(94184),q=a.n($),X=a(96486),l=a(53704),e=a(85893),_=a(34155);function ee(c){var C=c.onClose,j=c.visible,m=c.user,x=c.namespace,h=c.name,S=c.mode,G=(0,O.hI)(),o=(0,g.Z)(G,1),Z=o[0],v=l.l0.useForm(),F=(0,t.useRef)(null);(0,t.useEffect)(function(){var P;!j||(v.setFieldsValue({name:h}),(P=F.current)===null||P===void 0||P.focus(),_.nextTick(function(){var p;(p=F.current)===null||p===void 0||p.select()}))},[j]);var A=(0,t.useCallback)((0,f.Z)(M().mark(function P(){var p;return M().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,v.validateFields();case 2:if(p=i.sent,S!="create"){i.next=6;break}return i.next=6,Z({variables:{name:p.name,namespace:x}});case 6:C();case 7:case"end":return i.stop()}},P)})),[v,S,C,Z,x]),N=(0,t.useCallback)(function(){C()},[C]);return(0,e.jsxs)(l.u_,{centered:!0,visible:j,dialogClassName:"modal-dialog-small w-400px",onCancel:N,onOk:A,header:!1,closable:!1,okButtonProps:{className:"btn-xs"},cancelButtonProps:{className:"btn-xs"},children:[(0,e.jsxs)("div",{className:"modal-dialog-header d-flex",children:[(0,e.jsx)("div",{className:"modal-dialog-icon",children:(0,e.jsx)(b.JO,{className:"svg-icon-5x",name:"Duotune/fil012"})}),(0,e.jsxs)("div",{className:"modal-dialog-instructions",children:[(0,e.jsx)("div",{className:"modal-dialog-title",children:S=="create"?"\u65B0\u5EFA\u6587\u4EF6\u5939":"\u4FEE\u6539\u6587\u4EF6\u5939"}),(0,e.jsx)("div",{className:"modal-dialog-description",children:S=="create"?(0,e.jsxs)(e.Fragment,{children:['\u4E3A\u8D26\u53F7 " ',m,' " \u521B\u5EFA\u9876\u5C42\u6587\u4EF6\u5939']}):(0,e.jsxs)(e.Fragment,{children:['\u4FEE\u6539\u8D26\u53F7 " ',m,' " \u4E2D ',h," \u6587\u4EF6\u5939\u7684\u540D\u79F0"]})})]})]}),(0,e.jsx)(l.l0,{form:v,layout:"horizontal",initialValues:{name:h},size:"xs",children:(0,e.jsx)("div",{className:"d-flex last flex-row flex-center",children:(0,e.jsx)("div",{className:"d-flex flex-column-fluid",children:(0,e.jsx)(l.l0.Item,{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u5B57"}],name:"name",label:"\u540D\u79F0",children:(0,e.jsx)(l.II,{ref:F})})})})})]})}var te=ee;function le(c){var C=c.user,j=c.onSuccess,m=c.selectedKey,x=(0,t.useState)(),h=(0,g.Z)(x,2),S=h[0],G=h[1],o=(0,t.useCallback)(function(){G(void 0)},[]),Z=(0,t.useCallback)((0,f.Z)(M().mark(function F(){return M().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:G("#custom"),j();case 2:case"end":return N.stop()}},F)})),[j]),v=(0,t.useCallback)((0,f.Z)(M().mark(function F(){return M().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:console.log(m),j();case 2:case"end":return N.stop()}},F)})),[m,j]);return(0,e.jsxs)("div",{className:"settings-mailbox-footer",children:[(0,e.jsx)("a",{onClick:Z,children:(0,e.jsx)(b.ZP,{name:"Duotune/arr087",className:"svg-icon-2"})}),(0,e.jsx)("a",{onClick:v,children:(0,e.jsx)(b.ZP,{name:"Duotune/arr089",className:"svg-icon-2"})}),(0,e.jsx)(te,{mode:"create",visible:!!S,user:C,namespace:S,onClose:o})]})}var re=le,d=[{key:"#private",title:"\u9ED8\u8BA4\u6587\u4EF6\u5939",children:[]},{key:"#smart",title:"\u667A\u80FD\u6587\u4EF6\u5939",children:[]},{key:"#custom",title:"\u81EA\u5B9A\u4E49\u6587\u4EF6\u5939",children:[]}];function U(c){var C=c.user,j=(0,t.useRef)(null),m=(0,O.Tt)(),x=m.data,h=(0,t.useState)(),S=(0,g.Z)(h,1),G=S[0],o=(0,t.useState)(c.mailboxes),Z=(0,g.Z)(o,2),v=Z[0],F=Z[1],A=(0,O.mf)({updateQueries:{mailUser:function(u,n){var D=n.mutationResult;return(0,s.Z)((0,s.Z)({},u),{},{mailUser:(0,s.Z)((0,s.Z)({},u.mailUser),{},{settings:(0,s.Z)((0,s.Z)({},u.mailUser.settings),{},{mailboxes:D.data.mailboxes})})})}}}),N=(0,g.Z)(A,1),P=N[0],p=(0,t.useCallback)(function(){var r=(0,f.Z)(M().mark(function u(n){return M().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:console.log(n);case 1:case"end":return k.stop()}},u)}));return function(u){return r.apply(this,arguments)}}(),[]),ne=(0,t.useCallback)(function(r){console.log(r)},[]),i=(0,t.useCallback)(function(r){r.preventDefault(),r.stopPropagation(),console.log("handleChange",r.target.checked,r.target.value),P({variables:{mailboxes:[r.target.value],mode:r.target.checked?"ADD":"REMOVE"}})},[P]),z=(0,t.useMemo)(function(){if(!(x!=null&&x.mailboxes))return(0,X.cloneDeep)(d);var r=(0,X.cloneDeep)(d),u=(0,Y.Z)(x.mailboxes),n;try{var D=function(){var y=n.value,W=r.find(function(ie){return ie.key==y.namespace});if(y.name=="Outbox"||y.name=="INBOX")return"continue";if(!(W!=null&&W.children))return console.warn("\u9519\u8BEF\u7684\u547D\u540D\u7A7A\u95F4",W),"continue";W.children.push((0,s.Z)((0,s.Z)({},y),{},{type:"mailbox",key:y.id,title:y.name}))};for(u.s();!(n=u.n()).done;)var k=D()}catch(J){u.e(J)}finally{u.f()}return r[0].children=r[0].children.map(function(J){var y=E.GG.findIndex(function(ie){return ie.id==J.name}),W=E.GG[y];return(0,s.Z)((0,s.Z)({},J),{},{zindex:y,title:W.name,icon:W.name})}).sort(function(J,y){return J.zindex-y.zindex}),r.filter(function(J){var y;return(y=J.children)===null||y===void 0?void 0:y.length})},[x==null?void 0:x.mailboxes]);return(0,t.useEffect)(function(){F(c.mailboxes)},[c.mailboxes]),(0,e.jsxs)("div",{className:"settings-mailbox-container",children:[(0,e.jsx)("div",{className:"settings-mailbox-notes",children:"\u8BBE\u7F6E\u9ED8\u8BA4\u6587\u4EF6\u5939\u7684\u663E\u793A\u4E0E\u9690\u85CF\uFF0C\u5E76\u53EF\u4EE5\u6DFB\u52A0\u81EA\u5B9A\u4E49\u7684\u6587\u4EF6\u5939"}),(0,e.jsx)("div",{className:"d-flex",children:(0,e.jsxs)(H.fQ,{tag:(0,e.jsx)("div",{ref:j,className:q()("flex-left settings-mailbox",{editing:!1})}),name:"MAIL_PREFERENCES",handler:ne,children:[(0,e.jsxs)("div",{className:"settings-mailbox-header d-flex",children:[(0,e.jsx)("div",{className:"field-folder",children:"\u6587\u4EF6\u5939"}),(0,e.jsx)("div",{className:"field-favorites",children:"\u6536\u85CF"})]}),(0,e.jsx)(L.E,{className:"settings-mailbox-body custom-scrollbar",options:{scrollbars:{autoHide:"scroll"}},children:(0,e.jsx)(l.N4,{className:"mailbox-treelist",rowKey:"id",expandedKeys:["#private","#smart","#custom"],draggable:!1,iconRender:function(u,n){if(!n.isDirectory)return""},columns:[{key:"title",title:"\u540D\u79F0",render:function(u){return(0,e.jsx)("div",{className:"title d-flex",children:(0,e.jsx)("span",{className:"text-gray-800",children:u})})}},{key:"actions",title:"\u64CD\u4F5C",className:"min-w-100px",render:function(u,n){return n.type=="directory"?(0,e.jsx)("div",{}):(0,e.jsx)(l.XZ,{value:n.namespace+"."+n.name,checked:v.includes(n.namespace+"."+n.name),onChange:i,className:"mailbox-check",size:"sm"})}}],dataSource:z})}),(0,e.jsx)(re,{user:C,onSuccess:p,selectedKey:G})]})})]})}var R=U;function K(c){var C=c.visible,j=c.onCancel,m=c.mailUser,x=(0,t.useState)(!1),h=(0,g.Z)(x,2),S=h[0],G=h[1],o=(0,t.useState)("mailbox"),Z=(0,g.Z)(o,2),v=Z[0],F=Z[1],A=(0,t.useCallback)(function(){G(!0)},[]),N=(0,t.useCallback)(function(p){F(p)},[]),P=(0,t.useMemo)(function(){return m!=null&&m.settings?m.settings:{mailboxes:[]}},[m]);return(0,e.jsx)(l.u_,{centered:!0,maskClosable:!1,visible:C,onCancel:j,onOk:A,confirmLoading:S,scroll:!1,dialogClassName:"mw-750px mail-preferences",header:(0,e.jsx)(l.u_.Header,{children:(0,e.jsxs)(l.JL,{onSelect:N,selectedKey:v,children:[(0,e.jsx)(l.JL.Item,{className:"me-2 mb-md-0",children:(0,e.jsxs)(l.JL.Link,{className:"btn d-flex flex-column btn-active-light-primary",children:[(0,e.jsx)(b.ZP,{name:"Duotune/cod001",className:"svg-icon-2 me-0"}),(0,e.jsx)("span",{className:"d-flex flex-column align-items-start pt-2",children:(0,e.jsx)("span",{className:"fs-7",children:"\u901A\u7528"})})]})},"general"),(0,e.jsx)(l.JL.Item,{className:"me-2 mb-md-0",children:(0,e.jsxs)(l.JL.Link,{className:"btn d-flex flex-column btn-active-light-primary",children:[(0,e.jsx)(b.ZP,{name:"Duotune/cod001",className:"svg-icon-2 me-0"}),(0,e.jsx)("span",{className:"d-flex flex-column align-items-start pt-2",children:(0,e.jsx)("span",{className:"fs-7",children:"\u8D26\u53F7"})})]})},"account"),(0,e.jsx)(l.JL.Item,{className:"me-2 mb-md-0",children:(0,e.jsxs)(l.JL.Link,{className:"btn d-flex flex-column btn-active-light-success",children:[(0,e.jsx)(b.ZP,{name:"Duotune/fil012",className:"svg-icon-2  me-0"}),(0,e.jsx)("span",{className:"d-flex flex-column align-items-start pt-2",children:(0,e.jsx)("span",{className:"fs-7",children:"\u6587\u4EF6\u5939"})})]})},"mailbox"),(0,e.jsx)(l.JL.Item,{className:"me-2 mb-md-0",children:(0,e.jsxs)(l.JL.Link,{className:"btn d-flex flex-column btn-active-light-dark",children:[(0,e.jsx)(b.ZP,{name:"Duotune/art008",className:"svg-icon-2  me-0"}),(0,e.jsx)("span",{className:"d-flex flex-column align-items-start pt-2",children:(0,e.jsx)("span",{className:"fs-7",children:"\u7B7E\u540D"})})]})},"signature"),(0,e.jsx)(l.JL.Item,{className:"me-2 mb-md-0",children:(0,e.jsxs)(l.JL.Link,{className:"btn d-flex flex-column btn-active-light-warning",children:[(0,e.jsx)(b.ZP,{name:"Duotune/art008",className:"svg-icon-2  me-0"}),(0,e.jsx)("span",{className:"d-flex flex-column align-items-start pt-2",children:(0,e.jsx)("span",{className:"fs-7",children:"\u6A21\u7248"})})]})},"template")]})}),footer:!1,children:(0,e.jsx)(R,{user:m==null?void 0:m.name,mailboxes:P.mailboxes})})}var V=K,ae=a(48775);function ue(c){var C=c.onAction;return(0,e.jsx)("div",{className:"email-sidebar-footer",children:(0,e.jsx)("span",{className:"mail-settings",onClick:C,children:"\u504F\u597D\u8BBE\u7F6E"})})}function de(){var c,C=(0,t.useState)(!1),j=(0,g.Z)(C,2),m=j[0],x=j[1],h=(0,T.$B)({path:"/mail/:folder",strict:!0,sensitive:!0}),S=(0,t.useMemo)(function(){return h!=null&&h.params.folder?[h.params.folder]:[]},[h]),G=(0,O.FW)({fetchPolicy:"cache-and-network"}),o=G.data,Z=(0,O.Tt)({fetchPolicy:"cache-and-network"}),v=Z.data,F=(0,O.c3)({fetchPolicy:"cache-and-network"}),A=F.data,N=(0,t.useCallback)(function(){x(!1)},[]),P=(0,t.useCallback)(function(){x(!0)},[]),p=(0,t.useMemo)(function(){if(!(o!=null&&o.mailUser)||!(v!=null&&v.mailboxes)){var i=E.LJ.INBOX,z=E.LJ.Outbox;return{inbox:(0,s.Z)((0,s.Z)({},i),{},{title:i.name,key:i.name.toLowerCase()}),outbox:(0,s.Z)((0,s.Z)({},z),{},{title:z.name,key:z.name.toLowerCase()}),private:E.GG.filter(function(n){return!["Outbox","INBOX"].includes(n.id)}).map(function(n){return(0,s.Z)((0,s.Z)({},n),{},{title:n.name,key:n.name.toLowerCase(),count:0})}),smart:[],custom:[]}}var r=v.mailboxes.map(function(n){if(n.namespace=="#private"){var D=E.GG.findIndex(function(k){return k.id==n.name});return(0,s.Z)((0,s.Z)({},n),{},{index:D,title:E.GG[D].name,icon:E.GG[D].icon,key:n.name.toLowerCase()})}return(0,s.Z)((0,s.Z)({},n),{},{title:n.name,index:0,icon:void 0,key:n.name.toLowerCase()})}).filter(function(n){var D,k;return["Outbox","INBOX"].includes(n.name)?!0:o==null||(D=o.mailUser)===null||D===void 0||(k=D.settings)===null||k===void 0?void 0:k.mailboxes.includes(n.namespace+"."+n.name)}).sort(function(n,D){return n.index-D.index}),u=r.filter(function(n){return n.namespace=="#private"});return{inbox:u.find(function(n){return n.name=="INBOX"}),outbox:u.find(function(n){return n.name=="Outbox"}),private:u.filter(function(n){return!["Outbox","INBOX"].includes(n.name)}),smart:r.filter(function(n){return n.namespace=="#smart"}),custom:r.filter(function(n){return n.namespace=="#custom"})}},[o==null?void 0:o.mailUser,v==null?void 0:v.mailboxes]),ne=(0,t.useMemo)(function(){var i;return(A==null||(i=A.inbox)===null||i===void 0?void 0:i.unread)||0},[A==null||(c=A.inbox)===null||c===void 0?void 0:c.unread]);return(0,e.jsxs)(ae.GP,{width:280,collapsible:!1,className:"email-sidebar-aside",children:[(0,e.jsxs)("div",{className:"email-sidebar",children:[(0,e.jsx)(l.zx,{as:w.Link,to:"/mail/compose",className:"email-compose text-uppercase",children:"\u5199\u4FE1"}),(0,e.jsx)(L.E,{className:"email-sidebar-body custom-scrollbar",options:{scrollbars:{autoHide:"scroll"}},children:(0,e.jsxs)(l.v2,{className:"menu-title-gray-600 menu-icon-gray-400 menu-state-bg menu-state-primary menu-state-icon-primary menu-state-bullet-primary mb-10",accordion:!1,rounded:!0,selectable:"AllMenu",selectedKeys:S,children:[(0,e.jsx)(l.v2.Item,{className:"mb-3",url:"/mail/inbox",titleClassName:"fw-bolder",icon:(0,e.jsx)(b.JO,{className:"svg-icon-2 me-3",name:"Duotune/com010"}),badge:!!ne&&(0,e.jsx)(l.Ct,{size:"sm",lightStyle:E.LJ.INBOX.badge,children:ne}),children:p.inbox.title},"inbox"),(0,e.jsx)(l.v2.Section,{children:"\u6587\u4EF6\u5939"}),p.private.map(function(i){var z,r=(z=E.LJ[i.name])===null||z===void 0?void 0:z.badge;return(0,e.jsx)(l.v2.Item,{className:"mb-3",url:"/mail/".concat(i.key),titleClassName:"fw-bolder",icon:(0,e.jsx)(b.JO,{className:"svg-icon-2 me-3",name:i.icon}),badge:!!r&&!!i.count&&(0,e.jsx)(l.Ct,{size:"sm",lightStyle:r,children:i.count}),children:i.title},i.key)}),p.custom.length&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(l.v2.Section,{children:"\u81EA\u5B9A\u4E49"}),p.custom.map(function(i){return(0,e.jsx)(l.v2.Item,{className:"mb-3",url:"/mail/".concat(i.key),titleClassName:"fw-bolder",children:i.title},i.key)})]})]})}),(0,e.jsx)(ue,{onAction:P})]}),(0,e.jsx)(V,{mailUser:o==null?void 0:o.mailUser,visible:m,onCancel:N})]})}var me=de},88403:function(I,B,a){"use strict";a.d(B,{LJ:function(){return g},GG:function(){return t},ss:function(){return b}});var s=a(5618),g={INBOX:{id:"INBOX",name:"\u6536\u4EF6\u7BB1",icon:"Duotune/com010",badge:"success"},Sent:{id:"Sent",name:"\u5DF2\u53D1\u9001",icon:"Duotune/gen016"},Drafts:{id:"Drafts",name:"\u8349\u7A3F",icon:"Duotune/gen009",badge:"primary"},Archive:{id:"Archive",name:"\u5F52\u6863",icon:"Duotune/lay010"},Spam:{id:"Spam",name:"\u5783\u573E\u90AE\u4EF6",icon:"Duotune/gen044"},Trash:{id:"Trash",name:"\u56DE\u6536\u7AD9",icon:"Duotune/gen027",badge:"warning"},Outbox:{id:"Outbox",name:"\u53D1\u4EF6\u7BB1",icon:"Duotune/gen027"}},t=Object.keys(g).map(function(L){return g[L]});function b(L){var T=(0,s.N8)(L);return T.name||T.address&&T.address.substring(0,T.address.indexOf("@"))}},77104:function(I,B,a){"use strict";var s=a(94184),g=a.n(s),t=a(67294),b=a(70861),L=a(76792),T=a(85893);const w={variant:"primary",active:!1,disabled:!1},O=t.forwardRef((X,q)=>{var{as:E,bsPrefix:Y,variant:f,size:Q,active:M,className:H}=X,$=oe(X,["as","bsPrefix","variant","size","active","className"]);const l=(0,L.vE)(Y,"btn"),[e,{tagName:_}]=(0,b.FT)(se({tagName:E},$)),ee=_;return(0,T.jsx)(ee,se(se(se({},e),$),{ref:q,className:g()(H,l,M&&"active",f&&`${l}-${f}`,Q&&`${l}-${Q}`,$.href&&$.disabled&&"disabled")}))});O.displayName="Button",O.defaultProps=w,B.Z=O}}]);

(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[1185,5539],{5539:function(T,g,a){"use strict";a.r(g);var P=a(32059),v=a(2824),p=a(11849),b=a(3182),M=a(94043),x=a.n(M),o=a(67294),L=a(19755),B=a.n(L),f=a(28865),N=a(73727),w=a(51615),U=a(94184),K=a.n(U),Z=a(30381),S=a.n(Z),O=a(64458),s=a(11974),e=a(85893);function I(t,n){var D=(0,o.useCallback)((0,b.Z)(x().mark(function m(){var d,h,E;return x().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return d=t.width,h=d===void 0?550:d,i.next=3,s.u_.confirm((0,p.Z)((0,p.Z)({},t),{},{width:h,okText:"\u5220 \u9664",cancelClassName:"btn btn-secondary btn-sm",okClassName:"btn btn-danger btn-sm"}));case 3:if(E=i.sent,!E.isConfirmed){i.next=7;break}return i.next=7,n();case 7:case"end":return i.stop()}},m)})),[t.title,t.content]);return[D]}window._MoreshowOrhide=function(t){return B()(t).parent().siblings().show(),B()(t).parent().remove(),!1};function W(t){var n=t.selectedRows,D=t.refetch,m=(0,O.nT)(),d=(0,v.Z)(m,1),h=d[0],E=I({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9".concat(n.length>1?"\u201C<strong>".concat(n.length,"</strong>\u201C"):"","\u7BC7\u6587\u7AE0\u5417\uFF1F"),content:n.length>1?'\u60A8\u5373\u5C06\u5220\u9664\u4EE5\u4E0B\u6587\u7AE0:<ul className="py-2">'.concat(n.map(function(y,j){return"<li ".concat(j>=4?'style="display: none !important;"':"",' className="d-flex align-items-center text-gray-800 mb-1 fs-6"><span className="bullet bullet-dot me-2"></span><strong>').concat(y.title,"</strong></li>")}).join(""),`
              <li `).concat(n.length<=4?'style="display: none !important;"':"",' className="d-flex align-items-center text-gray-800 fs-6"><a href="javascript:void(0)" onClick="_MoreshowOrhide(this)">\u66F4\u591A</a></li></ul> '):"\u60A8\u5373\u5C06\u5220\u9664\u201C<strong>".concat(n[0].title,"</strong>\u201D\u3002")+"\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F"},(0,b.Z)(x().mark(function y(){return x().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,h({variables:{ids:n.map(function(C){return C.id})}});case 2:return _.next=4,D();case 4:case"end":return _.stop()}},y)}))),c=(0,v.Z)(E,1),i=c[0];return(0,e.jsx)(s.zx,{onClick:i,size:"sm",className:"px-4 py-2",variant:"danger",children:"\u6279\u91CF\u5220\u9664"})}function k(t){var n=t.data,D=t.refetch,m=(0,w.k6)(),d=(0,o.useState)(!1),h=(0,v.Z)(d,2),E=h[0],c=h[1],i=(0,O.eU)(),y=(0,v.Z)(i,1),j=y[0],_=I({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u7BC7\u6587\u7AE0\u5417\uFF1F",content:"\u60A8\u5373\u5C06\u5220\u9664\u201C<strong>".concat(n.title,"</strong>\u201D\u3002\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F")},(0,b.Z)(x().mark(function l(){return x().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,j({variables:{id:n.id}});case 2:return u.next=4,D();case 4:case"end":return u.stop()}},l)}))),C=(0,v.Z)(_,1),A=C[0],F=(0,o.useCallback)(function(l){var r=l.key;r=="edit"?m.push("/cms/articles/".concat(n.id,"/edit")):r=="delete"&&(c(!1),A())},[]);return(0,e.jsx)(s.Lt,{overlay:(0,e.jsxs)(s.v2,{onClick:F,className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold w-125px py-4",children:[(0,e.jsx)(s.v2.Item,{className:"px-3",children:"\u7F16\u8F91"},"edit"),(0,e.jsx)(s.v2.Item,{className:"px-3",children:"\u53D1\u5E03"},"publish"),(0,e.jsx)(s.v2.Item,{className:"px-3 actions-delete",children:"\u5220\u9664"},"delete")]}),placement:"bottomRight",onVisibleChange:c,visible:E,children:(0,e.jsxs)(s.zx,{variant:"light",activeColor:"light-primary",size:"sm",children:["\u64CD \u4F5C",(0,e.jsx)(f.ZP,{className:"ms-2 svg-icon-5 m-0",name:"Duotune/arr072"})]})})}function z(t){var n=t.query,D=t.style,m=D===void 0?"normal":D,d=(0,O.gk)({variables:(0,p.Z)({},n),fetchPolicy:"cache-and-network"}),h=d.data,E=d.refetch,c=(h||{}).articles||{edges:[],current:0,total:0},i=(0,o.useMemo)(function(){return c.edges.map(function(l){return l.node})},[c.edges]),y=(0,o.useCallback)(function(l){console.log(l)},[]),j=(0,o.useState)([]),_=(0,v.Z)(j,2),C=_[0],A=_[1],F=(0,o.useCallback)(function(l,r){A(r)},[A]);return(0,e.jsxs)("div",{className:"tab-content",children:[m=="small"&&(0,e.jsxs)("div",{className:"d-flex flex-wrap flex-stack pb-7",children:[(0,e.jsxs)("div",{className:"d-flex flex-wrap align-items-center my-1",children:[(0,e.jsxs)("h3",{className:"fw-bolder me-5 my-1",children:["\u6587\u7AE0 (",c.total,")"]}),(0,e.jsx)(s.II.Search,{size:"sm",placeholder:"\u641C\u7D22",boxClassName:"my-1",className:"form-control-white  w-150px ps-9"})]}),(0,e.jsxs)("div",{className:"d-flex flex-wrap my-1",children:[(0,e.jsxs)("ul",{style:{display:"none"},className:"nav nav-pills me-6 mb-2 mb-sm-0",children:[(0,e.jsx)("li",{className:"nav-item m-0",children:(0,e.jsx)("a",{className:"btn btn-sm btn-icon btn-light btn-color-muted btn-active-primary me-3",href:"#kt_project_users_card_pane",children:(0,e.jsx)(f.ZP,{name:"Duotune/gen024",className:"svg-icon-2"})})}),(0,e.jsx)("li",{className:"nav-item m-0",children:(0,e.jsx)("a",{className:"btn btn-sm btn-icon btn-light btn-color-muted btn-active-primary active",href:"#kt_project_users_table_pane",children:(0,e.jsx)(f.ZP,{name:"Duotune/abs015",className:"svg-icon-2"})})})]}),(0,e.jsxs)("div",{className:"d-flex my-0",children:[(0,e.jsx)(s.ub,{size:"sm",className:"form-select-white w-125px me-5",placeholder:"\u53D1\u5E03\u65F6\u95F4",options:[{label:"\u5168\u90E8\u65F6\u95F4",value:"all"},{label:"\u4ECA\u5E74",value:"thisyear"},{label:"\u8FD9\u4E2A\u6708",value:"thismonth"},{label:"\u6700\u8FD1\u4E00\u4E2A\u6708",value:"lastmonth"},{label:"\u6700\u8FD190\u5929",value:"last90days"}]}),(0,e.jsx)(s.ub,{size:"sm",className:"form-select-white w-125px",placeholder:"\u72B6\u6001",options:[{label:"\u5168\u90E8\u72B6\u6001",value:"all"},{label:"\u8349\u7A3F",value:"DRAFT"},{label:"\u5DF2\u53D1\u5E03",value:"PUBLISHED"},{label:"\u7B49\u5F85\u53D1\u5E03",value:"SCHEDULED"}]})]})]})]}),(0,e.jsxs)(s.Zb,{flush:!0,className:K()((0,P.Z)({},"mt-6 mt-xl-9",m==="normal")),headerClassName:"mt-5",children:[m==="normal"&&(0,e.jsxs)(s.Zb.Header,{className:"pt-8",children:[(0,e.jsx)(s.Zb.Title,{className:"flex-column",children:(0,e.jsx)(s.II.Search,{solid:!0,className:"w-250px",placeholder:"\u641C\u7D22\u6587\u7AE0",onSearch:y})}),(0,e.jsx)(s.Zb.Toolbar,{children:(0,e.jsxs)("div",{className:"d-flex justify-content-end",children:[!!C.length&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.zx,{variant:"primary",icon:(0,e.jsx)(f.ZP,{className:"svg-icon-2",name:"Duotune/gen016"}),className:"me-3",children:"\u6279\u91CF\u53D1\u5E03"}),(0,e.jsx)(s.zx,{variant:"danger",icon:(0,e.jsx)(f.ZP,{className:"svg-icon-2",name:"Duotune/gen027"}),children:"\u6279\u91CF\u5220\u9664"})]}),!C.length&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.zx,{variant:"primary",className:"me-3",icon:(0,e.jsx)(f.ZP,{className:"svg-icon-2",name:"Duotune/gen031"}),children:"\u8FC7\u6EE4\u7B5B\u9009"}),(0,e.jsx)(s.zx,{as:N.Link,variant:"primary",icon:(0,e.jsx)(f.ZP,{className:"svg-icon-2",name:"Duotune/arr075"}),to:"/cms/articles/new",children:"\u65B0\u5EFA\u6587\u7AE0"})]})]})})]}),(0,e.jsx)(s.Zb.Body,{className:"pt-0",children:c.total?(0,e.jsx)(s.iA,{rowKey:"id",rowSelection:{type:"checkbox",onChange:F,selectedRowKeys:(C||[]).map(function(l){return l.id}),renderTitle:function(r){return(0,e.jsxs)(e.Fragment,{children:["\u5DF2\u9009\u4E2D",(0,e.jsx)("span",{className:"mx-2",children:r}),"\u7BC7\u6587\u7AE0"]})},toolbar:m=="small"&&function(l,r){return(0,e.jsx)(W,{selectedRows:r,refetch:E})}},pagination:c,dataSource:i,columns:[{title:"\u6807\u9898",dataIndex:"title",key:"title",render:function(r,u){return(0,e.jsxs)("div",{className:"d-flex flex-column",children:[(0,e.jsx)(N.Link,{to:"/cms/articles/".concat(u.id,"/edit"),className:"text-gray-800 text-hover-primary mb-1",children:r}),(0,e.jsxs)("span",{className:"text-gray-500",children:[u.channels.map(function(R){return(0,e.jsx)(s.Ct,{className:"me-2",children:R.fullName},R.id)}),S()(u.createdAt).fromNow()]})]})}},{title:"\u72B6\u6001",dataIndex:"status",width:120,render:function(r){var u={DRAFT:{title:"\u8349\u7A3F",lightStyle:"danger"},PUBLISHED:{title:"\u5DF2\u53D1\u5E03"},SCHEDULED:{title:"\u8BA1\u5212",lightStyle:"primary"}};return(0,e.jsx)(s.Ct,{lightStyle:u[r].lightStyle,children:u[r].title})}},{title:"\u64CD\u4F5C",key:"action",width:140,render:function(r,u){return(0,e.jsx)(k,{data:u,refetch:E})}}]}):(0,e.jsx)(s.HY,{title:"\u65B0\u589E\u6587\u7AE0",description:"\u8BE5\u680F\u76EE\u8FD8\u662F\u7A7A\u7684\uFF0C\u6CA1\u6709\u4EFB\u4F55\u6587\u7AE0",image:"/assets/media/illustrations/sigma-1/4.png",children:(0,e.jsx)(s.zx,{as:N.Link,variant:"primary",to:"/cms/articles/new",children:"\u65B0\u5EFA\u6587\u7AE0"})})})]})]})}g.default=z},31185:function(T,g,a){"use strict";a.r(g);var P=a(5539),v=a(23761),p=a(75468),b=a(85893);function M(){var x=(0,v.o)(),o=x.data;return(0,b.jsx)(p.v,{header:{title:"\u8349\u7A3F\u7BB1"},children:o&&(0,b.jsx)(P.default,{query:{filter:{createdBy:o.uid,status:"DRAFT"}}})})}g.default=M}}]);

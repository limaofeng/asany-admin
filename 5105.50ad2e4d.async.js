"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5105],{70005:function(H,i,c){var E=c(62435),p=c(96974),D=c(79817),h=c(86074);function u(l){var g=l.categoryId,w=l.append,U=(0,p.bx)(),B=U.rootCategoryId,v=U.categories,L=U.baseUrl,o=U.breadcrumbs,A=(0,E.useMemo)(function(){var x,J=v.find(function(z){return z.id===g});return((J==null||(x=J.path)===null||x===void 0?void 0:x.split("/"))||[]).map(function(z){return v.find(function(k){return k.id===z})}).filter(function(z){return z})},[v,g]);return(0,h.jsxs)(D.Breadcrumb,{className:"fw-bold fs-base text-muted my-1",children:[o.map(function(x){return(0,h.jsx)(D.Breadcrumb.Item,{href:x.url,children:x.title},x.title)}),A?(0,h.jsx)(h.Fragment,{children:A.filter(function(x){return x.id!==B}).map(function(x){return(0,h.jsx)(D.Breadcrumb.Item,{href:"".concat(L,"/categories/").concat(x.id,"/articles"),children:x.name},x.id)})}):(0,h.jsx)(D.Breadcrumb.Item,{children:"\u52A0\u8F7D\u4E2D..."}),w]})}i.Z=u},85105:function(H,i,c){c.r(i),c.d(i,{default:function(){return ue}});var E=c(97857),p=c.n(E),D=c(13769),h=c.n(D),u=c(15009),l=c.n(u),g=c(99289),w=c.n(g),U=c(5574),B=c.n(U),v=c(62435),L=c(96974),o=c(39711),A=c(46027),x=c(93967),J=c.n(x),z=c(19755),k=c.n(z),ce=c(30381),se=c.n(ce),e=c(38018),t=c(73588),r=c(79817),a=c(14336),s=c(70005),f=c(42646),n=c(86074),M=["q"],W={DRAFT:{title:"\u8349\u7A3F",lightStyle:"danger"},PUBLISHED:{title:"\u5DF2\u53D1\u5E03"},SCHEDULED:{title:"\u8BA1\u5212",lightStyle:"primary"}};window._MoreshowOrhide=function(b){return k()(b).parent().siblings().show(),k()(b).parent().remove(),!1};function Z(b){var m=b.selectedRows,I=b.refetch,X=(0,f.nT)(),j=B()(X,1),S=j[0],R=(0,a.Z)({title:(0,n.jsxs)(n.Fragment,{children:["\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9",m.length>1&&(0,n.jsxs)(n.Fragment,{children:["\u201C",(0,n.jsx)("strong",{children:m.length}),"\u201C`"]}),"\u7BC7\u6587\u7AE0\u5417\uFF1F"]}),content:m.length>1?'\u60A8\u5373\u5C06\u5220\u9664\u4EE5\u4E0B\u6587\u7AE0:<ul className="py-2">'.concat(m.map(function(K,V){return"<li ".concat(V>=4?'style="display: none !important;"':"",' className="d-flex align-items-center text-gray-800 mb-1 fs-6"><span className="bullet bullet-dot me-2"></span><strong>').concat(K.title,"</strong></li>")}).join(""),`
              <li `).concat(m.length<=4?'style="display: none !important;"':"",' className="d-flex align-items-center text-gray-800 fs-6"><a href="javascript:void(0)" onClick="_MoreshowOrhide(this)">\u66F4\u591A</a></li></ul> '):(0,n.jsxs)(n.Fragment,{children:["\u60A8\u5373\u5C06\u5220\u9664\u201C",(0,n.jsx)("strong",{children:m[0].title}),"\u201D\u3002",(0,n.jsx)("br",{}),"\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F"]})},w()(l()().mark(function K(){return l()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,S({variables:{ids:m.map(function(G){return G.id})}});case 2:case"end":return C.stop()}},K)}))),T=B()(R,1),O=T[0],te=(0,v.useCallback)(w()(l()().mark(function K(){return l()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,O();case 2:return C.next=4,I();case 4:case"end":return C.stop()}},K)})),[O,I]);return(0,n.jsx)(r.Button,{color:"danger",onClick:te,variant:!1,size:"sm",className:"px-4 py-2",children:"\u6279\u91CF\u5220\u9664"})}function N(b){var m=b.data,I=b.refetch,X=b.baseUrl,j=(0,v.useState)(!1),S=B()(j,2),R=S[0],T=S[1],O=(0,L.s0)(),te=(0,f.eU)(),K=B()(te,1),V=K[0],C=(0,a.Z)({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u7BC7\u6587\u7AE0\u5417\uFF1F",content:(0,n.jsxs)(n.Fragment,{children:["\u60A8\u5373\u5C06\u5220\u9664\u201C",(0,n.jsx)("strong",{children:m.title}),"\u201D\u3002\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F"]})},w()(l()().mark(function Q(){return l()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,V({variables:{id:m.id}});case 2:case"end":return P.stop()}},Q)}))),G=B()(C,1),_=G[0],ne=(0,v.useCallback)(w()(l()().mark(function Q(){return l()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,_();case 2:return P.next=4,I();case 4:case"end":return P.stop()}},Q)})),[_,I]),Y=(0,v.useCallback)(function(Q){var ee=Q.key;ee==="edit"?O("".concat(X,"/articles/").concat(m.id)):ee==="delete"&&(T(!1),ne())},[]);return(0,n.jsx)(r.Dropdown,{overlay:(0,n.jsxs)(r.Menu,{onClick:Y,className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold w-125px py-4",children:[(0,n.jsx)(r.Menu.Item,{className:"px-3",children:"\u7F16\u8F91"},"edit"),(0,n.jsx)(r.Menu.Item,{className:"px-3",children:"\u53D1\u5E03"},"publish"),(0,n.jsx)(r.Menu.Item,{className:"px-3 actions-delete",children:"\u5220\u9664"},"delete")]}),placement:"bottomRight",onVisibleChange:T,visible:R,children:(0,n.jsxs)(r.Button,{variant:"light",activeColor:"light-primary",children:["\u64CD \u4F5C",(0,n.jsx)(A.ZP,{className:"ms-2 svg-icon-5 m-0",name:"Duotune/arr072"})]})})}function re(b){var m,I,X=(0,L.UO)(),j=X.cid,S=(0,L.bx)(),R=S.rootCategoryId,T=S.categories,O=S.baseUrl,te=(0,L.TH)(),K=(0,L.s0)(),V=(0,v.useMemo)(function(){var y=e.parse(te.search),F=y.q,d=h()(y,M);return d.where?d.where=p()(p()({},d.where),b.where):d.where=p()({},b.where),F&&(d.where.keyword=F),d.where.category={id:j||R,subColumns:!0},d},[location.search,j,R]),C=(0,f.gk)({variables:V,fetchPolicy:"cache-and-network",skip:!R}),G=C.data,_=C.refetch,ne=C.loading,Y=C.previousData,Q=(0,v.useMemo)(function(){return ne?(Y==null?void 0:Y.articles)||{edges:[],total:0,current:1}:(G==null?void 0:G.articles)||{edges:[],total:0,current:1}},[G==null?void 0:G.articles,ne,Y==null?void 0:Y.articles]),ee=(0,v.useMemo)(function(){return Q.edges.map(function(y){return y.node})},[Q.edges]),P=(0,v.useCallback)(function(y){var F=e.parse(location.search);F.q=y,K(location.pathname+"?"+e.stringify(F),{replace:!0})},[]),oe=(0,v.useCallback)(function(y,F,d){var q,$={};if((q=V.where)!==null&&q!==void 0&&q.keyword){var ae;$.q=(ae=V.where)===null||ae===void 0?void 0:ae.keyword}d&&($.orderBy=d.field+"_"+(d.order==="ascend"?"asc":"desc")),$.page=y.current,K(location.pathname+"?"+e.stringify($),{replace:!0})},[(m=V.where)===null||m===void 0?void 0:m.keyword]),de=(0,v.useState)([]),ie=B()(de,2),fe=ie[0],le=ie[1],me=(0,v.useCallback)(function(y,F){le(F)},[le]),he=(0,v.useMemo)(function(){return function(y,F){return(0,n.jsx)(Z,{selectedRows:F,refetch:_})}},[_]);return(0,n.jsx)(t.vs,{loading:ne,header:{title:(I=T.find(function(y){return y.id===j}))===null||I===void 0?void 0:I.name},breadcrumb:(0,n.jsx)(s.Z,{categoryId:j}),children:(0,n.jsx)("div",{className:"tab-content",children:(0,n.jsxs)(r.Card,{flush:!0,headerClassName:"mt-5",children:[(0,n.jsxs)(r.Card.Header,{className:"pt-8",children:[(0,n.jsx)(r.Card.Title,{className:"flex-column",children:(0,n.jsx)(r.Input.Search,{solid:!0,className:"w-250px",placeholder:"\u641C\u7D22\u6587\u7AE0",onSearch:P})}),(0,n.jsx)(r.Card.Toolbar,{children:(0,n.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,n.jsx)(r.Dropdown,{overlay:(0,n.jsxs)(r.Menu,{className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold w-125px py-4",children:[(0,n.jsx)(r.Menu.Item,{className:"px-3",children:"\u6700\u65B0"},"edit"),(0,n.jsx)(r.Menu.Item,{className:"px-3",children:"\u6700\u665A"},"publish"),(0,n.jsx)(r.Menu.Item,{className:"px-3 actions-delete",children:"\u6700\u8FD1\u66F4\u65B0\u7684"},"delete"),(0,n.jsx)(r.Menu.Item,{className:"px-3 actions-delete",children:"\u70B9\u51FB\u91CF"},"delete")]}),placement:"bottomLeft",children:(0,n.jsx)(r.Button,{variant:"white",className:"me-3",icon:(0,n.jsx)(A.ZP,{className:"svg-icon-2",name:"Duotune/gen031"}),children:"\u6392\u5E8F: \u6700\u65B0"})}),(0,n.jsx)(r.Button,{as:o.rU,variant:"primary",className:"me-3",icon:(0,n.jsx)(A.ZP,{className:"svg-icon-2",name:"Duotune/arr075"}),to:"".concat(O,"/categories/").concat(j,"/articles/new"),children:"\u65B0\u5EFA\u6587\u7AE0"})]})})]}),(0,n.jsx)(r.Card.Body,{className:"pt-0",children:Q.total?(0,n.jsx)(r.Table,{rowKey:"id",rowSelection:{type:"checkbox",onChange:me,selectedRowKeys:(fe||[]).map(function(y){return y.id}),renderTitle:function(F){return(0,n.jsxs)(n.Fragment,{children:["\u5DF2\u9009\u4E2D",(0,n.jsx)("span",{className:"mx-2",children:F}),"\u7BC7\u6587\u7AE0"]})},toolbar:he},pagination:Q,dataSource:ee,onChange:oe,rowHeight:136,columns:[{title:"\u6807\u9898",dataIndex:"title",key:"title",render:function(F,d){var q;return(0,n.jsxs)("div",{className:"d-flex flex-row tw-truncate overflow-hidden",children:[(0,n.jsxs)("div",{className:"d-flex flex-column align-items-start tw-truncate overflow-hidden",children:[(0,n.jsxs)("div",{className:"meta-container no-selecto-drag",children:[(0,n.jsx)(o.rU,{to:"/xx/12",className:"user-message",children:"\u6797\u66AE\u6625"}),(0,n.jsx)("span",{className:"created-at",children:se()(d.createdAt).fromNow()}),(0,n.jsx)("div",{className:"category_list",children:d.categories.filter(function($){return $.id!==R}).map(function($){return(0,n.jsx)(o.rU,{to:"".concat(O,"/categories/").concat($.id,"/articles"),className:"tag",children:$.name},$.id)})})]}),(0,n.jsx)(o.rU,{onClick:function(ae){return ae.stopPropagation()},to:"".concat(O,"/categories/").concat(j,"/articles/").concat(d.id),className:"mt-2 mb-2 text-gray-800 no-selecto-drag fs-4 text-hover-primary mb-1",children:F}),(0,n.jsx)("div",{className:J()("summary mb-2 w-100 tw-text-ellipsis tw-truncate w-100",{"pe-8":!d.image}),children:(0,n.jsx)("span",{className:"text-muted fs-base no-selecto-drag",children:d.summary||"\u6CA1\u6709\u4EFB\u4F55\u5185\u5BB9..."})}),(0,n.jsxs)("div",{className:"fs-base",children:[(0,n.jsxs)(o.rU,{className:"text-muted no-selecto-drag text-hover-primary me-8",to:"".concat(O,"/categories/").concat(j,"/articles/").concat(d.id),children:[(0,n.jsx)(A.ZP,{className:"svg-icon-4 me-2",name:"Bootstrap/eye"}),"41W"]}),(0,n.jsxs)(o.rU,{className:"text-muted no-selecto-drag text-hover-primary me-8",to:"".concat(O,"/categories/").concat(j,"/articles/").concat(d.id,"#comments"),children:[(0,n.jsx)(A.ZP,{className:"svg-icon-6 me-2",name:"Bootstrap/chat"}),"41W"]})]})]}),d.image&&(0,n.jsx)("div",{className:"px-8 d-flex align-items-end",children:(0,n.jsx)(r.Symbol,{className:"article-image",src:"https://storage-api.asany.cn"+"/preview/".concat((q=d.image)===null||q===void 0?void 0:q.id)})})]})}},{title:"\u72B6\u6001",dataIndex:"status",width:120,render:function(F){return(0,n.jsx)(r.Badge,{lightStyle:W[F].lightStyle,children:W[F].title})}},{title:"\u64CD\u4F5C",key:"action",width:140,render:function(F,d){return(0,n.jsx)(N,{baseUrl:"".concat(O,"/categories/").concat(j),data:d,refetch:_})}}]}):(0,n.jsxs)(r.Empty,{title:"\u65B0\u589E\u6587\u7AE0",description:"\u8BE5\u680F\u76EE\u8FD8\u662F\u7A7A\u7684\uFF0C\u6CA1\u6709\u4EFB\u4F55\u6587\u7AE0",image:"/assets/media/illustrations/sigma-1/4.png",children:[(0,n.jsx)(r.Button,{as:o.rU,className:"me-2",variant:"light",to:"".concat(O,"/settings"),children:"\u67E5\u770B\u680F\u76EE\u4FE1\u606F"}),(0,n.jsx)(r.Button,{as:o.rU,variant:"primary",to:"".concat(O,"/categories/").concat(j,"/articles/new"),children:"\u65B0\u5EFA\u6587\u7AE0"})]})})]})})})}var ue=re},38018:function(H,i,c){var E=c(5574).default,p=c(64599).default,D=c(52677).default,h=c(19632).default,u=c(62072),l=c(44020),g=c(13615),w=c(92806),U=function(t){return t==null};function B(e){switch(e.arrayFormat){case"index":return function(t){return function(r,a){var s=r.length;return a===void 0||e.skipNull&&a===null||e.skipEmptyString&&a===""?r:a===null?[].concat(h(r),[[o(t,e),"[",s,"]"].join("")]):[].concat(h(r),[[o(t,e),"[",o(s,e),"]=",o(a,e)].join("")])}};case"bracket":return function(t){return function(r,a){return a===void 0||e.skipNull&&a===null||e.skipEmptyString&&a===""?r:a===null?[].concat(h(r),[[o(t,e),"[]"].join("")]):[].concat(h(r),[[o(t,e),"[]=",o(a,e)].join("")])}};case"comma":case"separator":return function(t){return function(r,a){return a==null||a.length===0?r:r.length===0?[[o(t,e),"=",o(a,e)].join("")]:[[r,o(a,e)].join(e.arrayFormatSeparator)]}};default:return function(t){return function(r,a){return a===void 0||e.skipNull&&a===null||e.skipEmptyString&&a===""?r:a===null?[].concat(h(r),[o(t,e)]):[].concat(h(r),[[o(t,e),"=",o(a,e)].join("")])}}}}function v(e){var t;switch(e.arrayFormat){case"index":return function(r,a,s){if(t=/\[(\d*)\]$/.exec(r),r=r.replace(/\[\d*\]$/,""),!t){s[r]=a;return}s[r]===void 0&&(s[r]={}),s[r][t[1]]=a};case"bracket":return function(r,a,s){if(t=/(\[\])$/.exec(r),r=r.replace(/\[\]$/,""),!t){s[r]=a;return}if(s[r]===void 0){s[r]=[a];return}s[r]=[].concat(s[r],a)};case"comma":case"separator":return function(r,a,s){var f=typeof a=="string"&&a.includes(e.arrayFormatSeparator),n=typeof a=="string"&&!f&&A(a,e).includes(e.arrayFormatSeparator);a=n?A(a,e):a;var M=f||n?a.split(e.arrayFormatSeparator).map(function(W){return A(W,e)}):a===null?a:A(a,e);s[r]=M};default:return function(r,a,s){if(s[r]===void 0){s[r]=a;return}s[r]=[].concat(s[r],a)}}}function L(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function o(e,t){return t.encode?t.strict?u(e):encodeURIComponent(e):e}function A(e,t){return t.decode?l(e):e}function x(e){return Array.isArray(e)?e.sort():D(e)==="object"?x(Object.keys(e)).sort(function(t,r){return Number(t)-Number(r)}).map(function(t){return e[t]}):e}function J(e){var t=e.indexOf("#");return t!==-1&&(e=e.slice(0,t)),e}function z(e){var t="",r=e.indexOf("#");return r!==-1&&(t=e.slice(r)),t}function k(e){e=J(e);var t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function ce(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):t.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function se(e,t){t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t),L(t.arrayFormatSeparator);var r=v(t),a=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return a;var s=p(e.split("&")),f;try{for(s.s();!(f=s.n()).done;){var n=f.value;if(n!==""){var M=g(t.decode?n.replace(/\+/g," "):n,"="),W=E(M,2),Z=W[0],N=W[1];N=N===void 0?null:["comma","separator"].includes(t.arrayFormat)?N:A(N,t),r(A(Z,t),N,a)}}}catch(S){s.e(S)}finally{s.f()}for(var re=0,ue=Object.keys(a);re<ue.length;re++){var b=ue[re],m=a[b];if(D(m)==="object"&&m!==null)for(var I=0,X=Object.keys(m);I<X.length;I++){var j=X[I];m[j]=ce(m[j],t)}else a[b]=ce(m,t)}return t.sort===!1?a:(t.sort===!0?Object.keys(a).sort():Object.keys(a).sort(t.sort)).reduce(function(S,R){var T=a[R];return T&&D(T)==="object"&&!Array.isArray(T)?S[R]=x(T):S[R]=T,S},Object.create(null))}i.extract=k,i.parse=se,i.stringify=function(e,t){if(!e)return"";t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t),L(t.arrayFormatSeparator);for(var r=function(N){return t.skipNull&&U(e[N])||t.skipEmptyString&&e[N]===""},a=B(t),s={},f=0,n=Object.keys(e);f<n.length;f++){var M=n[f];r(M)||(s[M]=e[M])}var W=Object.keys(s);return t.sort!==!1&&W.sort(t.sort),W.map(function(Z){var N=e[Z];return N===void 0?"":N===null?o(Z,t):Array.isArray(N)?N.reduce(a(Z),[]).join("&"):o(Z,t)+"="+o(N,t)}).filter(function(Z){return Z.length>0}).join("&")},i.parseUrl=function(e,t){t=Object.assign({decode:!0},t);var r=g(e,"#"),a=E(r,2),s=a[0],f=a[1];return Object.assign({url:s.split("?")[0]||"",query:se(k(e),t)},t&&t.parseFragmentIdentifier&&f?{fragmentIdentifier:A(f,t)}:{})},i.stringifyUrl=function(e,t){t=Object.assign({encode:!0,strict:!0},t);var r=J(e.url).split("?")[0]||"",a=i.extract(e.url),s=i.parse(a,{sort:!1}),f=Object.assign(s,e.query),n=i.stringify(f,t);n&&(n="?".concat(n));var M=z(e.url);return e.fragmentIdentifier&&(M="#".concat(o(e.fragmentIdentifier,t))),"".concat(r).concat(n).concat(M)},i.pick=function(e,t,r){r=Object.assign({parseFragmentIdentifier:!0},r);var a=i.parseUrl(e,r),s=a.url,f=a.query,n=a.fragmentIdentifier;return i.stringifyUrl({url:s,query:w(f,t),fragmentIdentifier:n},r)},i.exclude=function(e,t,r){var a=Array.isArray(t)?function(s){return!t.includes(s)}:function(s,f){return!t(s,f)};return i.pick(e,a,r)}},13615:function(H){H.exports=function(i,c){if(!(typeof i=="string"&&typeof c=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(c==="")return[i];var E=i.indexOf(c);return E===-1?[i]:[i.slice(0,E),i.slice(E+c.length)]}},62072:function(H){H.exports=function(i){return encodeURIComponent(i).replace(/[!'()*]/g,function(c){return"%".concat(c.charCodeAt(0).toString(16).toUpperCase())})}},44020:function(H){var i="%[a-f0-9]{2}",c=new RegExp("("+i+")|([^%]+?)","gi"),E=new RegExp("("+i+")+","gi");function p(u,l){try{return[decodeURIComponent(u.join(""))]}catch(U){}if(u.length===1)return u;l=l||1;var g=u.slice(0,l),w=u.slice(l);return Array.prototype.concat.call([],p(g),p(w))}function D(u){try{return decodeURIComponent(u)}catch(w){for(var l=u.match(c)||[],g=1;g<l.length;g++)u=p(l,g).join(""),l=u.match(c)||[];return u}}function h(u){for(var l={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},g=E.exec(u);g;){try{l[g[0]]=decodeURIComponent(g[0])}catch(L){var w=D(g[0]);w!==g[0]&&(l[g[0]]=w)}g=E.exec(u)}l["%C2"]="\uFFFD";for(var U=Object.keys(l),B=0;B<U.length;B++){var v=U[B];u=u.replace(new RegExp(v,"g"),l[v])}return u}H.exports=function(u){if(typeof u!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof u+"`");try{return u=u.replace(/\+/g," "),decodeURIComponent(u)}catch(l){return h(u)}}},92806:function(H){H.exports=function(i,c){for(var E={},p=Object.keys(i),D=Array.isArray(c),h=0;h<p.length;h++){var u=p[h],l=i[u];(D?c.indexOf(u)!==-1:c(u,l,i))&&(E[u]=l)}return E}}}]);

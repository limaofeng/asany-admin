"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3446,1836],{51253:function(ae,K,a){a.d(K,{GP:function(){return k.Z},Hk:function(){return c},xx:function(){return R.x}});var q=a(74958),k=a(5166),R=a(19260),I=a(68400),d=a.n(I),z=a(62435),m=a(93967),S=a.n(m),O=a(94589),Q=a(97857),i=a.n(Q),D=a(46027),Z=a(42687),Y=a(13757),G=a(5574),J=a.n(G),M=a(96486),v=a(86074),h={aside:{minimize:!1,width:280}},C=z.createContext({state:h,dispatch:function(){}}),e=function(t){return t.AsideToggle="ASIDE_TOGGLE",t.AsideWidth="ASIDE_WIDTH",t}({});function w(t,r){switch(r.type){case"ASIDE_TOGGLE":return t.aside.minimize=!t.aside.minimize,i()({},t);case"ASIDE_WIDTH":return t.aside.width=r.payload,i()({},t);default:throw new Error}}var U=function(r){var f=(0,z.useReducer)(w,(0,M.cloneDeep)(h)),p=J()(f,2),o=p[0],g=p[1];return(0,v.jsx)(C.Provider,{value:{state:o,dispatch:g},children:r.children})},T=function(){return(0,z.useContext)(C)},W=a(65495);function j(t){var r=T(),f=r.dispatch,p=r.state.aside.minimize,o=(0,z.useCallback)(function(){f({type:e.AsideToggle})},[f]);return(0,v.jsx)(Y.Button,{style:i()({marginBottom:"1.35rem",zIndex:105},t.style),onClick:o,activeColor:"primary",className:S()("micro-app-aside-toggle","btn-icon bg-body btn-color-gray-700 rounded-2 position-absolute translate-middle bottom-0 shadow-sm d-none d-lg-flex",t.className,{active:p}),children:(0,v.jsx)(D.JO,{name:"Duotune/arr063",className:"svg-icon-2 rotate-180"})})}function s(t){var r=t.className,f=t.header,p=t.children,o=t.collapsible,g=o===void 0?!0:o,A=t.width,N=A===void 0?280:A,B=(0,Z.$Y)(),$=T(),E=$.dispatch;return(0,z.useEffect)(function(){B.aside.width(N+100),E({type:e.AsideWidth,payload:N})},[B.aside,E,N]),(0,v.jsxs)("div",{className:S()("app-aside aside",r),children:[(0,v.jsx)(W.Z,{children:(0,v.jsx)(k.Z,{header:f,resizeable:!0,className:"app-sidebar",children:p})}),g&&(0,v.jsx)(j,{className:"start-100 end-0"})]})}s.Toggle=j;var l=s,n,b=O.ZP.div(n||(n=d()([`
  --root-aside-width: `,`;
  --met-aside-width: `,`;
`])),function(t){return t.minimize?"100px":"".concat(t.width,"px")},function(t){return t.minimize?"100px":"".concat(t.width,"px")});function y(t){var r=t.children,f=t.className,p=T(),o=p.state.aside,g=o.minimize,A=o.width,N=(0,z.useCallback)(function(B){B.preventDefault()},[]);return(0,v.jsx)(b,{minimize:g,width:A,className:S()("micro-app-container page-full-content",f,{"aside-minimize":g}),onContextMenu:N,children:r})}function x(t){var r=t.children,f=t.className;return(0,v.jsx)(U,{children:(0,v.jsx)(y,{className:f,children:r})})}x.Sidebar=l;var c=x},42687:function(ae,K,a){a.d(K,{$Y:function(){return D},BK:function(){return Y},aM:function(){return J}});var q=a(5574),k=a.n(q),R=a(97857),I=a.n(R),d=a(62435),z=a(86074),m=d.createContext({getState:function(){return{routes:[]}},subscribe:function(){},dispatch:function(){}}),S=function(v,h){return h?h.type==="ASIDE_MINIMIZE"?I()(I()({},v),{},{aside:I()(I()({},v.aside),{},{minimize:!!h.payload})}):h.type==="ASIDE_WIDTH"?I()(I()({},v),{},{aside:I()(I()({},v.aside),{},{width:h.payload})}):h.type==="ASIDE_COLLAPSIBLE"?I()(I()({},v),{},{aside:I()(I()({},v.aside),{},{collapsible:h.payload})}):v:v},O=function(v){return I()({},v)};function Q(M){var v=(0,d.useReducer)(S,M,O),h=k()(v,2),C=h[0],e=h[1],w=(0,d.useState)([]),U=k()(w,1),T=U[0],W=function(c){return function(){var t=T.indexOf(c);t>-1&&T.splice(t,1)}},j=(0,d.useCallback)(function(x){return T.unshift(x),W(x)},[T]),s=(0,d.useCallback)(function(){T.forEach(function(x){return x()})},[T]),l={getState:function(){return C},dispatch:e,subscribe:j},n=(0,d.useState)(l),b=k()(n,1),y=b[0];return(0,d.useEffect)(function(){y.getState=function(){return C},s()},[C]),y}var i=function(v,h){return v===h};function D(){var M=(0,d.useContext)(m),v=(0,d.useRef)({aside:{get state(){return M.getState().aside},width:function(C){M.dispatch({type:"ASIDE_WIDTH",payload:C})},minimize:function(C){M.dispatch({type:"ASIDE_MINIMIZE",payload:C})},collapsible:function(C){M.dispatch({type:"ASIDE_COLLAPSIBLE",payload:C})}}});return v.current}function Z(M){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i,h=(0,d.useContext)(m),C=(0,d.useReducer)(function(j){return j+1},0),e=k()(C,2),w=e[1],U=(0,d.useRef)(),T=M(h.getState());function W(){var j=M(h.getState());v(j,U.current)||(U.current=j,w())}return(0,d.useEffect)(function(){return h.subscribe(W)},[]),T}function Y(M){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i;return Z(M,v)}function G(){var M=useContext(m);return M.dispatch}function J(M){var v=M.children,h=M.state,C=Q(h);return(0,d.useMemo)(function(){return(0,z.jsx)(m.Provider,{value:C,children:v})},[v,C])}},96414:function(ae,K,a){a.d(K,{dI:function(){return W},rB:function(){return T}});var q=a(5574),k=a.n(q),R=a(62435),I={USERS_LIST:"users-list"};function d(j){return j!=null&&j!==""}function z(j,s){var l=useState(j),n=_slicedToArray(l,2),b=n[0],y=n[1];return useEffect(function(){var x=setTimeout(function(){y(j)},s);return function(){clearTimeout(x)}},[j,s]),b}var m=a(72004),S=a.n(m),O=a(12444),Q=a.n(O),i=a(9783),D=a.n(i),Z=a(8606),Y=S()(function j(){var s=this;Q()(this,j),D()(this,"menu",null),D()(this,"element",null),D()(this,"getParamName",function(l){var n=document.body.hasAttribute("data-kt-name"),b=n?n+"_":"";return"kt_"+b+"theme_mode_"+l}),D()(this,"getMode",function(){var l,n=s.getParamName("value"),b=s.getMenuMode(),y="light";if(!localStorage)return y;var x=localStorage.getItem(n);if(x)return x;var c=(l=s.element)===null||l===void 0?void 0:l.getAttribute("data-theme");return c||(b?b==="system"?s.getSystemMode():b:y)}),D()(this,"setMode",function(l,n){var b,y,x,c=l,t=n;if(!(c!=="light"&&c!=="dark")){var r=s.getParamName("value"),f=s.getParamName("menu");t==="system"&&s.getSystemMode()!==c&&(c=s.getSystemMode()),t||(t=c);var p=((b=s.menu)===null||b===void 0?void 0:b.querySelector('[data-kt-element="mode"][data-kt-value="'+t+'"]'))||null;(y=s.element)===null||y===void 0||y.setAttribute("data-kt-theme-mode-switching","true"),(x=s.element)===null||x===void 0||x.setAttribute("data-theme",c);var o=s;setTimeout(function(){var g;(g=o.element)===null||g===void 0||g.removeAttribute("data-kt-theme-mode-switching")},300),localStorage&&localStorage.setItem(r,c),p&&localStorage&&(localStorage.setItem(f,t),s.setActiveMenuItem(p)),s.flipImages()}}),D()(this,"getMenuMode",function(){var l,n=s.getParamName("menu"),b=(l=s.menu)===null||l===void 0?void 0:l.querySelector('.active[data-kt-element="mode"]'),y=b==null?void 0:b.getAttribute("data-kt-value");if(y)return y;if(!n)return"";var x=localStorage?localStorage.getItem(n):null;return x||""}),D()(this,"getSystemMode",function(){return window.matchMedia("(prefers-color-scheme: dark)")?"dark":"light"}),D()(this,"initMode",function(){s.setMode(s.getMode(),s.getMenuMode()),s.element&&Z.EventHandlerUtil.trigger(s.element,"kt.thememode.init")}),D()(this,"setActiveMenuItem",function(l){var n,b=s.getParamName("menu"),y=l.getAttribute("data-kt-value"),x=(n=s.menu)===null||n===void 0?void 0:n.querySelector('.active[data-kt-element="mode"]');x&&x.classList.remove("active"),l.classList.add("active"),localStorage&&y&&b&&localStorage.setItem(b,y)}),D()(this,"handleMenu",function(){var l;(l=s.menu)===null||l===void 0||(l=l.querySelectorAll('[data-kt-element="mode"]'))===null||l===void 0||l.forEach(function(n){n.addEventListener("click",function(b){b.preventDefault();var y=n.getAttribute("data-kt-value"),x=y==="system"?s.getSystemMode():y;x&&s.setMode(x,y)})})}),D()(this,"flipImages",function(){var l;(l=document.querySelectorAll("[data-kt-img-dark]"))===null||l===void 0||l.forEach(function(n){n.tagName==="IMG"?s.getMode()==="dark"&&n.hasAttribute("data-kt-img-dark")?(n.setAttribute("data-kt-img-light",n.getAttribute("src")||""),n.setAttribute("src",n.getAttribute("data-kt-img-dark")||"")):s.getMode()==="light"&&n.hasAttribute("data-kt-img-light")&&(n.setAttribute("data-kt-img-dark",n.getAttribute("src")||""),n.setAttribute("src",n.getAttribute("data-kt-img-light")||"")):s.getMode()==="dark"&&n.hasAttribute("data-kt-img-dark")?(n.setAttribute("data-kt-img-light",n.getAttribute("src")||""),n.style.backgroundImage="url('"+n.getAttribute("data-kt-img-dark")+"')"):s.getMode()==="light"&&n.hasAttribute("data-kt-img-light")&&(n.setAttribute("data-kt-img-dark",n.getAttribute("src")||""),n.style.backgroundImage="url('"+n.getAttribute("data-kt-img-light")+"')")})}),D()(this,"on",function(l,n){if(s.element)return Z.EventHandlerUtil.on(s.element,l,n)}),D()(this,"off",function(l,n){if(s.element)return Z.EventHandlerUtil.off(s.element,l,n)}),D()(this,"init",function(){s.menu=document.querySelector('[data-kt-element="theme-mode-menu"]'),s.element=document.documentElement,s.initMode(),s.menu&&s.handleMenu()})}),G=new Y,J=a(86074),M=G.getSystemMode(),v=function(s){var l=s!=="system"?s:M,n="/media/patterns/header-bg"+(l==="light"?".jpg":"-dark.png");document.body.style.backgroundImage='url("'.concat(toAbsoluteUrl(n),'")')},h="kt_theme_mode_value",C="kt_theme_mode_menu",e=function(s){if(!localStorage)return"light";var l=localStorage.getItem(s);return!l||l==="light"?"light":l==="dark"?"dark":"system"},w={mode:e(h),menuMode:e(C),updateMode:function(s){},updateMenuMode:function(s){}},U=(0,R.createContext)({mode:w.mode,menuMode:w.menuMode,updateMode:function(s){},updateMenuMode:function(s){}}),T=function(){return(0,R.useContext)(U)},W=function(s){var l=s.children,n=(0,R.useState)(w.mode),b=k()(n,2),y=b[0],x=b[1],c=(0,R.useState)(w.menuMode),t=k()(c,2),r=t[0],f=t[1],p=function(A){var N=A==="system"?M:A;x(N),localStorage&&localStorage.setItem(h,N),document.documentElement.setAttribute("data-theme",N),G.init()},o=function(A){f(A),localStorage&&localStorage.setItem(C,A)};return(0,R.useEffect)(function(){p(y),o(r)},[]),(0,J.jsx)(U.Provider,{value:{mode:y,menuMode:r,updateMode:p,updateMenuMode:o},children:l})}},7343:function(ae,K,a){a.r(K),a.d(K,{default:function(){return x}});var q=a(64599),k=a.n(q),R=a(19632),I=a.n(R),d=a(62435),z=a(96974),m=a(46027),S=a(12845),O=a(1861),Q=a(51253),i=a(13757),D=a(15009),Z=a.n(D),Y=a(99289),G=a.n(Y),J=a(5574),M=a.n(J),v=a(93967),h=a.n(v),C=a(32115),e=a(86074);function w(c){return["zip"].includes(c.extension)?(0,e.jsx)(m.ZP,{name:"Bootstrap/file-zip-fill",className:"svg-icon-2x"}):c.mimeType.startsWith("image/")?(0,e.jsx)(m.ZP,{name:"Bootstrap/file-image-fill",className:"svg-icon-2x"}):c.mimeType.startsWith("video/")?(0,e.jsx)(m.ZP,{name:"Bootstrap/file-play-fill",className:"svg-icon-2x"}):(0,e.jsx)(m.ZP,{name:"Bootstrap/file-post-fill",className:"svg-icon-2x"})}function U(c){var t=c.file,r=(0,z.s0)(),f=(0,S.useModel)("cloud-drive.index",function(E){return E.api.base}),p=(0,S.useModel)("cloud-drive.index",function(E){return E.api.upload}),o=(0,d.useCallback)(function(){p.cancel(t.id)},[p,t.id]),g=(0,d.useCallback)(function(){f.closeTransfers(),r("/drive/folders/".concat(t.result.parentFolder.id))},[f,t.result,history]),A=(0,d.useCallback)(function(){p.start(t.id)},[p,t.id]),N=(0,d.useCallback)(function(){p.restore(t.id)},[p,t.id]),B=(0,d.useCallback)(function(){p.pause(t.id)},[p,t.id]),$=(0,d.useCallback)(function(){p.delete(t.id)},[p,t.id]);return(0,e.jsxs)("li",{className:h()("file-item",{"file-item-uploaded":["completed","error"].includes(t.state)}),children:[(0,e.jsx)("div",{className:"file-icon",children:w(t)}),(0,e.jsxs)("div",{className:"file-details",children:[(0,e.jsx)("div",{className:"file-title",children:t.name}),(0,e.jsx)("div",{className:h()("file-transfer-progress progress",{"opacity-0":t.state==="completed"}),children:(0,e.jsx)(i.Progress,{color:"success",percent:t.progress})}),(0,e.jsxs)("div",{className:"file-status",children:[(0,e.jsx)("div",{className:"file-size",children:(0,C.jb)(t.size)}),t.state==="error"&&(0,e.jsx)("div",{className:"upload-error text-danger",children:"\u4E0A\u4F20\u51FA\u73B0\u9519\u8BEF!"}),!["completed","error"].includes(t.state)&&(0,e.jsx)("div",{className:"file-transfer-rate",children:t.progress===100?"\u7B49\u5F85\u5B8C\u6210...":!!t.uploadSpeed&&t.uploadSpeed+"/s"})]})]}),(0,e.jsxs)("div",{className:"file-actions",children:[t.state==="waiting"&&(0,e.jsx)(i.Button,{icon:(0,e.jsx)(m.ZP,{name:"Bootstrap/clock",className:"svg-icon-4"})}),t.state==="uploading"&&(0,e.jsx)(i.Button,{onClick:B,icon:(0,e.jsx)(m.ZP,{name:"Bootstrap/pause",className:"svg-icon-4"})}),t.state==="paused"&&(0,e.jsx)(i.Button,{onClick:A,icon:(0,e.jsx)(m.ZP,{name:"Bootstrap/arrow-up-short",className:"svg-icon-4"})}),["canceled","error"].includes(t.state)&&(0,e.jsx)(i.Button,{onClick:N,icon:(0,e.jsx)(m.ZP,{name:"Bootstrap/arrow-counterclockwise",className:"svg-icon-4"})}),t.state==="completed"&&(0,e.jsx)(i.Button,{onClick:g,icon:(0,e.jsx)(m.ZP,{name:"Bootstrap/folder2",className:"svg-icon-6"})}),!["completed","canceled","error"].includes(t.state)&&(0,e.jsx)(i.Button,{onClick:o,icon:(0,e.jsx)(m.ZP,{name:"Bootstrap/x",className:"svg-icon-4"})}),["completed","canceled","error"].includes(t.state)&&(0,e.jsx)(i.Button,{onClick:$,icon:(0,e.jsx)(m.ZP,{name:"Bootstrap/eraser",className:"svg-icon-6"})})]})]},t.id)}function T(){var c=(0,S.useModel)("cloud-drive.index",function(t){var r=t.state;return r.uploadFiles});return(0,e.jsx)(O.E,{className:h()("custom-scrollbar"),options:{scrollbars:{autoHide:"scroll"}},children:c.length?(0,e.jsx)("ul",{className:"transfer-file-list",children:c.map(function(t){return(0,e.jsx)(U,{file:t},t.id)})}):(0,e.jsxs)("div",{className:"transfer-list-empty",children:[(0,e.jsx)("img",{src:"/assets/media/illustrations/dozzy-1/4.png"}),(0,e.jsx)("span",{className:"empty-title",children:"\u6CA1\u6709\u4E0A\u4F20\u4EFB\u52A1"})]})})}function W(c){var t=c.file,r=(0,S.useModel)("cloud-drive.index",function(B){return B.api.download}),f=(0,d.useCallback)(function(){r.cancel(t.id)},[r,t.id]),p=(0,d.useCallback)(function(){r.save(t.id),console.log("\u672C\u5730\u4E0B\u8F7D")},[r,t.id]),o=(0,d.useCallback)(function(){r.start(t.id)},[r,t.id]),g=(0,d.useCallback)(function(){r.restore(t.id)},[r,t.id]),A=(0,d.useCallback)(function(){r.pause(t.id)},[r,t.id]),N=(0,d.useCallback)(function(){r.delete(t.id)},[r,t.id]);return(0,e.jsxs)("li",{className:h()("file-item",{"file-item-download":["completed","error"].includes(t.state)}),children:[(0,e.jsx)("div",{className:"file-icon",children:w(t)}),(0,e.jsxs)("div",{className:"file-details",children:[(0,e.jsx)("div",{className:"file-title",children:t.name}),(0,e.jsx)("div",{className:h()("file-transfer-progress progress",{"opacity-0":t.state==="completed"}),children:(0,e.jsx)(i.Progress,{color:"primary",percent:t.progress})}),(0,e.jsxs)("div",{className:"file-status",children:[(0,e.jsx)("div",{className:"file-size",children:!!t.size&&(0,C.jb)(t.size)}),t.state==="error"&&(0,e.jsx)("div",{className:"upload-error text-danger",children:"\u4E0B\u8F7D\u51FA\u73B0\u9519\u8BEF!"}),!["completed","error"].includes(t.state)&&(0,e.jsx)("div",{className:"file-transfer-rate",children:t.progress===0||!t.size?"\u7B49\u5F85\u8D44\u6E90...":!!t.downloadSpeed&&t.downloadSpeed+"/s"})]})]}),(0,e.jsxs)("div",{className:"file-actions",children:[t.state==="waiting"&&(0,e.jsx)(i.Button,{icon:(0,e.jsx)(m.ZP,{name:"Bootstrap/clock",className:"svg-icon-4"})}),t.state==="downloading"&&(0,e.jsx)(i.Button,{onClick:A,icon:(0,e.jsx)(m.ZP,{name:"Bootstrap/pause",className:"svg-icon-4"})}),t.state==="paused"&&(0,e.jsx)(i.Button,{onClick:o,icon:(0,e.jsx)(m.ZP,{name:"Bootstrap/arrow-down-short",className:"svg-icon-4"})}),["canceled","error"].includes(t.state)&&(0,e.jsx)(i.Button,{onClick:g,icon:(0,e.jsx)(m.ZP,{name:"Bootstrap/arrow-counterclockwise",className:"svg-icon-4"})}),t.state==="completed"&&(0,e.jsx)(i.Button,{onClick:p,icon:(0,e.jsx)(m.ZP,{name:"Bootstrap/download",className:"svg-icon-6"})}),!["completed","canceled","error"].includes(t.state)&&(0,e.jsx)(i.Button,{onClick:f,icon:(0,e.jsx)(m.ZP,{name:"Bootstrap/x",className:"svg-icon-4"})}),["completed","canceled","error"].includes(t.state)&&(0,e.jsx)(i.Button,{onClick:N,icon:(0,e.jsx)(m.ZP,{name:"Bootstrap/eraser",className:"svg-icon-6"})})]})]},t.id)}function j(){var c=(0,S.useModel)("cloud-drive.index",function(t){var r=t.state;return r.downloadFiles});return(0,e.jsx)(O.E,{className:h()("custom-scrollbar"),options:{scrollbars:{autoHide:"scroll"}},children:c.length?(0,e.jsx)("ul",{className:"transfer-file-list",children:c.map(function(t){return(0,e.jsx)(W,{file:t},t.id)})}):(0,e.jsxs)("div",{className:"transfer-list-empty",children:[(0,e.jsx)("img",{src:"/assets/media/illustrations/dozzy-1/4.png"}),(0,e.jsx)("span",{className:"empty-title",children:"\u6CA1\u6709\u4E0B\u8F7D\u4EFB\u52A1"})]})})}function s(){var c=(0,d.useState)("upload"),t=M()(c,2),r=t[0],f=t[1],p=(0,d.useCallback)(function(E){f(E)},[]),o=(0,S.useModel)("cloud-drive.index",function(E){return{deleteUploadFile:E.api.upload.delete,deleteDownloadFile:E.api.download.delete}}),g=(0,S.useModel)("cloud-drive.index",function(E){var F=E.state;return F.uploadFiles.filter(function(L){return L.state==="completed"})}),A=(0,S.useModel)("cloud-drive.index",function(E){var F=E.state;return F.downloadFiles.filter(function(L){return L.state==="completed"})}),N=(0,d.useCallback)(G()(Z()().mark(function E(){var F,L,V;return Z()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:F=k()(g),u.prev=1,F.s();case 3:if((L=F.n()).done){u.next=9;break}return V=L.value,u.next=7,o.deleteUploadFile(V.id);case 7:u.next=3;break;case 9:u.next=14;break;case 11:u.prev=11,u.t0=u.catch(1),F.e(u.t0);case 14:return u.prev=14,F.f(),u.finish(14);case 17:case"end":return u.stop()}},E,null,[[1,11,14,17]])})),[o,g]),B=(0,d.useCallback)(G()(Z()().mark(function E(){var F,L,V;return Z()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:F=k()(A),u.prev=1,F.s();case 3:if((L=F.n()).done){u.next=9;break}return V=L.value,u.next=7,o.deleteDownloadFile(V.id);case 7:u.next=3;break;case 9:u.next=14;break;case 11:u.prev=11,u.t0=u.catch(1),F.e(u.t0);case 14:return u.prev=14,F.f(),u.finish(14);case 17:case"end":return u.stop()}},E,null,[[1,11,14,17]])})),[o,A]),$=(0,d.useMemo)(function(){return!!g.length&&r==="upload"||!!A.length&&r==="download"},[r,g.length,A.length]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"popover-header",children:[(0,e.jsx)("span",{className:"popover-title",children:"\u4F20\u8F93\u5217\u8868"}),(0,e.jsx)("div",{className:"popover-toolbar",children:$&&(0,e.jsx)("a",{className:"cursor-pointer",onClick:r==="upload"?N:B,children:"\u6E05\u7A7A\u5DF2\u5B8C\u6210"})})]}),(0,e.jsxs)(i.Tabs,{activeKey:r,onChange:p,tabPosition:"left",children:[(0,e.jsx)(i.Tabs.TabPane,{tab:"\u6587\u4EF6\u4E0A\u4F20",children:(0,e.jsx)(T,{})},"upload"),(0,e.jsx)(i.Tabs.TabPane,{tab:"\u6587\u4EF6\u4E0B\u8F7D",children:(0,e.jsx)(j,{})},"download")]})]})}var l=s,n=a(82471);function b(c){var t=c.drives,r=c.onAction,f=(0,S.useModel)("cloud-drive.index",function(g){var A=g.state;return A.driveId}),p=(0,d.useCallback)(function(g){if(g.startsWith("drive-"))console.log(g);else return r(g),!1;return!0},[r]),o=(0,d.useMemo)(function(){return[].concat(I()(t.map(function(g){return{value:"drive-".concat(g.id),label:g.name}})),[{type:"separator"},{value:"preferences",label:"\u504F\u597D\u8BBE\u7F6E"}])},[t]);return(0,e.jsx)("div",{className:"app-sidebar-footer",children:(0,e.jsx)(i.Select,{onChange:p,placement:"topCenter",value:f?"drive-".concat(f):void 0,options:o})})}function y(){var c=(0,S.useModel)("cloud-drive.index",function(P){var u=P.state;return u.driveId}),t=(0,S.useModel)("cloud-drive.index",function(P){var u=P.state;return u.visibleTransfers}),r=(0,S.useModel)("cloud-drive.index",function(P){return P.api.base}),f=(0,z.bS)("/drive/:type/:value"),p=(0,n.dH)({fetchPolicy:"cache-and-network"}),o=p.data,g=(0,S.useModel)("cloud-drive.index",function(P){var u=P.state;return u.driveId}),A=(0,S.useModel)("cloud-drive.index",function(P){return P.setCloudDrive});(0,d.useEffect)(function(){if(o!=null&&o.cloudDrives){var P=o==null?void 0:o.cloudDrives;P.some(function(u){return u.id===g})||A(P[0])}},[o==null?void 0:o.cloudDrives,A,g]);var N=(0,d.useMemo)(function(){if(!(!(o!=null&&o.cloudDrives)||!c))return o.cloudDrives.find(function(P){return P.id===c})},[o==null?void 0:o.cloudDrives,c]),B=(0,d.useMemo)(function(){return(f==null?void 0:f.params.type)||(f==null?void 0:f.params.type)},[f]),$=(0,d.useMemo)(function(){return f==null?void 0:f.params.value},[f]),E=(0,d.useCallback)(function(P){P?r.openTransfers():r.closeTransfers()},[r]),F=(0,d.useMemo)(function(){return $?B==="folders"?["my-drive"]:B==="mime-types"?[$]:[B]:[B]},[B,$]),L=(0,S.useModel)("cloud-drive.index",function(P){var u=P.state,_=0,ee=0,H=k()(u.uploadFiles),te;try{for(H.s();!(te=H.n()).done;){var X=te.value;_+=X.size,ee+=X.size*(X.progress/100)}}catch(se){H.e(se)}finally{H.f()}return Math.max(ee/_*100<<0,u.uploadFiles.length?1:0)}),V=(0,S.useModel)("cloud-drive.index",function(P){var u=P.state,_=0,ee=0,H=k()(u.downloadFiles),te;try{for(H.s();!(te=H.n()).done;){var X=te.value;_+=X.size,ee+=X.size*(X.progress/100)}}catch(se){H.e(se)}finally{H.f()}return Math.max(ee/_*100<<0,u.downloadFiles.length?1:0)});return(0,e.jsxs)(Q.GP,{collapsible:!1,width:280,className:"app-sidebar app-drive-sidebar",children:[(0,e.jsxs)("div",{className:"relative mt-5 px-5 pt-5 d-flex",children:[(0,e.jsx)("h1",{className:"text-gray-800 flex-row-fluid fw-bold mb-6 mx-5",children:"\u4E91\u76D8"}),(0,e.jsx)(i.Popover,{visible:t,onVisibleChange:E,overlayClassName:"dialog-transfers",content:(0,e.jsx)(l,{}),children:(0,e.jsxs)("div",{className:"file-transfer-icon",children:[(0,e.jsx)(i.CircleProgress,{className:"download-all-progress position-absolute top-50 start-50 translate-middle",width:34,percent:V,strokeWidth:6,success:{strokeColor:"#04c8c8"}}),(0,e.jsx)(i.CircleProgress,{className:"upload-all-progress position-absolute top-50 start-50 translate-middle",width:26,percent:L,strokeWidth:7.5,success:{strokeColor:"#009ef7"}}),(0,e.jsx)(i.Pulse,{size:"sm",pause:!V&&!L,children:(0,e.jsx)(m.ZP,{className:"svg-icon-6",name:"Duotune/arr032"})})]})})]}),(0,e.jsxs)(O.E,{className:"app-sidebar-body flex-column-fluid d-flex flex-column px-8 custom-scrollbar",options:{scrollbars:{autoHide:"scroll"}},children:[(0,e.jsxs)(i.Menu,{className:"menu-title-gray-600 menu-icon-gray-400 menu-state-bg menu-state-primary menu-state-icon-primary menu-state-bullet-primary",accordion:!1,rounded:!0,selectable:"AllMenu",openKeys:["my-drive"],selectedKeys:F,children:[(0,e.jsxs)(i.Menu.SubMenu,{url:"/drive/my-drive",titleClassName:"fw-bolder",icon:(0,e.jsx)(m.ZP,{className:"svg-icon-2 me-3",name:"Duotune/abs040"}),title:"\u6211\u7684\u6587\u4EF6",children:[(0,e.jsx)(i.Menu.Item,{className:"mb-2 mt-2",url:"/drive/mime-types/image",titleClassName:"fw-bolder",icon:(0,e.jsx)(m.ZP,{className:"svg-icon-2 me-3",name:"Duotune/gen006"}),children:"\u56FE\u7247"},"image"),(0,e.jsx)(i.Menu.Item,{className:"mb-2",url:"/drive/mime-types/document",titleClassName:"fw-bolder",icon:(0,e.jsx)(m.ZP,{className:"svg-icon-2 me-3",name:"Duotune/fil003"}),children:"\u6587\u6863"},"document"),(0,e.jsx)(i.Menu.Item,{className:"mb-2",url:"/drive/mime-types/video",titleClassName:"fw-bolder",icon:(0,e.jsx)(m.ZP,{className:"svg-icon-2 me-3",name:"Duotune/arr027"}),children:"\u89C6\u9891"},"video"),(0,e.jsx)(i.Menu.Item,{className:"mb-2",url:"/drive/mime-types/audio",titleClassName:"fw-bolder",icon:(0,e.jsx)(m.ZP,{className:"svg-icon-2 me-3",name:"Duotune/elc008"}),children:"\u97F3\u9891"},"audio"),(0,e.jsx)(i.Menu.Item,{url:"/drive/mime-types/other",titleClassName:"fw-bolder",icon:(0,e.jsx)(m.ZP,{className:"svg-icon-2 me-3",name:"Duotune/gen052"}),children:"\u5176\u4ED6"},"other")]},"my-drive"),(0,e.jsx)(i.Menu.Separator,{className:"my-1"}),(0,e.jsx)(i.Menu.Item,{className:"mb-2",url:"/drive/starred",titleClassName:"fw-bolder",icon:(0,e.jsx)(m.ZP,{className:"svg-icon-2 me-3",name:"Duotune/abs024"}),children:"\u6536\u85CF\u5939"},"starred"),(0,e.jsx)(i.Menu.Item,{url:"/drive/trash",titleClassName:"fw-bolder",icon:(0,e.jsx)(m.ZP,{className:"svg-icon-2 me-3",name:"Duotune/gen027"}),children:"\u56DE\u6536\u7AD9"},"trash"),(0,e.jsx)(i.Menu.Separator,{className:"my-1"}),(0,e.jsx)(i.Menu.Item,{url:"/drive/quota",titleClassName:"fw-bolder",icon:(0,e.jsx)(m.ZP,{className:"svg-icon-2 me-3",name:"Duotune/fil020"}),children:"\u5B58\u50A8\u7A7A\u95F4"},"quota")]}),(0,e.jsxs)("div",{className:"drive-quota d-flex align-items-center flex-column mb-10",children:[(0,e.jsx)("div",{className:"h-5px mx-3 w-100 bg-light mb-2",children:(0,e.jsx)("div",{className:"bg-success rounded h-5px",role:"progressbar",style:{width:"".concat((N==null?void 0:N.quota.usage)/(N==null?void 0:N.quota.size)*100,"%")}})}),(0,e.jsxs)("div",{className:"d-flex justify-content-between w-100 mt-auto mb-2",children:[(0,e.jsxs)("span",{className:"fw-bold fs-7 text-gray-400",children:["\u5DF2\u4F7F\u7528\xA0",N==null?void 0:N.quota.usageStr,", \xA0\u5171\xA0",N==null?void 0:N.quota.sizeStr]}),(0,e.jsx)("a",{className:"fw-bolder fs-7 text-success",children:"\u6269\u5BB9"})]})]})]}),(0,e.jsx)(b,{drives:(o==null?void 0:o.cloudDrives)||[],onAction:function(){}})]})}var x=y}}]);

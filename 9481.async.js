"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9481],{85947:function($,B,n){n.d(B,{u7:function(){return r.u7},pM:function(){return r.pM},dP:function(){return r.dP},zR:function(){return r.zR},bo:function(){return r.bo},CF:function(){return r.CF},hT:function(){return r.hT},X4:function(){return r.X4},rq:function(){return r.rq},qb:function(){return r.qb},a$:function(){return r.a$},mp:function(){return r.mp},WE:function(){return r.WE},HC:function(){return r.HC},cT:function(){return i},Hr:function(){return K},r3:function(){return r.r3},bI:function(){return r.bI},A6:function(){return r.A6},LV:function(){return r.LV}});var r=n(10557),F=n(15009),E=n.n(F),O=n(99289),T=n.n(O),k=n(5574),y=n.n(k),j=n(62435),_=n(79817),v=n(86074);function U(e,o){var m,p=(0,r.rz)({variables:{id:e==null?void 0:e.id},refetchQueries:[{query:r.dP,variables:{id:e==null||(m=e.application)===null||m===void 0?void 0:m.id}}]}),f=y()(p,1),c=f[0],b=(0,j.useCallback)(T()(E()().mark(function h(){var d;return E()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.Modal.confirm({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u8DEF\u7531\u5417\uFF1F",content:(0,v.jsxs)(v.Fragment,{children:["\u60A8\u5373\u5C06\u5220\u9664\u201C",(0,v.jsx)("strong",{children:e.name}),"\u201D\u3002\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F"]}),okText:"\u5220 \u9664",okClassName:"btn-danger"});case 2:if(d=t.sent,!d.isConfirmed){t.next=8;break}return t.next=6,c();case 6:_.Toast.success("\u5220\u9664\u6210\u529F"),o(e);case 8:case"end":return t.stop()}},h)})),[c,e,o]);return[b]}var i=U,A=n(97857),g=n.n(A),a=n(12708);function W(e,o){var m,p,f,c=_.Form.useForm(),b=(0,j.useState)(!1),h=y()(b,2),d=h[0],s=h[1],t=(0,r.X4)({fetchPolicy:"no-cache",refetchQueries:[{query:r.dP,variables:{id:e==null||(m=e.application)===null||m===void 0?void 0:m.id}}]}),x=y()(t,1),N=x[0],I=(0,r.LV)({fetchPolicy:"no-cache",refetchQueries:[{query:r.dP,variables:{id:e==null||(p=e.application)===null||p===void 0?void 0:p.id}}]}),L=y()(I,1),D=L[0],P=(0,j.useMemo)(function(){return e!=null&&e.id?T()(E()().mark(function M(){var C,l,R;return E()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return s(!0),u.prev=1,u.next=4,c.validateFields();case 4:return C=u.sent,u.next=7,_.Toast.promise((0,a.gw)(D({variables:{id:e.id,input:g()({},C)}}),350),{pending:"\u63D0\u4EA4\u4E2D...",success:{render:function(){return(0,v.jsxs)(v.Fragment,{children:["\u8DEF\u7531 ",(0,v.jsx)("strong",{children:C.name})," \u4FDD\u5B58\u6210\u529F"]})}},error:"\u63D0\u4EA4\u51FA\u9519"},{duration:2e3,placement:"top-center"});case 7:l=u.sent,R=l.data,o(R.updateRoute),s(!1),u.next=16;break;case 13:u.prev=13,u.t0=u.catch(1),s(!1);case 16:case"end":return u.stop()}},M,null,[[1,13]])})):T()(E()().mark(function M(){var C,l,R;return E()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return s(!0),u.prev=1,u.next=4,c.validateFields();case 4:return C=u.sent,u.next=7,_.Toast.promise((0,a.gw)(N({variables:{input:g()(g()({},C),{},{application:e.application.id})}}),350),{pending:"\u63D0\u4EA4\u4E2D...",success:{render:function(){return(0,v.jsxs)(v.Fragment,{children:["\u8DEF\u7531 ",(0,v.jsx)("strong",{children:C.name})," \u65B0\u589E\u6210\u529F"]})}},error:"\u63D0\u4EA4\u51FA\u9519"},{duration:2e3,placement:"top-center"});case 7:l=u.sent,R=l.data,o(R.createRoute),s(!1),u.next=16;break;case 13:u.prev=13,u.t0=u.catch(1),s(!1);case 16:case"end":return u.stop()}},M,null,[[1,13]])}))},[N,e==null||(f=e.application)===null||f===void 0?void 0:f.id,e==null?void 0:e.id,c,o,D]);return[P,{form:c,submitting:d}]}var K=W},99481:function($,B,n){n.r(B);var r=n(97857),F=n.n(r),E=n(15009),O=n.n(E),T=n(99289),k=n.n(T),y=n(5574),j=n.n(y),_=n(62435),v=n(46027),U=n(73588),i=n(79817),A=n(85947),g=n(12708),a=n(86074);function W(e){var o=e.data,m=e.refetch,p=e.onEdit,f=(0,_.useState)(!1),c=j()(f,2),b=c[0],h=c[1],d=(0,A.rq)({variables:{id:o.id}}),s=j()(d,1),t=s[0],x=(0,_.useCallback)(function(){var N=k()(O()().mark(function I(L){var D,P,M;return O()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(D=L.key,P=L.domEvent,P.preventDefault(),P.stopPropagation(),h(!1),D!=="update"){l.next=8;break}p(o),l.next=17;break;case 8:if(D!=="delete"){l.next=17;break}return l.next=11,i.Modal.confirm({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u83DC\u5355\u5417\uFF1F",content:"\u60A8\u5373\u5C06\u5220\u9664\u201C<strong>".concat(o.name,"</strong>\u201D\u3002\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F"),okText:"\u5220 \u9664",cancelClassName:"btn btn-secondary btn-sm",okClassName:"btn btn-danger btn-sm"});case 11:if(M=l.sent,!M.isConfirmed){l.next=17;break}return l.next=15,t();case 15:return l.next=17,m();case 17:case"end":return l.stop()}},I)}));return function(I){return N.apply(this,arguments)}}(),[o]);return(0,a.jsx)("div",{className:"d-flex justify-content-end",children:(0,a.jsx)("div",{className:"ms-2",children:(0,a.jsx)(i.Dropdown,{overlay:(0,a.jsxs)(i.Menu,{onClick:x,className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold w-125px py-4",children:[(0,a.jsx)(i.Menu.Item,{className:"px-3",children:"\u7F16\u8F91"},"update"),(0,a.jsx)(i.Menu.Item,{className:"px-3 actions-delete",children:"\u5220\u9664"},"delete")]}),placement:"bottomRight",onVisibleChange:h,visible:b,children:(0,a.jsx)(i.Button,{as:"button",size:"sm",variant:"light",activeColor:"light-primary",className:"me-2",icon:(0,a.jsx)(v.JO,{className:"svg-icon-5 m-0",name:"Duotune/gen052"})})})})})}function K(){var e,o=(0,A.a$)({variables:{id:352}}),m=o.data,p=o.refetch,f=m==null||(e=m.app)===null||e===void 0?void 0:e.menus,c=(0,_.useMemo)(function(){return(0,g.G_)((f||[]).map(function(d){return F()({},d)}),{pidKey:"parent.id",sort:function(s,t){return s.index-t.index},converter:function(s){return F()(F()({},s),{},{key:s.id,title:s.name,menuType:s.type,type:"directory"})}})},[f]),b=(0,_.useCallback)(function(){},[]),h=(0,_.useCallback)(function(){},[]);return(0,a.jsx)(U.vs,{header:{title:"\u5BFC\u822A\u83DC\u5355"},breadcrumb:(0,a.jsxs)(i.Breadcrumb,{className:"fw-bold fs-base text-muted my-1",children:[(0,a.jsx)(i.Breadcrumb.Item,{children:"\u8BBE\u7F6E"}),(0,a.jsx)(i.Breadcrumb.Item,{children:"\u5BFC\u822A\u83DC\u5355"})]}),loading:!1,footer:!1,children:(0,a.jsxs)(i.Card,{flush:!0,className:"mt-6 mt-xl-9",headerClassName:"mt-5",children:[(0,a.jsxs)(i.Card.Header,{className:"pt-8",children:[(0,a.jsx)(i.Card.Title,{}),(0,a.jsx)(i.Card.Toolbar,{children:(0,a.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,a.jsx)(i.Button,{variant:"danger",className:"me-3",children:"\u5220\u9664"}),(0,a.jsx)(i.Button,{onClick:b,variant:"primary",children:"\u65B0\u5EFA\u83DC\u5355"})]})})]}),(0,a.jsx)(i.Card.Body,{className:"pt-0",children:(0,a.jsx)(i.TreeList,{className:"app-treelist",rowKey:"id",draggable:!0,columns:[{key:"title",title:"\u540D\u79F0",render:function(s,t){var x={SECTION:{color:"info"},URL:{color:"primary"},MENU:{color:"success"},SCRIPT:{color:"dark"}};return(0,a.jsxs)("div",{className:"d-flex flex-column py-5",children:[(0,a.jsx)("span",{className:"title text-gray-800 text-hover-primary mb-1 fs-6",children:t.title}),(0,a.jsxs)("div",{className:"d-flex flex-row col-stacked",children:[(0,a.jsx)(i.Badge,{color:x[t.menuType].color,children:t.menuType}),(0,a.jsx)("span",{className:"tw-pl-2",children:t.path})]})]})}},{key:"index",title:"\u6392\u5E8F",className:"w-100px"},{key:"enabled",title:"\u542F\u7528\u72B6\u6001",className:"w-100px",render:function(s){return s?"\u542F\u7528":"\u7981\u7528"}},{key:"component",title:"\u5B50\u9762\u677F\u6E32\u67D3\u7EC4\u4EF6",className:"w-150px",render:function(s,t){return t.component?"\u6709\u7EC4\u4EF6":"\u65E0\u7EC4\u4EF6"}},{key:"actions",title:"\u64CD\u4F5C",className:"min-w-125px",render:function(s,t){return(0,a.jsx)(W,{onEdit:h,data:t,refetch:p})}}],dataSource:c})})]})})}B.default=K}}]);

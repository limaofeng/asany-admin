(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[844],{70844:function(I,j,n){"use strict";n.r(j);var h=n(11849),P=n(3182),D=n(2824),g=n(94043),M=n.n(g),_=n(67294),T=n(28865),k=n(75468),a=n(53704),N=n(14843),B=n(25496),e=n(85893);function F(d){var l=d.data,v=d.refetch,E=d.onEdit,m=(0,_.useState)(!1),i=(0,D.Z)(m,2),f=i[0],o=i[1],b=(0,N.rq)({variables:{id:l.id}}),p=(0,D.Z)(b,1),x=p[0],u=(0,_.useCallback)(function(){var s=(0,P.Z)(M().mark(function t(c){var y,C,O;return M().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(y=c.key,C=c.domEvent,C.preventDefault(),C.stopPropagation(),o(!1),y!=="update"){r.next=8;break}E(l),r.next=17;break;case 8:if(y!=="delete"){r.next=17;break}return r.next=11,a.u_.confirm({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u83DC\u5355\u5417\uFF1F",content:"\u60A8\u5373\u5C06\u5220\u9664\u201C<strong>".concat(l.name,"</strong>\u201D\u3002\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F"),okText:"\u5220 \u9664",cancelClassName:"btn btn-secondary btn-sm",okClassName:"btn btn-danger btn-sm"});case 11:if(O=r.sent,!O.isConfirmed){r.next=17;break}return r.next=15,x();case 15:return r.next=17,v();case 17:case"end":return r.stop()}},t)}));return function(t){return s.apply(this,arguments)}}(),[l]);return(0,e.jsx)("div",{className:"d-flex justify-content-end",children:(0,e.jsx)("div",{className:"ms-2",children:(0,e.jsx)(a.Lt,{overlay:(0,e.jsxs)(a.v2,{onClick:u,className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold w-125px py-4",children:[(0,e.jsx)(a.v2.Item,{className:"px-3",children:"\u7F16\u8F91"},"update"),(0,e.jsx)(a.v2.Item,{className:"px-3 actions-delete",children:"\u5220\u9664"},"delete")]}),placement:"bottomRight",onVisibleChange:o,visible:f,children:(0,e.jsx)(a.zx,{as:"button",size:"sm",variant:"light",activeColor:"light-primary",className:"me-2",icon:(0,e.jsx)(T.JO,{className:"svg-icon-5 m-0",name:"Duotune/gen052"})})})})})}function A(d){var l,v=d.match;console.log("match",v.params);var E=352,m=(0,N.a$)({variables:{id:E}}),i=m.data,f=m.refetch,o=i==null||(l=i.app)===null||l===void 0?void 0:l.menus,b=(0,_.useMemo)(function(){return(0,B.G_)((o||[]).map(function(u){return(0,h.Z)({},u)}),{pidKey:"parent.id",sort:function(s,t){return s.index-t.index},converter:function(s){return(0,h.Z)((0,h.Z)({},s),{},{key:s.id,title:s.name,menuType:s.type,type:"directory"})}})},[o]),p=(0,_.useCallback)(function(){},[]),x=(0,_.useCallback)(function(){},[]);return(0,e.jsx)(k.v,{header:{title:"\u5BFC\u822A\u83DC\u5355"},breadcrumb:(0,e.jsxs)(a.aG,{className:"fw-bold fs-base text-muted my-1",children:[(0,e.jsx)(a.aG.Item,{children:"\u8BBE\u7F6E"}),(0,e.jsx)(a.aG.Item,{children:"\u5BFC\u822A\u83DC\u5355"})]}),loading:!1,footer:!1,children:(0,e.jsxs)(a.Zb,{flush:!0,className:"mt-6 mt-xl-9",headerClassName:"mt-5",children:[(0,e.jsxs)(a.Zb.Header,{className:"pt-8",children:[(0,e.jsx)(a.Zb.Title,{}),(0,e.jsx)(a.Zb.Toolbar,{children:(0,e.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,e.jsx)(a.zx,{variant:"danger",className:"me-3",children:"\u5220\u9664"}),(0,e.jsx)(a.zx,{onClick:p,variant:"primary",children:"\u65B0\u5EFA\u83DC\u5355"})]})})]}),(0,e.jsx)(a.Zb.Body,{className:"pt-0",children:(0,e.jsx)(a.N4,{className:"app-treelist",rowKey:"id",draggable:!0,columns:[{key:"title",title:"\u540D\u79F0",render:function(s,t){var c={SECTION:{color:"info"},URL:{color:"primary"},MENU:{color:"success"},SCRIPT:{color:"dark"}};return(0,e.jsxs)("div",{className:"d-flex flex-column py-5",children:[(0,e.jsx)("span",{className:"title text-gray-800 text-hover-primary mb-1 fs-6",children:t.title}),(0,e.jsxs)("div",{className:"d-flex flex-row col-stacked",children:[(0,e.jsx)(a.Ct,{color:c[t.menuType].color,children:t.menuType}),(0,e.jsx)("span",{className:"tw-pl-2",children:t.path})]})]})}},{key:"index",title:"\u6392\u5E8F",className:"w-100px"},{key:"enabled",title:"\u542F\u7528\u72B6\u6001",className:"w-100px",render:function(s){return s?"\u542F\u7528":"\u7981\u7528"}},{key:"component",title:"\u5B50\u9762\u677F\u6E32\u67D3\u7EC4\u4EF6",className:"w-150px",render:function(s,t){return t.component?"\u6709\u7EC4\u4EF6":"\u65E0\u7EC4\u4EF6"}},{key:"actions",title:"\u64CD\u4F5C",className:"min-w-125px",render:function(s,t){return(0,e.jsx)(F,{onEdit:x,data:t,refetch:f})}}],dataSource:b})})]})})}j.default=A}}]);

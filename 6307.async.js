"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6307],{96708:function(U,l,t){var F=t(46027),C=t(84048),P=t(86074);function p(u){var _=u.layout,b=u.children,y=u.onLayout;return(0,P.jsxs)("div",{className:"d-flex flex-wrap my-1",children:[_&&(0,P.jsxs)("ul",{className:"nav nav-pills me-6 mb-2 mb-sm-0",children:[(0,P.jsx)("li",{className:"nav-item m-0 me-3",children:(0,P.jsx)(C.Z,{variant:"light",color:"muted",active:_==="card",activeColor:"primary",onClick:y==null?void 0:y.bind(null,"card"),icon:(0,P.jsx)(F.ZP,{name:"Duotune/gen024",className:"svg-icon-1"})})}),(0,P.jsx)("li",{className:"nav-item m-0",children:(0,P.jsx)(C.Z,{variant:"light",color:"muted",active:_==="table",onClick:y==null?void 0:y.bind(null,"table"),activeColor:"primary",className:"me-3",icon:(0,P.jsx)(F.ZP,{name:"Duotune/abs015",className:"svg-icon-1"})})})]}),b]})}l.Z=p},46253:function(U,l,t){t.d(l,{f1:function(){return L},Nk:function(){return c},sW:function(){return H},SP:function(){return Z}});var F=t(97857),C=t.n(F),P=t(68400),p=t.n(P),u=t(75063),_=t(37887),b=t(50319),y,T,N,E,W,d={},x=(0,u.Ps)(y||(y=p()([`
    fragment ProcessModelPart on ProcessModel {
  id
  key
  name
  description
  version
  createdBy
  created
  lastUpdated
  lastUpdatedBy
}
    `]))),L=(0,u.Ps)(T||(T=p()([`
    query processModels($where: ProcessModelWhereInput, $page: Int, $pageSize: Int, $orderBy: OrderBy) {
  total: processModels(pageSize: 1, where: {user: "self"}) {
    totalCount
  }
  processModels(
    where: $where
    page: $page
    pageSize: $pageSize
    orderBy: $orderBy
  ) {
    totalPage
    pageSize
    current: currentPage
    total: totalCount
    edges {
      node {
        ...ProcessModelPart
      }
    }
  }
}
    `,""])),x);function Z(i){var m=C()(C()({},d),i);return _.a(L,m)}function g(i){var m=_objectSpread(_objectSpread({},d),i);return Apollo.useLazyQuery(L,m)}function Q(i){var m=_objectSpread(_objectSpread({},d),i);return Apollo.useSuspenseQuery(L,m)}var s=(0,u.Ps)(N||(N=p()([`
    query processModel($id: ID!) {
  processModel(id: $id) {
    ...ProcessModelPart
    editorJson
  }
}
    `,""])),x);function H(i){var m=C()(C()({},d),i);return _.a(s,m)}function e(i){var m=_objectSpread(_objectSpread({},d),i);return Apollo.useLazyQuery(s,m)}function r(i){var m=_objectSpread(_objectSpread({},d),i);return Apollo.useSuspenseQuery(s,m)}var a=(0,u.Ps)(E||(E=p()([`
    mutation importProcessModel($file: Upload!) {
  importProcessModel(file: $file) {
    ...ProcessModelPart
  }
}
    `,""])),x);function n(i){var m=_objectSpread(_objectSpread({},d),i);return Apollo.useMutation(a,m)}var o=(0,u.Ps)(W||(W=p()([`
    mutation deleteProcessModel($id: ID!) {
  deleteProcessModel(id: $id)
}
    `])));function c(i){var m=C()(C()({},d),i);return b.D(o,m)}},76307:function(U,l,t){t.r(l);var F=t(19632),C=t.n(F),P=t(5574),p=t.n(P),u=t(13769),_=t.n(u),b=t(15009),y=t.n(b),T=t(99289),N=t.n(T),E=t(62435),W=t(46027),d=t(12845),x=t(38018),L=t(96708),Z=t(73588),g=t(10811),Q=t(46253),s=t(86074),H=["q"];function e(a){var n=a.data,o=a.navigate,c=a.onDelete,i=a.onDesign,m=a.baseUrl,A=(0,E.useCallback)(function(){var j=N()(y()().mark(function $(R){var w,v;return y()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return w="\u786E\u5B9A\u5220\u9664\u6D3B\u52A8 \u201C".concat(R.name,"\u201D \u5417\uFF1F"),f.next=3,g.Modal.confirm({title:"\u786E\u5B9A\u5220\u9664",content:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"tip-confirm",children:w}),(0,s.jsx)("p",{children:"\u5220\u9664\u7684\u64CD\u4F5C\u4E0D\u53EF\u9006,\u8BF7\u8C28\u614E\u64CD\u4F5C"})]}),okClassName:"btn-danger",okText:"\u5220\u9664"});case 3:if(v=f.sent,v.isConfirmed){f.next=6;break}return f.abrupt("return");case 6:return f.next=8,c(R.id);case 8:g.Toast.success("\u6D3B\u52A8 \u201C".concat(R.name,"\u201D \u5220\u9664\u6210\u529F"),2e3,{placement:"bottom-left",progressBar:!0});case 9:case"end":return f.stop()}},$)}));return function($){return j.apply(this,arguments)}}(),[c]),B=(0,E.useCallback)(function(j){j.key==="view"?o("".concat(m,"/").concat(n.id)):j.key==="delete"?A(n):j.key==="design"&&i(n.id)},[m,n,A,history,i]);return(0,s.jsx)(g.Dropdown,{overlay:(0,s.jsxs)(g.Menu,{onClick:B,className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold fs-8 w-125px py-4",children:[(0,s.jsx)(g.Menu.Item,{className:"px-3",children:"\u7F16\u8F91"},"view"),(0,s.jsx)(g.Menu.Separator,{className:"my-1"}),(0,s.jsx)(g.Menu.Item,{className:"px-3",children:"\u8BBE\u8BA1"},"design"),(0,s.jsx)(g.Menu.Separator,{className:"my-1"}),(0,s.jsx)(g.Menu.Item,{className:"px-3 actions-delete",children:"\u5220\u9664"},"delete")]}),placement:"bottomRight",children:(0,s.jsxs)(g.Button,{className:"fs-8",variant:"light",activeColor:"light-primary",children:["\u64CD\u4F5C",(0,s.jsx)(W.JO,{className:"svg-icon-5 ms-2 me-n1",name:"Duotune/arr072"})]})})}function r(){var a,n,o=(0,d.useNavigate)(),c=(0,d.useLocation)(),i=c.pathname,m=(0,E.useCallback)(function(h){o("/workflow/models/".concat(h,"/design"))},[history]),A=(0,E.useMemo)(function(){var h=c.query,D=h.q,M=_()(h,H);return D&&(M.filter={user:"self",name_contains:D}),M},[c]),B=(0,E.useMemo)(function(){if(!A.orderBy)return{order:"descend",field:"createdAt"};var h=A.orderBy.split("_"),D=p()(h,2),M=D[0],S=D[1];return{order:S==="desc"?"descend":"ascend",field:M}},[A.orderBy]),j=(0,Q.Nk)({refetchQueries:[{query:Q.f1,variables:{filter:{user:"self"}}}]}),$=p()(j,1),R=$[0],w=(0,Q.SP)({fetchPolicy:"cache-and-network",variables:A}),v=w.data,I=w.loading,f=w.previousData,G=(0,E.useMemo)(function(){return I?(f==null?void 0:f.total.totalCount)||0:(v==null?void 0:v.total.totalCount)||0},[v==null?void 0:v.total.totalCount,I,f==null?void 0:f.total]),z=(0,E.useMemo)(function(){return I?(f==null?void 0:f.processModels)||{total:0,current:1}:(v==null?void 0:v.processModels)||{total:0,current:1}},[v==null?void 0:v.processModels,I,f==null?void 0:f.processModels]),J=(0,E.useMemo)(function(){var h;if(I){var D;return((f==null||(D=f.processModels)===null||D===void 0?void 0:D.edges)||[]).map(function(M){return M.node})}return((v==null||(h=v.processModels)===null||h===void 0?void 0:h.edges)||[]).map(function(M){return M.node})},[v==null?void 0:v.processModels,I,f==null?void 0:f.processModels]),k=(0,E.useCallback)(function(h){o(c.pathname+"?"+x.stringify({q:h}),{replace:!0})},[o,c.pathname]),ee=(0,E.useCallback)(function(h,D,M){var S,K={};if((S=A.filter)!==null&&S!==void 0&&S.name_contains){var O;K.q=(O=A.filter)===null||O===void 0?void 0:O.name_contains}M&&(K.orderBy=M.field+"_"+(M.order==="ascend"?"asc":"desc")),K.page=h.current,o(c.pathname+"?"+x.stringify(K),{replace:!0})},[history,c.pathname,(a=A.filter)===null||a===void 0?void 0:a.name_contains]),X=(0,E.useCallback)(N()(y()().mark(function h(){var D,M,S,K,O,q=arguments;return y()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:for(D=q.length,M=new Array(D),S=0;S<D;S++)M[S]=q[S];return V.next=3,R({variables:{ids:M}});case 3:return K=V.sent,O=K.data,V.abrupt("return",(O==null?void 0:O.deleteProcessModel)||!1);case 6:case"end":return V.stop()}},h)})),[R]),Y=(0,E.useCallback)(function(h){return N()(y()().mark(function D(){var M,S;return y()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return M="\u786E\u5B9A\u5220\u9664\u9009\u4E2D\u7684, \u5171 ".concat(h.length," \u4E2A\u6D3B\u52A8\u5417\uFF1F"),O.next=3,g.Modal.confirm({title:"\u786E\u5B9A\u5220\u9664",content:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"tip-confirm",children:M}),(0,s.jsx)("p",{children:"\u5220\u9664\u7684\u64CD\u4F5C\u4E0D\u53EF\u9006,\u8BF7\u8C28\u614E\u64CD\u4F5C"})]}),okClassName:"btn-danger",okText:"\u5220\u9664"});case 3:if(S=O.sent,S.isConfirmed){O.next=6;break}return O.abrupt("return");case 6:return O.next=8,X.apply(void 0,C()(h));case 8:g.Toast.success("\u6D3B\u52A8\u6279\u91CF\u5220\u9664\u6210\u529F",2e3,{placement:"bottom-left",progressBar:!0});case 9:case"end":return O.stop()}},D)}))},[X]),re=(0,E.useMemo)(function(){return function(h){return(0,s.jsx)("div",{children:(0,s.jsx)(g.Button,{color:"success",onClick:Y(h),variant:!1,children:"\u6279\u91CF\u5220\u9664"})})}},[Y]);return(0,s.jsxs)(Z.vs,{loading:I,footer:!1,children:[(0,s.jsxs)("div",{className:"d-flex flex-wrap flex-stack pb-7",children:[(0,s.jsxs)("div",{className:"d-flex flex-wrap align-items-center",children:[(0,s.jsxs)("h3",{className:"fw-bolder me-5",children:["\u6D41\u7A0B\u6A21\u578B (",G,")"]}),(0,s.jsx)(g.Input.Search,{onSearch:k,defaultValue:(n=A.filter)===null||n===void 0?void 0:n.name_contains,placeholder:"\u641C\u7D22",className:"border-body bg-body w-250px"})]}),(0,s.jsx)(L.Z,{children:(0,s.jsx)("div",{className:"d-flex my-0"})})]}),!G&&!I?(0,s.jsx)(g.Card,{className:"mb-5 mb-xl-10",children:(0,s.jsx)(g.Empty,{title:"\u8FD8\u6CA1\u6709\u6D3B\u52A8",description:"\u9A6C\u4E0A\u6DFB\u52A0\u4E00\u4E2A\u6D3B\u52A8\u8BD5\u8BD5",image:"/assets/media/illustrations/sigma-1/4.png",children:(0,s.jsx)(g.Button,{as:d.Link,variant:"primary",to:"${baseUrl}/new",children:"\u65B0\u5EFA\u6D41\u7A0B\u6A21\u578B"})})}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(g.Card,{className:"mb-5 mb-xl-10",children:(0,s.jsx)(g.Card.Body,{children:(0,s.jsx)(g.Table,{hover:!0,rowKey:"id",noRowsRenderer:function(){return(0,s.jsx)(g.Empty,{description:"\u5217\u8868\u6570\u636E\u4E3A\u7A7A",image:"/assets/media/illustrations/sigma-1/5.png"})},rowSelection:{type:"checkbox",renderTitle:function(D){return(0,s.jsxs)(s.Fragment,{children:["\u5DF2\u9009\u4E2D",(0,s.jsx)("span",{className:"mx-2",children:D}),"\u4E2A\u6D3B\u52A8"]})},toolbar:re},columns:[{key:"name",title:"\u540D\u79F0",sorter:!0,sortOrder:B.field==="name"?B.order:void 0,render:function(D,M){return(0,s.jsx)("div",{className:"ps-2",children:(0,s.jsx)(d.Link,{className:"text-gray-700",to:"".concat(i,"/").concat(M.id),children:D})})}},{key:"actions",title:"\u64CD\u4F5C",width:100,render:function(D,M){return(0,s.jsx)(e,{baseUrl:i,onDelete:X,onDesign:m,navigate:o,data:M})}}],pagination:z,onChange:ee,dataSource:J})})})})]})}l.default=r},38018:function(U,l,t){var F=t(5574).default,C=t(64599).default,P=t(52677).default,p=t(19632).default,u=t(62072),_=t(44020),b=t(13615),y=t(92806),T=function(r){return r==null};function N(e){switch(e.arrayFormat){case"index":return function(r){return function(a,n){var o=a.length;return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?a:n===null?[].concat(p(a),[[d(r,e),"[",o,"]"].join("")]):[].concat(p(a),[[d(r,e),"[",d(o,e),"]=",d(n,e)].join("")])}};case"bracket":return function(r){return function(a,n){return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?a:n===null?[].concat(p(a),[[d(r,e),"[]"].join("")]):[].concat(p(a),[[d(r,e),"[]=",d(n,e)].join("")])}};case"comma":case"separator":return function(r){return function(a,n){return n==null||n.length===0?a:a.length===0?[[d(r,e),"=",d(n,e)].join("")]:[[a,d(n,e)].join(e.arrayFormatSeparator)]}};default:return function(r){return function(a,n){return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?a:n===null?[].concat(p(a),[d(r,e)]):[].concat(p(a),[[d(r,e),"=",d(n,e)].join("")])}}}}function E(e){var r;switch(e.arrayFormat){case"index":return function(a,n,o){if(r=/\[(\d*)\]$/.exec(a),a=a.replace(/\[\d*\]$/,""),!r){o[a]=n;return}o[a]===void 0&&(o[a]={}),o[a][r[1]]=n};case"bracket":return function(a,n,o){if(r=/(\[\])$/.exec(a),a=a.replace(/\[\]$/,""),!r){o[a]=n;return}if(o[a]===void 0){o[a]=[n];return}o[a]=[].concat(o[a],n)};case"comma":case"separator":return function(a,n,o){var c=typeof n=="string"&&n.includes(e.arrayFormatSeparator),i=typeof n=="string"&&!c&&x(n,e).includes(e.arrayFormatSeparator);n=i?x(n,e):n;var m=c||i?n.split(e.arrayFormatSeparator).map(function(A){return x(A,e)}):n===null?n:x(n,e);o[a]=m};default:return function(a,n,o){if(o[a]===void 0){o[a]=n;return}o[a]=[].concat(o[a],n)}}}function W(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function d(e,r){return r.encode?r.strict?u(e):encodeURIComponent(e):e}function x(e,r){return r.decode?_(e):e}function L(e){return Array.isArray(e)?e.sort():P(e)==="object"?L(Object.keys(e)).sort(function(r,a){return Number(r)-Number(a)}).map(function(r){return e[r]}):e}function Z(e){var r=e.indexOf("#");return r!==-1&&(e=e.slice(0,r)),e}function g(e){var r="",a=e.indexOf("#");return a!==-1&&(r=e.slice(a)),r}function Q(e){e=Z(e);var r=e.indexOf("?");return r===-1?"":e.slice(r+1)}function s(e,r){return r.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):r.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function H(e,r){r=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},r),W(r.arrayFormatSeparator);var a=E(r),n=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return n;var o=C(e.split("&")),c;try{for(o.s();!(c=o.n()).done;){var i=c.value;if(i!==""){var m=b(r.decode?i.replace(/\+/g," "):i,"="),A=F(m,2),B=A[0],j=A[1];j=j===void 0?null:["comma","separator"].includes(r.arrayFormat)?j:x(j,r),a(x(B,r),j,n)}}}catch(z){o.e(z)}finally{o.f()}for(var $=0,R=Object.keys(n);$<R.length;$++){var w=R[$],v=n[w];if(P(v)==="object"&&v!==null)for(var I=0,f=Object.keys(v);I<f.length;I++){var G=f[I];v[G]=s(v[G],r)}else n[w]=s(v,r)}return r.sort===!1?n:(r.sort===!0?Object.keys(n).sort():Object.keys(n).sort(r.sort)).reduce(function(z,J){var k=n[J];return k&&P(k)==="object"&&!Array.isArray(k)?z[J]=L(k):z[J]=k,z},Object.create(null))}l.extract=Q,l.parse=H,l.stringify=function(e,r){if(!e)return"";r=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},r),W(r.arrayFormatSeparator);for(var a=function(j){return r.skipNull&&T(e[j])||r.skipEmptyString&&e[j]===""},n=N(r),o={},c=0,i=Object.keys(e);c<i.length;c++){var m=i[c];a(m)||(o[m]=e[m])}var A=Object.keys(o);return r.sort!==!1&&A.sort(r.sort),A.map(function(B){var j=e[B];return j===void 0?"":j===null?d(B,r):Array.isArray(j)?j.reduce(n(B),[]).join("&"):d(B,r)+"="+d(j,r)}).filter(function(B){return B.length>0}).join("&")},l.parseUrl=function(e,r){r=Object.assign({decode:!0},r);var a=b(e,"#"),n=F(a,2),o=n[0],c=n[1];return Object.assign({url:o.split("?")[0]||"",query:H(Q(e),r)},r&&r.parseFragmentIdentifier&&c?{fragmentIdentifier:x(c,r)}:{})},l.stringifyUrl=function(e,r){r=Object.assign({encode:!0,strict:!0},r);var a=Z(e.url).split("?")[0]||"",n=l.extract(e.url),o=l.parse(n,{sort:!1}),c=Object.assign(o,e.query),i=l.stringify(c,r);i&&(i="?".concat(i));var m=g(e.url);return e.fragmentIdentifier&&(m="#".concat(d(e.fragmentIdentifier,r))),"".concat(a).concat(i).concat(m)},l.pick=function(e,r,a){a=Object.assign({parseFragmentIdentifier:!0},a);var n=l.parseUrl(e,a),o=n.url,c=n.query,i=n.fragmentIdentifier;return l.stringifyUrl({url:o,query:y(c,r),fragmentIdentifier:i},a)},l.exclude=function(e,r,a){var n=Array.isArray(r)?function(o){return!r.includes(o)}:function(o,c){return!r(o,c)};return l.pick(e,n,a)}},13615:function(U){U.exports=function(l,t){if(!(typeof l=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[l];var F=l.indexOf(t);return F===-1?[l]:[l.slice(0,F),l.slice(F+t.length)]}},62072:function(U){U.exports=function(l){return encodeURIComponent(l).replace(/[!'()*]/g,function(t){return"%".concat(t.charCodeAt(0).toString(16).toUpperCase())})}},44020:function(U){var l="%[a-f0-9]{2}",t=new RegExp("("+l+")|([^%]+?)","gi"),F=new RegExp("("+l+")+","gi");function C(u,_){try{return[decodeURIComponent(u.join(""))]}catch(T){}if(u.length===1)return u;_=_||1;var b=u.slice(0,_),y=u.slice(_);return Array.prototype.concat.call([],C(b),C(y))}function P(u){try{return decodeURIComponent(u)}catch(y){for(var _=u.match(t)||[],b=1;b<_.length;b++)u=C(_,b).join(""),_=u.match(t)||[];return u}}function p(u){for(var _={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},b=F.exec(u);b;){try{_[b[0]]=decodeURIComponent(b[0])}catch(W){var y=P(b[0]);y!==b[0]&&(_[b[0]]=y)}b=F.exec(u)}_["%C2"]="\uFFFD";for(var T=Object.keys(_),N=0;N<T.length;N++){var E=T[N];u=u.replace(new RegExp(E,"g"),_[E])}return u}U.exports=function(u){if(typeof u!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof u+"`");try{return u=u.replace(/\+/g," "),decodeURIComponent(u)}catch(_){return p(u)}}},92806:function(U){U.exports=function(l,t){for(var F={},C=Object.keys(l),P=Array.isArray(t),p=0;p<C.length;p++){var u=C[p],_=l[u];(P?t.indexOf(u)!==-1:t(u,_,l))&&(F[u]=_)}return F}}}]);

(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[5539],{5539:function(z,M,s){"use strict";s.r(M);var B=s(32059),y=s(2824),g=s(11849),p=s(3182),I=s(94043),b=s.n(I),E=s(67294),R=s(19755),F=s.n(R),x=s(28865),A=s(73727),T=s(51615),L=s(94184),Z=s.n(L),U=s(30381),S=s.n(U),N=s(64458),a=s(11974),e=s(85893);function O(n,t){var v=(0,E.useCallback)((0,p.Z)(b().mark(function m(){var o,_,h;return b().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return o=n.width,_=o===void 0?550:o,i.next=3,a.u_.confirm((0,g.Z)((0,g.Z)({},n),{},{width:_,okText:"\u5220 \u9664",cancelClassName:"btn btn-secondary btn-sm",okClassName:"btn btn-danger btn-sm"}));case 3:if(h=i.sent,!h.isConfirmed){i.next=7;break}return i.next=7,t();case 7:case"end":return i.stop()}},m)})),[n.title,n.content]);return[v]}window._MoreshowOrhide=function(n){return F()(n).parent().siblings().show(),F()(n).parent().remove(),!1};function K(n){var t=n.selectedRows,v=n.refetch,m=(0,N.nT)(),o=(0,y.Z)(m,1),_=o[0],h=O({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9".concat(t.length>1?"\u201C<strong>".concat(t.length,"</strong>\u201C"):"","\u7BC7\u6587\u7AE0\u5417\uFF1F"),content:t.length>1?'\u60A8\u5373\u5C06\u5220\u9664\u4EE5\u4E0B\u6587\u7AE0:<ul className="py-2">'.concat(t.map(function(D,j){return"<li ".concat(j>=4?'style="display: none !important;"':"",' className="d-flex align-items-center text-gray-800 mb-1 fs-6"><span className="bullet bullet-dot me-2"></span><strong>').concat(D.title,"</strong></li>")}).join(""),`
              <li `).concat(t.length<=4?'style="display: none !important;"':"",' className="d-flex align-items-center text-gray-800 fs-6"><a href="javascript:void(0)" onClick="_MoreshowOrhide(this)">\u66F4\u591A</a></li></ul> '):"\u60A8\u5373\u5C06\u5220\u9664\u201C<strong>".concat(t[0].title,"</strong>\u201D\u3002")+"\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F"},(0,p.Z)(b().mark(function D(){return b().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,_({variables:{ids:t.map(function(f){return f.id})}});case 2:return d.next=4,v();case 4:case"end":return d.stop()}},D)}))),c=(0,y.Z)(h,1),i=c[0];return(0,e.jsx)(a.zx,{onClick:i,size:"sm",className:"px-4 py-2",variant:"danger",children:"\u6279\u91CF\u5220\u9664"})}function k(n){var t=n.data,v=n.refetch,m=(0,T.k6)(),o=(0,E.useState)(!1),_=(0,y.Z)(o,2),h=_[0],c=_[1],i=(0,N.eU)(),D=(0,y.Z)(i,1),j=D[0],d=O({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u7BC7\u6587\u7AE0\u5417\uFF1F",content:"\u60A8\u5373\u5C06\u5220\u9664\u201C<strong>".concat(t.title,"</strong>\u201D\u3002\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F")},(0,p.Z)(b().mark(function l(){return b().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,j({variables:{id:t.id}});case 2:return u.next=4,v();case 4:case"end":return u.stop()}},l)}))),f=(0,y.Z)(d,1),C=f[0],P=(0,E.useCallback)(function(l){var r=l.key;r=="edit"?m.push("/cms/articles/".concat(t.id,"/edit")):r=="delete"&&(c(!1),C())},[]);return(0,e.jsx)(a.Lt,{overlay:(0,e.jsxs)(a.v2,{onClick:P,className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold w-125px py-4",children:[(0,e.jsx)(a.v2.Item,{className:"px-3",children:"\u7F16\u8F91"},"edit"),(0,e.jsx)(a.v2.Item,{className:"px-3",children:"\u53D1\u5E03"},"publish"),(0,e.jsx)(a.v2.Item,{className:"px-3 actions-delete",children:"\u5220\u9664"},"delete")]}),placement:"bottomRight",onVisibleChange:c,visible:h,children:(0,e.jsxs)(a.zx,{variant:"light",activeColor:"light-primary",size:"sm",children:["\u64CD \u4F5C",(0,e.jsx)(x.ZP,{className:"ms-2 svg-icon-5 m-0",name:"Duotune/arr072"})]})})}function W(n){var t=n.query,v=n.style,m=v===void 0?"normal":v,o=(0,N.gk)({variables:(0,g.Z)({},t),fetchPolicy:"cache-and-network"}),_=o.data,h=o.refetch,c=(_||{}).articles||{edges:[],current:0,total:0},i=(0,E.useMemo)(function(){return c.edges.map(function(l){return l.node})},[c.edges]),D=(0,E.useCallback)(function(l){console.log(l)},[]),j=(0,E.useState)([]),d=(0,y.Z)(j,2),f=d[0],C=d[1],P=(0,E.useCallback)(function(l,r){C(r)},[C]);return(0,e.jsxs)("div",{className:"tab-content",children:[m=="small"&&(0,e.jsxs)("div",{className:"d-flex flex-wrap flex-stack pb-7",children:[(0,e.jsxs)("div",{className:"d-flex flex-wrap align-items-center my-1",children:[(0,e.jsxs)("h3",{className:"fw-bolder me-5 my-1",children:["\u6587\u7AE0 (",c.total,")"]}),(0,e.jsx)(a.II.Search,{size:"sm",placeholder:"\u641C\u7D22",boxClassName:"my-1",className:"form-control-white  w-150px ps-9"})]}),(0,e.jsxs)("div",{className:"d-flex flex-wrap my-1",children:[(0,e.jsxs)("ul",{style:{display:"none"},className:"nav nav-pills me-6 mb-2 mb-sm-0",children:[(0,e.jsx)("li",{className:"nav-item m-0",children:(0,e.jsx)("a",{className:"btn btn-sm btn-icon btn-light btn-color-muted btn-active-primary me-3",href:"#kt_project_users_card_pane",children:(0,e.jsx)(x.ZP,{name:"Duotune/gen024",className:"svg-icon-2"})})}),(0,e.jsx)("li",{className:"nav-item m-0",children:(0,e.jsx)("a",{className:"btn btn-sm btn-icon btn-light btn-color-muted btn-active-primary active",href:"#kt_project_users_table_pane",children:(0,e.jsx)(x.ZP,{name:"Duotune/abs015",className:"svg-icon-2"})})})]}),(0,e.jsxs)("div",{className:"d-flex my-0",children:[(0,e.jsx)(a.ub,{size:"sm",className:"form-select-white w-125px me-5",placeholder:"\u53D1\u5E03\u65F6\u95F4",options:[{label:"\u5168\u90E8\u65F6\u95F4",value:"all"},{label:"\u4ECA\u5E74",value:"thisyear"},{label:"\u8FD9\u4E2A\u6708",value:"thismonth"},{label:"\u6700\u8FD1\u4E00\u4E2A\u6708",value:"lastmonth"},{label:"\u6700\u8FD190\u5929",value:"last90days"}]}),(0,e.jsx)(a.ub,{size:"sm",className:"form-select-white w-125px",placeholder:"\u72B6\u6001",options:[{label:"\u5168\u90E8\u72B6\u6001",value:"all"},{label:"\u8349\u7A3F",value:"DRAFT"},{label:"\u5DF2\u53D1\u5E03",value:"PUBLISHED"},{label:"\u7B49\u5F85\u53D1\u5E03",value:"SCHEDULED"}]})]})]})]}),(0,e.jsxs)(a.Zb,{flush:!0,className:Z()((0,B.Z)({},"mt-6 mt-xl-9",m==="normal")),headerClassName:"mt-5",children:[m==="normal"&&(0,e.jsxs)(a.Zb.Header,{className:"pt-8",children:[(0,e.jsx)(a.Zb.Title,{className:"flex-column",children:(0,e.jsx)(a.II.Search,{solid:!0,className:"w-250px",placeholder:"\u641C\u7D22\u6587\u7AE0",onSearch:D})}),(0,e.jsx)(a.Zb.Toolbar,{children:(0,e.jsxs)("div",{className:"d-flex justify-content-end",children:[!!f.length&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(a.zx,{variant:"primary",icon:(0,e.jsx)(x.ZP,{className:"svg-icon-2",name:"Duotune/gen016"}),className:"me-3",children:"\u6279\u91CF\u53D1\u5E03"}),(0,e.jsx)(a.zx,{variant:"danger",icon:(0,e.jsx)(x.ZP,{className:"svg-icon-2",name:"Duotune/gen027"}),children:"\u6279\u91CF\u5220\u9664"})]}),!f.length&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(a.zx,{variant:"primary",className:"me-3",icon:(0,e.jsx)(x.ZP,{className:"svg-icon-2",name:"Duotune/gen031"}),children:"\u8FC7\u6EE4\u7B5B\u9009"}),(0,e.jsx)(a.zx,{as:A.Link,variant:"primary",icon:(0,e.jsx)(x.ZP,{className:"svg-icon-2",name:"Duotune/arr075"}),to:"/cms/articles/new",children:"\u65B0\u5EFA\u6587\u7AE0"})]})]})})]}),(0,e.jsx)(a.Zb.Body,{className:"pt-0",children:c.total?(0,e.jsx)(a.iA,{rowKey:"id",rowSelection:{type:"checkbox",onChange:P,selectedRowKeys:(f||[]).map(function(l){return l.id}),renderTitle:function(r){return(0,e.jsxs)(e.Fragment,{children:["\u5DF2\u9009\u4E2D",(0,e.jsx)("span",{className:"mx-2",children:r}),"\u7BC7\u6587\u7AE0"]})},toolbar:m=="small"&&function(l,r){return(0,e.jsx)(K,{selectedRows:r,refetch:h})}},pagination:c,dataSource:i,columns:[{title:"\u6807\u9898",dataIndex:"title",key:"title",render:function(r,u){return(0,e.jsxs)("div",{className:"d-flex flex-column",children:[(0,e.jsx)(A.Link,{to:"/cms/articles/".concat(u.id,"/edit"),className:"text-gray-800 text-hover-primary mb-1",children:r}),(0,e.jsxs)("span",{className:"text-gray-500",children:[u.channels.map(function(w){return(0,e.jsx)(a.Ct,{className:"me-2",children:w.fullName},w.id)}),S()(u.createdAt).fromNow()]})]})}},{title:"\u72B6\u6001",dataIndex:"status",width:120,render:function(r){var u={DRAFT:{title:"\u8349\u7A3F",lightStyle:"danger"},PUBLISHED:{title:"\u5DF2\u53D1\u5E03"},SCHEDULED:{title:"\u8BA1\u5212",lightStyle:"primary"}};return(0,e.jsx)(a.Ct,{lightStyle:u[r].lightStyle,children:u[r].title})}},{title:"\u64CD\u4F5C",key:"action",width:140,render:function(r,u){return(0,e.jsx)(k,{data:u,refetch:h})}}]}):(0,e.jsx)(a.HY,{title:"\u65B0\u589E\u6587\u7AE0",description:"\u8BE5\u680F\u76EE\u8FD8\u662F\u7A7A\u7684\uFF0C\u6CA1\u6709\u4EFB\u4F55\u6587\u7AE0",image:"/assets/media/illustrations/sigma-1/4.png",children:(0,e.jsx)(a.zx,{as:A.Link,variant:"primary",to:"/cms/articles/new",children:"\u65B0\u5EFA\u6587\u7AE0"})})})]})]})}M.default=W}}]);

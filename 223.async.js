"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[223,1836],{51253:function(ce,_,t){t.d(_,{GP:function(){return d.Z},Hk:function(){return F},xx:function(){return Z.x}});var ie=t(74958),d=t(5166),Z=t(19260),S=t(68400),r=t.n(S),A=t(62435),Y=t(93967),q=t.n(Y),ue=t(94589),c=t(97857),ee=t.n(c),I=t(46027),ae=t(42687),H=t(13757),oe=t(5574),te=t.n(oe),v=t(96486),o=t(86074),f={aside:{minimize:!1,width:280}},E=A.createContext({state:f,dispatch:function(){}}),B=function(s){return s.AsideToggle="ASIDE_TOGGLE",s.AsideWidth="ASIDE_WIDTH",s}({});function D(s,k){switch(k.type){case"ASIDE_TOGGLE":return s.aside.minimize=!s.aside.minimize,ee()({},s);case"ASIDE_WIDTH":return s.aside.width=k.payload,ee()({},s);default:throw new Error}}var e=function(k){var R=(0,A.useReducer)(D,(0,v.cloneDeep)(f)),u=te()(R,2),x=u[0],y=u[1];return(0,o.jsx)(E.Provider,{value:{state:x,dispatch:y},children:k.children})},U=function(){return(0,A.useContext)(E)},ne=t(65495);function h(s){var k=U(),R=k.dispatch,u=k.state.aside.minimize,x=(0,A.useCallback)(function(){R({type:B.AsideToggle})},[R]);return(0,o.jsx)(H.Button,{style:ee()({marginBottom:"1.35rem",zIndex:105},s.style),onClick:x,activeColor:"primary",className:q()("micro-app-aside-toggle","btn-icon bg-body btn-color-gray-700 rounded-2 position-absolute translate-middle bottom-0 shadow-sm d-none d-lg-flex",s.className,{active:u}),children:(0,o.jsx)(I.JO,{name:"Duotune/arr063",className:"svg-icon-2 rotate-180"})})}function a(s){var k=s.className,R=s.header,u=s.children,x=s.collapsible,y=x===void 0?!0:x,b=s.width,N=b===void 0?280:b,C=(0,ae.$Y)(),$=U(),X=$.dispatch;return(0,A.useEffect)(function(){C.aside.width(N+100),X({type:B.AsideWidth,payload:N})},[C.aside,X,N]),(0,o.jsxs)("div",{className:q()("app-aside aside",k),children:[(0,o.jsx)(ne.Z,{children:(0,o.jsx)(d.Z,{header:R,resizeable:!0,className:"app-sidebar",children:u})}),y&&(0,o.jsx)(h,{className:"start-100 end-0"})]})}a.Toggle=h;var l=a,n,g=ue.ZP.div(n||(n=r()([`
  --root-aside-width: `,`;
  --met-aside-width: `,`;
`])),function(s){return s.minimize?"100px":"".concat(s.width,"px")},function(s){return s.minimize?"100px":"".concat(s.width,"px")});function p(s){var k=s.children,R=s.className,u=U(),x=u.state.aside,y=x.minimize,b=x.width,N=(0,A.useCallback)(function(C){C.preventDefault()},[]);return(0,o.jsx)(g,{minimize:y,width:b,className:q()("micro-app-container page-full-content",R,{"aside-minimize":y}),onContextMenu:N,children:k})}function m(s){var k=s.children,R=s.className;return(0,o.jsx)(e,{children:(0,o.jsx)(p,{className:R,children:k})})}m.Sidebar=l;var F=m},42687:function(ce,_,t){t.d(_,{$Y:function(){return I},BK:function(){return H},aM:function(){return te}});var ie=t(5574),d=t.n(ie),Z=t(97857),S=t.n(Z),r=t(62435),A=t(86074),Y=r.createContext({getState:function(){return{routes:[]}},subscribe:function(){},dispatch:function(){}}),q=function(o,f){return f?f.type==="ASIDE_MINIMIZE"?S()(S()({},o),{},{aside:S()(S()({},o.aside),{},{minimize:!!f.payload})}):f.type==="ASIDE_WIDTH"?S()(S()({},o),{},{aside:S()(S()({},o.aside),{},{width:f.payload})}):f.type==="ASIDE_COLLAPSIBLE"?S()(S()({},o),{},{aside:S()(S()({},o.aside),{},{collapsible:f.payload})}):o:o},ue=function(o){return S()({},o)};function c(v){var o=(0,r.useReducer)(q,v,ue),f=d()(o,2),E=f[0],B=f[1],D=(0,r.useState)([]),e=d()(D,1),U=e[0],ne=function(F){return function(){var s=U.indexOf(F);s>-1&&U.splice(s,1)}},h=(0,r.useCallback)(function(m){return U.unshift(m),ne(m)},[U]),a=(0,r.useCallback)(function(){U.forEach(function(m){return m()})},[U]),l={getState:function(){return E},dispatch:B,subscribe:h},n=(0,r.useState)(l),g=d()(n,1),p=g[0];return(0,r.useEffect)(function(){p.getState=function(){return E},a()},[E]),p}var ee=function(o,f){return o===f};function I(){var v=(0,r.useContext)(Y),o=(0,r.useRef)({aside:{get state(){return v.getState().aside},width:function(E){v.dispatch({type:"ASIDE_WIDTH",payload:E})},minimize:function(E){v.dispatch({type:"ASIDE_MINIMIZE",payload:E})},collapsible:function(E){v.dispatch({type:"ASIDE_COLLAPSIBLE",payload:E})}}});return o.current}function ae(v){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ee,f=(0,r.useContext)(Y),E=(0,r.useReducer)(function(h){return h+1},0),B=d()(E,2),D=B[1],e=(0,r.useRef)(),U=v(f.getState());function ne(){var h=v(f.getState());o(h,e.current)||(e.current=h,D())}return(0,r.useEffect)(function(){return f.subscribe(ne)},[]),U}function H(v){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ee;return ae(v,o)}function oe(){var v=useContext(Y);return v.dispatch}function te(v){var o=v.children,f=v.state,E=c(f);return(0,r.useMemo)(function(){return(0,A.jsx)(Y.Provider,{value:E,children:o})},[o,E])}},96414:function(ce,_,t){t.d(_,{dI:function(){return ne},rB:function(){return U}});var ie=t(5574),d=t.n(ie),Z=t(62435),S={USERS_LIST:"users-list"};function r(h){return h!=null&&h!==""}function A(h,a){var l=useState(h),n=_slicedToArray(l,2),g=n[0],p=n[1];return useEffect(function(){var m=setTimeout(function(){p(h)},a);return function(){clearTimeout(m)}},[h,a]),g}var Y=t(72004),q=t.n(Y),ue=t(12444),c=t.n(ue),ee=t(9783),I=t.n(ee),ae=t(8606),H=q()(function h(){var a=this;c()(this,h),I()(this,"menu",null),I()(this,"element",null),I()(this,"getParamName",function(l){var n=document.body.hasAttribute("data-kt-name"),g=n?n+"_":"";return"kt_"+g+"theme_mode_"+l}),I()(this,"getMode",function(){var l,n=a.getParamName("value"),g=a.getMenuMode(),p="light";if(!localStorage)return p;var m=localStorage.getItem(n);if(m)return m;var F=(l=a.element)===null||l===void 0?void 0:l.getAttribute("data-theme");return F||(g?g==="system"?a.getSystemMode():g:p)}),I()(this,"setMode",function(l,n){var g,p,m,F=l,s=n;if(!(F!=="light"&&F!=="dark")){var k=a.getParamName("value"),R=a.getParamName("menu");s==="system"&&a.getSystemMode()!==F&&(F=a.getSystemMode()),s||(s=F);var u=((g=a.menu)===null||g===void 0?void 0:g.querySelector('[data-kt-element="mode"][data-kt-value="'+s+'"]'))||null;(p=a.element)===null||p===void 0||p.setAttribute("data-kt-theme-mode-switching","true"),(m=a.element)===null||m===void 0||m.setAttribute("data-theme",F);var x=a;setTimeout(function(){var y;(y=x.element)===null||y===void 0||y.removeAttribute("data-kt-theme-mode-switching")},300),localStorage&&localStorage.setItem(k,F),u&&localStorage&&(localStorage.setItem(R,s),a.setActiveMenuItem(u)),a.flipImages()}}),I()(this,"getMenuMode",function(){var l,n=a.getParamName("menu"),g=(l=a.menu)===null||l===void 0?void 0:l.querySelector('.active[data-kt-element="mode"]'),p=g==null?void 0:g.getAttribute("data-kt-value");if(p)return p;if(!n)return"";var m=localStorage?localStorage.getItem(n):null;return m||""}),I()(this,"getSystemMode",function(){return window.matchMedia("(prefers-color-scheme: dark)")?"dark":"light"}),I()(this,"initMode",function(){a.setMode(a.getMode(),a.getMenuMode()),a.element&&ae.EventHandlerUtil.trigger(a.element,"kt.thememode.init")}),I()(this,"setActiveMenuItem",function(l){var n,g=a.getParamName("menu"),p=l.getAttribute("data-kt-value"),m=(n=a.menu)===null||n===void 0?void 0:n.querySelector('.active[data-kt-element="mode"]');m&&m.classList.remove("active"),l.classList.add("active"),localStorage&&p&&g&&localStorage.setItem(g,p)}),I()(this,"handleMenu",function(){var l;(l=a.menu)===null||l===void 0||(l=l.querySelectorAll('[data-kt-element="mode"]'))===null||l===void 0||l.forEach(function(n){n.addEventListener("click",function(g){g.preventDefault();var p=n.getAttribute("data-kt-value"),m=p==="system"?a.getSystemMode():p;m&&a.setMode(m,p)})})}),I()(this,"flipImages",function(){var l;(l=document.querySelectorAll("[data-kt-img-dark]"))===null||l===void 0||l.forEach(function(n){n.tagName==="IMG"?a.getMode()==="dark"&&n.hasAttribute("data-kt-img-dark")?(n.setAttribute("data-kt-img-light",n.getAttribute("src")||""),n.setAttribute("src",n.getAttribute("data-kt-img-dark")||"")):a.getMode()==="light"&&n.hasAttribute("data-kt-img-light")&&(n.setAttribute("data-kt-img-dark",n.getAttribute("src")||""),n.setAttribute("src",n.getAttribute("data-kt-img-light")||"")):a.getMode()==="dark"&&n.hasAttribute("data-kt-img-dark")?(n.setAttribute("data-kt-img-light",n.getAttribute("src")||""),n.style.backgroundImage="url('"+n.getAttribute("data-kt-img-dark")+"')"):a.getMode()==="light"&&n.hasAttribute("data-kt-img-light")&&(n.setAttribute("data-kt-img-dark",n.getAttribute("src")||""),n.style.backgroundImage="url('"+n.getAttribute("data-kt-img-light")+"')")})}),I()(this,"on",function(l,n){if(a.element)return ae.EventHandlerUtil.on(a.element,l,n)}),I()(this,"off",function(l,n){if(a.element)return ae.EventHandlerUtil.off(a.element,l,n)}),I()(this,"init",function(){a.menu=document.querySelector('[data-kt-element="theme-mode-menu"]'),a.element=document.documentElement,a.initMode(),a.menu&&a.handleMenu()})}),oe=new H,te=t(86074),v=oe.getSystemMode(),o=function(a){var l=a!=="system"?a:v,n="/media/patterns/header-bg"+(l==="light"?".jpg":"-dark.png");document.body.style.backgroundImage='url("'.concat(toAbsoluteUrl(n),'")')},f="kt_theme_mode_value",E="kt_theme_mode_menu",B=function(a){if(!localStorage)return"light";var l=localStorage.getItem(a);return!l||l==="light"?"light":l==="dark"?"dark":"system"},D={mode:B(f),menuMode:B(E),updateMode:function(a){},updateMenuMode:function(a){}},e=(0,Z.createContext)({mode:D.mode,menuMode:D.menuMode,updateMode:function(a){},updateMenuMode:function(a){}}),U=function(){return(0,Z.useContext)(e)},ne=function(a){var l=a.children,n=(0,Z.useState)(D.mode),g=d()(n,2),p=g[0],m=g[1],F=(0,Z.useState)(D.menuMode),s=d()(F,2),k=s[0],R=s[1],u=function(b){var N=b==="system"?v:b;m(N),localStorage&&localStorage.setItem(f,N),document.documentElement.setAttribute("data-theme",N),oe.init()},x=function(b){R(b),localStorage&&localStorage.setItem(E,b)};return(0,Z.useEffect)(function(){u(p),x(k)},[]),(0,te.jsx)(e.Provider,{value:{mode:p,menuMode:k,updateMode:u,updateMenuMode:x},children:l})}},5028:function(ce,_,t){t.r(_),t.d(_,{default:function(){return R}});var ie=t(97857),d=t.n(ie),Z=t(5574),S=t.n(Z),r=t(62435),A=t(46027),Y=t(12845),q=t(1861),ue=t(51253),c=t(13757),ee=t(64599),I=t.n(ee),ae=t(15009),H=t.n(ae),oe=t(99289),te=t.n(oe),v=t(75275),o=t(93967),f=t.n(o),E=t(96486),B=t(74600),D=t(92623),e=t(86074),U=t(34155);function ne(u){var x=u.onClose,y=u.visible,b=u.user,N=u.namespace,C=u.name,$=u.mode,X=(0,B.hI)(),L=S()(X,1),J=L[0],T=c.Form.useForm(),w=(0,r.useRef)(null);(0,r.useEffect)(function(){var Q;y&&(T.setFieldsValue({name:C}),(Q=w.current)===null||Q===void 0||Q.focus(),U.nextTick(function(){var K;(K=w.current)===null||K===void 0||K.select()}))},[y]);var W=(0,r.useCallback)(te()(H()().mark(function Q(){var K;return H()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,T.validateFields();case 2:if(K=M.sent,$!=="create"){M.next=6;break}return M.next=6,J({variables:{name:K.name,namespace:N}});case 6:x();case 7:case"end":return M.stop()}},Q)})),[T,$,x,J,N]),G=(0,r.useCallback)(function(){x()},[x]);return(0,e.jsxs)(c.Modal,{centered:!0,visible:y,dialogClassName:"modal-dialog-small w-400px",onCancel:G,onOk:W,header:!1,closable:!1,okButtonProps:{className:"btn-xs"},cancelButtonProps:{className:"btn-xs"},children:[(0,e.jsxs)("div",{className:"modal-dialog-header d-flex",children:[(0,e.jsx)("div",{className:"modal-dialog-icon",children:(0,e.jsx)(A.JO,{className:"svg-icon-5x",name:"Duotune/fil012"})}),(0,e.jsxs)("div",{className:"modal-dialog-instructions",children:[(0,e.jsx)("div",{className:"modal-dialog-title",children:$==="create"?"\u65B0\u5EFA\u6587\u4EF6\u5939":"\u4FEE\u6539\u6587\u4EF6\u5939"}),(0,e.jsx)("div",{className:"modal-dialog-description",children:$==="create"?(0,e.jsxs)(e.Fragment,{children:['\u4E3A\u8D26\u53F7 " ',b,' " \u521B\u5EFA\u9876\u5C42\u6587\u4EF6\u5939']}):(0,e.jsxs)(e.Fragment,{children:['\u4FEE\u6539\u8D26\u53F7 " ',b,' " \u4E2D ',C," \u6587\u4EF6\u5939\u7684\u540D\u79F0"]})})]})]}),(0,e.jsx)(c.Form,{form:T,layout:"horizontal",initialValues:{name:C},size:"xs",children:(0,e.jsx)("div",{className:"d-flex last flex-row flex-center",children:(0,e.jsx)("div",{className:"d-flex flex-column-fluid",children:(0,e.jsx)(c.Form.Item,{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u5B57"}],name:"name",label:"\u540D\u79F0",children:(0,e.jsx)(c.Input,{ref:w})})})})})]})}var h=ne;function a(u){var x=u.user,y=u.onSuccess,b=u.selectedKey,N=(0,r.useState)(),C=S()(N,2),$=C[0],X=C[1],L=(0,r.useCallback)(function(){X(void 0)},[]),J=(0,r.useCallback)(te()(H()().mark(function w(){return H()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:X("#custom"),y();case 2:case"end":return G.stop()}},w)})),[y]),T=(0,r.useCallback)(te()(H()().mark(function w(){return H()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:console.log(b),y();case 2:case"end":return G.stop()}},w)})),[b,y]);return(0,e.jsxs)("div",{className:"settings-mailbox-footer",children:[(0,e.jsx)("a",{onClick:J,children:(0,e.jsx)(A.ZP,{name:"Duotune/arr087",className:"svg-icon-2"})}),(0,e.jsx)("a",{onClick:T,children:(0,e.jsx)(A.ZP,{name:"Duotune/arr089",className:"svg-icon-2"})}),(0,e.jsx)(h,{mode:"create",visible:!!$,user:x,namespace:$,onClose:L})]})}var l=a,n=[{key:"#private",title:"\u9ED8\u8BA4\u6587\u4EF6\u5939",children:[]},{key:"#smart",title:"\u667A\u80FD\u6587\u4EF6\u5939",children:[]},{key:"#custom",title:"\u81EA\u5B9A\u4E49\u6587\u4EF6\u5939",children:[]}];function g(u){var x=u.user,y=(0,r.useRef)(null),b=(0,B.Tt)(),N=b.data,C=(0,r.useState)(),$=S()(C,1),X=$[0],L=(0,r.useState)(u.mailboxes),J=S()(L,2),T=J[0],w=J[1],W=(0,B.mf)({updateQueries:{mailUser:function(P,i){var O=i.mutationResult;return d()(d()({},P),{},{mailUser:d()(d()({},P.mailUser),{},{settings:d()(d()({},P.mailUser.settings),{},{mailboxes:O.data.mailboxes})})})}}}),G=S()(W,1),Q=G[0],K=(0,r.useCallback)(function(){var j=te()(H()().mark(function P(i){return H()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:console.log(i);case 1:case"end":return le.stop()}},P)}));return function(P){return j.apply(this,arguments)}}(),[]),de=(0,r.useCallback)(function(j){console.log(j)},[]),M=(0,r.useCallback)(function(j){j.preventDefault(),j.stopPropagation(),console.log("handleChange",j.target.checked,j.target.value),Q({variables:{mailboxes:[j.target.value],mode:j.target.checked?"ADD":"REMOVE"}})},[Q]),re=(0,r.useMemo)(function(){if(!(N!=null&&N.mailboxes))return(0,E.cloneDeep)(n);var j=(0,E.cloneDeep)(n),P=I()(N.mailboxes),i;try{var O=function(){var z=i.value,se=j.find(function(me){return me.key===z.namespace});if(z.name==="Outbox"||z.name==="INBOX")return 0;if(!(se!=null&&se.children))return console.warn("\u9519\u8BEF\u7684\u547D\u540D\u7A7A\u95F4",se),0;se.children.push(d()(d()({},z),{},{type:"mailbox",key:z.id,title:z.name}))},le;for(P.s();!(i=P.n()).done;)le=O()}catch(V){P.e(V)}finally{P.f()}return j[0].children=j[0].children.map(function(V){var z=D.GG.findIndex(function(me){return me.id===V.name}),se=D.GG[z];return console.log("details",se,z,V.name,V.id,V,j),d()(d()({},V),{},{zindex:z,title:se.name,icon:se.name})}).sort(function(V,z){return V.zindex-z.zindex}),j.filter(function(V){var z;return(z=V.children)===null||z===void 0?void 0:z.length})},[N==null?void 0:N.mailboxes]);return(0,r.useEffect)(function(){w(u.mailboxes)},[u.mailboxes]),(0,e.jsxs)("div",{className:"settings-mailbox-container",children:[(0,e.jsx)("div",{className:"settings-mailbox-notes",children:"\u8BBE\u7F6E\u9ED8\u8BA4\u6587\u4EF6\u5939\u7684\u663E\u793A\u4E0E\u9690\u85CF\uFF0C\u5E76\u53EF\u4EE5\u6DFB\u52A0\u81EA\u5B9A\u4E49\u7684\u6587\u4EF6\u5939"}),(0,e.jsx)("div",{className:"d-flex",children:(0,e.jsxs)(v.fQ,{tag:(0,e.jsx)("div",{ref:y,className:f()("flex-left settings-mailbox",{editing:!1})}),name:"MAIL_PREFERENCES",handler:de,children:[(0,e.jsxs)("div",{className:"settings-mailbox-header d-flex",children:[(0,e.jsx)("div",{className:"field-folder",children:"\u6587\u4EF6\u5939"}),(0,e.jsx)("div",{className:"field-favorites",children:"\u6536\u85CF"})]}),(0,e.jsx)(q.E,{className:"settings-mailbox-body custom-scrollbar",options:{scrollbars:{autoHide:"scroll"}},children:(0,e.jsx)(c.TreeList,{className:"mailbox-treelist",rowKey:"id",expandedKeys:["#private","#smart","#custom"],draggable:!1,iconRender:function(P,i){if(!i.isDirectory)return""},columns:[{key:"title",title:"\u540D\u79F0",width:"auto",render:function(P){return(0,e.jsx)("div",{className:"title d-flex",children:(0,e.jsx)("span",{className:"text-gray-800",children:P})})}},{key:"actions",title:"\u64CD\u4F5C",className:"min-w-100px",render:function(P,i){return i.type==="directory"?(0,e.jsx)("div",{}):(0,e.jsx)(c.Checkbox,{value:i.namespace+"."+i.name,checked:T.includes(i.namespace+"."+i.name),onChange:M,className:"mailbox-check",size:"sm"})}}],dataSource:re})}),(0,e.jsx)(l,{user:x,onSuccess:K,selectedKey:X})]})})]})}var p=g;function m(u){var x=u.visible,y=u.onCancel,b=u.mailUser,N=(0,r.useState)(!1),C=S()(N,2),$=C[0],X=C[1],L=(0,r.useState)("mailbox"),J=S()(L,2),T=J[0],w=J[1],W=(0,r.useCallback)(function(){X(!0)},[]),G=(0,r.useCallback)(function(K){w(K)},[]),Q=(0,r.useMemo)(function(){return b!=null&&b.settings?b.settings:{mailboxes:[]}},[b]);return(0,e.jsx)(c.Modal,{centered:!0,maskClosable:!1,visible:x,onCancel:y,onOk:W,confirmLoading:$,scroll:!1,dialogClassName:"mw-750px mail-preferences",header:(0,e.jsx)(c.Modal.Header,{children:(0,e.jsxs)(c.Nav,{onSelect:G,selectedKey:T,children:[(0,e.jsx)(c.Nav.Item,{className:"me-2 mb-md-0",children:(0,e.jsxs)(c.Nav.Link,{className:"btn d-flex flex-column btn-active-light-primary",children:[(0,e.jsx)(A.ZP,{name:"Duotune/cod001",className:"svg-icon-2 me-0"}),(0,e.jsx)("span",{className:"d-flex flex-column align-items-start pt-2",children:(0,e.jsx)("span",{className:"fs-7",children:"\u901A\u7528"})})]})},"general"),(0,e.jsx)(c.Nav.Item,{className:"me-2 mb-md-0",children:(0,e.jsxs)(c.Nav.Link,{className:"btn d-flex flex-column btn-active-light-primary",children:[(0,e.jsx)(A.ZP,{name:"Duotune/cod001",className:"svg-icon-2 me-0"}),(0,e.jsx)("span",{className:"d-flex flex-column align-items-start pt-2",children:(0,e.jsx)("span",{className:"fs-7",children:"\u8D26\u53F7"})})]})},"account"),(0,e.jsx)(c.Nav.Item,{className:"me-2 mb-md-0",children:(0,e.jsxs)(c.Nav.Link,{className:"btn d-flex flex-column btn-active-light-success",children:[(0,e.jsx)(A.ZP,{name:"Duotune/fil012",className:"svg-icon-2  me-0"}),(0,e.jsx)("span",{className:"d-flex flex-column align-items-start pt-2",children:(0,e.jsx)("span",{className:"fs-7",children:"\u6587\u4EF6\u5939"})})]})},"mailbox"),(0,e.jsx)(c.Nav.Item,{className:"me-2 mb-md-0",children:(0,e.jsxs)(c.Nav.Link,{className:"btn d-flex flex-column btn-active-light-dark",children:[(0,e.jsx)(A.ZP,{name:"Duotune/art008",className:"svg-icon-2  me-0"}),(0,e.jsx)("span",{className:"d-flex flex-column align-items-start pt-2",children:(0,e.jsx)("span",{className:"fs-7",children:"\u7B7E\u540D"})})]})},"signature"),(0,e.jsx)(c.Nav.Item,{className:"me-2 mb-md-0",children:(0,e.jsxs)(c.Nav.Link,{className:"btn d-flex flex-column btn-active-light-warning",children:[(0,e.jsx)(A.ZP,{name:"Duotune/art008",className:"svg-icon-2  me-0"}),(0,e.jsx)("span",{className:"d-flex flex-column align-items-start pt-2",children:(0,e.jsx)("span",{className:"fs-7",children:"\u6A21\u7248"})})]})},"template")]})}),footer:!1,children:(0,e.jsx)(p,{user:b==null?void 0:b.name,mailboxes:Q.mailboxes})})}var F=m;function s(u){var x=u.onAction;return(0,e.jsx)("div",{className:"email-sidebar-footer",children:(0,e.jsx)("span",{className:"mail-settings",onClick:x,children:"\u504F\u597D\u8BBE\u7F6E"})})}function k(){var u,x=(0,r.useState)(!1),y=S()(x,2),b=y[0],N=y[1],C=(0,Y.useMatch)({path:"/mail/:folder",end:!1}),$=(0,r.useMemo)(function(){return C!=null&&C.params.folder?[C.params.folder]:[]},[C]),X=(0,B.FW)({fetchPolicy:"cache-and-network"}),L=X.data,J=(0,B.Tt)({fetchPolicy:"cache-and-network"}),T=J.data,w=(0,B.c3)({fetchPolicy:"cache-and-network"}),W=w.data,G=(0,r.useCallback)(function(){N(!1)},[]),Q=(0,r.useCallback)(function(){N(!0)},[]),K=(0,r.useMemo)(function(){if(!(L!=null&&L.mailUser)||!(T!=null&&T.mailboxes)){var M=D.LJ.INBOX,re=D.LJ.Outbox;return{inbox:d()(d()({},M),{},{title:M.name,key:M.id.toLowerCase()}),outbox:d()(d()({},re),{},{title:re.name,key:re.id.toLowerCase()}),private:D.GG.filter(function(i){return!["Outbox","INBOX"].includes(i.id)}).map(function(i){return d()(d()({},i),{},{title:i.name,key:i.id.toLowerCase(),count:0})}),smart:[],custom:[]}}var j=T.mailboxes.map(function(i){if(i.namespace==="#private"){var O=D.GG.findIndex(function(le){return le.id===i.name});return d()(d()({},i),{},{index:O,title:D.GG[O].name,icon:D.GG[O].icon,key:i.name.toLowerCase()})}return d()(d()({},i),{},{title:i.name,index:0,icon:void 0,key:i.name.toLowerCase()})}).filter(function(i){var O;return["Outbox","INBOX"].includes(i.name)?!0:L==null||(O=L.mailUser)===null||O===void 0||(O=O.settings)===null||O===void 0?void 0:O.mailboxes.includes(i.namespace+"."+i.name)}).sort(function(i,O){return i.index-O.index}),P=j.filter(function(i){return i.namespace==="#private"});return{inbox:P.find(function(i){return i.name==="INBOX"}),outbox:P.find(function(i){return i.name==="Outbox"}),private:P.filter(function(i){return!["Outbox","INBOX"].includes(i.name)}),smart:j.filter(function(i){return i.namespace==="#smart"}),custom:j.filter(function(i){return i.namespace==="#custom"})}},[L==null?void 0:L.mailUser,T==null?void 0:T.mailboxes]),de=(0,r.useMemo)(function(){var M;return(W==null||(M=W.inbox)===null||M===void 0?void 0:M.unread)||0},[W==null||(u=W.inbox)===null||u===void 0?void 0:u.unread]);return(0,e.jsxs)(ue.GP,{width:280,collapsible:!1,className:"email-sidebar-aside",children:[(0,e.jsxs)("div",{className:"email-sidebar",children:[(0,e.jsx)(c.Button,{as:Y.Link,to:"/mail/compose",className:"email-compose text-uppercase",children:"\u5199\u4FE1"}),(0,e.jsx)(q.E,{className:"email-sidebar-body custom-scrollbar",options:{scrollbars:{autoHide:"scroll"}},children:(0,e.jsxs)(c.Menu,{className:"menu-title-gray-600 menu-icon-gray-400 menu-state-bg menu-state-primary menu-state-icon-primary menu-state-bullet-primary mb-10",accordion:!1,rounded:!0,selectable:"AllMenu",selectedKeys:$,children:[(0,e.jsx)(c.Menu.Item,{url:"/mail/inbox",titleClassName:"fw-bolder",icon:(0,e.jsx)(A.JO,{className:"svg-icon-2 me-3",name:"Duotune/com010"}),badge:!!de&&(0,e.jsx)(c.Badge,{size:"sm",lightStyle:D.LJ.INBOX.badge,children:de}),children:K.inbox.title},"inbox"),(0,e.jsx)(c.Menu.Section,{children:"\u6587\u4EF6\u5939"}),K.private.map(function(M){var re,j=(re=D.LJ[M.name])===null||re===void 0?void 0:re.badge;return(0,e.jsx)(c.Menu.Item,{className:"mb-1",url:"/mail/".concat(M.key),titleClassName:"fw-bolder",icon:(0,e.jsx)(A.JO,{className:"svg-icon-2 me-3",name:M.icon}),badge:!!j&&!!M.count&&(0,e.jsx)(c.Badge,{size:"sm",lightStyle:j,children:M.count}),children:M.title},M.key)}),K.custom.length&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(c.Menu.Section,{children:"\u81EA\u5B9A\u4E49"}),K.custom.map(function(M){return(0,e.jsx)(c.Menu.Item,{className:"mb-1",url:"/mail/".concat(M.key),titleClassName:"fw-bolder",children:M.title},M.key)})]})]})}),(0,e.jsx)(s,{onAction:Q})]}),(0,e.jsx)(F,{mailUser:L==null?void 0:L.mailUser,visible:b,onCancel:G})]})}var R=k},92623:function(ce,_,t){t.d(_,{GG:function(){return Z},LJ:function(){return d},ss:function(){return S}});var ie=t(5618),d={INBOX:{id:"INBOX",name:"\u6536\u4EF6\u7BB1",icon:"Duotune/com010",badge:"success"},Sent:{id:"Sent",name:"\u5DF2\u53D1\u9001",icon:"Duotune/gen016"},Drafts:{id:"Drafts",name:"\u8349\u7A3F",icon:"Duotune/gen009",badge:"primary"},Archive:{id:"Archive",name:"\u5F52\u6863",icon:"Duotune/lay010"},Spam:{id:"Spam",name:"\u5783\u573E\u90AE\u4EF6",icon:"Duotune/gen044"},Trash:{id:"Trash",name:"\u56DE\u6536\u7AD9",icon:"Duotune/gen027",badge:"warning"},Outbox:{id:"Outbox",name:"\u53D1\u4EF6\u7BB1",icon:"Duotune/gen027"},Later:{id:"Later",name:"\u5F85\u529E",icon:"Duotune/gen027"},Blocked:{id:"Blocked",name:"\u5DF2\u5C4F\u853D",icon:"Duotune/gen027"}},Z=Object.keys(d).map(function(r){return d[r]});function S(r){var A=(0,ie.N8)(r);return A.name||A.address&&A.address.substring(0,A.address.indexOf("@"))}}}]);

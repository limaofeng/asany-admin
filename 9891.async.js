"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9891],{14336:function(N,l,t){var D=t(15009),_=t.n(D),b=t(97857),h=t.n(b),o=t(99289),m=t.n(o),y=t(62435),F=t(10811),R=t(12708);function E(U,f){return U.replace(/{(\w+)}/g,function(d,T){return f[T]!==void 0?f[T]:d})}function x(U,f){var d=(0,y.useRef)(!1),T=(0,y.useCallback)(function(){var u=m()(_()().mark(function j(C){var A,I,e,r;return _()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return A=U.width,I=U.title,e=U.content,C&&(typeof I=="string"&&(I=E(I,C)),typeof e=="string"&&(e=E(e,C)),typeof I=="function"&&(I=I(C)),typeof e=="function"&&(e=e(C))),n.next=5,F.Modal.confirm(h()(h()({},U),{},{title:I,content:e,width:A,okText:"\u5220 \u9664",okClassName:"btn-danger",allowOutsideClick:function(){return!d.current},preConfirm:function(){var s=m()(_()().mark(function p(){var O,S,P;return _()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return d.current=!0,B.prev=1,O=document.querySelector(".swal2-confirm"),O.textContent="\u5220\u9664\u4E2D...",S=document.createElement("span"),S.classList.add("spinner-border-sm","ms-2","spinner-border","align-middle"),O.appendChild(S),B.next=9,(0,R.gw)(f(C),350);case 9:P=B.sent,console.log(P);case 11:return B.prev=11,d.current=!1,B.finish(11);case 14:case"end":return B.stop()}},p,null,[[1,,11,14]])}));function v(){return s.apply(this,arguments)}return v}()}));case 5:if(r=n.sent,r.isConfirmed){n.next=8;break}return n.abrupt("return",!1);case 8:return F.Toast.success("\u5220\u9664\u6210\u529F",2e3,{placement:"top-center",progressBar:!0}),n.abrupt("return",!0);case 10:case"end":return n.stop()}},j)}));return function(j){return u.apply(this,arguments)}}(),[f,U]);return[T]}l.Z=x},58301:function(N,l,t){var D=t(5574),_=t.n(D),b=t(62435),h=t(12845),o=t(38018),m=t(9566),y={total:0,current:1,pageSize:10,totalPages:0,hasNextPage:!1,hasPreviousPage:!1};function F(R,E){var x,U=(0,h.useNavigate)(),f=(0,m.Z)(),d=(0,b.useMemo)(function(){return(E==null?void 0:E.toVariables)&&(E==null?void 0:E.toVariables(f))||{}},[f,E]),T=(0,b.useMemo)(function(){if(!d.orderBy)return{order:"descend",field:"createdAt"};var n=d.orderBy.split("_"),s=_()(n,2),v=s[0],p=s[1];return{order:p==="desc"?"descend":"ascend",field:v}},[d.orderBy]),u=R({fetchPolicy:"cache-and-network",variables:d}),j=u.data,C=u.loading,A=u.previousData,I=u.refetch,e=(0,b.useMemo)(function(){return C?(A==null?void 0:A.result.pageInfo)||y:(j==null?void 0:j.result.pageInfo)||y},[j==null?void 0:j.result.pageInfo.total,C,A==null?void 0:A.result.pageInfo.total]),r=(0,b.useCallback)(function(n,s,v){var p=(E==null?void 0:E.toQuery)&&E.toQuery(d,n,s,v)||"";U(location.pathname+"?"+o.stringify(p),{replace:!0})},[history,location.pathname,(x=d.filter)===null||x===void 0?void 0:x.name_contains]),a=(j==null?void 0:j.result.edges.map(function(n){return n.node}))||[];return[a,{loading:C,pageInfo:e,sorter:T,onChange:r,refetch:I}]}l.Z=F},9566:function(N,l,t){var D=t(12845),_=t(38018);function b(){var h=(0,D.useLocation)();return _.parse(h.search)}l.Z=b},58163:function(N,l,t){t.d(l,{ny:function(){return p},TS:function(){return W},s6:function(){return B},kD:function(){return S},bT:function(){return a},xY:function(){return A}});var D=t(97857),_=t.n(D),b=t(68400),h=t.n(b),o=t(75063),m=t(37887),y=t(50319),F=t(73359),R,E,x,U,f,d,T,u={},j=(0,o.Ps)(R||(R=h()([`
    fragment UserFragment on User {
  id
  name
  nickname
  userType
  username
  phone {
    number
    status
  }
  email {
    address
    status
  }
  avatar
}
    `]))),C=(0,o.Ps)(E||(E=h()([`
    query users($where: UserWhereInput, $page: Int, $pageSize: Int, $orderBy: OrderBy) {
  result: usersConnection(
    where: $where
    page: $page
    pageSize: $pageSize
    orderBy: $orderBy
  ) {
    pageInfo {
      hasNextPage
      hasPreviousPage
      totalPages
      total
      current
    }
    edges {
      cursor
      node {
        ...UserFragment
      }
    }
  }
}
    `,""])),j);function A(g){var i=_()(_()({},u),g);return m.a(C,i)}function I(g){var i=_objectSpread(_objectSpread({},u),g);return Apollo.useLazyQuery(C,i)}function e(g){var i=_objectSpread(_objectSpread({},u),g);return Apollo.useSuspenseQuery(C,i)}var r=(0,o.Ps)(x||(x=h()([`
    query user($id: ID!) {
  result: user(id: $id) {
    ...UserFragment
  }
}
    `,""])),j);function a(g){var i=_()(_()({},u),g);return m.a(r,i)}function n(g){var i=_objectSpread(_objectSpread({},u),g);return Apollo.useLazyQuery(r,i)}function s(g){var i=_objectSpread(_objectSpread({},u),g);return Apollo.useSuspenseQuery(r,i)}var v=(0,o.Ps)(U||(U=h()([`
    mutation createUser($input: UserCreateInput!) {
  result: createUser(input: $input) {
    ...UserFragment
  }
}
    `,""])),j);function p(g){var i=_()(_()({},u),g);return y.D(v,i)}var O=(0,o.Ps)(f||(f=h()([`
    mutation updateUser($id: ID!, $input: UserUpdateInput!) {
  result: updateUser(id: $id, input: $input, merge: true) {
    ...UserFragment
  }
}
    `,""])),j);function S(g){var i=_()(_()({},u),g);return y.D(O,i)}var P=(0,o.Ps)(d||(d=h()([`
    query findUserByUsername($username: String) {
  result: users(where: {username: $username}, first: 1) {
    id
    name
  }
}
    `])));function M(g){var i=_objectSpread(_objectSpread({},u),g);return Apollo.useQuery(P,i)}function B(g){var i=_()(_()({},u),g);return F.t(P,i)}function $(g){var i=_objectSpread(_objectSpread({},u),g);return Apollo.useSuspenseQuery(P,i)}var K=(0,o.Ps)(T||(T=h()([`
    mutation deleteManyUsers($where: UserWhereInput!) {
  result: deleteManyUsers(where: $where) {
    count
  }
}
    `])));function W(g){var i=_()(_()({},u),g);return y.D(K,i)}},29891:function(N,l,t){t.r(l);var D=t(15009),_=t.n(D),b=t(99289),h=t.n(b),o=t(5574),m=t.n(o),y=t(62435),F=t(96974),R=t(39711),E=t(46027),x=t(14336),U=t(58301),f=t(73588),d=t(10811),T=t(58163),u=t(86074);function j(){var C=(0,F.s0)(),A=(0,T.TS)(),I=m()(A,1),e=I[0],r=(0,U.Z)(T.xY,{toQuery:function(c,L,Q,w){var Z,z={};if((Z=c.filter)!==null&&Z!==void 0&&Z.nickname_contains){var V;z.q=(V=c.filter)===null||V===void 0?void 0:V.nickname_contains}return w&&(z.orderBy=w.field+"_"+(w.order==="ascend"?"asc":"desc")),z.page=L.current,z},toVariables:function(c){return c.where={},c.q&&(c.where={nickname_contains:c.q},delete c.q),c.where.tenantId="1691832353955123200",c}}),a=m()(r,2),n=a[0],s=a[1],v=s.loading,p=s.pageInfo,O=s.sorter,S=s.onChange,P=s.refetch,M=(0,y.useCallback)(function(i){C("/system/users?q=".concat(i),{replace:!0})},[]),B=(0,x.Z)({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",content:function(c){return(0,u.jsxs)(u.Fragment,{children:["\u60A8\u5373\u5C06\u5220\u9664\u201C",(0,u.jsx)("strong",{children:c.name}),"\u201D\u3002\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F"]})}},function(){var i=h()(_()().mark(function c(L){return _()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,e({variables:{where:{id_in:L==null?void 0:L.ids}}});case 2:P();case 3:case"end":return w.stop()}},c)}));return function(c){return i.apply(this,arguments)}}()),$=m()(B,1),K=$[0],W=(0,y.useCallback)(function(i){return function(){K({name:"\u9009\u4E2D\u7684\u7528\u6237",ids:i})}},[]),g=(0,y.useCallback)(function(i){return function(c){c.key==="edit"?C("/system/users/".concat(i.id)):c.key==="delete"&&K({name:i.name,ids:[i.id]})}},[K]);return(0,u.jsx)(f.vs,{header:{title:"\u7528\u6237\u5217\u8868"},children:(0,u.jsxs)(d.Card,{className:"mb-5 mb-xl-10",children:[(0,u.jsxs)(d.Card.Header,{className:"pt-8",children:[(0,u.jsx)(d.Card.Title,{className:"flex-column",children:(0,u.jsx)(d.Input.Search,{solid:!0,className:"w-250px",placeholder:"\u641C\u7D22\u7528\u6237",onSearch:M})}),(0,u.jsx)(d.Card.Toolbar,{children:(0,u.jsx)("div",{className:"d-flex justify-content-end",children:(0,u.jsx)(d.Button,{as:R.rU,variant:"primary",className:"me-3",icon:(0,u.jsx)(E.ZP,{className:"svg-icon-2",name:"Duotune/arr075"}),to:"/system/users/new",children:"\u65B0\u5EFA\u7528\u6237"})})})]}),(0,u.jsx)(d.Card.Body,{children:!p.total&&!v?(0,u.jsx)(d.Card,{className:"mb-5 mb-xl-10",children:(0,u.jsx)(d.Empty,{title:"\u8FD8\u6CA1\u6709\u7528\u6237",description:"\u9A6C\u4E0A\u6DFB\u52A0\u4E00\u4E2A\u7528\u6237\u5427\uFF01",image:"/assets/media/illustrations/sigma-1/4.png",children:(0,u.jsx)(d.Button,{variant:"primary",children:"\u6DFB\u52A0\u7528\u6237"})})}):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(d.BlockUI,{overlayClassName:"bg-white bg-opacity-25",loading:v,children:(0,u.jsx)(d.Table,{hover:!0,rowKey:"id",rowSelection:{type:"checkbox",renderTitle:function(c){return(0,u.jsxs)(u.Fragment,{children:["\u5DF2\u9009\u4E2D",(0,u.jsx)("span",{className:"mx-2",children:c}),"\u4E2A\u7528\u6237"]})},toolbar:function(c){return(0,u.jsx)("div",{children:(0,u.jsx)(d.Button,{color:"success",onClick:W(c),variant:!1,children:"\u6279\u91CF\u5220\u9664"})})}},noRowsRenderer:function(){return(0,u.jsx)(d.Empty,{description:"\u5217\u8868\u6570\u636E\u4E3A\u7A7A",image:"/assets/media/illustrations/sigma-1/5.png"})},columns:[{key:"name",title:"\u540D\u79F0",sortOrder:O.field==="name"?O.order:void 0,render:function(c,L){return(0,u.jsxs)("div",{className:"d-flex py-2 align-items-center",children:[(0,u.jsx)(d.Symbol.Avatar,{src:L.avatar}),(0,u.jsx)("span",{className:"ms-2 text-muted",children:c})]})}},{key:"username",title:"\u8D26\u6237",sorter:!0,width:120,sortOrder:O.field==="username"?O.order:void 0},{key:"email",title:"\u90AE\u7BB1",width:180,render:function(c){return(0,u.jsx)("span",{className:"text-muted",children:c==null?void 0:c.address})}},{key:"phone",title:"\u7535\u8BDD",width:180,render:function(c){return(0,u.jsx)("span",{className:"text-muted",children:c==null?void 0:c.number})}},{key:"createdAt",title:"\u521B\u5EFA\u65F6\u95F4",width:120},{title:"\u64CD\u4F5C",key:"action",width:140,render:function(c,L){return(0,u.jsx)("div",{children:(0,u.jsx)(d.Dropdown,{overlay:(0,u.jsxs)(d.Menu,{onClick:g(L),className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold w-125px py-4",children:[(0,u.jsx)(d.Menu.Item,{className:"px-3",children:"\u7F16\u8F91"},"edit"),(0,u.jsx)(d.Menu.Item,{className:"px-3 actions-delete",children:"\u5220\u9664"},"delete")]}),placement:"bottomRight",children:(0,u.jsxs)(d.Button,{variant:"light",activeColor:"light-primary",children:["\u64CD \u4F5C",(0,u.jsx)(E.ZP,{className:"ms-2 svg-icon-5 m-0",name:"Duotune/arr072"})]})})})}}],pagination:p,onChange:S,dataSource:n})})})})]})})}l.default=j},38018:function(N,l,t){var D=t(5574).default,_=t(64599).default,b=t(52677).default,h=t(19632).default,o=t(62072),m=t(44020),y=t(13615),F=t(92806),R=function(r){return r==null};function E(e){switch(e.arrayFormat){case"index":return function(r){return function(a,n){var s=a.length;return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?a:n===null?[].concat(h(a),[[f(r,e),"[",s,"]"].join("")]):[].concat(h(a),[[f(r,e),"[",f(s,e),"]=",f(n,e)].join("")])}};case"bracket":return function(r){return function(a,n){return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?a:n===null?[].concat(h(a),[[f(r,e),"[]"].join("")]):[].concat(h(a),[[f(r,e),"[]=",f(n,e)].join("")])}};case"comma":case"separator":return function(r){return function(a,n){return n==null||n.length===0?a:a.length===0?[[f(r,e),"=",f(n,e)].join("")]:[[a,f(n,e)].join(e.arrayFormatSeparator)]}};default:return function(r){return function(a,n){return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?a:n===null?[].concat(h(a),[f(r,e)]):[].concat(h(a),[[f(r,e),"=",f(n,e)].join("")])}}}}function x(e){var r;switch(e.arrayFormat){case"index":return function(a,n,s){if(r=/\[(\d*)\]$/.exec(a),a=a.replace(/\[\d*\]$/,""),!r){s[a]=n;return}s[a]===void 0&&(s[a]={}),s[a][r[1]]=n};case"bracket":return function(a,n,s){if(r=/(\[\])$/.exec(a),a=a.replace(/\[\]$/,""),!r){s[a]=n;return}if(s[a]===void 0){s[a]=[n];return}s[a]=[].concat(s[a],n)};case"comma":case"separator":return function(a,n,s){var v=typeof n=="string"&&n.includes(e.arrayFormatSeparator),p=typeof n=="string"&&!v&&d(n,e).includes(e.arrayFormatSeparator);n=p?d(n,e):n;var O=v||p?n.split(e.arrayFormatSeparator).map(function(S){return d(S,e)}):n===null?n:d(n,e);s[a]=O};default:return function(a,n,s){if(s[a]===void 0){s[a]=n;return}s[a]=[].concat(s[a],n)}}}function U(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function f(e,r){return r.encode?r.strict?o(e):encodeURIComponent(e):e}function d(e,r){return r.decode?m(e):e}function T(e){return Array.isArray(e)?e.sort():b(e)==="object"?T(Object.keys(e)).sort(function(r,a){return Number(r)-Number(a)}).map(function(r){return e[r]}):e}function u(e){var r=e.indexOf("#");return r!==-1&&(e=e.slice(0,r)),e}function j(e){var r="",a=e.indexOf("#");return a!==-1&&(r=e.slice(a)),r}function C(e){e=u(e);var r=e.indexOf("?");return r===-1?"":e.slice(r+1)}function A(e,r){return r.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):r.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function I(e,r){r=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},r),U(r.arrayFormatSeparator);var a=x(r),n=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return n;var s=_(e.split("&")),v;try{for(s.s();!(v=s.n()).done;){var p=v.value;if(p!==""){var O=y(r.decode?p.replace(/\+/g," "):p,"="),S=D(O,2),P=S[0],M=S[1];M=M===void 0?null:["comma","separator"].includes(r.arrayFormat)?M:d(M,r),a(d(P,r),M,n)}}}catch(L){s.e(L)}finally{s.f()}for(var B=0,$=Object.keys(n);B<$.length;B++){var K=$[B],W=n[K];if(b(W)==="object"&&W!==null)for(var g=0,i=Object.keys(W);g<i.length;g++){var c=i[g];W[c]=A(W[c],r)}else n[K]=A(W,r)}return r.sort===!1?n:(r.sort===!0?Object.keys(n).sort():Object.keys(n).sort(r.sort)).reduce(function(L,Q){var w=n[Q];return w&&b(w)==="object"&&!Array.isArray(w)?L[Q]=T(w):L[Q]=w,L},Object.create(null))}l.extract=C,l.parse=I,l.stringify=function(e,r){if(!e)return"";r=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},r),U(r.arrayFormatSeparator);for(var a=function(M){return r.skipNull&&R(e[M])||r.skipEmptyString&&e[M]===""},n=E(r),s={},v=0,p=Object.keys(e);v<p.length;v++){var O=p[v];a(O)||(s[O]=e[O])}var S=Object.keys(s);return r.sort!==!1&&S.sort(r.sort),S.map(function(P){var M=e[P];return M===void 0?"":M===null?f(P,r):Array.isArray(M)?M.reduce(n(P),[]).join("&"):f(P,r)+"="+f(M,r)}).filter(function(P){return P.length>0}).join("&")},l.parseUrl=function(e,r){r=Object.assign({decode:!0},r);var a=y(e,"#"),n=D(a,2),s=n[0],v=n[1];return Object.assign({url:s.split("?")[0]||"",query:I(C(e),r)},r&&r.parseFragmentIdentifier&&v?{fragmentIdentifier:d(v,r)}:{})},l.stringifyUrl=function(e,r){r=Object.assign({encode:!0,strict:!0},r);var a=u(e.url).split("?")[0]||"",n=l.extract(e.url),s=l.parse(n,{sort:!1}),v=Object.assign(s,e.query),p=l.stringify(v,r);p&&(p="?".concat(p));var O=j(e.url);return e.fragmentIdentifier&&(O="#".concat(f(e.fragmentIdentifier,r))),"".concat(a).concat(p).concat(O)},l.pick=function(e,r,a){a=Object.assign({parseFragmentIdentifier:!0},a);var n=l.parseUrl(e,a),s=n.url,v=n.query,p=n.fragmentIdentifier;return l.stringifyUrl({url:s,query:F(v,r),fragmentIdentifier:p},a)},l.exclude=function(e,r,a){var n=Array.isArray(r)?function(s){return!r.includes(s)}:function(s,v){return!r(s,v)};return l.pick(e,n,a)}},13615:function(N){N.exports=function(l,t){if(!(typeof l=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[l];var D=l.indexOf(t);return D===-1?[l]:[l.slice(0,D),l.slice(D+t.length)]}},62072:function(N){N.exports=function(l){return encodeURIComponent(l).replace(/[!'()*]/g,function(t){return"%".concat(t.charCodeAt(0).toString(16).toUpperCase())})}},44020:function(N){var l="%[a-f0-9]{2}",t=new RegExp("("+l+")|([^%]+?)","gi"),D=new RegExp("("+l+")+","gi");function _(o,m){try{return[decodeURIComponent(o.join(""))]}catch(R){}if(o.length===1)return o;m=m||1;var y=o.slice(0,m),F=o.slice(m);return Array.prototype.concat.call([],_(y),_(F))}function b(o){try{return decodeURIComponent(o)}catch(F){for(var m=o.match(t)||[],y=1;y<m.length;y++)o=_(m,y).join(""),m=o.match(t)||[];return o}}function h(o){for(var m={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},y=D.exec(o);y;){try{m[y[0]]=decodeURIComponent(y[0])}catch(U){var F=b(y[0]);F!==y[0]&&(m[y[0]]=F)}y=D.exec(o)}m["%C2"]="\uFFFD";for(var R=Object.keys(m),E=0;E<R.length;E++){var x=R[E];o=o.replace(new RegExp(x,"g"),m[x])}return o}N.exports=function(o){if(typeof o!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof o+"`");try{return o=o.replace(/\+/g," "),decodeURIComponent(o)}catch(m){return h(o)}}},92806:function(N){N.exports=function(l,t){for(var D={},_=Object.keys(l),b=Array.isArray(t),h=0;h<_.length;h++){var o=_[h],m=l[o];(b?t.indexOf(o)!==-1:t(o,m,l))&&(D[o]=m)}return D}}}]);

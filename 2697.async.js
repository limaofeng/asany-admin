"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2697],{96708:function(U,l,t){var F=t(46027),B=t(84048),D=t(86074);function O(i){var f=i.layout,j=i.children,E=i.onLayout;return(0,D.jsxs)("div",{className:"d-flex flex-wrap my-1",children:[f&&(0,D.jsxs)("ul",{className:"nav nav-pills me-6 mb-2 mb-sm-0",children:[(0,D.jsx)("li",{className:"nav-item m-0 me-3",children:(0,D.jsx)(B.Z,{variant:"light",color:"muted",active:f==="card",activeColor:"primary",onClick:E==null?void 0:E.bind(null,"card"),icon:(0,D.jsx)(F.ZP,{name:"Duotune/gen024",className:"svg-icon-1"})})}),(0,D.jsx)("li",{className:"nav-item m-0",children:(0,D.jsx)(B.Z,{variant:"light",color:"muted",active:f==="table",onClick:E==null?void 0:E.bind(null,"table"),activeColor:"primary",className:"me-3",icon:(0,D.jsx)(F.ZP,{name:"Duotune/abs015",className:"svg-icon-1"})})})]}),j]})}l.Z=O},32697:function(U,l,t){t.r(l);var F=t(19632),B=t.n(F),D=t(5574),O=t.n(D),i=t(13769),f=t.n(i),j=t(15009),E=t.n(j),W=t(99289),T=t.n(W),p=t(62435),$=t(46027),v=t(12845),I=t(38018),G=t(96708),J=t(73588),y=t(79817),z=t(66269),Z=t(19975),u=t(86074),e=["q"];function r(n){var s=n.data,c=n.baseUrl,_=n.navigate,x=n.onDelete,C=(0,p.useCallback)(function(){var b=T()(E()().mark(function R(w){var L,d;return E()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return L="\u786E\u5B9A\u5220\u9664\u6D77\u62A5 \u201C".concat(w.name,"\u201D \u5417\uFF1F"),o.next=3,y.Modal.confirm({title:"\u786E\u5B9A\u5220\u9664",content:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{className:"tip-confirm",children:L}),(0,u.jsx)("p",{children:"\u5220\u9664\u7684\u64CD\u4F5C\u4E0D\u53EF\u9006,\u8BF7\u8C28\u614E\u64CD\u4F5C"})]}),okClassName:"btn-danger",okText:"\u5220\u9664"});case 3:if(d=o.sent,d.isConfirmed){o.next=6;break}return o.abrupt("return");case 6:return o.next=8,x(w.id);case 8:y.Toast.success("\u6D77\u62A5 \u201C".concat(w.name,"\u201D \u5220\u9664\u6210\u529F"),2e3,{placement:"bottom-left",progressBar:!0});case 9:case"end":return o.stop()}},R)}));return function(R){return b.apply(this,arguments)}}(),[x]),P=(0,p.useCallback)(function(b){b.key==="view"?_("".concat(c,"/").concat(s.id)):b.key==="delete"&&C(s)},[c,s,C,history]);return(0,u.jsx)(y.Dropdown,{overlay:(0,u.jsxs)(y.Menu,{onClick:P,className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold fs-8 w-125px py-4",children:[(0,u.jsx)(y.Menu.Item,{className:"px-3",children:"\u7F16\u8F91"},"view"),(0,u.jsx)(y.Menu.Item,{className:"px-3 actions-delete",children:"\u5220\u9664"},"delete")]}),placement:"bottomRight",children:(0,u.jsxs)(y.Button,{className:"fs-8",variant:"light",activeColor:"light-primary",children:["\u64CD\u4F5C",(0,u.jsx)($.JO,{className:"svg-icon-5 ms-2 me-n1",name:"Duotune/arr072"})]})})}function a(){var n,s,c=(0,v.useNavigate)(),_=(0,v.useLocation)(),x=_.pathname,C=(0,p.useMemo)(function(){var h=_.query,m=h.q,g=f()(h,e);return m&&(g.filter={name_contains:m}),g},[_]),P=(0,p.useMemo)(function(){if(!C.orderBy)return{order:"descend",field:"createdAt"};var h=C.orderBy.split("_"),m=O()(h,2),g=m[0],M=m[1];return{order:M==="desc"?"descend":"ascend",field:g}},[C.orderBy]),b=(0,Z.a7)({refetchQueries:[Z.my]}),R=O()(b,1),w=R[0],L=(0,Z.Nd)({fetchPolicy:"cache-and-network",variables:C}),d=L.data,N=L.loading,o=L.previousData,Q=(0,p.useMemo)(function(){return N?(o==null?void 0:o.total.totalCount)||0:(d==null?void 0:d.total.totalCount)||0},[d==null?void 0:d.total.totalCount,N,o==null?void 0:o.total]),K=(0,p.useMemo)(function(){return N?(o==null?void 0:o.landingPosters)||{total:0,current:1}:(d==null?void 0:d.landingPosters)||{total:0,current:1}},[d==null?void 0:d.landingPosters,N,o==null?void 0:o.landingPosters]),V=(0,p.useMemo)(function(){var h;if(N){var m;return((o==null||(m=o.landingPosters)===null||m===void 0?void 0:m.edges)||[]).map(function(g){return g.node})}return((d==null||(h=d.landingPosters)===null||h===void 0?void 0:h.edges)||[]).map(function(g){return g.node})},[d==null?void 0:d.landingPosters,N,o==null?void 0:o.landingPosters]),k=(0,p.useCallback)(function(h){c(_.pathname+"?"+I.stringify({q:h}),{replace:!0})},[c,_.pathname]),ee=(0,p.useCallback)(function(h,m,g){var M,S={};if((M=C.filter)!==null&&M!==void 0&&M.name_contains){var A;S.q=(A=C.filter)===null||A===void 0?void 0:A.name_contains}g&&(S.orderBy=g.field+"_"+(g.order==="ascend"?"asc":"desc")),S.page=h.current,c(_.pathname+"?"+I.stringify(S),{replace:!0})},[c,_.pathname,(n=C.filter)===null||n===void 0?void 0:n.name_contains]),X=(0,p.useCallback)(T()(E()().mark(function h(){var m,g,M,S,A,q=arguments;return E()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:for(m=q.length,g=new Array(m),M=0;M<m;M++)g[M]=q[M];return H.next=3,w({variables:{ids:g}});case 3:return S=H.sent,A=S.data,H.abrupt("return",(A==null?void 0:A.deleteLandingPoster)||0);case 6:case"end":return H.stop()}},h)})),[w]),Y=(0,p.useCallback)(function(h){return T()(E()().mark(function m(){var g,M;return E()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return g="\u786E\u5B9A\u5220\u9664\u9009\u4E2D\u7684, \u5171 ".concat(h.length," \u4E2A\u6D77\u62A5\u5417\uFF1F"),A.next=3,y.Modal.confirm({title:"\u786E\u5B9A\u5220\u9664",content:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{className:"tip-confirm",children:g}),(0,u.jsx)("p",{children:"\u5220\u9664\u7684\u64CD\u4F5C\u4E0D\u53EF\u9006,\u8BF7\u8C28\u614E\u64CD\u4F5C"})]}),okClassName:"btn-danger",okText:"\u5220\u9664"});case 3:if(M=A.sent,M.isConfirmed){A.next=6;break}return A.abrupt("return");case 6:return A.next=8,X.apply(void 0,B()(h));case 8:y.Toast.success("\u6D77\u62A5\u6279\u91CF\u5220\u9664\u6210\u529F",2e3,{placement:"bottom-left",progressBar:!0});case 9:case"end":return A.stop()}},m)}))},[X]),re=(0,p.useMemo)(function(){return function(h){return(0,u.jsx)("div",{children:(0,u.jsx)(y.Button,{color:"success",onClick:Y(h),variant:!1,children:"\u6279\u91CF\u5220\u9664"})})}},[Y]);return(0,u.jsxs)(J.vs,{footer:!1,children:[(0,u.jsxs)("div",{className:"d-flex flex-wrap flex-stack pb-7",children:[(0,u.jsxs)("div",{className:"d-flex flex-wrap align-items-center",children:[(0,u.jsxs)("h3",{className:"fw-bolder me-5",children:["\u6D77\u62A5 (",Q,")"]}),(0,u.jsx)(y.Input.Search,{placeholder:"\u641C\u7D22",onSearch:k,defaultValue:(s=C.filter)===null||s===void 0?void 0:s.name_contains,className:"border-body bg-body w-250px"})]}),(0,u.jsx)(G.Z,{children:(0,u.jsx)("div",{className:"d-flex my-0",children:(0,u.jsx)(y.Button,{as:v.Link,to:"".concat(x,"/new"),children:"\u65B0\u5EFA\u6D77\u62A5"})})})]}),!Q&&!N?(0,u.jsx)(y.Card,{className:"mb-5 mb-xl-10",children:(0,u.jsx)(y.Empty,{title:"\u8FD8\u6CA1\u6709\u6D77\u62A5",description:"\u9A6C\u4E0A\u6DFB\u52A0\u4E00\u4E2A\u6D77\u62A5\u8BD5\u8BD5",image:"/assets/media/illustrations/sigma-1/4.png",children:(0,u.jsx)(y.Button,{as:v.Link,variant:"primary",to:"".concat(x,"/new"),children:"\u65B0\u5EFA\u6D77\u62A5"})})}):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(y.Card,{className:"mb-5 mb-xl-10",children:(0,u.jsx)(y.Card.Body,{children:(0,u.jsx)(y.BlockUI,{overlayClassName:"bg-white bg-opacity-25",loading:N,children:(0,u.jsx)(y.Table,{hover:!0,rowKey:"id",rowSelection:{type:"checkbox",renderTitle:function(m){return(0,u.jsxs)(u.Fragment,{children:["\u5DF2\u9009\u4E2D",(0,u.jsx)("span",{className:"mx-2",children:m}),"\u4E2A\u6D77\u62A5"]})},toolbar:re},noRowsRenderer:function(){return(0,u.jsx)(y.Empty,{description:"\u5217\u8868\u6570\u636E\u4E3A\u7A7A",image:"/assets/media/illustrations/sigma-1/5.png"})},columns:[{key:"name",title:"\u540D\u79F0",sorter:!0,sortOrder:P.field==="name"?P.order:void 0,render:function(m,g){return(0,u.jsx)("div",{className:"ps-2",children:(0,u.jsx)(v.Link,{className:"text-gray-700",to:"".concat(x,"/").concat(g.id),children:m})})}},{key:"background",title:"\u80CC\u666F\u56FE",width:100,render:function(m){return m?(0,u.jsx)("div",{className:"d-flex w-30px justify-content-center",children:(0,u.jsx)("img",{src:"https://api.asany.cn"+"/preview/".concat(m.id),className:"h-30px w-20px"})}):(0,u.jsx)($.JO,{className:"svg-icon-2qx text-muted",name:"Bootstrap/file-image"})}},{key:"music",title:"\u80CC\u666F\u97F3\u4E50",width:"20%",render:function(m){return(0,u.jsx)("div",{className:"d-flex list-music-preview",children:m?(0,u.jsx)(z.B,{uploadFile:m,status:"completed"}):"\u65E0"})}},{key:"actions",title:"\u64CD\u4F5C",width:100,render:function(m,g){return(0,u.jsx)(r,{baseUrl:x,onDelete:X,navigate:c,data:g})}}],pagination:K,onChange:ee,dataSource:V})})})})})]})}l.default=a},38018:function(U,l,t){var F=t(5574).default,B=t(64599).default,D=t(52677).default,O=t(19632).default,i=t(62072),f=t(44020),j=t(13615),E=t(92806),W=function(r){return r==null};function T(e){switch(e.arrayFormat){case"index":return function(r){return function(a,n){var s=a.length;return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?a:n===null?[].concat(O(a),[[v(r,e),"[",s,"]"].join("")]):[].concat(O(a),[[v(r,e),"[",v(s,e),"]=",v(n,e)].join("")])}};case"bracket":return function(r){return function(a,n){return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?a:n===null?[].concat(O(a),[[v(r,e),"[]"].join("")]):[].concat(O(a),[[v(r,e),"[]=",v(n,e)].join("")])}};case"comma":case"separator":return function(r){return function(a,n){return n==null||n.length===0?a:a.length===0?[[v(r,e),"=",v(n,e)].join("")]:[[a,v(n,e)].join(e.arrayFormatSeparator)]}};default:return function(r){return function(a,n){return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?a:n===null?[].concat(O(a),[v(r,e)]):[].concat(O(a),[[v(r,e),"=",v(n,e)].join("")])}}}}function p(e){var r;switch(e.arrayFormat){case"index":return function(a,n,s){if(r=/\[(\d*)\]$/.exec(a),a=a.replace(/\[\d*\]$/,""),!r){s[a]=n;return}s[a]===void 0&&(s[a]={}),s[a][r[1]]=n};case"bracket":return function(a,n,s){if(r=/(\[\])$/.exec(a),a=a.replace(/\[\]$/,""),!r){s[a]=n;return}if(s[a]===void 0){s[a]=[n];return}s[a]=[].concat(s[a],n)};case"comma":case"separator":return function(a,n,s){var c=typeof n=="string"&&n.includes(e.arrayFormatSeparator),_=typeof n=="string"&&!c&&I(n,e).includes(e.arrayFormatSeparator);n=_?I(n,e):n;var x=c||_?n.split(e.arrayFormatSeparator).map(function(C){return I(C,e)}):n===null?n:I(n,e);s[a]=x};default:return function(a,n,s){if(s[a]===void 0){s[a]=n;return}s[a]=[].concat(s[a],n)}}}function $(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function v(e,r){return r.encode?r.strict?i(e):encodeURIComponent(e):e}function I(e,r){return r.decode?f(e):e}function G(e){return Array.isArray(e)?e.sort():D(e)==="object"?G(Object.keys(e)).sort(function(r,a){return Number(r)-Number(a)}).map(function(r){return e[r]}):e}function J(e){var r=e.indexOf("#");return r!==-1&&(e=e.slice(0,r)),e}function y(e){var r="",a=e.indexOf("#");return a!==-1&&(r=e.slice(a)),r}function z(e){e=J(e);var r=e.indexOf("?");return r===-1?"":e.slice(r+1)}function Z(e,r){return r.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):r.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function u(e,r){r=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},r),$(r.arrayFormatSeparator);var a=p(r),n=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return n;var s=B(e.split("&")),c;try{for(s.s();!(c=s.n()).done;){var _=c.value;if(_!==""){var x=j(r.decode?_.replace(/\+/g," "):_,"="),C=F(x,2),P=C[0],b=C[1];b=b===void 0?null:["comma","separator"].includes(r.arrayFormat)?b:I(b,r),a(I(P,r),b,n)}}}catch(K){s.e(K)}finally{s.f()}for(var R=0,w=Object.keys(n);R<w.length;R++){var L=w[R],d=n[L];if(D(d)==="object"&&d!==null)for(var N=0,o=Object.keys(d);N<o.length;N++){var Q=o[N];d[Q]=Z(d[Q],r)}else n[L]=Z(d,r)}return r.sort===!1?n:(r.sort===!0?Object.keys(n).sort():Object.keys(n).sort(r.sort)).reduce(function(K,V){var k=n[V];return k&&D(k)==="object"&&!Array.isArray(k)?K[V]=G(k):K[V]=k,K},Object.create(null))}l.extract=z,l.parse=u,l.stringify=function(e,r){if(!e)return"";r=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},r),$(r.arrayFormatSeparator);for(var a=function(b){return r.skipNull&&W(e[b])||r.skipEmptyString&&e[b]===""},n=T(r),s={},c=0,_=Object.keys(e);c<_.length;c++){var x=_[c];a(x)||(s[x]=e[x])}var C=Object.keys(s);return r.sort!==!1&&C.sort(r.sort),C.map(function(P){var b=e[P];return b===void 0?"":b===null?v(P,r):Array.isArray(b)?b.reduce(n(P),[]).join("&"):v(P,r)+"="+v(b,r)}).filter(function(P){return P.length>0}).join("&")},l.parseUrl=function(e,r){r=Object.assign({decode:!0},r);var a=j(e,"#"),n=F(a,2),s=n[0],c=n[1];return Object.assign({url:s.split("?")[0]||"",query:u(z(e),r)},r&&r.parseFragmentIdentifier&&c?{fragmentIdentifier:I(c,r)}:{})},l.stringifyUrl=function(e,r){r=Object.assign({encode:!0,strict:!0},r);var a=J(e.url).split("?")[0]||"",n=l.extract(e.url),s=l.parse(n,{sort:!1}),c=Object.assign(s,e.query),_=l.stringify(c,r);_&&(_="?".concat(_));var x=y(e.url);return e.fragmentIdentifier&&(x="#".concat(v(e.fragmentIdentifier,r))),"".concat(a).concat(_).concat(x)},l.pick=function(e,r,a){a=Object.assign({parseFragmentIdentifier:!0},a);var n=l.parseUrl(e,a),s=n.url,c=n.query,_=n.fragmentIdentifier;return l.stringifyUrl({url:s,query:E(c,r),fragmentIdentifier:_},a)},l.exclude=function(e,r,a){var n=Array.isArray(r)?function(s){return!r.includes(s)}:function(s,c){return!r(s,c)};return l.pick(e,n,a)}},13615:function(U){U.exports=function(l,t){if(!(typeof l=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[l];var F=l.indexOf(t);return F===-1?[l]:[l.slice(0,F),l.slice(F+t.length)]}},62072:function(U){U.exports=function(l){return encodeURIComponent(l).replace(/[!'()*]/g,function(t){return"%".concat(t.charCodeAt(0).toString(16).toUpperCase())})}},44020:function(U){var l="%[a-f0-9]{2}",t=new RegExp("("+l+")|([^%]+?)","gi"),F=new RegExp("("+l+")+","gi");function B(i,f){try{return[decodeURIComponent(i.join(""))]}catch(W){}if(i.length===1)return i;f=f||1;var j=i.slice(0,f),E=i.slice(f);return Array.prototype.concat.call([],B(j),B(E))}function D(i){try{return decodeURIComponent(i)}catch(E){for(var f=i.match(t)||[],j=1;j<f.length;j++)i=B(f,j).join(""),f=i.match(t)||[];return i}}function O(i){for(var f={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},j=F.exec(i);j;){try{f[j[0]]=decodeURIComponent(j[0])}catch($){var E=D(j[0]);E!==j[0]&&(f[j[0]]=E)}j=F.exec(i)}f["%C2"]="\uFFFD";for(var W=Object.keys(f),T=0;T<W.length;T++){var p=W[T];i=i.replace(new RegExp(p,"g"),f[p])}return i}U.exports=function(i){if(typeof i!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof i+"`");try{return i=i.replace(/\+/g," "),decodeURIComponent(i)}catch(f){return O(i)}}},92806:function(U){U.exports=function(l,t){for(var F={},B=Object.keys(l),D=Array.isArray(t),O=0;O<B.length;O++){var i=B[O],f=l[i];(D?t.indexOf(i)!==-1:t(i,f,l))&&(F[i]=f)}return F}}}]);

"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3846],{70005:function(G,O,a){var N=a(62435),s=a(96974),e=a(79817),f=a(86074);function _(n){var E=n.categoryId,y=n.append,x=(0,s.bx)(),T=x.rootCategoryId,F=x.categories,P=x.baseUrl,Z=x.breadcrumbs,j=(0,N.useMemo)(function(){var t,U=F.find(function(B){return B.id===E});return((U==null||(t=U.path)===null||t===void 0?void 0:t.split("/"))||[]).map(function(B){return F.find(function(v){return v.id===B})}).filter(function(B){return B})},[F,E]);return(0,f.jsxs)(e.Breadcrumb,{className:"fw-bold fs-base text-muted my-1",children:[Z.map(function(t){return(0,f.jsx)(e.Breadcrumb.Item,{href:t.url,children:t.title},t.title)}),j?(0,f.jsx)(f.Fragment,{children:j.filter(function(t){return t.id!==T}).map(function(t){return(0,f.jsx)(e.Breadcrumb.Item,{href:"".concat(P,"/categories/").concat(t.id,"/articles"),children:t.name},t.id)})}):(0,f.jsx)(e.Breadcrumb.Item,{children:"\u52A0\u8F7D\u4E2D..."}),y]})}O.Z=_},25136:function(G,O,a){var N=a(15009),s=a.n(N),e=a(99289),f=a.n(e),_=a(5574),n=a.n(_),E=a(62435),y=a(96974),x=a(46027),T=a(69366),F=a(93967),P=a.n(F),Z=a(30381),j=a.n(Z),t=a(79817),U=a(40158),B=a(14336),v=a(42646),l=a(86074);function z(p){return p==="PUBLISHED"?"\u5DF2\u53D1\u5E03":p==="SCHEDULED"?"\u8BA1\u5212\u4E2D":"\u5DF2\u5931\u6548"}function $(p){var u=p.article,r=p.categoryTreeData,i=p.onChangeCategory,g=p.baseUrl,o=(0,E.useState)(),c=n()(o,2),A=c[0],I=c[1],d=(0,y.s0)(),D=(0,E.useCallback)(function(h){I(h)},[]),L=(0,E.useCallback)(function(h){return h.isAfter(j()())},[]),S=(0,E.useCallback)(function(h){return{disabledHours:function(){if(!(A||h).isSame(j()(),"days"))return[];for(var m=[],H=j()().hours()+1;H<24;H++)m.push(H);return m},disabledMinutes:function(m){if(!(A||h).isSame(j()(),"days"))return[];if(!h.set("hours",m).isSame(j()(),"hours"))return[];for(var H=[],Q=j()().minutes()+1;Q<60;Q++)H.push(Q);return H}}},[A]),V=(0,v.eU)(),C=n()(V,1),K=C[0],b=(0,B.Z)({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u7BC7\u6587\u7AE0\u5417\uFF1F",content:(0,l.jsxs)(l.Fragment,{children:["\u60A8\u5373\u5C06\u5220\u9664\u201C",(0,l.jsx)("strong",{children:u==null?void 0:u.title}),"\u201D\u3002\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F"]})},f()(s()().mark(function h(){return s()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,K({variables:{id:u.id}});case 2:case"end":return m.stop()}},h)}))),W=n()(b,1),R=W[0],M=(0,E.useCallback)(f()(s()().mark(function h(){return s()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,R();case 2:if(!m.sent){m.next=4;break}d("".concat(g,"/cms/categories/").concat(u.category.id,"/articles"),{replace:!0});case 4:case"end":return m.stop()}},h)})),[R,g,u]);return(0,l.jsxs)("div",{className:"d-flex flex-column gap-7 gap-lg-10 w-100 w-lg-300px mb-7",children:[(0,l.jsxs)(t.Card,{flush:!0,children:[(0,l.jsxs)(t.Card.Header,{className:"ribbon ribbon-top ribbon-vertical",children:[!!(u!=null&&u.status)&&(u==null?void 0:u.status)!=="DRAFT"&&(0,l.jsx)("div",{className:P()("ribbon-label",{"bg-primary":(u==null?void 0:u.status)==="PUBLISHED","bg-success":(u==null?void 0:u.status)==="SCHEDULED","bg-danger":(u==null?void 0:u.status)==="INACTIVE"}),children:z(u.status)}),(0,l.jsx)(t.Card.Title,{children:"\u6587\u7AE0\u8BBE\u7F6E"})]}),(0,l.jsxs)(t.Card.Body,{className:" pt-0",children:[(0,l.jsx)(t.Form.Item,{name:"image",className:"text-center",children:(0,l.jsx)(t.Upload.Image,{width:240,height:150,className:"mb-3",space:"Ohc2OaZ4",accept:".png, .jpg, .jpeg",background:"/assets/media/svg/files/blank-image.svg"})}),(0,l.jsx)("div",{className:"text-muted fs-7 mb-6",children:"\u8BBE\u7F6E\u6587\u7AE0\u5C01\u9762\u56FE\u3002\u4EC5\u63A5\u53D7 *.png\u3001*.jpg \u548C *.jpeg \u683C\u5F0F\u7684\u56FE\u7247"}),(0,l.jsx)(t.Form.Item,{className:"mb-3",label:"\u6240\u5C5E\u680F\u76EE",name:["category","id"],rules:[{required:!0,message:"\u6240\u5C5E\u680F\u76EE\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,l.jsx)(T.Z,{onChange:i,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:r,placeholder:"\u9009\u62E9\u680F\u76EE",treeDefaultExpandAll:!0,transitionName:""})}),(0,l.jsx)("div",{className:"text-muted fs-7 mb-6",children:"\u60A8\u7684\u6587\u7AE0\u5FC5\u987B\u53D1\u5E03\u5728\u4E00\u4E2A\u680F\u76EE\u4E2D"}),(0,l.jsx)(t.Form.Item,{name:"publishedAt",label:"\u53D1\u5E03\u65F6\u95F4",className:"mb-6",children:(0,l.jsx)(U.Z,{onChange:D,disabled:(u==null?void 0:u.status)==="SCHEDULED",disabledDate:L,disabledTime:S})}),(0,l.jsx)(t.Form.Item,{name:"summary",label:"\u6458\u8981",className:"mb-6",children:(0,l.jsx)(t.Input.TextArea,{autoSize:{minRows:6}})}),(0,l.jsx)(t.Form.Item,{name:"authors",label:"\u4F5C\u8005",children:(0,l.jsx)(t.Input,{})})]})]}),u&&(0,l.jsx)(t.Card,{flush:!0,className:"py-4",children:(0,l.jsxs)(t.Card.Body,{children:[(0,l.jsx)(t.Button,{onClick:M,full:!0,className:"mb-3",variant:"light-danger",icon:(0,l.jsx)(x.JO,{className:"svg-icon-2",name:"Bootstrap/trash"}),children:"\u5220\u9664"}),(0,l.jsx)("div",{className:"text-muted fs-7 mb-6",children:"\u6587\u7AE0\u5220\u9664\u540E\uFF0C\u4E0D\u53EF\u6062\u590D"})]})})]})}O.Z=$},40158:function(G,O,a){var N=a(22144),s=a(68351),e=a(86074);function f(_){var n=_.value,E=_.onChange,y=_.disabled,x=_.disabledDate,T=_.disabledTime;return(0,e.jsxs)("div",{children:[(0,e.jsx)(N.default,{getPopupContainer:function(P){return P.parentNode},transitionName:"",allowClear:!1,popupClassName:"article-publish-dropdown-published-at",placement:"topLeft",value:n,disabled:y,onChange:E,disabledDate:x,style:{width:136}}),(0,e.jsx)(s.Z,{className:"ms-3",style:{width:88},allowClear:!1,getPopupContainer:function(P){return P.parentNode},transitionName:"",placeholder:"",value:n,disabled:y,onChange:E,disabledTime:T,format:"HH:mm",placement:"topLeft"})]})}O.Z=f},80596:function(G,O,a){a.d(O,{aE:function(){return _},LQ:function(){return j},SF:function(){return U},H5:function(){return p}});var N=a(5618),s=a(79817),e=a(86074);function f(){return(0,e.jsxs)("div",{className:"d-flex flex-column gap-7 gap-lg-10",children:[(0,e.jsxs)(s.Card,{flush:!0,className:"py-4",children:[(0,e.jsx)(s.Form.Item,{name:"subtitle",className:"mb-8 mw-400px",label:"\u526F\u6807\u9898",children:(0,e.jsx)(s.Input,{})}),(0,e.jsx)(s.Form.Item,{className:"mb-3",label:"\u6807\u7B7E",name:"tags",children:(0,e.jsx)(N.ZP,{})}),(0,e.jsx)(s.Form.Item,{name:"source",className:"mb-8 mw-400px",label:"\u6765\u6E90",children:(0,e.jsx)(s.Input,{})})]}),(0,e.jsxs)(s.Card,{flush:!0,className:"py-4",title:"\u66F4\u591A\u529F\u80FD",bodyClassName:"pt-0",children:[(0,e.jsx)(s.Form.Item,{className:"mb-8",name:"xx",children:(0,e.jsx)(s.Checkbox,{value:"1",solid:!0,label:"\u542F\u7528\u8BC4\u8BBA"})}),(0,e.jsx)(s.Form.Item,{className:"mb-8",name:"x2",children:(0,e.jsx)(s.Checkbox,{value:"1",solid:!0,label:"\u5141\u8BB8\u6536\u85CF"})})]}),(0,e.jsx)(s.Card,{flush:!0,className:"py-4",title:"\u5143\u6570\u636E",bodyClassName:"pt-0",children:"123145"})]})}var _=f,n=a(62435),E=a(46027),y=a(5574),x=a.n(y),T={VIDEO:n.lazy(function(){return a.e(6912).then(a.bind(a,16912))}),DOCUMENT:n.lazy(function(){return a.e(2897).then(a.bind(a,2897))}),IMAGE:n.lazy(function(){return a.e(9658).then(a.bind(a,89658))}),TEXT:n.lazy(function(){return a.e(4310).then(a.bind(a,64310))})};function F(u){var r=u.contentType,i=u.onChange,g=(0,n.useState)(u.value||{}),o=x()(g,2),c=o[0],A=o[1];(0,n.useEffect)(function(){A(u.value||{})},[u.value]);var I=(0,n.useCallback)(function(D){i&&i(D)},[]),d=r?T[r]:function(){return(0,e.jsx)("div",{})};return(0,e.jsxs)(s.Card,{flush:!0,className:"py-4",children:[(0,e.jsx)("div",{className:"mb-2 d-flex"}),d&&(0,e.jsx)(d,{value:c,onChange:I})]})}var P=F;function Z(u){var r=u.queueUpload,i=u.contentType,g=(0,n.useCallback)(function(o){var c;(c=r.current)===null||c===void 0||c.browse(o)},[r]);return(0,e.jsxs)("div",{className:"d-flex flex-column gap-7 gap-lg-10",children:[(0,e.jsx)(s.Card,{flush:!0,className:"py-4",children:(0,e.jsx)(s.Form.Item,{name:"title",label:"\u6807\u9898",required:!0,help:"\u6807\u9898\u662F\u5FC5\u9700\u7684",rules:[{required:!0,message:"\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(s.Input,{placeholder:"\u6587\u7AE0\u6807\u9898",className:"mw-400px"})})}),(0,e.jsx)(s.Form.Item,{name:"content",noStyle:!0,help:"\u60A8\u53EF\u4EE5\u9009\u62E9\u9002\u5408\u81EA\u5DF1\u7684\uFF0C\u7F16\u8F91\u65B9\u5F0F",children:(0,e.jsx)(P,{contentType:i})}),(0,e.jsxs)(s.Card,{flush:!0,className:"py-4",title:"\u9644\u4EF6",bodyClassName:"pt-0",children:[(0,e.jsx)(s.Form.Item,{name:"attachments",noStyle:!0,children:(0,e.jsx)(s.Upload.Queue,{ref:r,namespace:"email"})}),(0,e.jsx)(s.Button,{variant:"light-primary",className:"me-3 mt-4",onClick:g,icon:(0,e.jsx)(E.JO,{className:"svg-icon-2",name:"Duotune/com008"}),children:"\u6DFB\u52A0\u9644\u4EF6"})]})]})}var j=Z;function t(){return(0,e.jsx)("div",{className:"d-flex flex-column gap-7 gap-lg-10",children:(0,e.jsxs)(s.Card,{flush:!0,className:"py-4",title:"SEO",bodyClassName:"pt-0",children:[(0,e.jsx)(s.Form.Item,{name:["meta","seo","title"],className:"mb-8",label:"\u6807\u9898",help:"\u8BBE\u7F6E\u5143\u6570\u636E\u6807\u9898, \u5EFA\u8BAE\u5173\u952E\u8BCD\u8981\u7B80\u5355, \u51C6\u786E",children:(0,e.jsx)(s.Input,{className:"mw-400px"})}),(0,e.jsx)(s.Form.Item,{name:["meta","seo","description"],className:"mb-8",label:"\u63CF\u8FF0",help:"\u8BBE\u7F6E\u5143\u6570\u636E\u63CF\u8FF0, \u4EE5\u63D0\u9AD8\u6392\u540D",children:(0,e.jsx)(s.QuillEditor,{className:"h-300px"})}),(0,e.jsx)(s.Form.Item,{name:["meta","seo","keywords"],label:"\u5173\u952E\u5B57",help:(0,e.jsxs)(e.Fragment,{children:["\u8BBE\u7F6E\u680F\u76EE\u76F8\u5173\u7684\u5173\u952E\u5B57\u5217\u8868\u3002\u901A\u8FC7\u5728\u6BCF\u4E2A\u5173\u952E\u5B57\u4E4B\u95F4\u6DFB\u52A0",(0,e.jsx)("code",{children:","}),"\u6765\u5206\u9694\u5173\u952E\u5B57"]}),children:(0,e.jsx)(N.ZP,{className:"form-control"})})]})})}var U=t,B=a(30381),v=a.n(B),l=a(40158);function z(u){var r=u.status,i=u.submitting,g=u.onPublish,o=u.publishedAt,c=u.setPublishedAt,A=(0,n.useState)("publish"),I=x()(A,2),d=I[0],D=I[1],L=(0,n.useCallback)(function(b){D(function(W){return W===b.target.value?W:(["schedule","reschedule"].includes(b.target.value)&&o.isBefore(v()())&&c(v()()),b.target.value)})},[o,c]),S=(0,n.useCallback)(function(b){c(b)},[c]),V=(0,n.useCallback)(function(){g(d)},[g,d]);(0,n.useEffect)(function(){r==="DRAFT"?D("publish"):r==="PUBLISHED"?D("update"):r==="SCHEDULED"&&D("reschedule")},[r]);var C=(0,n.useCallback)(function(b){return b.isBefore(v()())&&!b.isSame(v()(),"days")},[]),K=(0,n.useCallback)(function(b){return{disabledHours:function(){if(!o.isSame(v()(),"days"))return[];for(var R=[],M=0;M<v()().hours();M++)R.push(M);return R},disabledMinutes:function(R){if(!o.isSame(v()(),"days"))return[];if(!b.set("hours",R).isSame(v()(),"hours"))return[];for(var M=[],h=0;h<v()().minutes();h++)M.push(h);return M}}},[o]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"publish-popover-content",children:(0,e.jsxs)(s.Radio.Group,{value:d,onChange:L,children:[r==="PUBLISHED"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(s.Radio,{className:"align-items-start",solid:!0,inputClassName:"me-3",value:"unpublish",children:[(0,e.jsx)("div",{className:"fw-bolder text-gray-800",children:"\u53D6\u6D88\u53D1\u5E03"}),(0,e.jsx)("div",{className:"form-item-help",children:"\u5C06\u6587\u7AE0\u8BBE\u7F6E\u4E3A\u8349\u7A3F\u72B6\u6001"})]}),(0,e.jsx)("div",{className:"my-4"}),(0,e.jsxs)(s.Radio,{className:"align-items-start",solid:!0,inputClassName:"me-3",value:"update",children:[(0,e.jsx)("div",{className:"fw-bolder text-gray-800",children:"\u5DF2\u53D1\u5E03"}),(0,e.jsx)("div",{className:"form-item-help",children:"\u516C\u5F00\u663E\u793A\u8FD9\u7BC7\u6587\u7AE0"})]})]}),r==="SCHEDULED"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(s.Radio,{className:"align-items-start",solid:!0,inputClassName:"me-3",value:"revert_to_draft",children:[(0,e.jsx)("div",{className:"fw-bolder text-gray-800",children:"\u6062\u590D\u4E3A\u8349\u7A3F"}),(0,e.jsx)("div",{className:"form-item-help",children:"\u4E0D\u518D\u53D1\u5E03"})]}),(0,e.jsx)("div",{className:"my-4"}),(0,e.jsxs)(s.Radio,{solid:!0,className:"align-items-start",inputClassName:"me-3",value:"reschedule",children:[(0,e.jsx)("div",{className:"fw-bolder text-gray-800",children:"\u5B9A\u65F6\u53D1\u5E03"}),(0,e.jsx)("div",{className:"my-2",children:(0,e.jsx)(l.Z,{disabledDate:C,disabledTime:K,value:o,onChange:S})}),(0,e.jsx)("div",{className:"form-item-help",children:"\u8BBE\u7F6E\u4E00\u4E2A\u65F6\u95F4, \u5C06\u5728\u672A\u6765\u81EA\u52A8\u53D1\u5E03\u3002"})]})]}),r==="DRAFT"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(s.Radio,{className:"align-items-start",solid:!0,inputClassName:"me-3",value:"publish",children:[(0,e.jsx)("div",{className:"fw-bolder text-gray-800",children:"\u7ACB\u5373\u53D1\u5E03"}),(0,e.jsx)("div",{className:"form-item-help",children:"\u7ACB\u5373\u53D1\u5E03\u6B64\u6587\u7AE0"})]}),(0,e.jsx)("div",{className:"my-4"}),(0,e.jsxs)(s.Radio,{solid:!0,className:"align-items-start",inputClassName:"me-3",value:"schedule",children:[(0,e.jsx)("div",{className:"fw-bolder text-gray-800",children:"\u5B9A\u65F6\u53D1\u5E03"}),(0,e.jsx)("div",{className:"my-2",children:(0,e.jsx)(l.Z,{disabledDate:C,disabledTime:K,value:o,onChange:S})}),(0,e.jsx)("div",{className:"form-item-help",children:"\u8BBE\u7F6E\u4E00\u4E2A\u65F6\u95F4, \u5C06\u5728\u672A\u6765\u81EA\u52A8\u53D1\u5E03\u3002"})]})]})]})}),(0,e.jsx)(s.Separator,{style:"solid"}),(0,e.jsxs)("div",{className:"publish-popover-footer d-flex justify-content-end",children:[(0,e.jsx)(s.Button,{onClick:u.onClose,disabled:i,className:"me-2",variant:"light",children:"\u53D6\u6D88"}),(0,e.jsxs)(s.Button,{loading:i,onClick:V,children:[d==="publish"&&(i?"\u53D1\u5E03\u4E2D...":"\u53D1\u5E03"),d==="schedule"&&(i?"\u5B9A\u65F6\u53D1\u5E03\u4E2D...":"\u5B9A\u65F6\u53D1\u5E03"),d==="update"&&(i?"\u66F4\u65B0\u4E2D...":"\u66F4\u65B0"),d==="unpublish"&&(i?"\u53D6\u6D88\u53D1\u5E03\u4E2D...":"\u53D6\u6D88\u53D1\u5E03"),d==="reschedule"&&(i?"\u66F4\u65B0\u4E2D...":"\u91CD\u8BBE\u53D1\u5E03\u65F6\u95F4"),d==="revert_to_draft"&&(i?"\u53D6\u6D88\u4E2D...":"\u53D6\u6D88\u81EA\u52A8\u53D1\u5E03")]})]})]})}function $(u){var r=u.article,i=u.submitting,g=u.onPublish,o=u.publishedAt,c=u.setPublishedAt,A=u.onCancel,I=(0,n.useState)(!1),d=x()(I,2),D=d[0],L=d[1],S=(0,n.useCallback)(function(){L(!1)},[L]),V=(0,n.useCallback)(function(b){i||L(b)},[i]),C=(r==null?void 0:r.status)||"DRAFT",K=(0,n.useMemo)(function(){return C==="DRAFT"?"\u53D1\u5E03\u8FD9\u7BC7\u6587\u7AE0\u5417\uFF1F":C==="PUBLISHED"?"\u66F4\u65B0\u6587\u7AE0\u72B6\u6001":C==="SCHEDULED"?"\u9884\u8BA1\u5C06\u5728"+v()(r==null?void 0:r.publishedAt).fromNow()+"\u53D1\u5E03":"\u91CD\u65B0\u53D1\u5E03"},[r==null?void 0:r.publishedAt,C]);return(0,n.useEffect)(function(){!D&&A()},[A,D]),(0,e.jsx)(s.Popover,{stopPropagation:!0,visible:D,overlayClassName:"overlay-no-arrow article-publish-dropdown-content",title:K,content:(0,e.jsx)(z,{status:C,submitting:i,onClose:S,onPublish:g,publishedAt:o,setPublishedAt:c}),placement:"top-end",onVisibleChange:V,children:(0,e.jsxs)(s.Button,{className:"pe-2",children:[C==="DRAFT"&&"\u53D1\u5E03",C==="PUBLISHED"&&"\u66F4\u65B0",C==="SCHEDULED"&&"\u66F4\u65B0",(0,e.jsx)(E.JO,{name:"Bootstrap/chevron-down",className:"ms-2 svg-icon-6"})]})})}var p=$},34545:function(){}}]);

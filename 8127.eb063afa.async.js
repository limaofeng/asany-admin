"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8127,3269,267],{51253:function(H,x,e){e.d(x,{GP:function(){return M.Z},Hk:function(){return w},xx:function(){return T.x}});var W=e(74958),M=e(5166),T=e(19260),N=e(68400),u=e.n(N),o=e(62435),B=e(93967),f=e.n(B),r=e(94589),C=e(97857),n=e.n(C),D=e(46027),y=e(77786),b=e(42687),t=e(79817),d=e(5574),c=e.n(d),I=e(96486),s=e(86074),P={aside:{minimize:!1,width:280}},h=o.createContext({state:P,dispatch:function(){}}),A=function(a){return a.AsideToggle="ASIDE_TOGGLE",a.AsideWidth="ASIDE_WIDTH",a}({});function g(a,l){switch(l.type){case"ASIDE_TOGGLE":return a.aside.minimize=!a.aside.minimize,n()({},a);case"ASIDE_WIDTH":return a.aside.width=l.payload,n()({},a);default:throw new Error}}var i=function(l){var m=(0,o.useReducer)(g,(0,I.cloneDeep)(P)),p=c()(m,2),v=p[0],O=p[1];return(0,s.jsx)(h.Provider,{value:{state:v,dispatch:O},children:l.children})},E=function(){return(0,o.useContext)(h)},j=e(65495);function R(a){var l=E(),m=l.dispatch,p=l.state.aside.minimize,v=(0,o.useCallback)(function(){m({type:A.AsideToggle})},[m]);return(0,s.jsx)(t.Button,{style:n()({marginBottom:"1.35rem",zIndex:105},a.style),onClick:v,activeColor:"primary",className:f()("micro-app-aside-toggle","btn-icon bg-body btn-color-gray-700 rounded-2 position-absolute translate-middle bottom-0 shadow-sm d-none d-lg-flex",a.className,{active:p}),children:(0,s.jsx)(D.JO,{name:"Duotune/arr063",className:"svg-icon-2 rotate-180"})})}var z={"drawer drawer-start":{maxWidth:992}};function S(a){var l=a.className,m=a.header,p=a.children,v=a.collapsible,O=v===void 0?!0:v,F=a.width,L=F===void 0?280:F,G=(0,b.$Y)(),J=E(),$=J.dispatch;(0,o.useEffect)(function(){G.aside.width(L+100),$({type:A.AsideWidth,payload:L})},[G.aside,$,L]);var Y=(0,y.CN)(z),V=(0,b.BK)(function(_){return _.aside.drawer});return(0,s.jsxs)("div",{className:f()("app-aside aside",l,Y,{"drawer-on":V}),children:[(0,s.jsx)(j.Z,{children:(0,s.jsx)(M.Z,{header:m,resizeable:!0,className:"app-sidebar",children:p})}),O&&(0,s.jsx)(R,{className:"start-100 end-0"})]})}S.Toggle=R;var U=S,K,Q=r.ZP.div(K||(K=u()([`
  --root-aside-width: `,`;
  --met-aside-width: `,`;
`])),function(a){return a.minimize?"100px":"".concat(a.width,"px")},function(a){return a.minimize?"100px":"".concat(a.width,"px")});function X(a){var l=a.children,m=a.className,p=E(),v=p.state.aside,O=v.minimize,F=v.width,L=(0,o.useCallback)(function(G){G.preventDefault()},[]);return(0,s.jsx)(Q,{minimize:O,width:F,className:f()("micro-app-container page-full-content",m,{"aside-minimize":O}),onContextMenu:L,children:l})}function Z(a){var l=a.children,m=a.className;return(0,s.jsx)(i,{children:(0,s.jsx)(X,{className:m,children:l})})}Z.Sidebar=U;var w=Z},42141:function(H,x,e){e.r(x),e.d(x,{default:function(){return b}});var W=e(5574),M=e.n(W),T=e(97857),N=e.n(T),u=e(62435),o=e(46027),B=e(1861),f=e(51253),r=e(79817),C=e(12708),n=e(86074);function D(t){return t.children&&t.children.length?(0,n.jsx)(r.Menu.SubMenu,{url:"/cms/categories/".concat(t.id,"/articles"),bullet:!0,icon:t.icon,title:t.name,children:(t.children||[]).map(D)},t.id):(0,n.jsx)(r.Menu.Item,{url:"/cms/categories/".concat(t.id,"/articles"),bullet:!0,icon:t.icon,children:t.name},t.id)}function y(t){var d=t.menuKey,c=(0,u.useMemo)(function(){return!t.categories||!t.categories.length?[]:(0,C.G_)(t.categories.map(function(i){return N()({},i)}),{idKey:"id",childrenKey:"children",pidKey:"parent.id",sort:function(E,j){return E.index-j.index}})},[t.categories]),I=(0,u.useState)(c.map(function(i){return i.id})),s=M()(I,2),P=s[0],h=s[1],A=(0,u.useCallback)(function(i){h(i)},[]);(0,u.useEffect)(function(){h(c.map(function(i){return i.id}))},[c.map(function(i){return i.id}).join(",")]);var g=(0,u.useMemo)(function(){switch(d.key){case"category":return d.params.cid;default:return d.key}},[d]);return console.log("selectedKey",g,d),(0,n.jsxs)(f.GP,{children:[(0,n.jsx)("div",{className:"mt-5 px-5 pt-5",children:(0,n.jsx)("h1",{className:"text-gray-800 fw-bold mb-6 mx-5",children:"\u5185\u5BB9\u7BA1\u7406"})}),(0,n.jsx)(B.E,{className:"custom-scrollbar flex-column-fluid px-10 mb-5",options:{scrollbars:{autoHide:"scroll"}},children:(0,n.jsxs)(r.Menu,{className:"cms-menu-sider menu-title-gray-600 menu-icon-gray-400 menu-state-primary menu-state-icon-primary menu-state-bullet-primary menu-arrow-gray-500 fw-bold fs-6 my-5 my-lg-0",openKeys:P,selectedKeys:g?[g]:[],onOpenChange:A,accordion:!1,selectable:"AllMenu",fit:!0,children:[(0,n.jsx)(r.Menu.Section,{children:"\u6211\u7684"}),(0,n.jsx)(r.Menu.Item,{url:"/cms/my/drafts",icon:"Duotune/art008",children:"\u8349\u7A3F\u7BB1"},"draft"),(0,n.jsx)(r.Menu.Item,{url:"/cms/my/published",icon:"Duotune/art006",children:"\u5DF2\u53D1\u5E03"},"published"),(0,n.jsxs)(r.Menu.Section,{className:"d-flex align-items-center",contentClassName:"w-100",sectionClassName:"w-100 d-flex align-items-center justify-content-between",children:[(0,n.jsxs)("span",{className:"menu-section text-muted text-uppercase fs-8 ls-1 flex-row-fluid",children:["\u4FE1\u606F\u680F\u76EE ",t.loading&&" - loading..."]}),(0,n.jsx)(r.Button,{icon:(0,n.jsx)(o.ZP,{style:{marginRight:".2rem"},name:"Duotune/arr087",className:""}),size:"sm",variant:"white",className:"py-1 px-3 me-n4",children:"\u65B0\u589E"})]}),c.map(D),(0,n.jsx)(r.Menu.Section,{children:"\u5176\u4ED6"}),(0,n.jsx)(r.Menu.Item,{icon:"Duotune/elc001",children:"\u5927\u56FE\u7BA1\u7406"},"banner"),(0,n.jsx)(r.Menu.Item,{url:"/cms/authors",icon:"Duotune/cod002",children:"\u4F5C\u8005"},"authors"),(0,n.jsx)(r.Menu.Item,{icon:"Duotune/art002",children:"\u6807\u7B7E"},"tags"),(0,n.jsx)(r.Menu.Section,{children:"\u5168\u5C40\u8BBE\u7F6E"}),(0,n.jsx)(r.Menu.Item,{icon:"Duotune/abs008",children:"\u8BBE\u7F6E"},"settings")]})})]})}var b=y},66172:function(H,x,e){e.r(x);var W=e(19632),M=e.n(W),T=e(5574),N=e.n(T),u=e(62435),o=e(96974),B=e(12845),f=e(51253),r=e(42141),C=e(42646),n=e(86074);function D(){var y=(0,o.TH)(),b=(0,B.useAppModule)("cms"),t=N()(b,1),d=t[0],c=d==null?void 0:d.values.rootCategory,I=(0,C.WP)({fetchPolicy:"cache-and-network",variables:{id:c}}),s=I.data,P=s===void 0?{}:s,h=P.category,A=(0,C.Se)({fetchPolicy:"cache-and-network",variables:{id:c},skip:!c}),g=A.data,i=g===void 0?{categories:[]}:g,E=A.loading,j=(0,u.useMemo)(function(){var S=(0,o.LX)({path:"/cms/my/drafts",end:!1},y.pathname);if(S)return{key:"draft",params:S.params};var U=(0,o.LX)({path:"/cms/my/published",end:!1},y.pathname);if(U)return{key:"published",params:U.params};var K=(0,o.LX)({path:"/cms/categories/:cid/articles",end:!1},y.pathname);return K?{key:"category",params:K.params}:{key:"unknown",params:{}}},[y.pathname]),R=(0,u.useMemo)(function(){switch(j.key){case"draft":return[{title:"\u6211\u7684\u8349\u7A3F",url:"/cms/my/drafts"}];case"published":return[{title:"\u6211\u7684\u6587\u7AE0",url:"/cms/my/published"}];case"category":return[{title:"\u680F\u76EE"}];default:return[]}},[j]),z=(i==null?void 0:i.categories)||[];return(0,n.jsxs)(f.Hk,{className:"micro-app-website",children:[(0,n.jsx)(f.Hk.Sidebar,{children:(0,n.jsx)(r.default,{menuKey:j,loading:E,categories:z})}),(0,n.jsx)(o.j3,{context:{rootCategoryId:h==null?void 0:h.id,categories:z,baseUrl:"/cms",breadcrumbs:[{title:"\u5185\u5BB9\u7BA1\u7406",url:"/cms"}].concat(M()(R))}})]})}x.default=D}}]);

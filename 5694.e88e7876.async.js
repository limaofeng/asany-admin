(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[5694],{92957:function(P,F,s){"use strict";s.d(F,{ry:function(){return e},Tk:function(){return N},RE:function(){return H},x:function(){return J},Bg:function(){return R}});var E=s(11849),A=s(20310),m=s(49704),B=s(64718),k=s(21919),C,i,L,Z,z,I={},a=(0,m.Ps)(C||(C=(0,A.Z)([`
    fragment OrganizationProfile on Organization {
  id
  code
  name
  logo
  description
  email
  url
  location {
    province
    city
    district
    street
  }
}
    `]))),e=(0,m.Ps)(i||(i=(0,A.Z)([`
    query organization($id: ID!) {
  organization(id: $id) {
    ...OrganizationProfile
  }
}
    `,""])),a);function N(o){var n=(0,E.Z)((0,E.Z)({},I),o);return B.a(e,n)}function $(o){var n=_objectSpread(_objectSpread({},I),o);return Apollo.useLazyQuery(e,n)}var S=(0,m.Ps)(L||(L=(0,A.Z)([`
    mutation updateOrganizationProfile($id: ID!, $input: UpdateOrganizationProfileUpdateInput!) {
  updateOrganizationProfile(id: $id, input: $input) {
    ...OrganizationProfile
  }
}
    `,""])),a);function H(o){var n=(0,E.Z)((0,E.Z)({},I),o);return k.D(S,n)}var Y=(0,m.Ps)(Z||(Z=(0,A.Z)([`
    mutation renameOrganizationCode($id: ID!, $code: String!) {
  renameOrganizationCode(id: $id, code: $code) {
    ...OrganizationProfile
  }
}
    `,""])),a);function J(o){var n=(0,E.Z)((0,E.Z)({},I),o);return k.D(Y,n)}var M=(0,m.Ps)(z||(z=(0,A.Z)([`
    query permissionsConnection($filter: PermissionFilter, $page: Int, $pageSize: Int, $orderBy: OrderBy = "createdAt_desc") {
  total: permissionsConnection(pageSize: 1) {
    totalCount
  }
  connection: permissionsConnection(
    filter: $filter
    page: $page
    pageSize: $pageSize
    orderBy: $orderBy
  ) {
    totalPage
    pageSize
    current: currentPage
    total: totalCount
    edges {
      node {
        id
        name
        description
      }
    }
  }
}
    `])));function R(o){var n=(0,E.Z)((0,E.Z)({},I),o);return B.a(M,n)}function w(o){var n=_objectSpread(_objectSpread({},I),o);return Apollo.useLazyQuery(M,n)}},15694:function(P,F,s){"use strict";s.r(F),s.d(F,{default:function(){return o}});var E=s(11849);function A(){return A=Object.assign||function(n){for(var u=1;u<arguments.length;u++){var l=arguments[u];for(var t in l)Object.prototype.hasOwnProperty.call(l,t)&&(n[t]=l[t])}return n},A.apply(this,arguments)}var m=s(3182),B=s(2824),k=s(94043),C=s.n(k),i=s(67294),L=s(27375),Z=s.n(L),z=s(94184),I=s.n(z),a=s(53704),e=s(85893);function N(n){var u=n.data,l=n.visible,t=n.onCancel,x=(0,i.useState)(!0),g=(0,B.Z)(x,2),Q=g[0],d=g[1],y=(0,i.useCallback)(function(r,h){d(h.code!=(u==null?void 0:u.code))},[u]),v=(0,i.useCallback)(function(){},[]);return(0,e.jsxs)(a.u_,{dialogClassName:I()("delete-organization-modal w-450px"),visible:l,onCancel:t,title:"\u786E\u5B9A\u5220\u9664\u7EC4\u7EC7\u5417\uFF1F",footer:!1,children:[(0,e.jsx)(a.bZ,{type:"danger",message:"\u8BF7\u4ED4\u7EC6\u9605\u8BFB\u4EE5\u4E0B\u4E8B\u9879"}),(0,e.jsxs)("div",{className:"inner-body",children:[(0,e.jsxs)("p",{children:["\u60A8\u5373\u5C06\u6C38\u4E45\u5220\u9664\u7EC4\u7EC7: ",(0,e.jsx)("b",{children:u==null?void 0:u.code}),"\uFF0C\u4EE5\u53CA\u4E0E\u7EC4\u7EC7\u5173\u8054\u7684\u6240\u6709\u5185\u5BB9\u3002\u4E00\u65E6\u786E\u8BA4 \u5220\u9664\uFF0C\u6B64\u64CD\u4F5C\u4FBF\u65E0\u6CD5\u64A4\u9500\u548C\u6062\u590D\u3002"]}),(0,e.jsx)(a.Z0,{className:"my-5"}),(0,e.jsxs)(a.l0,{onFinish:v,onValuesChange:y,children:[(0,e.jsx)(a.l0.Item,{className:"mb-5",name:"code",label:"\u8F93\u5165\u7EC4\u7EC7\u4EE3\u7801\u4EE5\u786E\u8BA4\u5220\u9664",children:(0,e.jsx)(a.II,{solid:!0})}),(0,e.jsx)(a.zx,{htmlType:"submit",className:"confirm-delete-account",disabled:Q,variantStyle:"light",variant:"danger",children:"\u5220\u9664\u7EC4\u7EC7"})]})]})]})}var $=N,S=s(92957),H=s(25496);function Y(n){var u=n.data,l=n.visible,t=n.onCancel,x=(0,i.useState)(1),g=(0,B.Z)(x,2),Q=g[0],d=g[1],y=(0,S.x)(),v=(0,B.Z)(y,2),r=v[0],h=v[1].loading,f=(0,i.useCallback)(function(){var p=(0,m.Z)(C().mark(function c(b){return C().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,r({variables:{id:u.id,code:b.code}});case 2:return a.FN.success("\u7EC4\u7EC7\u4EE3\u7801\u4FEE\u6539\u6210\u529F",3e3,{placement:"top-center",progressBar:!0}),j.next=5,(0,H._v)(300);case 5:d(1),t();case 7:case"end":return j.stop()}},c)}));return function(c){return p.apply(this,arguments)}}(),[u,t,r]),D=(0,i.useCallback)((0,m.Z)(C().mark(function p(){return C().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,H._v)(300);case 2:d(2);case 3:case"end":return b.stop()}},p)})),[]),O=(0,i.useCallback)(function(){d(1),t()},[t]);return(0,e.jsx)(a.u_,{dialogClassName:I()("rename-organization-modal w-450px",{"waiting-to-continue":Q==1}),visible:l,onCancel:O,title:Q==1?"\u786E\u5B9A\u4FEE\u6539\u7EC4\u7EC7\u4EE3\u7801\u5417\uFF1F":"\u8F93\u5165\u65B0\u7684\u7EC4\u7EC7\u4EE3\u7801",footer:!1,children:Q==1?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(a.bZ,{type:"danger",message:"\u8BF7\u4ED4\u7EC6\u9605\u8BFB\u4EE5\u4E0B\u6CE8\u610F\u4E8B\u9879, \u4E86\u89E3\u53EF\u80FD\u9020\u6210\u7684\u526F\u4F5C\u7528"}),(0,e.jsxs)("div",{className:"inner-body",children:[(0,e.jsx)("ul",{className:"mb-6 ms-6",children:(0,e.jsx)("li",{children:"\u4FEE\u6539\u7EC4\u7EC7\u4EE3\u7801\u53EF\u80FD\u9700\u8981\u51E0\u5206\u949F\u624D\u80FD\u5B8C\u6210\u3002"})}),(0,e.jsx)(a.zx,{onClick:D,className:"confirm-to-continue",variantStyle:"light",variant:"danger",children:"\u6211\u660E\u767D\u4E86\uFF0C\u7EE7\u7EED\u4FEE\u6539"})]})]}):(0,e.jsxs)(a.l0,{onFinish:f,initialValues:u,children:[(0,e.jsxs)("div",{className:"mb-5",children:[(0,e.jsx)(a.l0.Item,{name:"code",rules:[{required:!0,message:"\u7EC4\u7EC7\u4EE3\u7801\u4E0D\u80FD\u4E3A\u7A7A"},{min:6,message:"\u81F3\u5C11\u5F97\u5305\u542B6\u4E2A\u5B57\u7B26"},{pattern:/^[a-zA-Z]\w{5,19}$/,message:"\u7EC4\u7EC7\u4EE3\u7801\u53EA\u80FD\u4E3A\u5B57\u6BCD\u6216\u8005\u6570\u5B57\uFF0C\u800C\u4E14\u5FC5\u987B\u4EE5\u5B57\u6BCD\u5F00\u5934"}],help:"\u7EC4\u7EC7\u4EE3\u7801\u53EA\u80FD\u4E3A\u5B57\u6BCD\u6216\u8005\u6570\u5B57\uFF0C\u800C\u4E14\u5FC5\u987B\u4EE5\u5B57\u6BCD\u5F00\u5934",children:(0,e.jsx)(a.II,{})}),(0,e.jsx)("p",{className:"text-small mt-2",children:"\u8F93\u5165\u4E00\u4E2A\u65B0\u7684\u7EC4\u7EC7\u4EE3\u7801"})]}),(0,e.jsx)(a.zx,{htmlType:"submit",loading:h,className:"change-name-save",children:"\u4FEE\u6539\u7EC4\u7EC7\u4EE3\u7801"})]})})}var J=Y,M=s(75468);function R(n){var u=n.data,l=(0,i.useState)(!1),t=(0,B.Z)(l,2),x=t[0],g=t[1],Q=(0,i.useState)(!1),d=(0,B.Z)(Q,2),y=d[0],v=d[1],r=(0,i.useCallback)(function(){g(!0)},[]),h=(0,i.useCallback)(function(){g(!1)},[]),f=(0,i.useCallback)(function(){v(!0)},[]),D=(0,i.useCallback)(function(){v(!1)},[]);return(0,e.jsxs)(a.Zb,{className:"mb-5 mb-xl-10",children:[(0,e.jsx)(a.Zb.Header,{children:(0,e.jsx)(a.Zb.Title,{className:"text-danger",children:"\u5371\u9669\u533A\u57DF"})}),(0,e.jsx)(a.Zb.Body,{children:(0,e.jsxs)("div",{className:"w-800px danger-zone rounded border border-danger",children:[(0,e.jsxs)("div",{className:"p-5 border-bottom border-secondary d-flex align-items-center",children:[(0,e.jsxs)("div",{className:"flex-row-fluid",children:[(0,e.jsx)("div",{className:"fw-bolder",children:"\u4FEE\u6539\u7EC4\u7EC7\u4EE3\u7801"}),(0,e.jsx)("span",{className:"text-small",children:"\u4FEE\u6539\u7EC4\u7EC7\u4EE3\u7801\u53EF\u80FD\u4F1A\u4EA7\u751F\u610F\u60F3\u4E0D\u5230\u7684\u526F\u4F5C\u7528"})]}),(0,e.jsx)(a.zx,{onClick:r,type:"solid",variant:"danger",children:"\u4FEE\u6539\u7EC4\u7EC7\u4EE3\u7801"}),(0,e.jsx)(J,{data:u,visible:x,onCancel:h})]}),(0,e.jsxs)("div",{className:"p-5 border-bottom border-secondary d-flex align-items-center",children:[(0,e.jsxs)("div",{className:"flex-row-fluid",children:[(0,e.jsx)("div",{className:"fw-bolder",children:"\u5220\u9664\u7EC4\u7EC7"}),(0,e.jsx)("span",{className:"text-small",children:"\u5E10\u6237\u5220\u9664\u540E\uFF0C\u5C06\u65E0\u6CD5\u6062\u590D\u3002\u8BF7\u8C28\u614E\u64CD\u4F5C"})]}),(0,e.jsx)(a.zx,{onClick:f,type:"solid",variant:"danger",children:"\u5220\u9664\u7EC4\u7EC7"}),(0,e.jsx)($,{data:u,visible:y,onCancel:D})]})]})})]})}function w(n){var u=n.match,l=a.l0.useForm(),t=(0,S.Tk)({variables:{id:u.params.id}}),x=t.data,g=t.loading,Q=(0,S.RE)({refetchQueries:[{query:S.ry,variables:{id:u.params.id}}]}),d=(0,B.Z)(Q,2),y=d[0],v=d[1].loading,r=x==null?void 0:x.organization;(0,i.useEffect)(function(){!r||l.setFieldsValue(r)},[r,l]);var h=(0,i.useCallback)((0,m.Z)(C().mark(function f(){var D,O;return C().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,l.getFieldsValue();case 2:return D=c.sent,O=A({},D),c.next=6,y({variables:{id:r==null?void 0:r.id,input:(0,E.Z)({},O)}});case 6:a.FN.success("\u8D44\u6599\u66F4\u65B0\u6210\u529F",3e3,{placement:"bottom-start",progressBar:!0});case 7:case"end":return c.stop()}},f)})),[l,r,y]);return(0,e.jsxs)(M.v,{className:"page-organization-settings-profile",header:{title:"\u901A\u7528\u8BBE\u7F6E"},footer:!1,children:[(0,e.jsxs)(a.Zb,{className:"mb-5 mb-xl-10",children:[(0,e.jsx)(a.Zb.Header,{children:(0,e.jsx)(a.Zb.Title,{children:"\u901A\u7528\u8BBE\u7F6E"})}),(0,e.jsx)(a.Zb.Body,{children:(0,e.jsxs)(a.bH,{overlayClassName:"bg-white bg-opacity-25",loading:g,children:[(0,e.jsxs)(a.l0,{form:l,className:"mw-800px row d-flex flex-shrink-0 flex-column-reverse flex-md-row",children:[(0,e.jsx)("div",{className:"mw-500px col-12 col-md-8",children:(0,e.jsxs)("div",{className:"mw-400px",children:[(0,e.jsx)(a.l0.Item,{className:"mb-5",name:"name",label:"\u663E\u793A\u540D\u79F0",children:(0,e.jsx)(a.II,{solid:!0})}),(0,e.jsx)(a.l0.Item,{className:"my-5",name:"email",label:"\u90AE\u7BB1",help:"\u7EC4\u7EC7\u8054\u7CFB\u90AE\u7BB1",children:(0,e.jsx)(a.II,{solid:!0})}),(0,e.jsx)(a.l0.Item,{className:"my-5",name:"description",label:"\u63CF\u8FF0",help:"\u8BF7\u7528\u5C11\u4E8E250\u5B57\u7B26\u63CF\u8FF0\u7EC4\u7EC7\u4FE1\u606F",children:(0,e.jsx)(a.II.TextArea,{solid:!0,autoSize:{minRows:4,maxRows:8},showCount:!0,maxLength:250})}),(0,e.jsx)(a.l0.Item,{className:"my-5",name:"url",label:"URL",help:"\u7EC4\u7EC7\u7F51\u5740",children:(0,e.jsx)(a.II,{solid:!0})}),(0,e.jsx)(a.l0.Item,{className:"my-5",name:"location",label:"\u6240\u5728\u5730\u533A",children:(0,e.jsx)(a.H6,{ends:function(D){var O=D.path.split("/").filter(function(p){return!!p}).length;return D.type=="city"||O==2},resultType:"object",solid:!0,placeholder:"\u9009\u62E9\u7EC4\u7EC7\u6240\u5728\u7684\u5730\u533A"})})]})}),(0,e.jsx)("div",{className:"col-12 col-md-4",children:(0,e.jsx)("div",{className:"row",children:(0,e.jsx)(a.l0.Item,{className:"mb-5",name:"logo",label:"\u7EC4\u7EC7\u6807\u5FD7",help:"\u5141\u8BB8\u7684\u6587\u4EF6\u7C7B\u578B:png, jpg, jpeg",children:(0,e.jsx)(a.gq.Image,{width:125,height:125,space:"7VE4SSrk",crop:{height:300,zoomable:!1,aspectRatio:1},backgroundImage:Z()})})})})]}),(0,e.jsx)(a.zx,{loading:v,onClick:h,children:"\u66F4\u65B0\u8D44\u6599"})]})})]}),(0,e.jsx)(R,{data:r})]})}var o=w},27375:function(P){P.exports="data:image/png;base64,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"}}]);

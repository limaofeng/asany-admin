(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[4188],{50480:function(z,D,s){"use strict";var d=s(28865),p=s(51248),u=s(85893);function c(x){var t=x.layout,g=x.children,m=x.onLayout;return(0,u.jsxs)("div",{className:"d-flex flex-wrap my-1",children:[t&&(0,u.jsxs)("ul",{className:"nav nav-pills me-6 mb-2 mb-sm-0",children:[(0,u.jsx)("li",{className:"nav-item m-0 me-3",children:(0,u.jsx)(p.Z,{variant:"light",color:"muted",active:t=="card",activeColor:"primary",onClick:m==null?void 0:m.bind(null,"card"),icon:(0,u.jsx)(d.ZP,{name:"Duotune/gen024",className:"svg-icon-1"})})}),(0,u.jsx)("li",{className:"nav-item m-0",children:(0,u.jsx)(p.Z,{variant:"light",color:"muted",active:t=="table",onClick:m==null?void 0:m.bind(null,"table"),activeColor:"primary",className:"me-3",icon:(0,u.jsx)(d.ZP,{name:"Duotune/abs015",className:"svg-icon-1"})})})]}),g]})}D.Z=c},81303:function(z,D,s){"use strict";s.d(D,{v7:function(){return v},_$:function(){return a},F6:function(){return I}});var d=s(11849),p=s(20310),u=s(49704),c=s(64718),x=s(38460),t,g,m,M,f={},E=(0,u.Ps)(t||(t=(0,p.Z)([`
    query websites {
  websites {
    id
    name
    description
  }
}
    `])));function I(i){var l=(0,d.Z)((0,d.Z)({},f),i);return c.a(E,l)}function H(i){var l=_objectSpread(_objectSpread({},f),i);return Apollo.useLazyQuery(E,l)}var Z=(0,u.Ps)(g||(g=(0,p.Z)([`
    query website($id: ID!) {
  website(id: $id) {
    id
    name
    description
    channel {
      id
    }
    application {
      id
    }
  }
}
    `])));function a(i){var l=(0,d.Z)((0,d.Z)({},f),i);return c.a(Z,l)}function e(i){var l=_objectSpread(_objectSpread({},f),i);return Apollo.useLazyQuery(Z,l)}var S=(0,u.Ps)(m||(m=(0,p.Z)([`
    mutation createWebsite($input: WebsiteCreateInput!) {
  createWebsite(input: $input) {
    id
    name
  }
}
    `])));function J(i){var l=_objectSpread(_objectSpread({},f),i);return Apollo.useMutation(S,l)}var F=(0,u.Ps)(M||(M=(0,p.Z)([`
    query websiteArticleCategories($id: ID!) {
  categories: articleCategories(filter: {parent: {id: $id, subColumns: true}}) {
    id
    icon
    name
    fullName
    path
    index
    level
    image
    storeTemplate {
      id
    }
    parent {
      id
    }
  }
}
    `])));function _(i){var l=_objectSpread(_objectSpread({},f),i);return Apollo.useQuery(F,l)}function v(i){var l=(0,d.Z)((0,d.Z)({},f),i);return x.t(F,l)}},64188:function(z,D,s){"use strict";s.r(D);var d=s(86582),p=s(93224),u=s(2824),c=s(39428),x=s(3182),t=s(67294),g=s(28865),m=s(84059),M=s(80129),f=s.n(M),E=s(73727),I=s(81303),H=s(50480),Z=s(18071),a=s(17818),e=s(85893),S=["q"];function J(_){var v=_.data,i=_.history,l=_.onDelete,W=_.onShowQRCode,A=(0,t.useCallback)(function(){var C=(0,x.Z)((0,c.Z)().mark(function L(B){var T,O;return(0,c.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return T="\u786E\u5B9A\u5220\u9664\u6D3B\u52A8 \u201C".concat(B.name,"\u201D \u5417\uFF1F"),h.next=3,a.u_.confirm({title:"\u786E\u5B9A\u5220\u9664",content:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{className:"tip-confirm",children:T}),(0,e.jsx)("p",{children:"\u5220\u9664\u7684\u64CD\u4F5C\u4E0D\u53EF\u9006,\u8BF7\u8C28\u614E\u64CD\u4F5C"})]}),okClassName:"btn-danger",okText:"\u5220\u9664"});case 3:if(O=h.sent,O.isConfirmed){h.next=6;break}return h.abrupt("return");case 6:return h.next=8,l(B.id);case 8:a.FN.success("\u6D3B\u52A8 \u201C".concat(B.name,"\u201D \u5220\u9664\u6210\u529F"),2e3,{placement:"bottom-start",progressBar:!0});case 9:case"end":return h.stop()}},L)}));return function(L){return C.apply(this,arguments)}}(),[l]),w=(0,t.useCallback)(function(C){C.key=="view"?i.push("/website/landing/pages/".concat(v.id)):C.key=="delete"?A(v):C.key=="preview"&&W(location.protocol+"http://wap.asany.cn/lps/"+v.id)},[v,A,i,W]);return(0,e.jsx)(a.Lt,{overlay:(0,e.jsxs)(a.v2,{onClick:w,className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold fs-8 w-125px py-4",children:[(0,e.jsx)(a.v2.Item,{className:"px-3",children:"\u7F16\u8F91"},"view"),(0,e.jsx)(a.v2.Separator,{}),(0,e.jsx)(a.v2.Item,{className:"px-3",children:"\u9884\u89C8"},"preview"),(0,e.jsx)(a.v2.Separator,{}),(0,e.jsx)(a.v2.Item,{className:"px-3 actions-delete",children:"\u5220\u9664"},"delete")]}),placement:"bottomRight",children:(0,e.jsxs)(a.zx,{className:"fs-8",variant:"light",activeColor:"light-primary",children:["\u64CD\u4F5C",(0,e.jsx)(g.JO,{className:"svg-icon-5 ms-2 me-n1",name:"Duotune/arr072"})]})})}function F(_){var v,i=_.history,l=_.location,W=(0,t.useState)(),A=(0,u.Z)(W,2),w=A[0],C=A[1],L=(0,t.useCallback)(function(n){C(n)},[]),B=(0,t.useCallback)(function(){C(void 0)},[]),T=(0,t.useState)("card"),O=(0,u.Z)(T,2),R=O[0],h=O[1],P=(0,t.useMemo)(function(){var n=_.location.query,r=n.q,o=(0,p.Z)(n,S);return r&&(o.filter={name_contains:r}),o},[_.location]),G=(0,t.useMemo)(function(){if(!P.orderBy)return{order:"descend",field:"createdAt"};var n=P.orderBy.split("_"),r=(0,u.Z)(n,2),o=r[0],b=r[1];return{order:b=="desc"?"descend":"ascend",field:o}},[P.orderBy]),K=(0,I.F6)({fetchPolicy:"cache-and-network",variables:P}),j=K.data,k=K.loading,N=K.previousData,V=(0,t.useMemo)(function(){return k?(N==null?void 0:N.websites.length)||0:(j==null?void 0:j.websites.length)||0},[j==null?void 0:j.websites.length,k,N==null?void 0:N.websites.length]),X=(j==null?void 0:j.websites)||[],q=(0,t.useCallback)(function(n){i.replace(l.pathname+"?"+f().stringify({q:n}))},[i,l.pathname]),Q=(0,t.useCallback)((0,x.Z)((0,c.Z)().mark(function n(){var r,o,b,U=arguments;return(0,c.Z)().wrap(function($){for(;;)switch($.prev=$.next){case 0:for(r=U.length,o=new Array(r),b=0;b<r;b++)o[b]=U[b];console.log(o);case 2:case"end":return $.stop()}},n)})),[]),Y=(0,t.useCallback)(function(n){return(0,x.Z)((0,c.Z)().mark(function r(){var o,b;return(0,c.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return o="\u786E\u5B9A\u5220\u9664\u9009\u4E2D\u7684, \u5171 ".concat(n.length," \u4E2A\u6D3B\u52A8\u5417\uFF1F"),y.next=3,a.u_.confirm({title:"\u786E\u5B9A\u5220\u9664",content:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{className:"tip-confirm",children:o}),(0,e.jsx)("p",{children:"\u5220\u9664\u7684\u64CD\u4F5C\u4E0D\u53EF\u9006,\u8BF7\u8C28\u614E\u64CD\u4F5C"})]}),okClassName:"btn-danger",okText:"\u5220\u9664"});case 3:if(b=y.sent,b.isConfirmed){y.next=6;break}return y.abrupt("return");case 6:return y.next=8,Q.apply(void 0,(0,d.Z)(n));case 8:a.FN.success("\u6D3B\u52A8\u6279\u91CF\u5220\u9664\u6210\u529F",2e3,{placement:"bottom-start",progressBar:!0});case 9:case"end":return y.stop()}},r)}))},[Q]),ee=(0,t.useMemo)(function(){return function(n){return(0,e.jsx)("div",{children:(0,e.jsx)(a.zx,{color:"success",onClick:Y(n),variant:!1,children:"\u6279\u91CF\u5220\u9664"})})}},[Y]);return console.log("layout",R),(0,e.jsxs)(Z.vs,{header:{},loading:k,footer:!1,children:[(0,e.jsxs)("div",{className:"d-flex flex-wrap flex-stack pb-7",children:[(0,e.jsx)("div",{className:"d-flex flex-wrap align-items-center",children:(0,e.jsx)(a.II.Search,{onSearch:q,defaultValue:(v=P.filter)===null||v===void 0?void 0:v.name_contains,placeholder:"\u641C\u7D22",className:"border-body bg-body w-250px"})}),(0,e.jsx)(H.Z,{onLayout:h,layout:R,children:(0,e.jsx)("div",{className:"d-flex my-0"})})]}),!V&&!k?(0,e.jsx)(a.Zb,{className:"mb-5 mb-xl-10",children:(0,e.jsx)(a.HY,{title:"\u8FD8\u6CA1\u6709\u6D3B\u52A8",description:"\u9A6C\u4E0A\u6DFB\u52A0\u4E00\u4E2A\u6D3B\u52A8\u8BD5\u8BD5",image:"/assets/media/illustrations/sigma-1/4.png",children:(0,e.jsx)(a.zx,{as:E.Link,variant:"primary",to:"/website/landing/pages/new",children:"\u65B0\u5EFA\u6D3B\u52A8"})})}):(0,e.jsxs)(e.Fragment,{children:[R=="card"?(0,e.jsx)(a.X2,{gutter:{default:6,xl:9},children:X.map(function(n){return(0,e.jsx)(a.JX,{md:6,xl:4,children:(0,e.jsxs)(a.Zb,{as:E.Link,to:"/websites/".concat(n.id),className:"border-hover-primary",children:[(0,e.jsxs)(a.Zb.Header,{border:!1,className:"pt-9",children:[(0,e.jsx)(a.Zb.Title,{className:"m-0",children:(0,e.jsx)(a.mN.Avatar,{size:50,labelClassName:"fs-2",className:"bg-light",src:"/assets/media/svg/brand-logos/plurk.svg",gap:3})}),(0,e.jsx)(a.Zb.Toolbar,{children:(0,e.jsx)(a.Ct,{lightStyle:"primary",className:"fw-bolder me-auto px-4 py-3",children:"In Progress"})})]}),(0,e.jsxs)(a.Zb.Body,{className:"p-9",children:[(0,e.jsx)("div",{className:"fs-3 fw-bolder text-dark",children:n.name}),(0,e.jsx)("p",{className:"text-gray-400 fw-bold fs-5 mt-1 mb-7",children:n.description}),(0,e.jsxs)("div",{className:"d-flex flex-wrap mb-5",children:[(0,e.jsxs)("div",{className:"border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 me-7 mb-3",children:[(0,e.jsx)("div",{className:"fs-6 text-gray-800 fw-bolder",children:"Sep 22, 2021"}),(0,e.jsx)("div",{className:"fw-bold text-gray-400",children:"Due Date"})]}),(0,e.jsxs)("div",{className:"border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 mb-3",children:[(0,e.jsx)("div",{className:"fs-6 text-gray-800 fw-bolder",children:"$284,900.00"}),(0,e.jsx)("div",{className:"fw-bold text-gray-400",children:"Budget"})]})]}),(0,e.jsx)(a.u,{title:"This project 50% completed",children:(0,e.jsx)("div",{className:"h-4px w-100 bg-light mb-5",children:(0,e.jsx)(a.Ex,{percent:50})})}),(0,e.jsxs)(a.mN.Group,{maxCount:5,children:[(0,e.jsx)(a.mN.Avatar,{labelClassName:"fs-2",size:35,shape:"circle",src:"/assets/media/avatars/150-1.jpg"}),(0,e.jsx)(a.mN.Avatar,{labelClassName:"fs-2",size:35,shape:"circle",src:"/assets/media/avatars/150-2.jpg"}),(0,e.jsx)(a.mN.Avatar,{labelClassName:"fs-2",size:35,shape:"circle",alt:"Susan Redwood"})]})]})]})},n.id)})}):(0,e.jsx)(a.Zb,{className:"mb-5 mb-xl-10",children:(0,e.jsx)(a.Zb.Body,{children:(0,e.jsx)(a.iA,{hover:!0,rowKey:"id",noRowsRenderer:function(){return(0,e.jsx)(a.HY,{description:"\u5217\u8868\u6570\u636E\u4E3A\u7A7A",image:"/assets/media/illustrations/sigma-1/5.png"})},rowSelection:{type:"checkbox",renderTitle:function(r){return(0,e.jsxs)(e.Fragment,{children:["\u5DF2\u9009\u4E2D",(0,e.jsx)("span",{className:"mx-2",children:r}),"\u4E2A\u6D3B\u52A8"]})},toolbar:ee},columns:[{key:"name",title:"\u540D\u79F0",sorter:!0,sortOrder:G.field=="name"?G.order:void 0,render:function(r,o){return(0,e.jsx)("div",{className:"ps-2",children:(0,e.jsx)(E.Link,{className:"text-gray-700",to:"/website/landing/pages/".concat(o.id),children:r})})}},{key:"stores",title:"\u95E8\u5E97",render:function(r){return(0,e.jsxs)("div",{className:"d-flex tw-truncate overflow-hidden pe-2",children:[(0,e.jsx)("span",{className:"tw-text-ellipsis tw-truncate overflow-hidden",children:r.map(function(o){return o.name}).join(",")}),(0,e.jsxs)("span",{children:["\u5171 ",r.length," \u5BB6\u95E8\u5E97"]})]})}},{key:"poster",title:"\u6D77\u62A5",width:80,render:function(r){return r!=null&&r.background?(0,e.jsx)("div",{className:"d-flex w-30px justify-content-center",children:(0,e.jsx)("img",{src:"https://api.asany.cn/graphql"+"/preview/".concat(r.background.id),className:"h-30px w-20px"})}):(0,e.jsx)(g.JO,{className:"svg-icon-2qx text-muted",name:"Bootstrap/file-image"})}},{key:"actions",title:"\u64CD\u4F5C",width:100,render:function(r,o){return(0,e.jsx)(J,{onDelete:Q,onShowQRCode:L,history:_.history,data:o})}}],dataSource:X})})}),(0,e.jsxs)(a.u_,{title:"\u9884\u89C8\u4E8C\u7EF4\u7801",dialogClassName:"w-250px",onCancel:B,visible:!!w,children:[(0,e.jsx)("div",{className:"d-inline-block",children:!!w&&(0,e.jsx)(m.Qd,{size:200,value:w})}),(0,e.jsx)("span",{children:"\u4F7F\u7528\u624B\u673A\u626B\u7801\u4E8C\u7EF4\u7801\u9884\u89C8"})]})]})]})}D.default=F}}]);

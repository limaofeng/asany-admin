(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[3279,5539],{3279:function(k,P,s){"use strict";s.r(P);var w=s(2824),m=s(67294),p=s(28865),N=s(73727),T=s(5539),f=s(64458),b=s(47594),l=s(11974),E=s(75468),a=s(85893);function O(W){var L=W.match.params.id,B=(0,m.useRef)({}),y=(0,m.useState)(!1),C=(0,w.Z)(y,2),g=C[0],n=C[1],e=(0,m.useState)(!1),d=(0,w.Z)(e,2),M=d[0],R=d[1],U=(0,f.vO)({variables:{id:L}}),r=U.data,u=U.loading,j=(0,m.useCallback)(function(){n(!0)},[]),c=(0,m.useCallback)(function(){n(!1)},[]),h=r||{channel:B.current},i=h.channel;return u||(B.current=i),(0,a.jsxs)(E.v,{header:{title:"\u65B0\u95FB\u52A8\u6001"},children:[(0,a.jsxs)(E.w,{children:[(0,a.jsx)(E.w.Title,{children:(0,a.jsx)("span",{className:"text-gray-800 text-hover-primary fs-2 fw-bolder me-3",children:i==null?void 0:i.name})}),(0,a.jsx)(E.w.Description,{children:i==null?void 0:i.description}),(0,a.jsx)(E.w.Cover,{children:(0,a.jsx)("img",{className:"mw-50px mw-lg-75px",src:"/assets/media/svg/brand-logos/volicity-9.svg",alt:"image"})}),(0,a.jsxs)(E.w.Toolbar,{children:[(0,a.jsx)(l.zx,{as:N.Link,className:"me-3",size:"sm",variantStyle:"background",variant:"light",activeTextColor:"primary",to:"/cms/articles/new",children:"\u65B0\u5EFA\u4FE1\u606F"}),(0,a.jsx)(l.zx,{onClick:j,className:"me-3",size:"sm",children:"\u6DFB\u52A0\u5B50\u680F\u76EE"}),(0,a.jsx)(b.e,{data:{parent:i==null?void 0:i.id},visible:g,onCancel:c}),(0,a.jsx)("div",{className:"me-0",children:(0,a.jsx)(l.Lt,{overlay:(0,a.jsx)(l.v2,{className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold w-125px py-4",children:(0,a.jsx)(l.v2.Item,{className:"px-3 actions-delete",children:"\u5220\u9664"},"delete")}),placement:"bottomRight",onVisibleChange:R,visible:M,children:(0,a.jsx)(l.zx,{size:"sm",variantStyle:"background",variant:"light",activeTextColor:"primary",icon:(0,a.jsx)("i",{className:"bi bi-three-dots fs-3"})})})})]}),(0,a.jsxs)(E.w.Body,{children:[(0,a.jsxs)("div",{className:"d-flex flex-wrap",children:[(0,a.jsx)(l.kN,{className:"min-w-125px py-3 px-4 me-6 mb-3",label:"Due Date",children:(0,a.jsx)("div",{className:"d-flex align-items-center",children:(0,a.jsx)("div",{className:"fs-4 fw-bolder",children:"29 Jan, 2021"})})}),(0,a.jsxs)(l.kN,{className:"min-w-125px py-3 px-4 me-6 mb-3",label:"Open Tasks",children:[(0,a.jsx)(p.ZP,{name:"Duotune/arr065",className:"svg-icon-3 svg-icon-danger me-2"}),(0,a.jsx)(l.I0,{className:"fs-4 fw-bolder",value:75,children:"100"})]}),(0,a.jsxs)(l.kN,{className:"min-w-125px py-3 px-4 me-6 mb-3",label:"Budget Spent",children:[(0,a.jsx)(p.ZP,{name:"Duotune/arr066",className:"svg-icon-3 svg-icon-success me-2"}),(0,a.jsx)(l.I0,{className:"fs-4 fw-bolder",value:15e3,prefix:"$",children:"0"})]})]}),(0,a.jsx)(l.n5.Users,{size:8,users:[{avatar:"",name:"Alan Warden"},{avatar:"/assets/media/avatars/150-12.jpg",name:"Michael Eberon"},{avatar:"/assets/media/avatars/150-13.jpg",name:"Michelle Swanston"},{avatar:"/assets/media/avatars/150-5.jpg",name:"Francis Mitcham"},{avatar:"",name:"Susan Redwood"},{avatar:"/assets/media/avatars/150-3.jpg",name:"Melody Macy"},{avatar:"",name:"Perry Matthew"},{avatar:"/assets/media/avatars/150-7.jpg",name:"Barry Walter"},{avatar:"",name:"Peter"}]})]}),(0,a.jsx)(E.w.Footer,{className:"h-45px",children:(0,a.jsxs)(l.JL,{selectedKey:"settings",className:"fs-5 fw-bolder",children:[(0,a.jsx)(l.JL.Item,{children:"\u6587\u7AE0"},"article"),(0,a.jsx)(l.JL.Item,{children:"\u8BBE\u7F6E"},"settings")]})})]}),(0,a.jsx)(T.default,{query:{filter:{channel_startsWith:L}},style:"small"})]})}P.default=O},47594:function(k,P,s){"use strict";s.d(P,{e:function(){return L}});var w=s(3182),m=s(2824),p=s(86582),N=s(94043),T=s.n(N),f=s(67294),b=s(64458),l=s(11974),E=s(25496),a=s(85893),O=l.gq.UploadAvatar;function W(B){var y=B.form,C=(0,b.$C)(),g=C.data,n=g===void 0?{channels:[]}:g,e=C.loading,d=n.channels;return console.log(d,e),(0,a.jsxs)(l.l0,{form:y,children:[(0,a.jsxs)("div",{className:"row mb-10",children:[(0,a.jsxs)("div",{className:"col-md-8",children:[(0,a.jsx)(l.l0.Item,{name:"parent",className:"d-flex flex-column mb-7",label:"\u6240\u5C5E\u680F\u76EE",children:(0,a.jsx)(l.ub,{solid:!0,options:[{value:"root",label:"\u6839\u680F\u76EE"}].concat((0,p.Z)(d.map(function(M){return{value:M.id,label:M.fullName}})))})}),(0,a.jsx)(l.l0.Item,{name:"name",className:"d-flex flex-column mb-7",label:"\u540D\u79F0",rules:[{required:!0,message:"\b\b\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,a.jsx)(l.II,{solid:!0})}),(0,a.jsx)(l.l0.Item,{name:"slug",className:"d-flex flex-column mb-7",label:"\u7F16\u7801",children:(0,a.jsx)(l.II,{solid:!0})})]}),(0,a.jsx)("div",{className:"col-md-4",children:(0,a.jsx)(l.l0.Item,{name:"cover",className:"d-flex flex-column mb-7",label:"\u680F\u76EE\u5C01\u9762",children:(0,a.jsx)(O,{width:180,height:180})})})]}),(0,a.jsx)(l.l0.Item,{name:"description",className:"d-flex flex-column mb-7",label:"\u63CF\u8FF0",required:!0,children:(0,a.jsx)(l.II.TextArea,{solid:!0})})]})}var L=function(y){var C=y.data,g=y.visible,n=y.onCancel,e=y.onSuccess,d=l.l0.useForm(),M=(0,f.useState)(!1),R=(0,m.Z)(M,2),U=R[0],r=R[1],u=(0,b.OX)({fetchPolicy:"no-cache"}),j=(0,m.Z)(u,1),c=j[0],h=(0,f.useCallback)((0,w.Z)(T().mark(function i(){var x;return T().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r(!0),t.prev=1,t.next=4,d.validateFields();case 4:return x=t.sent,t.next=7,(0,E.gw)(c({variables:{input:x}}),350);case 7:r(!1),n&&n(new Event("look",{bubbles:!0,cancelable:!1})),l.u_.success({title:"\u4FDD\u5B58\u6210\u529F",content:"\u680F\u76EE <strong>".concat(x.name,"</strong> \u4FDD\u5B58\u6210\u529F"),timer:3e3,timerProgressBar:!0}),e&&e(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),r(!1);case 16:case"end":return t.stop()}},i,null,[[1,13]])})),[c,e,n,d]);return(0,f.useEffect)(function(){!C||d.setFieldsValue(C)},[C,d]),(0,a.jsx)(l.u_,{centered:!0,maskClosable:!1,visible:g,onCancel:n,onOk:h,confirmLoading:U,dialogClassName:"mw-650px",title:"\u521B\u5EFA\u680F\u76EE",children:(0,a.jsx)(W,{form:d})})}},5539:function(k,P,s){"use strict";s.r(P);var w=s(32059),m=s(2824),p=s(11849),N=s(3182),T=s(94043),f=s.n(T),b=s(67294),l=s(19755),E=s.n(l),a=s(28865),O=s(73727),W=s(51615),L=s(94184),B=s.n(L),y=s(30381),C=s.n(y),g=s(64458),n=s(11974),e=s(85893);function d(r,u){var j=(0,b.useCallback)((0,N.Z)(f().mark(function c(){var h,i,x;return f().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return h=r.width,i=h===void 0?550:h,t.next=3,n.u_.confirm((0,p.Z)((0,p.Z)({},r),{},{width:i,okText:"\u5220 \u9664",cancelClassName:"btn btn-secondary btn-sm",okClassName:"btn btn-danger btn-sm"}));case 3:if(x=t.sent,!x.isConfirmed){t.next=7;break}return t.next=7,u();case 7:case"end":return t.stop()}},c)})),[r.title,r.content]);return[j]}window._MoreshowOrhide=function(r){return E()(r).parent().siblings().show(),E()(r).parent().remove(),!1};function M(r){var u=r.selectedRows,j=r.refetch,c=(0,g.nT)(),h=(0,m.Z)(c,1),i=h[0],x=d({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9".concat(u.length>1?"\u201C<strong>".concat(u.length,"</strong>\u201C"):"","\u7BC7\u6587\u7AE0\u5417\uFF1F"),content:u.length>1?'\u60A8\u5373\u5C06\u5220\u9664\u4EE5\u4E0B\u6587\u7AE0:<ul className="py-2">'.concat(u.map(function(I,K){return"<li ".concat(K>=4?'style="display: none !important;"':"",' className="d-flex align-items-center text-gray-800 mb-1 fs-6"><span className="bullet bullet-dot me-2"></span><strong>').concat(I.title,"</strong></li>")}).join(""),`
              <li `).concat(u.length<=4?'style="display: none !important;"':"",' className="d-flex align-items-center text-gray-800 fs-6"><a href="javascript:void(0)" onClick="_MoreshowOrhide(this)">\u66F4\u591A</a></li></ul> '):"\u60A8\u5373\u5C06\u5220\u9664\u201C<strong>".concat(u[0].title,"</strong>\u201D\u3002")+"\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F"},(0,N.Z)(f().mark(function I(){return f().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,i({variables:{ids:u.map(function(F){return F.id})}});case 2:return A.next=4,j();case 4:case"end":return A.stop()}},I)}))),D=(0,m.Z)(x,1),t=D[0];return(0,e.jsx)(n.zx,{onClick:t,size:"sm",className:"px-4 py-2",variant:"danger",children:"\u6279\u91CF\u5220\u9664"})}function R(r){var u=r.data,j=r.refetch,c=(0,W.k6)(),h=(0,b.useState)(!1),i=(0,m.Z)(h,2),x=i[0],D=i[1],t=(0,g.eU)(),I=(0,m.Z)(t,1),K=I[0],A=d({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u7BC7\u6587\u7AE0\u5417\uFF1F",content:"\u60A8\u5373\u5C06\u5220\u9664\u201C<strong>".concat(u.title,"</strong>\u201D\u3002\u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF0C\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F")},(0,N.Z)(f().mark(function o(){return f().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,K({variables:{id:u.id}});case 2:return v.next=4,j();case 4:case"end":return v.stop()}},o)}))),F=(0,m.Z)(A,1),S=F[0],Z=(0,b.useCallback)(function(o){var _=o.key;_=="edit"?c.push("/cms/articles/".concat(u.id,"/edit")):_=="delete"&&(D(!1),S())},[]);return(0,e.jsx)(n.Lt,{overlay:(0,e.jsxs)(n.v2,{onClick:Z,className:"menu-sub menu-sub-dropdown menu-gray-600 menu-state-bg-light-primary fw-bold w-125px py-4",children:[(0,e.jsx)(n.v2.Item,{className:"px-3",children:"\u7F16\u8F91"},"edit"),(0,e.jsx)(n.v2.Item,{className:"px-3",children:"\u53D1\u5E03"},"publish"),(0,e.jsx)(n.v2.Item,{className:"px-3 actions-delete",children:"\u5220\u9664"},"delete")]}),placement:"bottomRight",onVisibleChange:D,visible:x,children:(0,e.jsxs)(n.zx,{variant:"light",activeColor:"light-primary",size:"sm",children:["\u64CD \u4F5C",(0,e.jsx)(a.ZP,{className:"ms-2 svg-icon-5 m-0",name:"Duotune/arr072"})]})})}function U(r){var u=r.query,j=r.style,c=j===void 0?"normal":j,h=(0,g.gk)({variables:(0,p.Z)({},u),fetchPolicy:"cache-and-network"}),i=h.data,x=h.refetch,D=(i||{}).articles||{edges:[],current:0,total:0},t=(0,b.useMemo)(function(){return D.edges.map(function(o){return o.node})},[D.edges]),I=(0,b.useCallback)(function(o){console.log(o)},[]),K=(0,b.useState)([]),A=(0,m.Z)(K,2),F=A[0],S=A[1],Z=(0,b.useCallback)(function(o,_){S(_)},[S]);return(0,e.jsxs)("div",{className:"tab-content",children:[c=="small"&&(0,e.jsxs)("div",{className:"d-flex flex-wrap flex-stack pb-7",children:[(0,e.jsxs)("div",{className:"d-flex flex-wrap align-items-center my-1",children:[(0,e.jsxs)("h3",{className:"fw-bolder me-5 my-1",children:["\u6587\u7AE0 (",D.total,")"]}),(0,e.jsx)(n.II.Search,{size:"sm",placeholder:"\u641C\u7D22",boxClassName:"my-1",className:"form-control-white  w-150px ps-9"})]}),(0,e.jsxs)("div",{className:"d-flex flex-wrap my-1",children:[(0,e.jsxs)("ul",{style:{display:"none"},className:"nav nav-pills me-6 mb-2 mb-sm-0",children:[(0,e.jsx)("li",{className:"nav-item m-0",children:(0,e.jsx)("a",{className:"btn btn-sm btn-icon btn-light btn-color-muted btn-active-primary me-3",href:"#kt_project_users_card_pane",children:(0,e.jsx)(a.ZP,{name:"Duotune/gen024",className:"svg-icon-2"})})}),(0,e.jsx)("li",{className:"nav-item m-0",children:(0,e.jsx)("a",{className:"btn btn-sm btn-icon btn-light btn-color-muted btn-active-primary active",href:"#kt_project_users_table_pane",children:(0,e.jsx)(a.ZP,{name:"Duotune/abs015",className:"svg-icon-2"})})})]}),(0,e.jsxs)("div",{className:"d-flex my-0",children:[(0,e.jsx)(n.ub,{size:"sm",className:"form-select-white w-125px me-5",placeholder:"\u53D1\u5E03\u65F6\u95F4",options:[{label:"\u5168\u90E8\u65F6\u95F4",value:"all"},{label:"\u4ECA\u5E74",value:"thisyear"},{label:"\u8FD9\u4E2A\u6708",value:"thismonth"},{label:"\u6700\u8FD1\u4E00\u4E2A\u6708",value:"lastmonth"},{label:"\u6700\u8FD190\u5929",value:"last90days"}]}),(0,e.jsx)(n.ub,{size:"sm",className:"form-select-white w-125px",placeholder:"\u72B6\u6001",options:[{label:"\u5168\u90E8\u72B6\u6001",value:"all"},{label:"\u8349\u7A3F",value:"DRAFT"},{label:"\u5DF2\u53D1\u5E03",value:"PUBLISHED"},{label:"\u7B49\u5F85\u53D1\u5E03",value:"SCHEDULED"}]})]})]})]}),(0,e.jsxs)(n.Zb,{flush:!0,className:B()((0,w.Z)({},"mt-6 mt-xl-9",c==="normal")),headerClassName:"mt-5",children:[c==="normal"&&(0,e.jsxs)(n.Zb.Header,{className:"pt-8",children:[(0,e.jsx)(n.Zb.Title,{className:"flex-column",children:(0,e.jsx)(n.II.Search,{solid:!0,className:"w-250px",placeholder:"\u641C\u7D22\u6587\u7AE0",onSearch:I})}),(0,e.jsx)(n.Zb.Toolbar,{children:(0,e.jsxs)("div",{className:"d-flex justify-content-end",children:[!!F.length&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.zx,{variant:"primary",icon:(0,e.jsx)(a.ZP,{className:"svg-icon-2",name:"Duotune/gen016"}),className:"me-3",children:"\u6279\u91CF\u53D1\u5E03"}),(0,e.jsx)(n.zx,{variant:"danger",icon:(0,e.jsx)(a.ZP,{className:"svg-icon-2",name:"Duotune/gen027"}),children:"\u6279\u91CF\u5220\u9664"})]}),!F.length&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.zx,{variant:"primary",className:"me-3",icon:(0,e.jsx)(a.ZP,{className:"svg-icon-2",name:"Duotune/gen031"}),children:"\u8FC7\u6EE4\u7B5B\u9009"}),(0,e.jsx)(n.zx,{as:O.Link,variant:"primary",icon:(0,e.jsx)(a.ZP,{className:"svg-icon-2",name:"Duotune/arr075"}),to:"/cms/articles/new",children:"\u65B0\u5EFA\u6587\u7AE0"})]})]})})]}),(0,e.jsx)(n.Zb.Body,{className:"pt-0",children:D.total?(0,e.jsx)(n.iA,{rowKey:"id",rowSelection:{type:"checkbox",onChange:Z,selectedRowKeys:(F||[]).map(function(o){return o.id}),renderTitle:function(_){return(0,e.jsxs)(e.Fragment,{children:["\u5DF2\u9009\u4E2D",(0,e.jsx)("span",{className:"mx-2",children:_}),"\u7BC7\u6587\u7AE0"]})},toolbar:c=="small"&&function(o,_){return(0,e.jsx)(M,{selectedRows:_,refetch:x})}},pagination:D,dataSource:t,columns:[{title:"\u6807\u9898",dataIndex:"title",key:"title",render:function(_,v){return(0,e.jsxs)("div",{className:"d-flex flex-column",children:[(0,e.jsx)(O.Link,{to:"/cms/articles/".concat(v.id,"/edit"),className:"text-gray-800 text-hover-primary mb-1",children:_}),(0,e.jsxs)("span",{className:"text-gray-500",children:[v.channels.map(function(z){return(0,e.jsx)(n.Ct,{className:"me-2",children:z.fullName},z.id)}),C()(v.createdAt).fromNow()]})]})}},{title:"\u72B6\u6001",dataIndex:"status",width:120,render:function(_){var v={DRAFT:{title:"\u8349\u7A3F",lightStyle:"danger"},PUBLISHED:{title:"\u5DF2\u53D1\u5E03"},SCHEDULED:{title:"\u8BA1\u5212",lightStyle:"primary"}};return(0,e.jsx)(n.Ct,{lightStyle:v[_].lightStyle,children:v[_].title})}},{title:"\u64CD\u4F5C",key:"action",width:140,render:function(_,v){return(0,e.jsx)(R,{data:v,refetch:x})}}]}):(0,e.jsx)(n.HY,{title:"\u65B0\u589E\u6587\u7AE0",description:"\u8BE5\u680F\u76EE\u8FD8\u662F\u7A7A\u7684\uFF0C\u6CA1\u6709\u4EFB\u4F55\u6587\u7AE0",image:"/assets/media/illustrations/sigma-1/4.png",children:(0,e.jsx)(n.zx,{as:O.Link,variant:"primary",to:"/cms/articles/new",children:"\u65B0\u5EFA\u6587\u7AE0"})})})]})]})}P.default=U}}]);

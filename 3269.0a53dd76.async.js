(self.webpackChunkasany_admin=self.webpackChunkasany_admin||[]).push([[3269,3190],{48775:function(ae,V,r){"use strict";r.d(V,{GP:function(){return c.Z},Hk:function(){return N}});var c=r(48655),y=r(39981),s=r(67294),h=r(94184),T=r.n(h),A=r(12788),L=r(11849),H=r(28865),w=r(37334),U=r(2824),J=r(96486),z=r(85893),B={aside:{minimize:!1,width:280}},d=s.createContext({state:B,dispatch:function(){}}),g;(function(t){t.AsideToggle="ASIDE_TOGGLE",t.AsideWidth="ASIDE_WIDTH"})(g||(g={}));function e(t,i){switch(i.type){case"ASIDE_TOGGLE":return t.aside.minimize=!t.aside.minimize,(0,L.Z)({},t);case"ASIDE_WIDTH":return t.aside.width=i.payload,(0,L.Z)({},t);default:throw new Error}}var j=function(i){var f=(0,s.useReducer)(e,(0,J.cloneDeep)(B)),v=(0,U.Z)(f,2),M=v[0],l=v[1];return(0,z.jsx)(d.Provider,{value:{state:M,dispatch:l},children:i.children})},Z=function(){return(0,s.useContext)(d)},D=r(17818),W=r(8265);function S(t){var i=t.className,f=t.header,v=t.children,M=t.collapsible,l=M===void 0?!0:M,C=t.width,E=C===void 0?280:C,P=(0,W.$Y)(),R=Z(),I=R.dispatch;return(0,s.useEffect)(function(){P.aside.width(E+100),I({type:g.AsideWidth,payload:E})},[P.aside,I,E]),(0,z.jsxs)("div",{className:T()("app-aside aside",i),children:[(0,z.jsx)(w.Z,{children:(0,z.jsx)(c.Z,{header:f,resizeable:!0,className:"app-sidebar",children:v})}),l&&(0,z.jsx)(a,{className:"start-100 end-0"})]})}function a(t){var i=Z(),f=i.dispatch,v=i.state.aside.minimize,M=(0,s.useCallback)(function(){f({type:g.AsideToggle})},[f]);return(0,z.jsx)(D.zx,{style:(0,L.Z)({marginBottom:"1.35rem",zIndex:105},t.style),onClick:M,activeColor:"primary",className:T()("micro-app-aside-toggle","btn-icon bg-body btn-color-gray-700 rounded-2 position-absolute translate-middle bottom-0 shadow-sm d-none d-lg-flex",t.className,{active:v}),children:(0,z.jsx)(H.JO,{name:"Duotune/arr063",className:"svg-icon-2 rotate-180"})})}S.Toggle=a;var u=S,n=A.ZP.div.withConfig({displayName:"MicroApp__MicroAppContainer",componentId:"sc-1dngjf6-0"})(["--root-aside-width:",";--met-aside-width:",";"],function(t){return t.minimize?"100px":"".concat(t.width,"px")},function(t){return t.minimize?"100px":"".concat(t.width,"px")});function b(t){var i=t.children,f=t.className,v=Z(),M=v.state.aside,l=M.minimize,C=M.width,E=(0,s.useCallback)(function(P){P.preventDefault()},[]);return(0,z.jsx)(n,{minimize:l,width:C,className:T()("micro-app-container page-full-content",f,{"aside-minimize":l}),onContextMenu:E,children:i})}function F(t){var i=t.children,f=t.className;return(0,z.jsx)(j,{children:(0,z.jsx)(b,{className:f,children:i})})}F.Sidebar=u;var N=F,m=r(53851)},8265:function(ae,V,r){"use strict";r.d(V,{$Y:function(){return U},BK:function(){return J},aM:function(){return d}});var c=r(2824),y=r(11849),s=r(67294),h=r(85893),T=s.createContext({getState:function(){return{routes:[]}},subscribe:function(){},dispatch:function(){}}),A=function(e,j){return j?j.type==="ASIDE_MINIMIZE"?(0,y.Z)((0,y.Z)({},e),{},{aside:(0,y.Z)((0,y.Z)({},e.aside),{},{minimize:!!j.payload})}):j.type==="ASIDE_WIDTH"?(0,y.Z)((0,y.Z)({},e),{},{aside:(0,y.Z)((0,y.Z)({},e.aside),{},{width:j.payload})}):j.type==="ASIDE_COLLAPSIBLE"?(0,y.Z)((0,y.Z)({},e),{},{aside:(0,y.Z)((0,y.Z)({},e.aside),{},{collapsible:j.payload})}):e:e},L=function(e){return(0,y.Z)({},e)};function H(g){var e=(0,s.useReducer)(A,g,L),j=(0,c.Z)(e,2),Z=j[0],D=j[1],W=(0,s.useState)([]),S=(0,c.Z)(W,1),a=S[0],u=function(f){return function(){var v=a.indexOf(f);v>-1&&a.splice(v,1)}},n=(0,s.useCallback)(function(i){return a.unshift(i),u(i)},[a]),b=(0,s.useCallback)(function(){a.forEach(function(i){return i()})},[a]),F={getState:function(){return Z},dispatch:D,subscribe:n},N=(0,s.useState)(F),m=(0,c.Z)(N,1),t=m[0];return(0,s.useEffect)(function(){t.getState=function(){return Z},b()},[Z]),t}var w=function(e,j){return e===j};function U(){var g=(0,s.useContext)(T),e=(0,s.useRef)({aside:{get state(){return g.getState().aside},width:function(Z){g.dispatch({type:"ASIDE_WIDTH",payload:Z})},minimize:function(Z){g.dispatch({type:"ASIDE_MINIMIZE",payload:Z})},collapsible:function(Z){g.dispatch({type:"ASIDE_COLLAPSIBLE",payload:Z})}}});return e.current}function J(g){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w;return z(g,e)}function z(g){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w,j=(0,s.useContext)(T),Z=(0,s.useReducer)(function(n){return n+1},0),D=(0,c.Z)(Z,2),W=D[1],S=(0,s.useRef)(),a=g(j.getState());function u(){var n=g(j.getState());e(n,S.current)||(S.current=n,W())}return(0,s.useEffect)(function(){return j.subscribe(u)},[]),a}function B(){var g=useContext(T);return g.dispatch}function d(g){var e=g.children,j=g.state,Z=H(j);return(0,s.useMemo)(function(){return(0,h.jsx)(T.Provider,{value:Z,children:e})},[e,Z])}},95901:function(ae,V,r){"use strict";r.d(V,{dI:function(){return W},rB:function(){return D}});var c=r(2824),y=r(67294);function s(S){return S!=null&&S!==""}function h(S,a){var u=useState(S),n=_slicedToArray(u,2),b=n[0],F=n[1];return useEffect(function(){var N=setTimeout(function(){F(S)},a);return function(){clearTimeout(N)}},[S,a]),b}var T={USERS_LIST:"users-list"},A=r(54941),L=r(69610),H=r(36321),w=(0,A.Z)(function S(){var a=this;(0,L.Z)(this,S),this.menu=null,this.element=null,this.getParamName=function(u){var n=document.body.hasAttribute("data-kt-name"),b=n?n+"_":"";return"kt_"+b+"theme_mode_"+u},this.getMode=function(){var u,n=a.getParamName("value"),b=a.getMenuMode(),F="light";if(!localStorage)return F;var N=localStorage.getItem(n);if(N)return N;var m=(u=a.element)===null||u===void 0?void 0:u.getAttribute("data-theme");return m||(b?b==="system"?a.getSystemMode():b:F)},this.setMode=function(u,n){var b,F,N,m=u,t=n;if(!(m!=="light"&&m!=="dark")){var i=a.getParamName("value"),f=a.getParamName("menu");t==="system"&&a.getSystemMode()!==m&&(m=a.getSystemMode()),t||(t=m);var v=((b=a.menu)===null||b===void 0?void 0:b.querySelector('[data-kt-element="mode"][data-kt-value="'+t+'"]'))||null;(F=a.element)===null||F===void 0||F.setAttribute("data-kt-theme-mode-switching","true"),(N=a.element)===null||N===void 0||N.setAttribute("data-theme",m);var M=a;setTimeout(function(){var l;(l=M.element)===null||l===void 0||l.removeAttribute("data-kt-theme-mode-switching")},300),localStorage&&localStorage.setItem(i,m),v&&localStorage&&(localStorage.setItem(f,t),a.setActiveMenuItem(v)),a.flipImages()}},this.getMenuMode=function(){var u,n=a.getParamName("menu"),b=(u=a.menu)===null||u===void 0?void 0:u.querySelector('.active[data-kt-element="mode"]'),F=b==null?void 0:b.getAttribute("data-kt-value");if(F)return F;if(!n)return"";var N=localStorage?localStorage.getItem(n):null;return N||""},this.getSystemMode=function(){return window.matchMedia("(prefers-color-scheme: dark)")?"dark":"light"},this.initMode=function(){a.setMode(a.getMode(),a.getMenuMode()),a.element&&H.EventHandlerUtil.trigger(a.element,"kt.thememode.init")},this.setActiveMenuItem=function(u){var n,b=a.getParamName("menu"),F=u.getAttribute("data-kt-value"),N=(n=a.menu)===null||n===void 0?void 0:n.querySelector('.active[data-kt-element="mode"]');N&&N.classList.remove("active"),u.classList.add("active"),localStorage&&F&&b&&localStorage.setItem(b,F)},this.handleMenu=function(){var u,n;(u=a.menu)===null||u===void 0||(n=u.querySelectorAll('[data-kt-element="mode"]'))===null||n===void 0||n.forEach(function(b){b.addEventListener("click",function(F){F.preventDefault();var N=b.getAttribute("data-kt-value"),m=N==="system"?a.getSystemMode():N;m&&a.setMode(m,N)})})},this.flipImages=function(){var u;(u=document.querySelectorAll("[data-kt-img-dark]"))===null||u===void 0||u.forEach(function(n){n.tagName==="IMG"?a.getMode()==="dark"&&n.hasAttribute("data-kt-img-dark")?(n.setAttribute("data-kt-img-light",n.getAttribute("src")||""),n.setAttribute("src",n.getAttribute("data-kt-img-dark")||"")):a.getMode()==="light"&&n.hasAttribute("data-kt-img-light")&&(n.setAttribute("data-kt-img-dark",n.getAttribute("src")||""),n.setAttribute("src",n.getAttribute("data-kt-img-light")||"")):a.getMode()==="dark"&&n.hasAttribute("data-kt-img-dark")?(n.setAttribute("data-kt-img-light",n.getAttribute("src")||""),n.style.backgroundImage="url('"+n.getAttribute("data-kt-img-dark")+"')"):a.getMode()==="light"&&n.hasAttribute("data-kt-img-light")&&(n.setAttribute("data-kt-img-dark",n.getAttribute("src")||""),n.style.backgroundImage="url('"+n.getAttribute("data-kt-img-light")+"')")})},this.on=function(u,n){if(a.element)return H.EventHandlerUtil.on(a.element,u,n)},this.off=function(u,n){if(a.element)return H.EventHandlerUtil.off(a.element,u,n)},this.init=function(){a.menu=document.querySelector('[data-kt-element="theme-mode-menu"]'),a.element=document.documentElement,a.initMode(),a.menu&&a.handleMenu()}}),U=new w,J=r(85893),z=U.getSystemMode(),B=function(a){var u=a!=="system"?a:z,n="/media/patterns/header-bg"+(u==="light"?".jpg":"-dark.png");document.body.style.backgroundImage='url("'.concat(toAbsoluteUrl(n),'")')},d="kt_theme_mode_value",g="kt_theme_mode_menu",e=function(a){if(!localStorage)return"light";var u=localStorage.getItem(a);return!u||u==="light"?"light":u==="dark"?"dark":"system"},j={mode:e(d),menuMode:e(g),updateMode:function(a){},updateMenuMode:function(a){}},Z=(0,y.createContext)({mode:j.mode,menuMode:j.menuMode,updateMode:function(a){},updateMenuMode:function(a){}}),D=function(){return(0,y.useContext)(Z)},W=function(a){var u=a.children,n=(0,y.useState)(j.mode),b=(0,c.Z)(n,2),F=b[0],N=b[1],m=(0,y.useState)(j.menuMode),t=(0,c.Z)(m,2),i=t[0],f=t[1],v=function(C){var E=C==="system"?z:C;N(E),localStorage&&localStorage.setItem(d,E),document.documentElement.setAttribute("data-theme",E),U.init()},M=function(C){f(C),localStorage&&localStorage.setItem(g,C)};return(0,y.useEffect)(function(){v(F),M(i)},[]),(0,J.jsx)(Z.Provider,{value:{mode:F,menuMode:i,updateMode:v,updateMenuMode:M},children:u})}},86328:function(ae,V,r){"use strict";r.r(V),r.d(V,{default:function(){return N}});var c=r(91220),y=r(86582),s=r(67294),h=r(28865),T=r(1861),A=r(7020),L=r(51615),H=r(14928),w=r(39428),U=r(3182),J=r(2824),z=r(94184),B=r.n(z),d=r(17818),g=r(54108),e=r(85893);function j(m){return["zip"].includes(m.extension)?(0,e.jsx)(h.ZP,{name:"Bootstrap/file-zip-fill",className:"svg-icon-2x"}):m.mimeType.startsWith("image/")?(0,e.jsx)(h.ZP,{name:"Bootstrap/file-image-fill",className:"svg-icon-2x"}):m.mimeType.startsWith("video/")?(0,e.jsx)(h.ZP,{name:"Bootstrap/file-play-fill",className:"svg-icon-2x"}):(0,e.jsx)(h.ZP,{name:"Bootstrap/file-post-fill",className:"svg-icon-2x"})}function Z(m){var t=m.file,i=(0,L.k6)(),f=(0,A.tT)("cloud-drive.index",function(I){return I.api.base}),v=(0,A.tT)("cloud-drive.index",function(I){return I.api.upload}),M=(0,s.useCallback)(function(){v.cancel(t.id)},[v,t.id]),l=(0,s.useCallback)(function(){f.closeTransfers(),i.push("/drive/folders/".concat(t.result.parentFolder.id))},[f,t.result,i]),C=(0,s.useCallback)(function(){v.start(t.id)},[v,t.id]),E=(0,s.useCallback)(function(){v.restore(t.id)},[v,t.id]),P=(0,s.useCallback)(function(){v.pause(t.id)},[v,t.id]),R=(0,s.useCallback)(function(){v.delete(t.id)},[v,t.id]);return(0,e.jsxs)("li",{className:B()("file-item",{"file-item-uploaded":["completed","error"].includes(t.state)}),children:[(0,e.jsx)("div",{className:"file-icon",children:j(t)}),(0,e.jsxs)("div",{className:"file-details",children:[(0,e.jsx)("div",{className:"file-title",children:t.name}),(0,e.jsx)("div",{className:B()("file-transfer-progress progress",{"opacity-0":t.state=="completed"}),children:(0,e.jsx)(d.Ex,{color:"success",percent:t.progress})}),(0,e.jsxs)("div",{className:"file-status",children:[(0,e.jsx)("div",{className:"file-size",children:(0,g.jb)(t.size)}),t.state=="error"&&(0,e.jsx)("div",{className:"upload-error text-danger",children:"\u4E0A\u4F20\u51FA\u73B0\u9519\u8BEF!"}),!["completed","error"].includes(t.state)&&(0,e.jsx)("div",{className:"file-transfer-rate",children:t.progress==100?"\u7B49\u5F85\u5B8C\u6210...":!!t.uploadSpeed&&t.uploadSpeed+"/s"})]})]}),(0,e.jsxs)("div",{className:"file-actions",children:[t.state=="waiting"&&(0,e.jsx)(d.zx,{icon:(0,e.jsx)(h.ZP,{name:"Bootstrap/clock",className:"svg-icon-4"})}),t.state=="uploading"&&(0,e.jsx)(d.zx,{onClick:P,icon:(0,e.jsx)(h.ZP,{name:"Bootstrap/pause",className:"svg-icon-4"})}),t.state=="paused"&&(0,e.jsx)(d.zx,{onClick:C,icon:(0,e.jsx)(h.ZP,{name:"Bootstrap/arrow-up-short",className:"svg-icon-4"})}),["canceled","error"].includes(t.state)&&(0,e.jsx)(d.zx,{onClick:E,icon:(0,e.jsx)(h.ZP,{name:"Bootstrap/arrow-counterclockwise",className:"svg-icon-4"})}),t.state=="completed"&&(0,e.jsx)(d.zx,{onClick:l,icon:(0,e.jsx)(h.ZP,{name:"Bootstrap/folder2",className:"svg-icon-6"})}),!["completed","canceled","error"].includes(t.state)&&(0,e.jsx)(d.zx,{onClick:M,icon:(0,e.jsx)(h.ZP,{name:"Bootstrap/x",className:"svg-icon-4"})}),["completed","canceled","error"].includes(t.state)&&(0,e.jsx)(d.zx,{onClick:R,icon:(0,e.jsx)(h.ZP,{name:"Bootstrap/eraser",className:"svg-icon-6"})})]})]},t.id)}function D(){var m=(0,A.tT)("cloud-drive.index",function(t){var i=t.state;return i.uploadFiles});return(0,e.jsx)(T.E,{className:B()("custom-scrollbar"),options:{scrollbars:{autoHide:"scroll"}},children:m.length?(0,e.jsx)("ul",{className:"transfer-file-list",children:m.map(function(t){return(0,e.jsx)(Z,{file:t},t.id)})}):(0,e.jsxs)("div",{className:"transfer-list-empty",children:[(0,e.jsx)("img",{src:"/assets/media/illustrations/dozzy-1/4.png"}),(0,e.jsx)("span",{className:"empty-title",children:"\u6CA1\u6709\u4E0A\u4F20\u4EFB\u52A1"})]})})}function W(m){var t=m.file,i=(0,A.tT)("cloud-drive.index",function(P){return P.api.download}),f=(0,s.useCallback)(function(){i.cancel(t.id)},[i,t.id]),v=(0,s.useCallback)(function(){i.save(t.id),console.log("\u672C\u5730\u4E0B\u8F7D")},[i,t.id]),M=(0,s.useCallback)(function(){i.start(t.id)},[i,t.id]),l=(0,s.useCallback)(function(){i.restore(t.id)},[i,t.id]),C=(0,s.useCallback)(function(){i.pause(t.id)},[i,t.id]),E=(0,s.useCallback)(function(){i.delete(t.id)},[i,t.id]);return(0,e.jsxs)("li",{className:B()("file-item",{"file-item-download":["completed","error"].includes(t.state)}),children:[(0,e.jsx)("div",{className:"file-icon",children:j(t)}),(0,e.jsxs)("div",{className:"file-details",children:[(0,e.jsx)("div",{className:"file-title",children:t.name}),(0,e.jsx)("div",{className:B()("file-transfer-progress progress",{"opacity-0":t.state=="completed"}),children:(0,e.jsx)(d.Ex,{color:"primary",percent:t.progress})}),(0,e.jsxs)("div",{className:"file-status",children:[(0,e.jsx)("div",{className:"file-size",children:!!t.size&&(0,g.jb)(t.size)}),t.state=="error"&&(0,e.jsx)("div",{className:"upload-error text-danger",children:"\u4E0B\u8F7D\u51FA\u73B0\u9519\u8BEF!"}),!["completed","error"].includes(t.state)&&(0,e.jsx)("div",{className:"file-transfer-rate",children:t.progress==0||!t.size?"\u7B49\u5F85\u8D44\u6E90...":!!t.downloadSpeed&&t.downloadSpeed+"/s"})]})]}),(0,e.jsxs)("div",{className:"file-actions",children:[t.state=="waiting"&&(0,e.jsx)(d.zx,{icon:(0,e.jsx)(h.ZP,{name:"Bootstrap/clock",className:"svg-icon-4"})}),t.state=="downloading"&&(0,e.jsx)(d.zx,{onClick:C,icon:(0,e.jsx)(h.ZP,{name:"Bootstrap/pause",className:"svg-icon-4"})}),t.state=="paused"&&(0,e.jsx)(d.zx,{onClick:M,icon:(0,e.jsx)(h.ZP,{name:"Bootstrap/arrow-down-short",className:"svg-icon-4"})}),["canceled","error"].includes(t.state)&&(0,e.jsx)(d.zx,{onClick:l,icon:(0,e.jsx)(h.ZP,{name:"Bootstrap/arrow-counterclockwise",className:"svg-icon-4"})}),t.state=="completed"&&(0,e.jsx)(d.zx,{onClick:v,icon:(0,e.jsx)(h.ZP,{name:"Bootstrap/download",className:"svg-icon-6"})}),!["completed","canceled","error"].includes(t.state)&&(0,e.jsx)(d.zx,{onClick:f,icon:(0,e.jsx)(h.ZP,{name:"Bootstrap/x",className:"svg-icon-4"})}),["completed","canceled","error"].includes(t.state)&&(0,e.jsx)(d.zx,{onClick:E,icon:(0,e.jsx)(h.ZP,{name:"Bootstrap/eraser",className:"svg-icon-6"})})]})]},t.id)}function S(){var m=(0,A.tT)("cloud-drive.index",function(t){var i=t.state;return i.downloadFiles});return(0,e.jsx)(T.E,{className:B()("custom-scrollbar"),options:{scrollbars:{autoHide:"scroll"}},children:m.length?(0,e.jsx)("ul",{className:"transfer-file-list",children:m.map(function(t){return(0,e.jsx)(W,{file:t},t.id)})}):(0,e.jsxs)("div",{className:"transfer-list-empty",children:[(0,e.jsx)("img",{src:"/assets/media/illustrations/dozzy-1/4.png"}),(0,e.jsx)("span",{className:"empty-title",children:"\u6CA1\u6709\u4E0B\u8F7D\u4EFB\u52A1"})]})})}function a(){var m=(0,s.useState)("upload"),t=(0,J.Z)(m,2),i=t[0],f=t[1],v=(0,s.useCallback)(function(I){f(I)},[]),M=(0,A.tT)("cloud-drive.index",function(I){return{deleteUploadFile:I.api.upload.delete,deleteDownloadFile:I.api.download.delete}}),l=(0,A.tT)("cloud-drive.index",function(I){var k=I.state;return k.uploadFiles.filter(function(Q){return Q.state=="completed"})}),C=(0,A.tT)("cloud-drive.index",function(I){var k=I.state;return k.downloadFiles.filter(function(Q){return Q.state=="completed"})}),E=(0,s.useCallback)((0,U.Z)((0,w.Z)().mark(function I(){var k,Q,Y;return(0,w.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:k=(0,c.Z)(l),o.prev=1,k.s();case 3:if((Q=k.n()).done){o.next=9;break}return Y=Q.value,o.next=7,M.deleteUploadFile(Y.id);case 7:o.next=3;break;case 9:o.next=14;break;case 11:o.prev=11,o.t0=o.catch(1),k.e(o.t0);case 14:return o.prev=14,k.f(),o.finish(14);case 17:case"end":return o.stop()}},I,null,[[1,11,14,17]])})),[M,l]),P=(0,s.useCallback)((0,U.Z)((0,w.Z)().mark(function I(){var k,Q,Y;return(0,w.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:k=(0,c.Z)(C),o.prev=1,k.s();case 3:if((Q=k.n()).done){o.next=9;break}return Y=Q.value,o.next=7,M.deleteDownloadFile(Y.id);case 7:o.next=3;break;case 9:o.next=14;break;case 11:o.prev=11,o.t0=o.catch(1),k.e(o.t0);case 14:return o.prev=14,k.f(),o.finish(14);case 17:case"end":return o.stop()}},I,null,[[1,11,14,17]])})),[M,C]),R=(0,s.useMemo)(function(){return!!l.length&&i=="upload"||!!C.length&&i=="download"},[i,l.length,C.length]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"popover-header",children:[(0,e.jsx)("span",{className:"popover-title",children:"\u4F20\u8F93\u5217\u8868"}),(0,e.jsx)("div",{className:"popover-toolbar",children:R&&(0,e.jsx)("a",{className:"cursor-pointer",onClick:i=="upload"?E:P,children:"\u6E05\u7A7A\u5DF2\u5B8C\u6210"})})]}),(0,e.jsxs)(d.mQ,{activeKey:i,onChange:v,tabPosition:"left",children:[(0,e.jsx)(d.mQ.TabPane,{tab:"\u6587\u4EF6\u4E0A\u4F20",children:(0,e.jsx)(D,{})},"upload"),(0,e.jsx)(d.mQ.TabPane,{tab:"\u6587\u4EF6\u4E0B\u8F7D",children:(0,e.jsx)(S,{})},"download")]})]})}var u=a,n=r(48775);function b(m){var t=m.drives,i=m.onAction,f=(0,A.tT)("cloud-drive.index",function(l){var C=l.state;return C.driveId}),v=(0,s.useCallback)(function(l){if(l.startsWith("drive-"))console.log(l);else return i(l),!1;return!0},[i]),M=(0,s.useMemo)(function(){return[].concat((0,y.Z)(t.map(function(l){return{value:"drive-".concat(l.id),label:l.name}})),[{type:"separator"},{value:"preferences",label:"\u504F\u597D\u8BBE\u7F6E"}])},[t]);return(0,e.jsx)("div",{className:"app-sidebar-footer",children:(0,e.jsx)(d.Ph,{onChange:v,placement:"topCenter",value:f?"drive-".concat(f):void 0,options:M})})}function F(){var m=(0,A.tT)("cloud-drive.index",function(o){var O=o.state;return O.driveId}),t=(0,A.tT)("cloud-drive.index",function(o){var O=o.state;return O.visibleTransfers}),i=(0,A.tT)("cloud-drive.index",function(o){return o.api.base}),f=(0,L.$B)({path:"/drive/:type/:value",strict:!0,sensitive:!0}),v=(0,L.$B)({path:"/drive/:type",strict:!0,sensitive:!0}),M=(0,H.dH)({fetchPolicy:"cache-and-network"}),l=M.data,C=(0,A.tT)("cloud-drive.index",function(o){var O=o.state;return O.driveId}),E=(0,A.tT)("cloud-drive.index",function(o){return o.setCloudDrive});(0,s.useEffect)(function(){if(!!(l!=null&&l.cloudDrives)){var o=l==null?void 0:l.cloudDrives;o.some(function(O){return O.id==C})||E(o[0])}},[l==null?void 0:l.cloudDrives,E,C]);var P=(0,s.useMemo)(function(){if(!(!(l!=null&&l.cloudDrives)||!m))return l.cloudDrives.find(function(o){return o.id==m})},[l==null?void 0:l.cloudDrives,m]),R=(0,s.useMemo)(function(){return(f==null?void 0:f.params.type)||(v==null?void 0:v.params.type)},[f,v]),I=(0,s.useMemo)(function(){return f==null?void 0:f.params.value},[f]),k=(0,s.useCallback)(function(o){o?i.openTransfers():i.closeTransfers()},[i]),Q=(0,s.useMemo)(function(){return I?R=="folders"?["my-drive"]:R=="mime-types"?[I]:[R]:[R]},[R,I]),Y=(0,A.tT)("cloud-drive.index",function(o){var O=o.state,X=0,ee=0,K=(0,c.Z)(O.uploadFiles),_;try{for(K.s();!(_=K.n()).done;){var G=_.value;X+=G.size,ee+=G.size*(G.progress/100)}}catch(te){K.e(te)}finally{K.f()}return Math.max(ee/X*100<<0,O.uploadFiles.length?1:0)}),q=(0,A.tT)("cloud-drive.index",function(o){var O=o.state,X=0,ee=0,K=(0,c.Z)(O.downloadFiles),_;try{for(K.s();!(_=K.n()).done;){var G=_.value;X+=G.size,ee+=G.size*(G.progress/100)}}catch(te){K.e(te)}finally{K.f()}return Math.max(ee/X*100<<0,O.downloadFiles.length?1:0)});return(0,e.jsxs)(n.GP,{collapsible:!1,width:280,className:"app-sidebar app-drive-sidebar",children:[(0,e.jsxs)("div",{className:"relative mt-5 px-5 pt-5 d-flex",children:[(0,e.jsx)("h1",{className:"text-gray-800 flex-row-fluid fw-bold mb-6 mx-5",children:"\u4E91\u76D8"}),(0,e.jsx)(d.J2,{visible:t,onVisibleChange:k,overlayClassName:"dialog-transfers",content:(0,e.jsx)(u,{}),children:(0,e.jsxs)("div",{className:"file-transfer-icon",children:[(0,e.jsx)(d.mZ,{className:"download-all-progress position-absolute top-50 start-50 translate-middle",width:34,percent:q,strokeWidth:6,success:{strokeColor:"#04c8c8"}}),(0,e.jsx)(d.mZ,{className:"upload-all-progress position-absolute top-50 start-50 translate-middle",width:26,percent:Y,strokeWidth:7.5,success:{strokeColor:"#009ef7"}}),(0,e.jsx)(d.GM,{size:"sm",pause:!q&&!Y,children:(0,e.jsx)(h.ZP,{className:"svg-icon-6",name:"Duotune/arr032"})})]})})]}),(0,e.jsxs)(T.E,{className:"app-sidebar-body flex-column-fluid d-flex flex-column px-8 custom-scrollbar",options:{scrollbars:{autoHide:"scroll"}},children:[(0,e.jsxs)(d.v2,{className:"menu-title-gray-600 menu-icon-gray-400 menu-state-bg menu-state-primary menu-state-icon-primary menu-state-bullet-primary",accordion:!1,rounded:!0,selectable:"AllMenu",openKeys:["my-drive"],selectedKeys:Q,children:[(0,e.jsxs)(d.v2.SubMenu,{url:"/drive/my-drive",titleClassName:"fw-bolder",icon:(0,e.jsx)(h.ZP,{className:"svg-icon-2 me-3",name:"Duotune/abs040"}),title:"\u6211\u7684\u6587\u4EF6",children:[(0,e.jsx)(d.v2.Item,{className:"mb-2 mt-2",url:"/drive/mime-types/image",titleClassName:"fw-bolder",icon:(0,e.jsx)(h.ZP,{className:"svg-icon-2 me-3",name:"Duotune/gen006"}),children:"\u56FE\u7247"},"image"),(0,e.jsx)(d.v2.Item,{className:"mb-2",url:"/drive/mime-types/document",titleClassName:"fw-bolder",icon:(0,e.jsx)(h.ZP,{className:"svg-icon-2 me-3",name:"Duotune/fil003"}),children:"\u6587\u6863"},"document"),(0,e.jsx)(d.v2.Item,{className:"mb-2",url:"/drive/mime-types/video",titleClassName:"fw-bolder",icon:(0,e.jsx)(h.ZP,{className:"svg-icon-2 me-3",name:"Duotune/arr027"}),children:"\u89C6\u9891"},"video"),(0,e.jsx)(d.v2.Item,{className:"mb-2",url:"/drive/mime-types/audio",titleClassName:"fw-bolder",icon:(0,e.jsx)(h.ZP,{className:"svg-icon-2 me-3",name:"Duotune/elc008"}),children:"\u97F3\u9891"},"audio"),(0,e.jsx)(d.v2.Item,{url:"/drive/mime-types/other",titleClassName:"fw-bolder",icon:(0,e.jsx)(h.ZP,{className:"svg-icon-2 me-3",name:"Duotune/gen052"}),children:"\u5176\u4ED6"},"other")]},"my-drive"),(0,e.jsx)(d.v2.Separator,{className:"my-1"}),(0,e.jsx)(d.v2.Item,{className:"mb-2",url:"/drive/starred",titleClassName:"fw-bolder",icon:(0,e.jsx)(h.ZP,{className:"svg-icon-2 me-3",name:"Duotune/abs024"}),children:"\u6536\u85CF\u5939"},"starred"),(0,e.jsx)(d.v2.Item,{url:"/drive/trash",titleClassName:"fw-bolder",icon:(0,e.jsx)(h.ZP,{className:"svg-icon-2 me-3",name:"Duotune/gen027"}),children:"\u56DE\u6536\u7AD9"},"trash"),(0,e.jsx)(d.v2.Separator,{className:"my-1"}),(0,e.jsx)(d.v2.Item,{url:"/drive/quota",titleClassName:"fw-bolder",icon:(0,e.jsx)(h.ZP,{className:"svg-icon-2 me-3",name:"Duotune/fil020"}),children:"\u5B58\u50A8\u7A7A\u95F4"},"quota")]}),(0,e.jsxs)("div",{className:"drive-quota d-flex align-items-center flex-column mb-10",children:[(0,e.jsx)("div",{className:"h-5px mx-3 w-100 bg-light mb-2",children:(0,e.jsx)("div",{className:"bg-success rounded h-5px",role:"progressbar",style:{width:"".concat((P==null?void 0:P.quota.usage)/(P==null?void 0:P.quota.size)*100,"%")}})}),(0,e.jsxs)("div",{className:"d-flex justify-content-between w-100 mt-auto mb-2",children:[(0,e.jsxs)("span",{className:"fw-bold fs-7 text-gray-400",children:["\u5DF2\u4F7F\u7528\xA0",P==null?void 0:P.quota.usageStr,", \xA0\u5171\xA0",P==null?void 0:P.quota.sizeStr]}),(0,e.jsx)("a",{className:"fw-bolder fs-7 text-success",children:"\u6269\u5BB9"})]})]})]}),(0,e.jsx)(b,{drives:(l==null?void 0:l.cloudDrives)||[],onAction:function(){}})]})}var N=F},14928:function(ae,V,r){"use strict";r.d(V,{tz:function(){return F},HD:function(){return v},f4:function(){return a},dH:function(){return R},we:function(){return n},lK:function(){return Q},rn:function(){return o},Eo:function(){return he},_D:function(){return i},Ep:function(){return E},fX:function(){return l}});var c=r(11849),y=r(20310),s=r(49704),h=r(38460),T=r(21919),A=r(64718),L,H,w,U,J,z,B,d,g,e,j,Z,D={},W=(0,s.Ps)(L||(L=(0,y.Z)([`
    query cloudDrive($id: ID!) {
  cloudDrive(id: $id) {
    id
    name
    type
    space
    rootFolder
    recycleBin
  }
}
    `])));function S(x){var p=_objectSpread(_objectSpread({},D),x);return Apollo.useQuery(W,p)}function a(x){var p=(0,c.Z)((0,c.Z)({},D),x);return h.t(W,p)}var u=(0,s.Ps)(H||(H=(0,y.Z)([`
    mutation createFolder($name: String!, $parentFolder: ID!) {
  folder: createFolder(name: $name, parentFolder: $parentFolder) {
    id
    name
  }
}
    `])));function n(x){var p=(0,c.Z)((0,c.Z)({},D),x);return T.D(u,p)}var b=(0,s.Ps)(w||(w=(0,y.Z)([`
    mutation addStarForFiles($ids: [ID!]!, $mode: UpdateMode) {
  files: addStarForFiles(ids: $ids, mode: $mode) {
    id
    starred
  }
}
    `])));function F(x){var p=(0,c.Z)((0,c.Z)({},D),x);return T.D(b,p)}var N=(0,s.Ps)(U||(U=(0,y.Z)([`
    mutation deleteFiles($ids: [ID!]!) {
  files: deleteFiles(ids: $ids) {
    id
  }
}
    `])));function m(x){var p=_objectSpread(_objectSpread({},D),x);return Apollo.useMutation(N,p)}var t=(0,s.Ps)(J||(J=(0,y.Z)([`
    mutation moveFilesToTrash($ids: [ID!]!) {
  files: moveFilesToTrash(ids: $ids) {
    id
  }
}
    `])));function i(x){var p=(0,c.Z)((0,c.Z)({},D),x);return T.D(t,p)}var f=(0,s.Ps)(z||(z=(0,y.Z)([`
    mutation clearFilesInTrash($folder: ID!) {
  clearFilesInTrash(folder: $folder)
}
    `])));function v(x){var p=(0,c.Z)((0,c.Z)({},D),x);return T.D(f,p)}var M=(0,s.Ps)(B||(B=(0,y.Z)([`
    mutation restoreFiles($ids: [ID!]!) {
  files: restoreFiles(ids: $ids) {
    id
    path
  }
}
    `])));function l(x){var p=(0,c.Z)((0,c.Z)({},D),x);return T.D(M,p)}var C=(0,s.Ps)(d||(d=(0,y.Z)([`
    mutation renameFile($id: ID!, $name: String!) {
  file: renameFile(id: $id, name: $name) {
    id
    name
    lastModified(format: "yyyy-MM-dd HH:mm")
  }
}
    `])));function E(x){var p=(0,c.Z)((0,c.Z)({},D),x);return T.D(C,p)}var P=(0,s.Ps)(g||(g=(0,y.Z)([`
    query cloudDrives {
  cloudDrives {
    id
    name
    type
    space
    quota {
      id
      count
      usage
      size
      usageStr: usage(format: true)
      sizeStr: size(format: true)
    }
    rootFolder
  }
}
    `])));function R(x){var p=(0,c.Z)((0,c.Z)({},D),x);return A.a(P,p)}function I(x){var p=_objectSpread(_objectSpread({},D),x);return Apollo.useLazyQuery(P,p)}var k=(0,s.Ps)(e||(e=(0,y.Z)([`
    query file($id: ID!) {
  file(id: $id) {
    id
    name
    path
    starred
    size
    sizeFormat: size(format: true)
    mimeType
    extension
    isDirectory
    isRootFolder
    lastModified(format: "yyyy-MM-dd HH:mm")
    createdAt(format: "yyyy-MM-dd HH:mm")
    description
    parents {
      id
      isDirectory
      isRootFolder
      name
      path
    }
  }
}
    `])));function Q(x){var p=(0,c.Z)((0,c.Z)({},D),x);return A.a(k,p)}function Y(x){var p=_objectSpread(_objectSpread({},D),x);return Apollo.useLazyQuery(k,p)}var q=(0,s.Ps)(j||(j=(0,y.Z)([`
    query folder($folder: ID!) {
  currentFolder: file(id: $folder) {
    id
    name
    path
    isDirectory
    isRootFolder
    parents {
      id
      isDirectory
      isRootFolder
      name
      path
    }
  }
}
    `])));function o(x){var p=(0,c.Z)((0,c.Z)({},D),x);return A.a(q,p)}function O(x){var p=_objectSpread(_objectSpread({},D),x);return Apollo.useLazyQuery(q,p)}var X=(0,s.Ps)(Z||(Z=(0,y.Z)([`
    query listFiles($rootFolder: ID!, $filter: FileFilter, $page: Int = 1, $pageSize: Int = 30, $orderBy: OrderBy) {
  listFiles(
    rootFolder: $rootFolder
    filter: $filter
    page: $page
    pageSize: $pageSize
    orderBy: $orderBy
  ) {
    pageSize
    currentPage
    totalPage
    totalCount
    edges {
      node {
        id
        name
        path
        size
        starred
        mimeType
        extension
        isDirectory
        lastModified(format: "yyyy-MM-dd HH:mm")
      }
    }
  }
}
    `])));function ee(x){var p=_objectSpread(_objectSpread({},D),x);return Apollo.useQuery(X,p)}function K(x){var p=(0,c.Z)((0,c.Z)({},D),x);return h.t(X,p)}var _=r(2824),G=r(67294),te=r(71447),pe=function(){var p=K({fetchPolicy:"cache-and-network"}),ne=(0,_.Z)(p,2),oe=ne[0],se=ne[1],$=se.data,le=se.loading,de=se.refetch,ue=($==null?void 0:$.listFiles.pageSize)||0,ce=($==null?void 0:$.listFiles.currentPage)||0,me=($==null?void 0:$.listFiles.totalCount)||0,ve=($==null?void 0:$.listFiles.totalPage)||0,fe=(0,G.useMemo)(function(){return{totalCount:me,currentPage:ce,pageSize:ue,totalPage:ve}},[ce,ue,me,ve]),ge=(0,G.useMemo)(function(){return function(re,ie){oe({variables:(0,c.Z)((0,c.Z)({},re),{},{page:ie})})}},[oe]),xe=(0,G.useMemo)(function(){return{pagination:fe,items:($==null?void 0:$.listFiles.edges.map(function(re){return re.node}))||[],loading:le,refetch:function(ie,ye){return de((0,c.Z)((0,c.Z)({},ie),{},{page:ye}))}}},[le,fe,$==null?void 0:$.listFiles.edges,de]);return[ge,xe]};function he(x,p,ne){return(0,te.RM)(pe,{rootFolder:x,filter:p,orderBy:ne})}}}]);
